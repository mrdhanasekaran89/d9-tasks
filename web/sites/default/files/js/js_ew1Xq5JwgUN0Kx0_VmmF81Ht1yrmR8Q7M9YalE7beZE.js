/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

if (!Element.prototype.matches) {
  Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
};
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

if (typeof Object.assign !== 'function') {
  Object.defineProperty(Object, 'assign', {
    value: function assign(target, varArgs) {
      'use strict';

      if (target === null || target === undefined) {
        throw new TypeError('Cannot convert undefined or null to object');
      }

      var to = Object(target);

      for (var index = 1; index < arguments.length; index++) {
        var nextSource = arguments[index];

        if (nextSource !== null && nextSource !== undefined) {
          for (var nextKey in nextSource) {
            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
              to[nextKey] = nextSource[nextKey];
            }
          }
        }
      }

      return to;
    },
    writable: true,
    configurable: true
  });
};
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
;(function(root, factory) {
	// https://github.com/umdjs/umd/blob/master/returnExports.js
	if (typeof exports == 'object') {
		// For Node.js.
		module.exports = factory(root);
	} else if (typeof define == 'function' && define.amd) {
		// For AMD. Register as an anonymous module.
		define([], factory.bind(root, root));
	} else {
		// For browser globals (not exposing the function separately).
		factory(root);
	}
}(typeof global != 'undefined' ? global : this, function(root) {

	if (root.CSS && root.CSS.escape) {
		return root.CSS.escape;
	}

	// https://drafts.csswg.org/cssom/#serialize-an-identifier
	var cssEscape = function(value) {
		if (arguments.length == 0) {
			throw new TypeError('`CSS.escape` requires an argument.');
		}
		var string = String(value);
		var length = string.length;
		var index = -1;
		var codeUnit;
		var result = '';
		var firstCodeUnit = string.charCodeAt(0);
		while (++index < length) {
			codeUnit = string.charCodeAt(index);
			// Note: theres no need to special-case astral symbols, surrogate
			// pairs, or lone surrogates.

			// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER
			// (U+FFFD).
			if (codeUnit == 0x0000) {
				result += '\uFFFD';
				continue;
			}

			if (
				// If the character is in the range [\1-\1F] (U+0001 to U+001F) or is
				// U+007F, []
				(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||
				// If the character is the first character and is in the range [0-9]
				// (U+0030 to U+0039), []
				(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||
				// If the character is the second character and is in the range [0-9]
				// (U+0030 to U+0039) and the first character is a `-` (U+002D), []
				(
					index == 1 &&
					codeUnit >= 0x0030 && codeUnit <= 0x0039 &&
					firstCodeUnit == 0x002D
				)
			) {
				// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point
				result += '\\' + codeUnit.toString(16) + ' ';
				continue;
			}

			if (
				// If the character is the first character and is a `-` (U+002D), and
				// there is no second character, []
				index == 0 &&
				length == 1 &&
				codeUnit == 0x002D
			) {
				result += '\\' + string.charAt(index);
				continue;
			}

			// If the character is not handled by one of the above rules and is
			// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or
			// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to
			// U+005A), or [a-z] (U+0061 to U+007A), []
			if (
				codeUnit >= 0x0080 ||
				codeUnit == 0x002D ||
				codeUnit == 0x005F ||
				codeUnit >= 0x0030 && codeUnit <= 0x0039 ||
				codeUnit >= 0x0041 && codeUnit <= 0x005A ||
				codeUnit >= 0x0061 && codeUnit <= 0x007A
			) {
				// the character itself
				result += string.charAt(index);
				continue;
			}

			// Otherwise, the escaped character.
			// https://drafts.csswg.org/cssom/#escape-a-character
			result += '\\' + string.charAt(index);

		}
		return result;
	};

	if (!root.CSS) {
		root.CSS = {};
	}

	root.CSS.escape = cssEscape;
	return cssEscape;

}));
;
!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(n="undefined"!=typeof globalThis?globalThis:n||self,function(){var t=n._,e=n._=r();e.noConflict=function(){return n._=t,e}}())}(this,(function(){
//     Underscore.js 1.13.3
//     https://underscorejs.org
//     (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
var n="1.13.3",r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},t=Array.prototype,e=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,o=t.push,i=t.slice,a=e.toString,f=e.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,l="undefined"!=typeof DataView,s=Array.isArray,p=Object.keys,v=Object.create,h=c&&ArrayBuffer.isView,y=isNaN,d=isFinite,g=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],m=Math.pow(2,53)-1;function j(n,r){return r=null==r?n.length-1:+r,function(){for(var t=Math.max(arguments.length-r,0),e=Array(t),u=0;u<t;u++)e[u]=arguments[u+r];switch(r){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var o=Array(r+1);for(u=0;u<r;u++)o[u]=arguments[u];return o[r]=e,n.apply(this,o)}}function _(n){var r=typeof n;return"function"===r||"object"===r&&!!n}function w(n){return void 0===n}function A(n){return!0===n||!1===n||"[object Boolean]"===a.call(n)}function x(n){var r="[object "+n+"]";return function(n){return a.call(n)===r}}var S=x("String"),O=x("Number"),M=x("Date"),E=x("RegExp"),B=x("Error"),N=x("Symbol"),I=x("ArrayBuffer"),T=x("Function"),k=r.document&&r.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof k&&(T=function(n){return"function"==typeof n||!1});var D=T,R=x("Object"),F=l&&R(new DataView(new ArrayBuffer(8))),V="undefined"!=typeof Map&&R(new Map),P=x("DataView");var q=F?function(n){return null!=n&&D(n.getInt8)&&I(n.buffer)}:P,U=s||x("Array");function W(n,r){return null!=n&&f.call(n,r)}var z=x("Arguments");!function(){z(arguments)||(z=function(n){return W(n,"callee")})}();var L=z;function $(n){return O(n)&&y(n)}function C(n){return function(){return n}}function K(n){return function(r){var t=n(r);return"number"==typeof t&&t>=0&&t<=m}}function J(n){return function(r){return null==r?void 0:r[n]}}var G=J("byteLength"),H=K(G),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var X=c?function(n){return h?h(n)&&!q(n):H(n)&&Q.test(a.call(n))}:C(!1),Y=J("length");function Z(n,r){r=function(n){for(var r={},t=n.length,e=0;e<t;++e)r[n[e]]=!0;return{contains:function(n){return!0===r[n]},push:function(t){return r[t]=!0,n.push(t)}}}(r);var t=b.length,u=n.constructor,o=D(u)&&u.prototype||e,i="constructor";for(W(n,i)&&!r.contains(i)&&r.push(i);t--;)(i=b[t])in n&&n[i]!==o[i]&&!r.contains(i)&&r.push(i)}function nn(n){if(!_(n))return[];if(p)return p(n);var r=[];for(var t in n)W(n,t)&&r.push(t);return g&&Z(n,r),r}function rn(n,r){var t=nn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function tn(n){return n instanceof tn?n:this instanceof tn?void(this._wrapped=n):new tn(n)}function en(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,G(n))}tn.VERSION=n,tn.prototype.value=function(){return this._wrapped},tn.prototype.valueOf=tn.prototype.toJSON=tn.prototype.value,tn.prototype.toString=function(){return String(this._wrapped)};var un="[object DataView]";function on(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var o=typeof n;return("function"===o||"object"===o||"object"==typeof r)&&function n(r,t,e,o){r instanceof tn&&(r=r._wrapped);t instanceof tn&&(t=t._wrapped);var i=a.call(r);if(i!==a.call(t))return!1;if(F&&"[object Object]"==i&&q(r)){if(!q(t))return!1;i=un}switch(i){case"[object RegExp]":case"[object String]":return""+r==""+t;case"[object Number]":return+r!=+r?+t!=+t:0==+r?1/+r==1/t:+r==+t;case"[object Date]":case"[object Boolean]":return+r==+t;case"[object Symbol]":return u.valueOf.call(r)===u.valueOf.call(t);case"[object ArrayBuffer]":case un:return n(en(r),en(t),e,o)}var f="[object Array]"===i;if(!f&&X(r)){if(G(r)!==G(t))return!1;if(r.buffer===t.buffer&&r.byteOffset===t.byteOffset)return!0;f=!0}if(!f){if("object"!=typeof r||"object"!=typeof t)return!1;var c=r.constructor,l=t.constructor;if(c!==l&&!(D(c)&&c instanceof c&&D(l)&&l instanceof l)&&"constructor"in r&&"constructor"in t)return!1}o=o||[];var s=(e=e||[]).length;for(;s--;)if(e[s]===r)return o[s]===t;if(e.push(r),o.push(t),f){if((s=r.length)!==t.length)return!1;for(;s--;)if(!on(r[s],t[s],e,o))return!1}else{var p,v=nn(r);if(s=v.length,nn(t).length!==s)return!1;for(;s--;)if(p=v[s],!W(t,p)||!on(r[p],t[p],e,o))return!1}return e.pop(),o.pop(),!0}(n,r,t,e)}function an(n){if(!_(n))return[];var r=[];for(var t in n)r.push(t);return g&&Z(n,r),r}function fn(n){var r=Y(n);return function(t){if(null==t)return!1;var e=an(t);if(Y(e))return!1;for(var u=0;u<r;u++)if(!D(t[n[u]]))return!1;return n!==hn||!D(t[cn])}}var cn="forEach",ln="has",sn=["clear","delete"],pn=["get",ln,"set"],vn=sn.concat(cn,pn),hn=sn.concat(pn),yn=["add"].concat(sn,cn,ln),dn=V?fn(vn):x("Map"),gn=V?fn(hn):x("WeakMap"),bn=V?fn(yn):x("Set"),mn=x("WeakSet");function jn(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function _n(n){for(var r={},t=nn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function wn(n){var r=[];for(var t in n)D(n[t])&&r.push(t);return r.sort()}function An(n,r){return function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var u=1;u<e;u++)for(var o=arguments[u],i=n(o),a=i.length,f=0;f<a;f++){var c=i[f];r&&void 0!==t[c]||(t[c]=o[c])}return t}}var xn=An(an),Sn=An(nn),On=An(an,!0);function Mn(n){if(!_(n))return{};if(v)return v(n);var r=function(){};r.prototype=n;var t=new r;return r.prototype=null,t}function En(n){return U(n)?n:[n]}function Bn(n){return tn.toPath(n)}function Nn(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}function In(n,r,t){var e=Nn(n,Bn(r));return w(e)?t:e}function Tn(n){return n}function kn(n){return n=Sn({},n),function(r){return rn(r,n)}}function Dn(n){return n=Bn(n),function(r){return Nn(r,n)}}function Rn(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o)}}return function(){return n.apply(r,arguments)}}function Fn(n,r,t){return null==n?Tn:D(n)?Rn(n,r,t):_(n)&&!U(n)?kn(n):Dn(n)}function Vn(n,r){return Fn(n,r,1/0)}function Pn(n,r,t){return tn.iteratee!==Vn?tn.iteratee(n,r):Fn(n,r,t)}function qn(){}function Un(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}tn.toPath=En,tn.iteratee=Vn;var Wn=Date.now||function(){return(new Date).getTime()};function zn(n){var r=function(r){return n[r]},t="(?:"+nn(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}}var Ln={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$n=zn(Ln),Cn=zn(_n(Ln)),Kn=tn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Jn=/(.)^/,Gn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Hn=/\\|'|\r|\n|\u2028|\u2029/g;function Qn(n){return"\\"+Gn[n]}var Xn=/^\s*(\w|\$)+\s*$/;var Yn=0;function Zn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=Mn(n.prototype),i=n.apply(o,u);return _(i)?i:o}var nr=j((function(n,r){var t=nr.placeholder,e=function(){for(var u=0,o=r.length,i=Array(o),a=0;a<o;a++)i[a]=r[a]===t?arguments[u++]:r[a];for(;u<arguments.length;)i.push(arguments[u++]);return Zn(n,e,this,this,i)};return e}));nr.placeholder=tn;var rr=j((function(n,r,t){if(!D(n))throw new TypeError("Bind must be called on a function");var e=j((function(u){return Zn(n,e,r,this,t.concat(u))}));return e})),tr=K(Y);function er(n,r,t,e){if(e=e||[],r||0===r){if(r<=0)return e.concat(n)}else r=1/0;for(var u=e.length,o=0,i=Y(n);o<i;o++){var a=n[o];if(tr(a)&&(U(a)||L(a)))if(r>1)er(a,r-1,t,e),u=e.length;else for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else t||(e[u++]=a)}return e}var ur=j((function(n,r){var t=(r=er(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=rr(n[e],n)}return n}));var or=j((function(n,r,t){return setTimeout((function(){return n.apply(null,t)}),r)})),ir=nr(or,tn,1);function ar(n){return function(){return!n.apply(this,arguments)}}function fr(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var cr=nr(fr,2);function lr(n,r,t){r=Pn(r,t);for(var e,u=nn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function sr(n){return function(r,t,e){t=Pn(t,e);for(var u=Y(r),o=n>0?0:u-1;o>=0&&o<u;o+=n)if(t(r[o],o,r))return o;return-1}}var pr=sr(1),vr=sr(-1);function hr(n,r,t,e){for(var u=(t=Pn(t,e,1))(r),o=0,i=Y(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function yr(n,r,t){return function(e,u,o){var a=0,f=Y(e);if("number"==typeof o)n>0?a=o>=0?o:Math.max(o+f,a):f=o>=0?Math.min(o+1,f):o+f+1;else if(t&&o&&f)return e[o=t(e,u)]===u?o:-1;if(u!=u)return(o=r(i.call(e,a,f),$))>=0?o+a:-1;for(o=n>0?a:f-1;o>=0&&o<f;o+=n)if(e[o]===u)return o;return-1}}var dr=yr(1,pr,hr),gr=yr(-1,vr);function br(n,r,t){var e=(tr(n)?pr:lr)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function mr(n,r,t){var e,u;if(r=Rn(r,t),tr(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var o=nn(n);for(e=0,u=o.length;e<u;e++)r(n[o[e]],o[e],n)}return n}function jr(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function _r(n){var r=function(r,t,e,u){var o=!tr(r)&&nn(r),i=(o||r).length,a=n>0?0:i-1;for(u||(e=r[o?o[a]:a],a+=n);a>=0&&a<i;a+=n){var f=o?o[a]:a;e=t(e,r[f],f,r)}return e};return function(n,t,e,u){var o=arguments.length>=3;return r(n,Rn(t,u,4),e,o)}}var wr=_r(1),Ar=_r(-1);function xr(n,r,t){var e=[];return r=Pn(r,t),mr(n,(function(n,t,u){r(n,t,u)&&e.push(n)})),e}function Sr(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function Or(n,r,t){r=Pn(r,t);for(var e=!tr(n)&&nn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function Mr(n,r,t,e){return tr(n)||(n=jn(n)),("number"!=typeof t||e)&&(t=0),dr(n,r,t)>=0}var Er=j((function(n,r,t){var e,u;return D(r)?u=r:(r=Bn(r),e=r.slice(0,-1),r=r[r.length-1]),jr(n,(function(n){var o=u;if(!o){if(e&&e.length&&(n=Nn(n,e)),null==n)return;o=n[r]}return null==o?o:o.apply(n,t)}))}));function Br(n,r){return jr(n,Dn(r))}function Nr(n,r,t){var e,u,o=-1/0,i=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e>o&&(o=e);else r=Pn(r,t),mr(n,(function(n,t,e){((u=r(n,t,e))>i||u===-1/0&&o===-1/0)&&(o=n,i=u)}));return o}var Ir=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Tr(n){return n?U(n)?i.call(n):S(n)?n.match(Ir):tr(n)?jr(n,Tn):jn(n):[]}function kr(n,r,t){if(null==r||t)return tr(n)||(n=jn(n)),n[Un(n.length-1)];var e=Tr(n),u=Y(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=Un(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function Dr(n,r){return function(t,e,u){var o=r?[[],[]]:{};return e=Pn(e,u),mr(t,(function(r,u){var i=e(r,u,t);n(o,r,i)})),o}}var Rr=Dr((function(n,r,t){W(n,t)?n[t].push(r):n[t]=[r]})),Fr=Dr((function(n,r,t){n[t]=r})),Vr=Dr((function(n,r,t){W(n,t)?n[t]++:n[t]=1})),Pr=Dr((function(n,r,t){n[t?0:1].push(r)}),!0);function qr(n,r,t){return r in t}var Ur=j((function(n,r){var t={},e=r[0];if(null==n)return t;D(e)?(r.length>1&&(e=Rn(e,r[1])),r=an(n)):(e=qr,r=er(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t})),Wr=j((function(n,r){var t,e=r[0];return D(e)?(e=ar(e),r.length>1&&(t=r[1])):(r=jr(er(r,!1,!1),String),e=function(n,t){return!Mr(r,t)}),Ur(n,e,t)}));function zr(n,r,t){return i.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function Lr(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[0]:zr(n,n.length-r)}function $r(n,r,t){return i.call(n,null==r||t?1:r)}var Cr=j((function(n,r){return r=er(r,!0,!0),xr(n,(function(n){return!Mr(r,n)}))})),Kr=j((function(n,r){return Cr(n,r)}));function Jr(n,r,t,e){A(r)||(e=t,t=r,r=!1),null!=t&&(t=Pn(t,e));for(var u=[],o=[],i=0,a=Y(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?Mr(o,c)||(o.push(c),u.push(f)):Mr(u,f)||u.push(f)}return u}var Gr=j((function(n){return Jr(er(n,!0,!0))}));function Hr(n){for(var r=n&&Nr(n,Y).length||0,t=Array(r),e=0;e<r;e++)t[e]=Br(n,e);return t}var Qr=j(Hr);function Xr(n,r){return n._chain?tn(r).chain():r}function Yr(n){return mr(wn(n),(function(r){var t=tn[r]=n[r];tn.prototype[r]=function(){var n=[this._wrapped];return o.apply(n,arguments),Xr(this,t.apply(tn,n))}})),tn}mr(["pop","push","reverse","shift","sort","splice","unshift"],(function(n){var r=t[n];tn.prototype[n]=function(){var t=this._wrapped;return null!=t&&(r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0]),Xr(this,t)}})),mr(["concat","join","slice"],(function(n){var r=t[n];tn.prototype[n]=function(){var n=this._wrapped;return null!=n&&(n=r.apply(n,arguments)),Xr(this,n)}}));var Zr=Yr({__proto__:null,VERSION:n,restArguments:j,isObject:_,isNull:function(n){return null===n},isUndefined:w,isBoolean:A,isElement:function(n){return!(!n||1!==n.nodeType)},isString:S,isNumber:O,isDate:M,isRegExp:E,isError:B,isSymbol:N,isArrayBuffer:I,isDataView:q,isArray:U,isFunction:D,isArguments:L,isFinite:function(n){return!N(n)&&d(n)&&!isNaN(parseFloat(n))},isNaN:$,isTypedArray:X,isEmpty:function(n){if(null==n)return!0;var r=Y(n);return"number"==typeof r&&(U(n)||S(n)||L(n))?0===r:0===Y(nn(n))},isMatch:rn,isEqual:function(n,r){return on(n,r)},isMap:dn,isWeakMap:gn,isSet:bn,isWeakSet:mn,keys:nn,allKeys:an,values:jn,pairs:function(n){for(var r=nn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:_n,functions:wn,methods:wn,extend:xn,extendOwn:Sn,assign:Sn,defaults:On,create:function(n,r){var t=Mn(n);return r&&Sn(t,r),t},clone:function(n){return _(n)?U(n)?n.slice():xn({},n):n},tap:function(n,r){return r(n),n},get:In,has:function(n,r){for(var t=(r=Bn(r)).length,e=0;e<t;e++){var u=r[e];if(!W(n,u))return!1;n=n[u]}return!!t},mapObject:function(n,r,t){r=Pn(r,t);for(var e=nn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},identity:Tn,constant:C,noop:qn,toPath:En,property:Dn,propertyOf:function(n){return null==n?qn:function(r){return In(n,r)}},matcher:kn,matches:kn,times:function(n,r,t){var e=Array(Math.max(0,n));r=Rn(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:Un,now:Wn,escape:$n,unescape:Cn,templateSettings:Kn,template:function(n,r,t){!r&&t&&(r=t),r=On({},r,tn.templateSettings);var e=RegExp([(r.escape||Jn).source,(r.interpolate||Jn).source,(r.evaluate||Jn).source].join("|")+"|$","g"),u=0,o="__p+='";n.replace(e,(function(r,t,e,i,a){return o+=n.slice(u,a).replace(Hn,Qn),u=a+r.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?o+="'+\n((__t=("+e+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),r})),o+="';\n";var i,a=r.variable;if(a){if(!Xn.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(a,"_",o)}catch(n){throw n.source=o,n}var f=function(n){return i.call(this,n,tn)};return f.source="function("+a+"){\n"+o+"}",f},result:function(n,r,t){var e=(r=Bn(r)).length;if(!e)return D(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=D(o)?o.call(n):o}return n},uniqueId:function(n){var r=++Yn+"";return n?n+r:r},chain:function(n){var r=tn(n);return r._chain=!0,r},iteratee:Vn,partial:nr,bind:rr,bindAll:ur,memoize:function(n,r){var t=function(e){var u=t.cache,o=""+(r?r.apply(this,arguments):e);return W(u,o)||(u[o]=n.apply(this,arguments)),u[o]};return t.cache={},t},delay:or,defer:ir,throttle:function(n,r,t){var e,u,o,i,a=0;t||(t={});var f=function(){a=!1===t.leading?0:Wn(),e=null,i=n.apply(u,o),e||(u=o=null)},c=function(){var c=Wn();a||!1!==t.leading||(a=c);var l=r-(c-a);return u=this,o=arguments,l<=0||l>r?(e&&(clearTimeout(e),e=null),a=c,i=n.apply(u,o),e||(u=o=null)):e||!1===t.trailing||(e=setTimeout(f,l)),i};return c.cancel=function(){clearTimeout(e),a=0,e=u=o=null},c},debounce:function(n,r,t){var e,u,o,i,a,f=function(){var c=Wn()-u;r>c?e=setTimeout(f,r-c):(e=null,t||(i=n.apply(a,o)),e||(o=a=null))},c=j((function(c){return a=this,o=c,u=Wn(),e||(e=setTimeout(f,r),t&&(i=n.apply(a,o))),i}));return c.cancel=function(){clearTimeout(e),e=o=a=null},c},wrap:function(n,r){return nr(r,n)},negate:ar,compose:function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:fr,once:cr,findKey:lr,findIndex:pr,findLastIndex:vr,sortedIndex:hr,indexOf:dr,lastIndexOf:gr,find:br,detect:br,findWhere:function(n,r){return br(n,kn(r))},each:mr,forEach:mr,map:jr,collect:jr,reduce:wr,foldl:wr,inject:wr,reduceRight:Ar,foldr:Ar,filter:xr,select:xr,reject:function(n,r,t){return xr(n,ar(Pn(r)),t)},every:Sr,all:Sr,some:Or,any:Or,contains:Mr,includes:Mr,include:Mr,invoke:Er,pluck:Br,where:function(n,r){return xr(n,kn(r))},max:Nr,min:function(n,r,t){var e,u,o=1/0,i=1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=tr(n)?n:jn(n)).length;a<f;a++)null!=(e=n[a])&&e<o&&(o=e);else r=Pn(r,t),mr(n,(function(n,t,e){((u=r(n,t,e))<i||u===1/0&&o===1/0)&&(o=n,i=u)}));return o},shuffle:function(n){return kr(n,1/0)},sample:kr,sortBy:function(n,r,t){var e=0;return r=Pn(r,t),Br(jr(n,(function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}})).sort((function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index})),"value")},groupBy:Rr,indexBy:Fr,countBy:Vr,partition:Pr,toArray:Tr,size:function(n){return null==n?0:tr(n)?n.length:nn(n).length},pick:Ur,omit:Wr,first:Lr,head:Lr,take:Lr,initial:zr,last:function(n,r,t){return null==n||n.length<1?null==r||t?void 0:[]:null==r||t?n[n.length-1]:$r(n,Math.max(0,n.length-r))},rest:$r,tail:$r,drop:$r,compact:function(n){return xr(n,Boolean)},flatten:function(n,r){return er(n,r,!1)},without:Kr,uniq:Jr,unique:Jr,union:Gr,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=Y(n);e<u;e++){var o=n[e];if(!Mr(r,o)){var i;for(i=1;i<t&&Mr(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:Cr,unzip:Hr,transpose:Hr,zip:Qr,object:function(n,r){for(var t={},e=0,u=Y(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},range:function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(i.call(n,e,e+=r));return t},mixin:Yr,default:tn});return Zr._=Zr,Zr}));;
/*! @drupal/once - v1.0.1 - 2021-06-12 */
var once=function(){"use strict";var n=/[\11\12\14\15\40]+/,e="data-once",t=document;function r(n,t,r){return n[t+"Attribute"](e,r)}function o(e){if("string"!=typeof e)throw new TypeError("once ID must be a string");if(""===e||n.test(e))throw new RangeError("once ID must not be empty or contain spaces");return'[data-once~="'+e+'"]'}function u(n){if(!(n instanceof Element))throw new TypeError("The element must be an instance of Element");return!0}function i(n,e){void 0===e&&(e=t);var r=n;if(null===n)r=[];else{if(!n)throw new TypeError("Selector must not be empty");"string"!=typeof n||e!==t&&!u(e)?n instanceof Element&&(r=[n]):r=e.querySelectorAll(n)}return Array.prototype.slice.call(r)}function c(n,e,t){return e.filter((function(e){var r=u(e)&&e.matches(n);return r&&t&&t(e),r}))}function f(e,t){var o=t.add,u=t.remove,i=[];r(e,"has")&&r(e,"get").trim().split(n).forEach((function(n){i.indexOf(n)<0&&n!==u&&i.push(n)})),o&&i.push(o);var c=i.join(" ");r(e,""===c?"remove":"set",c)}function a(n,e,t){return c(":not("+o(n)+")",i(e,t),(function(e){return f(e,{add:n})}))}return a.remove=function(n,e,t){return c(o(n),i(e,t),(function(e){return f(e,{remove:n})}))},a.filter=function(n,e,t){return c(o(n),i(e,t))},a.find=function(n,e){return i(n?o(n):"[data-once]",e)},a}();

;
/*!
 * jQuery Once v2.2.3 - http://github.com/robloach/jquery-once
 * @license MIT, GPL-2.0
 *   http://opensource.org/licenses/MIT
 *   http://opensource.org/licenses/GPL-2.0
 */
(function(e){"use strict";if(typeof exports==="object"&&typeof exports.nodeName!=="string"){e(require("jquery"))}else if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(t){"use strict";var r=function(e){e=e||"once";if(typeof e!=="string"){throw new TypeError("The jQuery Once id parameter must be a string")}return e};t.fn.once=function(e){var n="jquery-once-"+r(e);return this.filter(function(){return t(this).data(n)!==true}).data(n,true)};t.fn.removeOnce=function(e){return this.findOnce(e).removeData("jquery-once-"+r(e))};t.fn.findOnce=function(e){var n="jquery-once-"+r(e);return this.filter(function(){return t(this).data(n)===true})}});

(function(r){var n=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(t,e,i){n.Backbone=r(n,i,t,e)})}else if(typeof exports!=="undefined"){var t=require("underscore"),e;try{e=require("jquery")}catch(t){}r(n,exports,t,e)}else{n.Backbone=r(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}})(function(t,h,x,e){var i=t.Backbone;var a=Array.prototype.slice;h.VERSION="1.4.1";h.$=e;h.noConflict=function(){t.Backbone=i;return this};h.emulateHTTP=false;h.emulateJSON=false;var r=h.Events={};var o=/\s+/;var l;var u=function(t,e,i,r,n){var s=0,a;if(i&&typeof i==="object"){if(r!==void 0&&"context"in n&&n.context===void 0)n.context=r;for(a=x.keys(i);s<a.length;s++){e=u(t,e,a[s],i[a[s]],n)}}else if(i&&o.test(i)){for(a=i.split(o);s<a.length;s++){e=t(e,a[s],r,n)}}else{e=t(e,i,r,n)}return e};r.on=function(t,e,i){this._events=u(n,this._events||{},t,e,{context:i,ctx:this,listening:l});if(l){var r=this._listeners||(this._listeners={});r[l.id]=l;l.interop=false}return this};r.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=x.uniqueId("l"));var n=this._listeningTo||(this._listeningTo={});var s=l=n[r];if(!s){this._listenId||(this._listenId=x.uniqueId("l"));s=l=n[r]=new p(this,t)}var a=c(t,e,i,this);l=void 0;if(a)throw a;if(s.interop)s.on(e,i);return this};var n=function(t,e,i,r){if(i){var n=t[e]||(t[e]=[]);var s=r.context,a=r.ctx,o=r.listening;if(o)o.count++;n.push({callback:i,context:s,ctx:s||a,listening:o})}return t};var c=function(t,e,i,r){try{t.on(e,i,r)}catch(t){return t}};r.off=function(t,e,i){if(!this._events)return this;this._events=u(s,this._events,t,e,{context:i,listeners:this._listeners});return this};r.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;var n=t?[t._listenId]:x.keys(r);for(var s=0;s<n.length;s++){var a=r[n[s]];if(!a)break;a.obj.off(e,i,this);if(a.interop)a.off(e,i)}if(x.isEmpty(r))this._listeningTo=void 0;return this};var s=function(t,e,i,r){if(!t)return;var n=r.context,s=r.listeners;var a=0,o;if(!e&&!n&&!i){for(o=x.keys(s);a<o.length;a++){s[o[a]].cleanup()}return}o=e?[e]:x.keys(t);for(;a<o.length;a++){e=o[a];var h=t[e];if(!h)break;var l=[];for(var u=0;u<h.length;u++){var c=h[u];if(i&&i!==c.callback&&i!==c.callback._callback||n&&n!==c.context){l.push(c)}else{var f=c.listening;if(f)f.off(e,i)}}if(l.length){t[e]=l}else{delete t[e]}}return t};r.once=function(t,e,i){var r=u(f,{},t,e,this.off.bind(this));if(typeof t==="string"&&i==null)e=void 0;return this.on(r,e,i)};r.listenToOnce=function(t,e,i){var r=u(f,{},e,i,this.stopListening.bind(this,t));return this.listenTo(t,r)};var f=function(t,e,i,r){if(i){var n=t[e]=x.once(function(){r(e,n);i.apply(this,arguments)});n._callback=i}return t};r.trigger=function(t){if(!this._events)return this;var e=Math.max(0,arguments.length-1);var i=Array(e);for(var r=0;r<e;r++)i[r]=arguments[r+1];u(d,this._events,t,void 0,i);return this};var d=function(t,e,i,r){if(t){var n=t[e];var s=t.all;if(n&&s)s=s.slice();if(n)v(n,r);if(s)v(s,[e].concat(r))}return t};var v=function(t,e){var i,r=-1,n=t.length,s=e[0],a=e[1],o=e[2];switch(e.length){case 0:while(++r<n)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<n)(i=t[r]).callback.call(i.ctx,s);return;case 2:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a);return;case 3:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a,o);return;default:while(++r<n)(i=t[r]).callback.apply(i.ctx,e);return}};var p=function(t,e){this.id=t._listenId;this.listener=t;this.obj=e;this.interop=true;this.count=0;this._events=void 0};p.prototype.on=r.on;p.prototype.off=function(t,e){var i;if(this.interop){this._events=u(s,this._events,t,e,{context:void 0,listeners:void 0});i=!this._events}else{this.count--;i=this.count===0}if(i)this.cleanup()};p.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId];if(!this.interop)delete this.obj._listeners[this.id]};r.bind=r.on;r.unbind=r.off;x.extend(h,r);var g=h.Model=function(t,e){var i=t||{};e||(e={});this.preinitialize.apply(this,arguments);this.cid=x.uniqueId(this.cidPrefix);this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)i=this.parse(i,e)||{};var r=x.result(this,"defaults");i=x.defaults(x.extend({},r,i),r);this.set(i,e);this.changed={};this.initialize.apply(this,arguments)};x.extend(g.prototype,r,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return x.clone(this.attributes)},sync:function(){return h.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return this.get(t)!=null},matches:function(t){return!!x.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(t==null)return this;var r;if(typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i||(i={});if(!this._validate(r,i))return false;var n=i.unset;var s=i.silent;var a=[];var o=this._changing;this._changing=true;if(!o){this._previousAttributes=x.clone(this.attributes);this.changed={}}var h=this.attributes;var l=this.changed;var u=this._previousAttributes;for(var c in r){e=r[c];if(!x.isEqual(h[c],e))a.push(c);if(!x.isEqual(u[c],e)){l[c]=e}else{delete l[c]}n?delete h[c]:h[c]=e}if(this.idAttribute in r){var f=this.id;this.id=this.get(this.idAttribute);this.trigger("changeId",this,f,i)}if(!s){if(a.length)this._pending=i;for(var d=0;d<a.length;d++){this.trigger("change:"+a[d],this,h[a[d]],i)}}if(o)return this;if(!s){while(this._pending){i=this._pending;this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,x.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!x.isEmpty(this.changed);return x.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?x.clone(this.changed):false;var e=this._changing?this._previousAttributes:this.attributes;var i={};var r;for(var n in t){var s=t[n];if(x.isEqual(e[n],s))continue;i[n]=s;r=true}return r?i:false},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return x.clone(this._previousAttributes)},fetch:function(i){i=x.extend({parse:true},i);var r=this;var n=i.success;i.success=function(t){var e=i.parse?r.parse(t,i):t;if(!r.set(e,i))return false;if(n)n.call(i.context,r,t,i);r.trigger("sync",r,t,i)};G(this,i);return this.sync("read",this,i)},save:function(t,e,i){var r;if(t==null||typeof t==="object"){r=t;i=e}else{(r={})[t]=e}i=x.extend({validate:true,parse:true},i);var n=i.wait;if(r&&!n){if(!this.set(r,i))return false}else if(!this._validate(r,i)){return false}var s=this;var a=i.success;var o=this.attributes;i.success=function(t){s.attributes=o;var e=i.parse?s.parse(t,i):t;if(n)e=x.extend({},r,e);if(e&&!s.set(e,i))return false;if(a)a.call(i.context,s,t,i);s.trigger("sync",s,t,i)};G(this,i);if(r&&n)this.attributes=x.extend({},o,r);var h=this.isNew()?"create":i.patch?"patch":"update";if(h==="patch"&&!i.attrs)i.attrs=r;var l=this.sync(h,this,i);this.attributes=o;return l},destroy:function(e){e=e?x.clone(e):{};var i=this;var r=e.success;var n=e.wait;var s=function(){i.stopListening();i.trigger("destroy",i,i.collection,e)};e.success=function(t){if(n)s();if(r)r.call(e.context,i,t,e);if(!i.isNew())i.trigger("sync",i,t,e)};var t=false;if(this.isNew()){x.defer(e.success)}else{G(this,e);t=this.sync("delete",this,e)}if(!n)s();return t},url:function(){var t=x.result(this,"urlRoot")||x.result(this.collection,"url")||V();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend({},t,{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=x.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,x.extend(e,{validationError:i}));return false}});var m=h.Collection=function(t,e){e||(e={});this.preinitialize.apply(this,arguments);if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,x.extend({silent:true},e))};var w={add:true,remove:true,merge:true};var _={add:true,remove:false};var E=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var r=Array(t.length-i);var n=e.length;var s;for(s=0;s<r.length;s++)r[s]=t[s+i];for(s=0;s<n;s++)t[s+i]=e[s];for(s=0;s<r.length;s++)t[s+n+i]=r[s]};x.extend(m.prototype,r,{model:g,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return h.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:false},e,_))},remove:function(t,e){e=x.extend({},e);var i=!x.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);if(!e.silent&&r.length){e.changes={added:[],merged:[],removed:r};this.trigger("update",this,e)}return i?r[0]:r},set:function(t,e){if(t==null)return;e=x.extend({},w,e);if(e.parse&&!this._isModel(t)){t=this.parse(t,e)||[]}var i=!x.isArray(t);t=i?[t]:t.slice();var r=e.at;if(r!=null)r=+r;if(r>this.length)r=this.length;if(r<0)r+=this.length+1;var n=[];var s=[];var a=[];var o=[];var h={};var l=e.add;var u=e.merge;var c=e.remove;var f=false;var d=this.comparator&&r==null&&e.sort!==false;var v=x.isString(this.comparator)?this.comparator:null;var p,g;for(g=0;g<t.length;g++){p=t[g];var m=this.get(p);if(m){if(u&&p!==m){var _=this._isModel(p)?p.attributes:p;if(e.parse)_=m.parse(_,e);m.set(_,e);a.push(m);if(d&&!f)f=m.hasChanged(v)}if(!h[m.cid]){h[m.cid]=true;n.push(m)}t[g]=m}else if(l){p=t[g]=this._prepareModel(p,e);if(p){s.push(p);this._addReference(p,e);h[p.cid]=true;n.push(p)}}}if(c){for(g=0;g<this.length;g++){p=this.models[g];if(!h[p.cid])o.push(p)}if(o.length)this._removeModels(o,e)}var y=false;var b=!d&&l&&c;if(n.length&&b){y=this.length!==n.length||x.some(this.models,function(t,e){return t!==n[e]});this.models.length=0;E(this.models,n,0);this.length=this.models.length}else if(s.length){if(d)f=true;E(this.models,s,r==null?this.length:r);this.length=this.models.length}if(f)this.sort({silent:true});if(!e.silent){for(g=0;g<s.length;g++){if(r!=null)e.index=r+g;p=s[g];p.trigger("add",p,this,e)}if(f||y)this.trigger("sort",this,e);if(s.length||o.length||a.length){e.changes={added:s,removed:o,merged:a};this.trigger("update",this,e)}}return i?t[0]:t},reset:function(t,e){e=e?x.clone(e):{};for(var i=0;i<this.models.length;i++){this._removeReference(this.models[i],e)}e.previousModels=this.models;this._reset();t=this.add(t,x.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return this.get(t)!=null},at:function(t){if(t<0)t+=this.length;return this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,true)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;if(x.isFunction(e))e=e.bind(this);if(i===1||x.isString(e)){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return this.map(t+"")},fetch:function(i){i=x.extend({parse:true},i);var r=i.success;var n=this;i.success=function(t){var e=i.reset?"reset":"set";n[e](t,i);if(r)r.call(i.context,n,t,i);n.trigger("sync",n,t,i)};G(this,i);return this.sync("read",this,i)},create:function(t,e){e=e?x.clone(e):{};var r=e.wait;t=this._prepareModel(t,e);if(!t)return false;if(!r)this.add(t,e);var n=this;var s=e.success;e.success=function(t,e,i){if(r)n.add(t,i);if(s)s.call(i.context,t,e,i)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new b(this,I)},keys:function(){return new b(this,k)},entries:function(){return new b(this,S)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(this._isModel(t)){if(!t.collection)t.collection=this;return t}e=e?x.clone(e):{};e.collection=this;var i;if(this.model.prototype){i=new this.model(t,e)}else{i=this.model(t,e)}if(!i.validationError)return i;this.trigger("invalid",this,i.validationError,e);return false},_removeModels:function(t,e){var i=[];for(var r=0;r<t.length;r++){var n=this.get(t[r]);if(!n)continue;var s=this.indexOf(n);this.models.splice(s,1);this.length--;delete this._byId[n.cid];var a=this.modelId(n.attributes,n.idAttribute);if(a!=null)delete this._byId[a];if(!e.silent){e.index=s;n.trigger("remove",n,this,e)}i.push(n);this._removeReference(n,e)}return i},_isModel:function(t){return t instanceof g},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes,t.idAttribute);if(i!=null)this._byId[i]=t;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes,t.idAttribute);if(i!=null)delete this._byId[i];if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if(e){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(t==="changeId"){var n=this.modelId(e.previousAttributes(),e.idAttribute);var s=this.modelId(e.attributes,e.idAttribute);if(n!=null)delete this._byId[n];if(s!=null)this._byId[s]=e}}this.trigger.apply(this,arguments)}});var y=typeof Symbol==="function"&&Symbol.iterator;if(y){m.prototype[y]=m.prototype.values}var b=function(t,e){this._collection=t;this._kind=e;this._index=0};var I=1;var k=2;var S=3;if(y){b.prototype[y]=function(){return this}}b.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t=this._collection.at(this._index);this._index++;var e;if(this._kind===I){e=t}else{var i=this._collection.modelId(t.attributes,t.idAttribute);if(this._kind===k){e=i}else{e=[i,t]}}return{value:e,done:false}}this._collection=void 0}return{value:void 0,done:true}};var A=h.View=function(t){this.cid=x.uniqueId("view");this.preinitialize.apply(this,arguments);x.extend(this,x.pick(t,P));this._ensureElement();this.initialize.apply(this,arguments)};var T=/^(\S+)\s*(.*)$/;var P=["model","collection","el","id","attributes","className","tagName","events"];x.extend(A.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(t){this.undelegateEvents();this._setElement(t);this.delegateEvents();return this},_setElement:function(t){this.$el=t instanceof h.$?t:h.$(t);this.el=this.$el[0]},delegateEvents:function(t){t||(t=x.result(this,"events"));if(!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!x.isFunction(i))i=this[i];if(!i)continue;var r=e.match(T);this.delegate(r[1],r[2],i.bind(this))}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i);return this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(!this.el){var t=x.extend({},x.result(this,"attributes"));if(this.id)t.id=x.result(this,"id");if(this.className)t["class"]=x.result(this,"className");this.setElement(this._createElement(x.result(this,"tagName")));this._setAttributes(t)}else{this.setElement(x.result(this,"el"))}},_setAttributes:function(t){this.$el.attr(t)}});var H=function(r,t,n,s){switch(t){case 1:return function(){return r[n](this[s])};case 2:return function(t){return r[n](this[s],t)};case 3:return function(t,e){return r[n](this[s],C(t,this),e)};case 4:return function(t,e,i){return r[n](this[s],C(t,this),e,i)};default:return function(){var t=a.call(arguments);t.unshift(this[s]);return r[n].apply(r,t)}}};var $=function(i,r,t,n){x.each(t,function(t,e){if(r[e])i.prototype[e]=H(r,t,e,n)})};var C=function(e,t){if(x.isFunction(e))return e;if(x.isObject(e)&&!t._isModel(e))return R(e);if(x.isString(e))return function(t){return t.get(e)};return e};var R=function(t){var e=x.matches(t);return function(t){return e(t.attributes)}};var M={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};var N={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};x.each([[m,M,"models"],[g,N,"attributes"]],function(t){var i=t[0],e=t[1],r=t[2];i.mixin=function(t){var e=x.reduce(x.functions(t),function(t,e){t[e]=0;return t},{});$(i,t,e,r)};$(i,x,e,r)});h.sync=function(t,e,r){var i=j[t];x.defaults(r||(r={}),{emulateHTTP:h.emulateHTTP,emulateJSON:h.emulateJSON});var n={type:i,dataType:"json"};if(!r.url){n.url=x.result(e,"url")||V()}if(r.data==null&&e&&(t==="create"||t==="update"||t==="patch")){n.contentType="application/json";n.data=JSON.stringify(r.attrs||e.toJSON(r))}if(r.emulateJSON){n.contentType="application/x-www-form-urlencoded";n.data=n.data?{model:n.data}:{}}if(r.emulateHTTP&&(i==="PUT"||i==="DELETE"||i==="PATCH")){n.type="POST";if(r.emulateJSON)n.data._method=i;var s=r.beforeSend;r.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",i);if(s)return s.apply(this,arguments)}}if(n.type!=="GET"&&!r.emulateJSON){n.processData=false}var a=r.error;r.error=function(t,e,i){r.textStatus=e;r.errorThrown=i;if(a)a.call(r.context,t,e,i)};var o=r.xhr=h.ajax(x.extend(n,r));e.trigger("request",e,o,r);return o};var j={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};h.ajax=function(){return h.$.ajax.apply(h.$,arguments)};var O=h.Router=function(t){t||(t={});this.preinitialize.apply(this,arguments);if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var U=/\((.*?)\)/g;var z=/(\(\?)?:\w+/g;var q=/\*\w+/g;var F=/[\-{}\[\]+?.,\\\^$|#\s]/g;x.extend(O.prototype,r,{preinitialize:function(){},initialize:function(){},route:function(i,r,n){if(!x.isRegExp(i))i=this._routeToRegExp(i);if(x.isFunction(r)){n=r;r=""}if(!n)n=this[r];var s=this;h.history.route(i,function(t){var e=s._extractParameters(i,t);if(s.execute(n,e,r)!==false){s.trigger.apply(s,["route:"+r].concat(e));s.trigger("route",r,e);h.history.trigger("route",s,r,e)}});return this},execute:function(t,e,i){if(t)t.apply(this,e)},navigate:function(t,e){h.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=x.result(this,"routes");var t,e=x.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(F,"\\$&").replace(U,"(?:$1)?").replace(z,function(t,e){return e?t:"([^/?]+)"}).replace(q,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return x.map(i,function(t,e){if(e===i.length-1)return t||null;return t?decodeURIComponent(t):null})}});var B=h.History=function(){this.handlers=[];this.checkUrl=this.checkUrl.bind(this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var J=/^[#\/]|\s+$/g;var L=/^\/+|\/+$/g;var W=/#.*$/;B.started=false;x.extend(B.prototype,r,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname);var e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return t.charAt(0)==="/"?t.slice(1):t},getFragment:function(t){if(t==null){if(this._usePushState||!this._wantsHashChange){t=this.getPath()}else{t=this.getHash()}}return t.replace(J,"")},start:function(t){if(B.started)throw new Error("Backbone.history has already been started");B.started=true;this.options=x.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(L,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";this.location.replace(e+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var i=document.body;var r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open();r.document.close();r.location.hash="#"+this.fragment}var n=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState){n("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){n("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};if(this._usePushState){t("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){t("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);B.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getHash(this.iframe.contentWindow)}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(e){if(!this.matchRoot())return false;e=this.fragment=this.getFragment(e);return x.some(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}})},navigate:function(t,e){if(!B.started)return false;if(!e||e===true)e={trigger:!!e};t=this.getFragment(t||"");var i=this.root;if(t===""||t.charAt(0)==="?"){i=i.slice(0,-1)||"/"}var r=i+t;t=t.replace(W,"");var n=this.decodeFragment(t);if(this.fragment===n)return;this.fragment=n;if(this._usePushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,r)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;if(!e.replace){s.document.open();s.document.close()}this._updateHash(s.location,t,e.replace)}}else{return this.location.assign(r)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});h.history=new B;var D=function(t,e){var i=this;var r;if(t&&x.has(t,"constructor")){r=t.constructor}else{r=function(){return i.apply(this,arguments)}}x.extend(r,i,e);r.prototype=x.create(i.prototype,t);r.prototype.constructor=r;r.__super__=i.prototype;return r};g.extend=m.extend=O.extend=A.extend=B.extend=D;var V=function(){throw new Error('A "url" property or function must be specified')};var G=function(e,i){var r=i.error;i.error=function(t){if(r)r.call(i.context,e,t,i);e.trigger("error",e,t,i)}};return h});

/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function () {
  var settingsElement = document.querySelector('head > script[type="application/json"][data-drupal-selector="drupal-settings-json"], body > script[type="application/json"][data-drupal-selector="drupal-settings-json"]');
  window.drupalSettings = {};

  if (settingsElement !== null) {
    window.drupalSettings = JSON.parse(settingsElement.textContent);
  }
})();;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

window.Drupal = {
  behaviors: {},
  locale: {}
};

(function (Drupal, drupalSettings, drupalTranslations, console, Proxy, Reflect) {
  Drupal.throwError = function (error) {
    setTimeout(function () {
      throw error;
    }, 0);
  };

  Drupal.attachBehaviors = function (context, settings) {
    context = context || document;
    settings = settings || drupalSettings;
    var behaviors = Drupal.behaviors;
    Object.keys(behaviors || {}).forEach(function (i) {
      if (typeof behaviors[i].attach === 'function') {
        try {
          behaviors[i].attach(context, settings);
        } catch (e) {
          Drupal.throwError(e);
        }
      }
    });
  };

  Drupal.detachBehaviors = function (context, settings, trigger) {
    context = context || document;
    settings = settings || drupalSettings;
    trigger = trigger || 'unload';
    var behaviors = Drupal.behaviors;
    Object.keys(behaviors || {}).forEach(function (i) {
      if (typeof behaviors[i].detach === 'function') {
        try {
          behaviors[i].detach(context, settings, trigger);
        } catch (e) {
          Drupal.throwError(e);
        }
      }
    });
  };

  Drupal.checkPlain = function (str) {
    str = str.toString().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
    return str;
  };

  Drupal.formatString = function (str, args) {
    var processedArgs = {};
    Object.keys(args || {}).forEach(function (key) {
      switch (key.charAt(0)) {
        case '@':
          processedArgs[key] = Drupal.checkPlain(args[key]);
          break;

        case '!':
          processedArgs[key] = args[key];
          break;

        default:
          processedArgs[key] = Drupal.theme('placeholder', args[key]);
          break;
      }
    });
    return Drupal.stringReplace(str, processedArgs, null);
  };

  Drupal.stringReplace = function (str, args, keys) {
    if (str.length === 0) {
      return str;
    }

    if (!Array.isArray(keys)) {
      keys = Object.keys(args || {});
      keys.sort(function (a, b) {
        return a.length - b.length;
      });
    }

    if (keys.length === 0) {
      return str;
    }

    var key = keys.pop();
    var fragments = str.split(key);

    if (keys.length) {
      for (var i = 0; i < fragments.length; i++) {
        fragments[i] = Drupal.stringReplace(fragments[i], args, keys.slice(0));
      }
    }

    return fragments.join(args[key]);
  };

  Drupal.t = function (str, args, options) {
    options = options || {};
    options.context = options.context || '';

    if (typeof drupalTranslations !== 'undefined' && drupalTranslations.strings && drupalTranslations.strings[options.context] && drupalTranslations.strings[options.context][str]) {
      str = drupalTranslations.strings[options.context][str];
    }

    if (args) {
      str = Drupal.formatString(str, args);
    }

    return str;
  };

  Drupal.url = function (path) {
    return drupalSettings.path.baseUrl + drupalSettings.path.pathPrefix + path;
  };

  Drupal.url.toAbsolute = function (url) {
    var urlParsingNode = document.createElement('a');

    try {
      url = decodeURIComponent(url);
    } catch (e) {}

    urlParsingNode.setAttribute('href', url);
    return urlParsingNode.cloneNode(false).href;
  };

  Drupal.url.isLocal = function (url) {
    var absoluteUrl = Drupal.url.toAbsolute(url);
    var protocol = window.location.protocol;

    if (protocol === 'http:' && absoluteUrl.indexOf('https:') === 0) {
      protocol = 'https:';
    }

    var baseUrl = "".concat(protocol, "//").concat(window.location.host).concat(drupalSettings.path.baseUrl.slice(0, -1));

    try {
      absoluteUrl = decodeURIComponent(absoluteUrl);
    } catch (e) {}

    try {
      baseUrl = decodeURIComponent(baseUrl);
    } catch (e) {}

    return absoluteUrl === baseUrl || absoluteUrl.indexOf("".concat(baseUrl, "/")) === 0;
  };

  Drupal.formatPlural = function (count, singular, plural, args, options) {
    args = args || {};
    args['@count'] = count;
    var pluralDelimiter = drupalSettings.pluralDelimiter;
    var translations = Drupal.t(singular + pluralDelimiter + plural, args, options).split(pluralDelimiter);
    var index = 0;

    if (typeof drupalTranslations !== 'undefined' && drupalTranslations.pluralFormula) {
      index = count in drupalTranslations.pluralFormula ? drupalTranslations.pluralFormula[count] : drupalTranslations.pluralFormula.default;
    } else if (args['@count'] !== 1) {
      index = 1;
    }

    return translations[index];
  };

  Drupal.encodePath = function (item) {
    return window.encodeURIComponent(item).replace(/%2F/g, '/');
  };

  Drupal.deprecationError = function (_ref) {
    var message = _ref.message;

    if (drupalSettings.suppressDeprecationErrors === false && typeof console !== 'undefined' && console.warn) {
      console.warn("[Deprecation] ".concat(message));
    }
  };

  Drupal.deprecatedProperty = function (_ref2) {
    var target = _ref2.target,
        deprecatedProperty = _ref2.deprecatedProperty,
        message = _ref2.message;

    if (!Proxy || !Reflect) {
      return target;
    }

    return new Proxy(target, {
      get: function get(target, key) {
        if (key === deprecatedProperty) {
          Drupal.deprecationError({
            message: message
          });
        }

        for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
          rest[_key - 2] = arguments[_key];
        }

        return Reflect.get.apply(Reflect, [target, key].concat(rest));
      }
    });
  };

  Drupal.theme = function (func) {
    if (func in Drupal.theme) {
      var _Drupal$theme;

      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }

      return (_Drupal$theme = Drupal.theme)[func].apply(_Drupal$theme, args);
    }
  };

  Drupal.theme.placeholder = function (str) {
    return "<em class=\"placeholder\">".concat(Drupal.checkPlain(str), "</em>");
  };
})(Drupal, window.drupalSettings, window.drupalTranslations, window.console, window.Proxy, window.Reflect);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

if (window.jQuery) {
  jQuery.noConflict();
}

document.documentElement.className += ' js';

(function (Drupal, drupalSettings) {
  var domReady = function domReady(callback) {
    var listener = function listener() {
      callback();
      document.removeEventListener('DOMContentLoaded', listener);
    };

    if (document.readyState !== 'loading') {
      setTimeout(callback, 0);
    } else {
      document.addEventListener('DOMContentLoaded', listener);
    }
  };

  domReady(function () {
    Drupal.attachBehaviors(document, drupalSettings);
  });
})(Drupal, window.drupalSettings);;
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}((function(e){"use strict";return e.ui=e.ui||{},e.ui.version="1.13.1"}));

/*!
 * jQuery UI :data 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.extend(e.expr.pseudos,{data:e.expr.createPseudo?e.expr.createPseudo((function(n){return function(t){return!!e.data(t,n)}})):function(n,t,r){return!!e.data(n,r[3])}})}));

/*!
 * jQuery UI Disable Selection 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.fn.extend({disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(n+".ui-disableSelection",(function(e){e.preventDefault()}))}),enableSelection:function(){return this.off(".ui-disableSelection")}});var n}));

/*!
 * jQuery UI Focusable 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.focusable=function(i,t){var n,s,r,u,a,o=i.nodeName.toLowerCase();return"area"===o?(s=(n=i.parentNode).name,!(!i.href||!s||"map"!==n.nodeName.toLowerCase())&&((r=e("img[usemap='#"+s+"']")).length>0&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(o)?(u=!i.disabled)&&(a=e(i).closest("fieldset")[0])&&(u=!a.disabled):u="a"===o&&i.href||t,u&&e(i).is(":visible")&&function(e){var i=e.css("visibility");for(;"inherit"===i;)i=(e=e.parent()).css("visibility");return"visible"===i}(e(i)))},e.extend(e.expr.pseudos,{focusable:function(i){return e.ui.focusable(i,null!=e.attr(i,"tabindex"))}}),e.ui.focusable}));

!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";return t.fn._form=function(){return"string"==typeof this[0].form?this.closest("form"):t(this[0].form)}}));

!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}));

/*!
 * jQuery UI Support for jQuery core 1.8.x and newer 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";if(e.expr.pseudos||(e.expr.pseudos=e.expr[":"]),e.uniqueSort||(e.uniqueSort=e.unique),!e.escapeSelector){var n=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,t=function(e,n){return n?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e};e.escapeSelector=function(e){return(e+"").replace(n,t)}}e.fn.even&&e.fn.odd||e.fn.extend({even:function(){return this.filter((function(e){return e%2==0}))},odd:function(){return this.filter((function(e){return e%2==1}))}})}));

/*!
 * jQuery UI Keycode 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}));

!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.plugin={add:function(n,i,t){var u,o=e.ui[n].prototype;for(u in t)o.plugins[u]=o.plugins[u]||[],o.plugins[u].push([i,t[u]])},call:function(e,n,i,t){var u,o=e.plugins[n];if(o&&(t||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(u=0;u<o.length;u++)e.options[o[u][0]]&&o[u][1].apply(e.element,i)}}}));

!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.safeActiveElement=function(e){var n;try{n=e.activeElement}catch(t){n=e.body}return n||(n=e.body),n.nodeName||(n=e.body),n}}));

!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}((function(e){"use strict";return e.ui.safeBlur=function(n){n&&"body"!==n.nodeName.toLowerCase()&&e(n).trigger("blur")}}));

/*!
 * jQuery UI Scroll Parent 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";return t.fn.scrollParent=function(e){var s=this.css("position"),n="absolute"===s,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter((function(){var e=t(this);return(!n||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))})).eq(0);return"fixed"!==s&&i.length?i:t(this[0].ownerDocument||document)}}));

/*!
 * jQuery UI Unique ID 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)}((function(i){"use strict";return i.fn.extend({uniqueId:(e=0,function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++e)}))}),removeUniqueId:function(){return this.each((function(){/^ui-id-\d+$/.test(this.id)&&i(this).removeAttr("id")}))}});var e}));

/*!
 * jQuery UI Widget 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";var e,i=0,s=Array.prototype.hasOwnProperty,n=Array.prototype.slice;return t.cleanData=(e=t.cleanData,function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)(s=t._data(n,"events"))&&s.remove&&t(n).triggerHandler("remove");e(i)}),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0],u=l+"-"+(e=e.split(".")[1]);return s||(s=i,i=t.Widget),Array.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr.pseudos[u.toLowerCase()]=function(e){return!!t.data(e,u)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){if(!this||!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),(a=new i).options=t.widget.extend({},a.options),t.each(s,(function(t,e){r[t]="function"==typeof e?function(){function s(){return i.prototype[t].apply(this,arguments)}function n(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,o=this._superApply;return this._super=s,this._superApply=n,t=e.apply(this,arguments),this._super=i,this._superApply=o,t}}():e})),o.prototype=t.widget.extend(a,{widgetEventPrefix:n&&a.widgetEventPrefix||e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:u}),n?(t.each(n._childConstructors,(function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)})),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,o,a=n.call(arguments,1),r=0,l=a.length;r<l;r++)for(i in a[r])o=a[r][i],s.call(a[r],i)&&void 0!==o&&(t.isPlainObject(o)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],o):t.widget.extend({},o):e[i]=o);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,r=n.call(arguments,1),l=this;return a?this.length||"instance"!==o?this.each((function(){var i,n=t.data(this,s);return"instance"===o?(l=n,!1):n?"function"!=typeof n[o]||"_"===o.charAt(0)?t.error("no such method '"+o+"' for "+e+" widget instance"):(i=n[o].apply(n,r))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")})):l=void 0:(r.length&&(o=t.widget.extend.apply(null,[o].concat(r))),this.each((function(){var e=t.data(this,s);e?(e.option(o||{}),e._init&&e._init()):t.data(this,s,new i(o,this))}))),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,(function(t,i){e._removeClass(i,t)})),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],s=this;function n(){var i=[];e.element.each((function(e,n){t.map(s.classesElementLookup,(function(t){return t})).some((function(t){return t.is(n)}))||i.push(n)})),s._on(t(i),{remove:"_untrackClassesElement"})}function o(o,a){var r,l;for(l=0;l<o.length;l++)r=s.classesElementLookup[o[l]]||t(),e.add?(n(),r=t(t.uniqueSort(r.get().concat(e.element.get())))):r=t(r.not(e.element).get()),s.classesElementLookup[o[l]]=r,i.push(o[l]),a&&e.classes[o[l]]&&i.push(e.classes[o[l]])}return(e=t.extend({element:this.element,classes:this.options.classes||{}},e)).keys&&o(e.keys.match(/\S+/g)||[],!0),e.extra&&o(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,(function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})),this._off(t(e.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,(function(s,a){function r(){if(e||!0!==o.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?n.on(u,h,r):i.on(u,r)}))},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout((function(){return("string"==typeof t?i[t]:t).apply(i,arguments)}),e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!("function"==typeof a&&!1===a.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},(function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){var a;"string"==typeof n&&(n={effect:n});var r=n?!0===n||"number"==typeof n?i:n.effect||i:e;"number"==typeof(n=n||{})?n={duration:n}:!0===n&&(n={}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue((function(i){t(this)[e](),o&&o.call(s[0]),i()}))}})),t.widget}));

/*!
 * jQuery UI Autocomplete 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./menu","../keycode","../position","../safe-active-element","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.autocomplete",{version:"1.13.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,liveRegionTimer:null,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,u="input"===n;this.isMultiLine=o||!u&&this._isContentEditable(this.element),this.valueMethod=this.element[o||u?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case o.UP:t=!0,this._keyEvent("previous",n);break;case o.DOWN:t=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){if(s)return s=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().attr({unselectable:"on"}).menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault()},menufocus:function(t,i){var s,n;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),(s=i.item.attr("aria-label")||n.value)&&String.prototype.trim.call(s).length&&(clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(s))}),100))},menuselect:function(t,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay((function(){this.previous=n,this.selectedItem=s}))),!1!==this._trigger("select",t,{item:s})&&this._value(s.value),this.term=this._value(),this.close(t),this.selectedItem=s}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||e.contains(i,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;Array.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||i||s)||(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=++this.requestIndex;return function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")}.bind(this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})}))},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,(function(e,i){s._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<div>").text(i.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return s.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,clearTimeout(this.liveRegionTimer),this.liveRegionTimer=this._delay((function(){this.liveRegion.html(e("<div>").text(i))}),100))}}),e.ui.autocomplete}));

/*!
 * jQuery UI Labels 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./version"],t):t(jQuery)}((function(t){"use strict";return t.fn.labels=function(){var e,s,i,n,a;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(n=this.eq(0).parents("label"),(i=this.attr("id"))&&(a=(e=this.eq(0).parents().last()).add(e.length?e.siblings():this.siblings()),s="label[for='"+t.escapeSelector(i)+"']",n=n.add(a.find(s).addBack(s))),this.pushStack(n)):this.pushStack([])}}));

/*!
 * jQuery UI Menu 1.13.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","../keycode","../position","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}((function(e){"use strict";return e.widget("ui.menu",{version:"1.13.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.lastMousePosition={x:null,y:null},this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault(),this._activateItem(e)},"click .ui-menu-item":function(t){var i=e(t.target),s=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":"_activateItem","mousemove .ui-menu-item":"_activateItem",mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this._menuItems().first();t||this.focus(e,i)},blur:function(t){this._delay((function(){!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]))&&this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e,!0),this.mouseHandled=!1}})},_activateItem:function(t){if(!this.previousFilter&&(t.clientX!==this.lastMousePosition.x||t.clientY!==this.lastMousePosition.y)){this.lastMousePosition={x:t.clientX,y:t.clientY};var i=e(t.target).closest(".ui-menu-item"),s=e(t.currentTarget);i[0]===s[0]&&(s.is(".ui-state-active")||(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,s)))}},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),t.children().each((function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()}))},_keydown:function(t){var i,s,n,a,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,s=this.previousFilter||"",a=!1,n=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),(i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i,s,n,a=this,u=this.options.icons.submenu,o=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=o.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev(),s=e("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+u),i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))})),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),(t=o.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function(){var t=e(this);a._isDivider(t)&&a._addClass(t,"ui-menu-divider","ui-widget-content")})),n=(s=t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(s,"ui-menu-item")._addClass(n,"ui-menu-item-wrapper"),t.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var i,s,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,u,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),u=this.activeMenu.height(),o=t.outerHeight(),n<0?this.activeMenu.scrollTop(a+n):n+o>u&&this.activeMenu.scrollTop(a+n-u+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s}),i?0:this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this._menuItems(this.active.children(".ui-menu")).first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_menuItems:function(e){return(e||this.element).find(this.options.items).filter(".ui-menu-item")},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").last():this.active[e+"All"](".ui-menu-item").first()),s&&s.length&&this.active||(s=this._menuItems(this.activeMenu)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;this.active?this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.nextAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-s-n<0})),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu)[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var i,s,n;this.active?this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.innerHeight(),0===e.fn.jquery.indexOf("3.2.")&&(n+=this.element[0].offsetHeight-this.element.outerHeight()),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-s+n>0})),this.focus(t,i)):this.focus(t,this._menuItems(this.activeMenu).first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function(){return s.test(String.prototype.trim.call(e(this).children(".ui-menu-item-wrapper").text()))}))}})}));

/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, drupalSettings, _, Backbone, JSON, storage) {
  var options = $.extend(drupalSettings.contextual, {
    strings: {
      open: Drupal.t('Open'),
      close: Drupal.t('Close')
    }
  });
  var cachedPermissionsHash = storage.getItem('Drupal.contextual.permissionsHash');
  var permissionsHash = drupalSettings.user.permissionsHash;

  if (cachedPermissionsHash !== permissionsHash) {
    if (typeof permissionsHash === 'string') {
      _.chain(storage).keys().each(function (key) {
        if (key.substring(0, 18) === 'Drupal.contextual.') {
          storage.removeItem(key);
        }
      });
    }

    storage.setItem('Drupal.contextual.permissionsHash', permissionsHash);
  }

  function adjustIfNestedAndOverlapping($contextual) {
    var $contextuals = $contextual.parents('.contextual-region').eq(-1).find('.contextual');

    if ($contextuals.length <= 1) {
      return;
    }

    var firstTop = $contextuals.eq(0).offset().top;
    var secondTop = $contextuals.eq(1).offset().top;

    if (firstTop === secondTop) {
      var $nestedContextual = $contextuals.eq(1);
      var height = 0;
      var $trigger = $nestedContextual.find('.trigger');
      $trigger.removeClass('visually-hidden');
      height = $nestedContextual.height();
      $trigger.addClass('visually-hidden');
      $nestedContextual.css({
        top: $nestedContextual.position().top + height
      });
    }
  }

  function initContextual($contextual, html) {
    var $region = $contextual.closest('.contextual-region');
    var contextual = Drupal.contextual;
    $contextual.html(html).addClass('contextual').prepend(Drupal.theme('contextualTrigger'));
    var destination = "destination=".concat(Drupal.encodePath(Drupal.url(drupalSettings.path.currentPath)));
    $contextual.find('.contextual-links a').each(function () {
      var url = this.getAttribute('href');
      var glue = url.indexOf('?') === -1 ? '?' : '&';
      this.setAttribute('href', url + glue + destination);
    });
    var model = new contextual.StateModel({
      title: $region.find('h2').eq(0).text().trim()
    });
    var viewOptions = $.extend({
      el: $contextual,
      model: model
    }, options);
    contextual.views.push({
      visual: new contextual.VisualView(viewOptions),
      aural: new contextual.AuralView(viewOptions),
      keyboard: new contextual.KeyboardView(viewOptions)
    });
    contextual.regionViews.push(new contextual.RegionView($.extend({
      el: $region,
      model: model
    }, options)));
    contextual.collection.add(model);
    $(document).trigger('drupalContextualLinkAdded', {
      $el: $contextual,
      $region: $region,
      model: model
    });
    adjustIfNestedAndOverlapping($contextual);
  }

  Drupal.behaviors.contextual = {
    attach: function attach(context) {
      var $context = $(context);
      var $placeholders = $(once('contextual-render', '[data-contextual-id]', context));

      if ($placeholders.length === 0) {
        return;
      }

      var ids = [];
      $placeholders.each(function () {
        ids.push({
          id: $(this).attr('data-contextual-id'),
          token: $(this).attr('data-contextual-token')
        });
      });
      var uncachedIDs = [];
      var uncachedTokens = [];
      ids.forEach(function (contextualID) {
        var html = storage.getItem("Drupal.contextual.".concat(contextualID.id));

        if (html && html.length) {
          window.setTimeout(function () {
            initContextual($context.find("[data-contextual-id=\"".concat(contextualID.id, "\"]:empty")).eq(0), html);
          });
          return;
        }

        uncachedIDs.push(contextualID.id);
        uncachedTokens.push(contextualID.token);
      });

      if (uncachedIDs.length > 0) {
        $.ajax({
          url: Drupal.url('contextual/render'),
          type: 'POST',
          data: {
            'ids[]': uncachedIDs,
            'tokens[]': uncachedTokens
          },
          dataType: 'json',
          success: function success(results) {
            _.each(results, function (html, contextualID) {
              storage.setItem("Drupal.contextual.".concat(contextualID), html);

              if (html.length > 0) {
                $placeholders = $context.find("[data-contextual-id=\"".concat(contextualID, "\"]"));

                for (var i = 0; i < $placeholders.length; i++) {
                  initContextual($placeholders.eq(i), html);
                }
              }
            });
          }
        });
      }
    }
  };
  Drupal.contextual = {
    views: [],
    regionViews: []
  };
  Drupal.contextual.collection = new Backbone.Collection([], {
    model: Drupal.contextual.StateModel
  });

  Drupal.theme.contextualTrigger = function () {
    return '<button class="trigger visually-hidden focusable" type="button"></button>';
  };

  $(document).on('drupalContextualLinkAdded', function (event, data) {
    Drupal.ajax.bindAjaxLinks(data.$el[0]);
  });
})(jQuery, Drupal, drupalSettings, _, Backbone, window.JSON, window.sessionStorage);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone) {
  Drupal.contextual.StateModel = Backbone.Model.extend({
    defaults: {
      title: '',
      regionIsHovered: false,
      hasFocus: false,
      isOpen: false,
      isLocked: false
    },
    toggleOpen: function toggleOpen() {
      var newIsOpen = !this.get('isOpen');
      this.set('isOpen', newIsOpen);

      if (newIsOpen) {
        this.focus();
      }

      return this;
    },
    close: function close() {
      this.set('isOpen', false);
      return this;
    },
    focus: function focus() {
      this.set('hasFocus', true);
      var cid = this.cid;
      this.collection.each(function (model) {
        if (model.cid !== cid) {
          model.close().blur();
        }
      });
      return this;
    },
    blur: function blur() {
      if (!this.get('isOpen')) {
        this.set('hasFocus', false);
      }

      return this;
    }
  });
})(Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone) {
  Drupal.contextual.AuralView = Backbone.View.extend({
    initialize: function initialize(options) {
      this.options = options;
      this.listenTo(this.model, 'change', this.render);
      this.render();
    },
    render: function render() {
      var isOpen = this.model.get('isOpen');
      this.$el.find('.contextual-links').prop('hidden', !isOpen);
      this.$el.find('.trigger').text(Drupal.t('@action @title configuration options', {
        '@action': !isOpen ? this.options.strings.open : this.options.strings.close,
        '@title': this.model.get('title')
      })).attr('aria-pressed', isOpen);
    }
  });
})(Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone) {
  Drupal.contextual.KeyboardView = Backbone.View.extend({
    events: {
      'focus .trigger': 'focus',
      'focus .contextual-links a': 'focus',
      'blur .trigger': function blurTrigger() {
        this.model.blur();
      },
      'blur .contextual-links a': function blurContextualLinksA() {
        var that = this;
        this.timer = window.setTimeout(function () {
          that.model.close().blur();
        }, 150);
      }
    },
    initialize: function initialize() {
      this.timer = NaN;
    },
    focus: function focus() {
      window.clearTimeout(this.timer);
      this.model.focus();
    }
  });
})(Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone, Modernizr) {
  Drupal.contextual.RegionView = Backbone.View.extend({
    events: function events() {
      var mapping = {
        mouseenter: function mouseenter() {
          this.model.set('regionIsHovered', true);
        },
        mouseleave: function mouseleave() {
          this.model.close().blur().set('regionIsHovered', false);
        }
      };

      if (Modernizr.touchevents) {
        mapping = {};
      }

      return mapping;
    },
    initialize: function initialize() {
      this.listenTo(this.model, 'change:hasFocus', this.render);
    },
    render: function render() {
      this.$el.toggleClass('focus', this.model.get('hasFocus'));
      return this;
    }
  });
})(Drupal, Backbone, Modernizr);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone, Modernizr) {
  Drupal.contextual.VisualView = Backbone.View.extend({
    events: function events() {
      var touchEndToClick = function touchEndToClick(event) {
        event.preventDefault();
        event.target.click();
      };

      var mapping = {
        'click .trigger': function clickTrigger() {
          this.model.toggleOpen();
        },
        'touchend .trigger': touchEndToClick,
        'click .contextual-links a': function clickContextualLinksA() {
          this.model.close().blur();
        },
        'touchend .contextual-links a': touchEndToClick
      };

      if (!Modernizr.touchevents) {
        mapping.mouseenter = function () {
          this.model.focus();
        };
      }

      return mapping;
    },
    initialize: function initialize() {
      this.listenTo(this.model, 'change', this.render);
    },
    render: function render() {
      var isOpen = this.model.get('isOpen');
      var isVisible = this.model.get('isLocked') || this.model.get('regionIsHovered') || isOpen;
      this.$el.toggleClass('open', isOpen).find('.trigger').toggleClass('visually-hidden', !isVisible);

      if ('isOpen' in this.model.changed) {
        this.$el.closest('.contextual-region').find('.contextual .trigger:not(:first)').toggle(!isOpen);
      }

      return this;
    }
  });
})(Drupal, Backbone, Modernizr);;
/*!
* tabbable 5.2.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.tabbable,r=e.tabbable={};t(r),r.noConflict=function(){return e.tabbable=n,r}}())}(this,(function(e){"use strict";var t=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],n=t.join(","),r="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,o=function(e,t,o){var i=Array.prototype.slice.apply(e.querySelectorAll(n));return t&&r.call(e,n)&&i.unshift(e),i=i.filter(o)},i=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName&&"DETAILS"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t},a=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},u=function(e){return"INPUT"===e.tagName},l=function(e){return function(e){return u(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||e.ownerDocument,r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var o=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!o||o===e}(e)},c=function(e,t){return!(t.disabled||function(e){return u(e)&&"hidden"===e.type}(t)||function(e,t){if("hidden"===getComputedStyle(e).visibility)return!0;var n=r.call(e,"details>summary:first-of-type")?e.parentElement:e;if(r.call(n,"details:not([open]) *"))return!0;if(t&&"full"!==t){if("non-zero-area"===t){var o=e.getBoundingClientRect(),i=o.width,a=o.height;return 0===i&&0===a}}else for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(t,e.displayCheck)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(u(e)||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"BUTTON"===e.tagName)for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},d=function(e,t){return!(!c(e,t)||l(t)||i(t)<0)},f=t.concat("iframe").join(",");e.focusable=function(e,t){return o(e,(t=t||{}).includeContainer,c.bind(null,t))},e.isFocusable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==r.call(e,f)&&c(t,e)},e.isTabbable=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==r.call(e,n)&&d(t,e)},e.tabbable=function(e,t){var n=[],r=[];return o(e,(t=t||{}).includeContainer,d.bind(null,t)).forEach((function(e,t){var o=i(e);0===o?n.push(e):r.push({documentOrder:t,tabIndex:o,node:e})})),r.sort(a).map((function(e){return e.node})).concat(n)},Object.defineProperty(e,"__esModule",{value:!0})}));

;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

(function ($, Drupal, drupalSettings) {
  var showWeight = JSON.parse(localStorage.getItem('Drupal.tableDrag.showWeight'));
  Drupal.behaviors.tableDrag = {
    attach: function attach(context, settings) {
      function initTableDrag(table, base) {
        if (table.length) {
          Drupal.tableDrag[base] = new Drupal.tableDrag(table[0], settings.tableDrag[base]);
        }
      }

      Object.keys(settings.tableDrag || {}).forEach(function (base) {
        initTableDrag($(once('tabledrag', "#".concat(base), context)), base);
      });
    }
  };

  Drupal.tableDrag = function (table, tableSettings) {
    var _this = this;

    var self = this;
    var $table = $(table);
    this.$table = $(table);
    this.table = table;
    this.tableSettings = tableSettings;
    this.dragObject = null;
    this.rowObject = null;
    this.oldRowElement = null;
    this.oldY = null;
    this.changed = false;
    this.maxDepth = 0;
    this.rtl = $(this.table).css('direction') === 'rtl' ? -1 : 1;
    this.striping = $(this.table).data('striping') === 1;
    this.scrollSettings = {
      amount: 4,
      interval: 50,
      trigger: 70
    };
    this.scrollInterval = null;
    this.scrollY = 0;
    this.windowHeight = 0;
    this.$toggleWeightButton = null;
    this.indentEnabled = false;
    Object.keys(tableSettings || {}).forEach(function (group) {
      Object.keys(tableSettings[group] || {}).forEach(function (n) {
        if (tableSettings[group][n].relationship === 'parent') {
          _this.indentEnabled = true;
        }

        if (tableSettings[group][n].limit > 0) {
          _this.maxDepth = tableSettings[group][n].limit;
        }
      });
    });

    if (this.indentEnabled) {
      this.indentCount = 1;
      var indent = Drupal.theme('tableDragIndentation');
      var testRow = $('<tr></tr>').addClass('draggable').appendTo(table);
      var testCell = $('<td></td>').appendTo(testRow).prepend(indent).prepend(indent);
      var $indentation = testCell.find('.js-indentation');
      this.indentAmount = $indentation.get(1).offsetLeft - $indentation.get(0).offsetLeft;
      testRow.remove();
    }

    $table.find('> tr.draggable, > tbody > tr.draggable').each(function () {
      self.makeDraggable(this);
    });
    var $toggleWeightWrapper = $(Drupal.theme('tableDragToggle'));
    this.$toggleWeightButton = $toggleWeightWrapper.find('[data-drupal-selector="tabledrag-toggle-weight"]');
    this.$toggleWeightButton.on('click', $.proxy(function (e) {
      e.preventDefault();
      this.toggleColumns();
    }, this));
    $table.before($toggleWeightWrapper);
    self.initColumns();
    $(document).on('touchmove', function (event) {
      return self.dragRow(event.originalEvent.touches[0], self);
    });
    $(document).on('touchend', function (event) {
      return self.dropRow(event.originalEvent.touches[0], self);
    });
    $(document).on('mousemove pointermove', function (event) {
      return self.dragRow(event, self);
    });
    $(document).on('mouseup pointerup', function (event) {
      return self.dropRow(event, self);
    });
    $(window).on('storage', $.proxy(function (e) {
      if (e.originalEvent.key === 'Drupal.tableDrag.showWeight') {
        showWeight = JSON.parse(e.originalEvent.newValue);
        this.displayColumns(showWeight);
      }
    }, this));
  };

  Drupal.tableDrag.prototype.initColumns = function () {
    var _this2 = this;

    var $table = this.$table;
    var hidden;
    var cell;
    var columnIndex;
    Object.keys(this.tableSettings || {}).forEach(function (group) {
      Object.keys(_this2.tableSettings[group]).some(function (tableSetting) {
        var field = $table.find(".".concat(_this2.tableSettings[group][tableSetting].target)).eq(0);

        if (field.length && _this2.tableSettings[group][tableSetting].hidden) {
          hidden = _this2.tableSettings[group][tableSetting].hidden;
          cell = field.closest('td');
          return true;
        }

        return false;
      });

      if (hidden && cell[0]) {
        columnIndex = cell.parent().find('> td').index(cell.get(0)) + 1;
        $table.find('> thead > tr, > tbody > tr, > tr').each(_this2.addColspanClass(columnIndex));
      }
    });
    this.displayColumns(showWeight);
  };

  Drupal.tableDrag.prototype.addColspanClass = function (columnIndex) {
    return function () {
      var $row = $(this);
      var index = columnIndex;
      var cells = $row.children();
      var cell;
      cells.each(function (n) {
        if (n < index && this.colSpan && this.colSpan > 1) {
          index -= this.colSpan - 1;
        }
      });

      if (index > 0) {
        cell = cells.filter(":nth-child(".concat(index, ")"));

        if (cell[0].colSpan && cell[0].colSpan > 1) {
          cell.addClass('tabledrag-has-colspan');
        } else {
          cell.addClass('tabledrag-hide');
        }
      }
    };
  };

  Drupal.tableDrag.prototype.displayColumns = function (displayWeight) {
    if (displayWeight) {
      this.showColumns();
    } else {
      this.hideColumns();
    }

    this.$toggleWeightButton.html(Drupal.theme('toggleButtonContent', displayWeight));
    $(once.filter('tabledrag', 'table')).trigger('columnschange', !!displayWeight);
  };

  Drupal.tableDrag.prototype.toggleColumns = function () {
    showWeight = !showWeight;
    this.displayColumns(showWeight);

    if (showWeight) {
      localStorage.setItem('Drupal.tableDrag.showWeight', showWeight);
    } else {
      localStorage.removeItem('Drupal.tableDrag.showWeight');
    }
  };

  Drupal.tableDrag.prototype.hideColumns = function () {
    var $tables = $(once.filter('tabledrag', 'table'));
    $tables.find('.tabledrag-hide').css('display', 'none');
    $tables.find('.tabledrag-handle').css('display', '');
    $tables.find('.tabledrag-has-colspan').each(function () {
      this.colSpan -= 1;
    });
  };

  Drupal.tableDrag.prototype.showColumns = function () {
    var $tables = $(once.filter('tabledrag', 'table'));
    $tables.find('.tabledrag-hide').css('display', '');
    $tables.find('.tabledrag-handle').css('display', 'none');
    $tables.find('.tabledrag-has-colspan').each(function () {
      this.colSpan += 1;
    });
  };

  Drupal.tableDrag.prototype.rowSettings = function (group, row) {
    var field = $(row).find(".".concat(group));
    var tableSettingsGroup = this.tableSettings[group];
    return Object.keys(tableSettingsGroup).map(function (delta) {
      var targetClass = tableSettingsGroup[delta].target;
      var rowSettings;

      if (field.is(".".concat(targetClass))) {
        rowSettings = {};
        Object.keys(tableSettingsGroup[delta]).forEach(function (n) {
          rowSettings[n] = tableSettingsGroup[delta][n];
        });
      }

      return rowSettings;
    }).filter(function (rowSetting) {
      return rowSetting;
    })[0];
  };

  Drupal.tableDrag.prototype.makeDraggable = function (item) {
    var self = this;
    var $item = $(item);
    $item.find('td:first-of-type').find('a').addClass('menu-item__link');
    var $handle = $(Drupal.theme('tableDragHandle'));
    var $indentationLast = $item.find('td:first-of-type').find('.js-indentation').eq(-1);

    if ($indentationLast.length) {
      $indentationLast.after($handle);
      self.indentCount = Math.max($item.find('.js-indentation').length, self.indentCount);
    } else {
      $item.find('td').eq(0).prepend($handle);
    }

    $handle.on('mousedown touchstart pointerdown', function (event) {
      event.preventDefault();

      if (event.originalEvent.type === 'touchstart') {
        event = event.originalEvent.touches[0];
      }

      self.dragStart(event, self, item);
    });
    $handle.on('click', function (e) {
      e.preventDefault();
    });
    $handle.on('focus', function () {
      self.safeBlur = true;
    });
    $handle.on('blur', function (event) {
      if (self.rowObject && self.safeBlur) {
        self.dropRow(event, self);
      }
    });
    $handle.on('keydown', function (event) {
      if (event.keyCode !== 9 && !self.rowObject) {
        self.rowObject = new self.row(item, 'keyboard', self.indentEnabled, self.maxDepth, true);
      }

      var keyChange = false;
      var groupHeight;

      switch (event.keyCode) {
        case 37:
        case 63234:
          keyChange = true;
          self.rowObject.indent(-1 * self.rtl);
          break;

        case 38:
        case 63232:
          {
            var $previousRow = $(self.rowObject.element).prev('tr').eq(0);
            var previousRow = $previousRow.get(0);

            while (previousRow && $previousRow.is(':hidden')) {
              $previousRow = $(previousRow).prev('tr').eq(0);
              previousRow = $previousRow.get(0);
            }

            if (previousRow) {
              self.safeBlur = false;
              self.rowObject.direction = 'up';
              keyChange = true;

              if ($(item).is('.tabledrag-root')) {
                groupHeight = 0;

                while (previousRow && $previousRow.find('.js-indentation').length) {
                  $previousRow = $(previousRow).prev('tr').eq(0);
                  previousRow = $previousRow.get(0);
                  groupHeight += $previousRow.is(':hidden') ? 0 : previousRow.offsetHeight;
                }

                if (previousRow) {
                  self.rowObject.swap('before', previousRow);
                  window.scrollBy(0, -groupHeight);
                }
              } else if (self.table.tBodies[0].rows[0] !== previousRow || $previousRow.is('.draggable')) {
                self.rowObject.swap('before', previousRow);
                self.rowObject.interval = null;
                self.rowObject.indent(0);
                window.scrollBy(0, -parseInt(item.offsetHeight, 10));
              }

              $handle.trigger('focus');
            }

            break;
          }

        case 39:
        case 63235:
          keyChange = true;
          self.rowObject.indent(self.rtl);
          break;

        case 40:
        case 63233:
          {
            var $nextRow = $(self.rowObject.group).eq(-1).next('tr').eq(0);
            var nextRow = $nextRow.get(0);

            while (nextRow && $nextRow.is(':hidden')) {
              $nextRow = $(nextRow).next('tr').eq(0);
              nextRow = $nextRow.get(0);
            }

            if (nextRow) {
              self.safeBlur = false;
              self.rowObject.direction = 'down';
              keyChange = true;

              if ($(item).is('.tabledrag-root')) {
                groupHeight = 0;
                var nextGroup = new self.row(nextRow, 'keyboard', self.indentEnabled, self.maxDepth, false);

                if (nextGroup) {
                  $(nextGroup.group).each(function () {
                    groupHeight += $(this).is(':hidden') ? 0 : this.offsetHeight;
                  });
                  var nextGroupRow = $(nextGroup.group).eq(-1).get(0);
                  self.rowObject.swap('after', nextGroupRow);
                  window.scrollBy(0, parseInt(groupHeight, 10));
                }
              } else {
                self.rowObject.swap('after', nextRow);
                self.rowObject.interval = null;
                self.rowObject.indent(0);
                window.scrollBy(0, parseInt(item.offsetHeight, 10));
              }

              $handle.trigger('focus');
            }

            break;
          }
      }

      if (self.rowObject && self.rowObject.changed === true) {
        $(item).addClass('drag');

        if (self.oldRowElement) {
          $(self.oldRowElement).removeClass('drag-previous');
        }

        self.oldRowElement = item;

        if (self.striping === true) {
          self.restripeTable();
        }

        self.onDrag();
      }

      if (keyChange) {
        return false;
      }
    });
    $handle.on('keypress', function (event) {
      switch (event.keyCode) {
        case 37:
        case 38:
        case 39:
        case 40:
          return false;
      }
    });
  };

  Drupal.tableDrag.prototype.dragStart = function (event, self, item) {
    self.dragObject = {};
    self.dragObject.initOffset = self.getPointerOffset(item, event);
    self.dragObject.initPointerCoords = self.pointerCoords(event);

    if (self.indentEnabled) {
      self.dragObject.indentPointerPos = self.dragObject.initPointerCoords;
    }

    if (self.rowObject) {
      $(self.rowObject.element).find('a.tabledrag-handle').trigger('blur');
    }

    self.rowObject = new self.row(item, 'pointer', self.indentEnabled, self.maxDepth, true);
    self.table.topY = $(self.table).offset().top;
    self.table.bottomY = self.table.topY + self.table.offsetHeight;
    $(item).addClass('drag');
    $('body').addClass('drag');

    if (self.oldRowElement) {
      $(self.oldRowElement).removeClass('drag-previous');
    }

    self.oldY = self.pointerCoords(event).y;
  };

  Drupal.tableDrag.prototype.dragRow = function (event, self) {
    if (self.dragObject) {
      self.currentPointerCoords = self.pointerCoords(event);
      var y = self.currentPointerCoords.y - self.dragObject.initOffset.y;
      var x = self.currentPointerCoords.x - self.dragObject.initOffset.x;

      if (y !== self.oldY) {
        self.rowObject.direction = y > self.oldY ? 'down' : 'up';
        self.oldY = y;
        var scrollAmount = self.checkScroll(self.currentPointerCoords.y);
        clearInterval(self.scrollInterval);

        if (scrollAmount > 0 && self.rowObject.direction === 'down' || scrollAmount < 0 && self.rowObject.direction === 'up') {
          self.setScroll(scrollAmount);
        }

        var currentRow = self.findDropTargetRow(x, y);

        if (currentRow) {
          if (self.rowObject.direction === 'down') {
            self.rowObject.swap('after', currentRow, self);
          } else {
            self.rowObject.swap('before', currentRow, self);
          }

          if (self.striping === true) {
            self.restripeTable();
          }
        }
      }

      if (self.indentEnabled) {
        var xDiff = self.currentPointerCoords.x - self.dragObject.indentPointerPos.x;
        var indentDiff = Math.round(xDiff / self.indentAmount);
        var indentChange = self.rowObject.indent(indentDiff);
        self.dragObject.indentPointerPos.x += self.indentAmount * indentChange * self.rtl;
        self.indentCount = Math.max(self.indentCount, self.rowObject.indents);
      }

      return false;
    }
  };

  Drupal.tableDrag.prototype.dropRow = function (event, self) {
    var droppedRow;
    var $droppedRow;

    if (self.rowObject !== null) {
      droppedRow = self.rowObject.element;
      $droppedRow = $(droppedRow);

      if (self.rowObject.changed === true) {
        self.updateFields(droppedRow);
        Object.keys(self.tableSettings || {}).forEach(function (group) {
          var rowSettings = self.rowSettings(group, droppedRow);

          if (rowSettings.relationship === 'group') {
            Object.keys(self.rowObject.children || {}).forEach(function (n) {
              self.updateField(self.rowObject.children[n], group);
            });
          }
        });
        self.rowObject.markChanged();

        if (self.changed === false) {
          $(Drupal.theme('tableDragChangedWarning')).insertBefore(self.table).hide().fadeIn('slow');
          self.changed = true;
        }
      }

      if (self.indentEnabled) {
        self.rowObject.removeIndentClasses();
      }

      if (self.oldRowElement) {
        $(self.oldRowElement).removeClass('drag-previous');
      }

      $droppedRow.removeClass('drag').addClass('drag-previous');
      self.oldRowElement = droppedRow;
      self.onDrop();
      self.rowObject = null;
    }

    if (self.dragObject !== null) {
      self.dragObject = null;
      $('body').removeClass('drag');
      clearInterval(self.scrollInterval);
    }
  };

  Drupal.tableDrag.prototype.pointerCoords = function (event) {
    if (event.pageX || event.pageY) {
      return {
        x: event.pageX,
        y: event.pageY
      };
    }

    return {
      x: event.clientX + document.body.scrollLeft - document.body.clientLeft,
      y: event.clientY + document.body.scrollTop - document.body.clientTop
    };
  };

  Drupal.tableDrag.prototype.getPointerOffset = function (target, event) {
    var docPos = $(target).offset();
    var pointerPos = this.pointerCoords(event);
    return {
      x: pointerPos.x - docPos.left,
      y: pointerPos.y - docPos.top
    };
  };

  Drupal.tableDrag.prototype.findDropTargetRow = function (x, y) {
    var _this3 = this;

    var rows = $(this.table.tBodies[0].rows).not(':hidden');

    var _loop = function _loop(n) {
      var row = rows[n];
      var $row = $(row);
      var rowY = $row.offset().top;
      var rowHeight = void 0;

      if (row.offsetHeight === 0) {
        rowHeight = parseInt(row.firstChild.offsetHeight, 10) / 2;
      } else {
        rowHeight = parseInt(row.offsetHeight, 10) / 2;
      }

      if (y > rowY - rowHeight && y < rowY + rowHeight) {
        if (_this3.indentEnabled) {
          if (Object.keys(_this3.rowObject.group).some(function (o) {
            return _this3.rowObject.group[o] === row;
          })) {
            return {
              v: null
            };
          }
        } else if (row === _this3.rowObject.element) {
          return {
            v: null
          };
        }

        if (!_this3.rowObject.isValidSwap(row)) {
          return {
            v: null
          };
        }

        while ($row.is(':hidden') && $row.prev('tr').is(':hidden')) {
          $row = $row.prev('tr:first-of-type');
          row = $row.get(0);
        }

        return {
          v: row
        };
      }
    };

    for (var n = 0; n < rows.length; n++) {
      var _ret = _loop(n);

      if (_typeof(_ret) === "object") return _ret.v;
    }

    return null;
  };

  Drupal.tableDrag.prototype.updateFields = function (changedRow) {
    var _this4 = this;

    Object.keys(this.tableSettings || {}).forEach(function (group) {
      _this4.updateField(changedRow, group);
    });
  };

  Drupal.tableDrag.prototype.updateField = function (changedRow, group) {
    var rowSettings = this.rowSettings(group, changedRow);
    var $changedRow = $(changedRow);
    var sourceRow;
    var $previousRow;
    var previousRow;
    var useSibling;

    if (rowSettings.relationship === 'self' || rowSettings.relationship === 'group') {
      sourceRow = changedRow;
    } else if (rowSettings.relationship === 'sibling') {
      $previousRow = $changedRow.prev('tr:first-of-type');
      previousRow = $previousRow.get(0);
      var $nextRow = $changedRow.next('tr:first-of-type');
      var nextRow = $nextRow.get(0);
      sourceRow = changedRow;

      if ($previousRow.is('.draggable') && $previousRow.find(".".concat(group)).length) {
        if (this.indentEnabled) {
          if ($previousRow.find('.js-indentations').length === $changedRow.find('.js-indentations').length) {
            sourceRow = previousRow;
          }
        } else {
          sourceRow = previousRow;
        }
      } else if ($nextRow.is('.draggable') && $nextRow.find(".".concat(group)).length) {
        if (this.indentEnabled) {
          if ($nextRow.find('.js-indentations').length === $changedRow.find('.js-indentations').length) {
            sourceRow = nextRow;
          }
        } else {
          sourceRow = nextRow;
        }
      }
    } else if (rowSettings.relationship === 'parent') {
      $previousRow = $changedRow.prev('tr');
      previousRow = $previousRow;

      while ($previousRow.length && $previousRow.find('.js-indentation').length >= this.rowObject.indents) {
        $previousRow = $previousRow.prev('tr');
        previousRow = $previousRow;
      }

      if ($previousRow.length) {
        sourceRow = $previousRow.get(0);
      } else {
        sourceRow = $(this.table).find('tr.draggable:first-of-type').get(0);

        if (sourceRow === this.rowObject.element) {
          sourceRow = $(this.rowObject.group[this.rowObject.group.length - 1]).next('tr.draggable').get(0);
        }

        useSibling = true;
      }
    }

    this.copyDragClasses(sourceRow, changedRow, group);
    rowSettings = this.rowSettings(group, changedRow);

    if (useSibling) {
      rowSettings.relationship = 'sibling';
      rowSettings.source = rowSettings.target;
    }

    var targetClass = ".".concat(rowSettings.target);
    var targetElement = $changedRow.find(targetClass).get(0);

    if (targetElement) {
      var sourceClass = ".".concat(rowSettings.source);
      var sourceElement = $(sourceClass, sourceRow).get(0);

      switch (rowSettings.action) {
        case 'depth':
          targetElement.value = $(sourceElement).closest('tr').find('.js-indentation').length;
          break;

        case 'match':
          targetElement.value = sourceElement.value;
          break;

        case 'order':
          {
            var siblings = this.rowObject.findSiblings(rowSettings);

            if ($(targetElement).is('select')) {
              var values = [];
              $(targetElement).find('option').each(function () {
                values.push(this.value);
              });
              var maxVal = values[values.length - 1];
              $(siblings).find(targetClass).each(function () {
                if (values.length > 0) {
                  this.value = values.shift();
                } else {
                  this.value = maxVal;
                }
              });
            } else {
              var weight = parseInt($(siblings[0]).find(targetClass).val(), 10) || 0;
              $(siblings).find(targetClass).each(function () {
                this.value = weight;
                weight++;
              });
            }

            break;
          }
      }
    }
  };

  Drupal.tableDrag.prototype.copyDragClasses = function (sourceRow, targetRow, group) {
    var sourceElement = $(sourceRow).find(".".concat(group));
    var targetElement = $(targetRow).find(".".concat(group));

    if (sourceElement.length && targetElement.length) {
      targetElement[0].className = sourceElement[0].className;
    }
  };

  Drupal.tableDrag.prototype.checkScroll = function (cursorY) {
    var de = document.documentElement;
    var b = document.body;
    var windowHeight = window.innerHeight || (de.clientHeight && de.clientWidth !== 0 ? de.clientHeight : b.offsetHeight);
    this.windowHeight = windowHeight;
    var scrollY;

    if (document.all) {
      scrollY = !de.scrollTop ? b.scrollTop : de.scrollTop;
    } else {
      scrollY = window.pageYOffset ? window.pageYOffset : window.scrollY;
    }

    this.scrollY = scrollY;
    var trigger = this.scrollSettings.trigger;
    var delta = 0;

    if (cursorY - scrollY > windowHeight - trigger) {
      delta = trigger / (windowHeight + scrollY - cursorY);
      delta = delta > 0 && delta < trigger ? delta : trigger;
      return delta * this.scrollSettings.amount;
    }

    if (cursorY - scrollY < trigger) {
      delta = trigger / (cursorY - scrollY);
      delta = delta > 0 && delta < trigger ? delta : trigger;
      return -delta * this.scrollSettings.amount;
    }
  };

  Drupal.tableDrag.prototype.setScroll = function (scrollAmount) {
    var self = this;
    this.scrollInterval = setInterval(function () {
      self.checkScroll(self.currentPointerCoords.y);
      var aboveTable = self.scrollY > self.table.topY;
      var belowTable = self.scrollY + self.windowHeight < self.table.bottomY;

      if (scrollAmount > 0 && belowTable || scrollAmount < 0 && aboveTable) {
        window.scrollBy(0, scrollAmount);
      }
    }, this.scrollSettings.interval);
  };

  Drupal.tableDrag.prototype.restripeTable = function () {
    $(this.table).find('> tbody > tr.draggable, > tr.draggable').filter(':visible').filter(':odd').removeClass('odd').addClass('even').end().filter(':even').removeClass('even').addClass('odd');
  };

  Drupal.tableDrag.prototype.onDrag = function () {
    return null;
  };

  Drupal.tableDrag.prototype.onDrop = function () {
    return null;
  };

  Drupal.tableDrag.prototype.row = function (tableRow, method, indentEnabled, maxDepth, addClasses) {
    var $tableRow = $(tableRow);
    this.element = tableRow;
    this.method = method;
    this.group = [tableRow];
    this.groupDepth = $tableRow.find('.js-indentation').length;
    this.changed = false;
    this.table = $tableRow.closest('table')[0];
    this.indentEnabled = indentEnabled;
    this.maxDepth = maxDepth;
    this.direction = '';

    if (this.indentEnabled) {
      this.indents = $tableRow.find('.js-indentation').length;
      this.children = this.findChildren(addClasses);
      this.group = this.group.concat(this.children);

      for (var n = 0; n < this.group.length; n++) {
        this.groupDepth = Math.max($(this.group[n]).find('.js-indentation').length, this.groupDepth);
      }
    }
  };

  Drupal.tableDrag.prototype.row.prototype.findChildren = function (addClasses) {
    var parentIndentation = this.indents;
    var currentRow = $(this.element, this.table).next('tr.draggable');
    var rows = [];
    var child = 0;

    function rowIndentation(indentNum, el) {
      var self = $(el);

      if (child === 1 && indentNum === parentIndentation) {
        self.addClass('tree-child-first');
      }

      if (indentNum === parentIndentation) {
        self.addClass('tree-child');
      } else if (indentNum > parentIndentation) {
        self.addClass('tree-child-horizontal');
      }
    }

    while (currentRow.length) {
      if (currentRow.find('.js-indentation').length > parentIndentation) {
        child++;
        rows.push(currentRow[0]);

        if (addClasses) {
          currentRow.find('.js-indentation').each(rowIndentation);
        }
      } else {
        break;
      }

      currentRow = currentRow.next('tr.draggable');
    }

    if (addClasses && rows.length) {
      $(rows[rows.length - 1]).find(".js-indentation:nth-child(".concat(parentIndentation + 1, ")")).addClass('tree-child-last');
    }

    return rows;
  };

  Drupal.tableDrag.prototype.row.prototype.isValidSwap = function (row) {
    var $row = $(row);

    if (this.indentEnabled) {
      var prevRow;
      var nextRow;

      if (this.direction === 'down') {
        prevRow = row;
        nextRow = $row.next('tr').get(0);
      } else {
        prevRow = $row.prev('tr').get(0);
        nextRow = row;
      }

      this.interval = this.validIndentInterval(prevRow, nextRow);

      if (this.interval.min > this.interval.max) {
        return false;
      }
    }

    if (this.table.tBodies[0].rows[0] === row && $row.is(':not(.draggable)')) {
      return false;
    }

    return true;
  };

  Drupal.tableDrag.prototype.row.prototype.swap = function (position, row) {
    this.group.forEach(function (row) {
      Drupal.detachBehaviors(row, drupalSettings, 'move');
    });
    $(row)[position](this.group);
    this.group.forEach(function (row) {
      Drupal.attachBehaviors(row, drupalSettings);
    });
    this.changed = true;
    this.onSwap(row);
  };

  Drupal.tableDrag.prototype.row.prototype.validIndentInterval = function (prevRow, nextRow) {
    var $prevRow = $(prevRow);
    var maxIndent;
    var minIndent = nextRow ? $(nextRow).find('.js-indentation').length : 0;

    if (!prevRow || $prevRow.is(':not(.draggable)') || $(this.element).is('.tabledrag-root')) {
      maxIndent = 0;
    } else {
      maxIndent = $prevRow.find('.js-indentation').length + ($prevRow.is('.tabledrag-leaf') ? 0 : 1);

      if (this.maxDepth) {
        maxIndent = Math.min(maxIndent, this.maxDepth - (this.groupDepth - this.indents));
      }
    }

    return {
      min: minIndent,
      max: maxIndent
    };
  };

  Drupal.tableDrag.prototype.row.prototype.indent = function (indentDiff) {
    var $group = $(this.group);

    if (!this.interval) {
      var prevRow = $(this.element).prev('tr').get(0);
      var nextRow = $group.eq(-1).next('tr').get(0);
      this.interval = this.validIndentInterval(prevRow, nextRow);
    }

    var indent = this.indents + indentDiff;
    indent = Math.max(indent, this.interval.min);
    indent = Math.min(indent, this.interval.max);
    indentDiff = indent - this.indents;

    for (var n = 1; n <= Math.abs(indentDiff); n++) {
      if (indentDiff < 0) {
        $group.find('.js-indentation:first-of-type').remove();
        this.indents--;
      } else {
        $group.find('td:first-of-type').prepend(Drupal.theme('tableDragIndentation'));
        this.indents++;
      }
    }

    if (indentDiff) {
      this.changed = true;
      this.groupDepth += indentDiff;
      this.onIndent();
    }

    return indentDiff;
  };

  Drupal.tableDrag.prototype.row.prototype.findSiblings = function (rowSettings) {
    var siblings = [];
    var directions = ['prev', 'next'];
    var rowIndentation = this.indents;
    var checkRowIndentation;

    for (var d = 0; d < directions.length; d++) {
      var checkRow = $(this.element)[directions[d]]();

      while (checkRow.length) {
        if (checkRow.find(".".concat(rowSettings.target))) {
          if (this.indentEnabled) {
            checkRowIndentation = checkRow.find('.js-indentation').length;
          }

          if (!this.indentEnabled || checkRowIndentation === rowIndentation) {
            siblings.push(checkRow[0]);
          } else if (checkRowIndentation < rowIndentation) {
            break;
          }
        } else {
          break;
        }

        checkRow = checkRow[directions[d]]();
      }

      if (directions[d] === 'prev') {
        siblings.reverse();
        siblings.push(this.element);
      }
    }

    return siblings;
  };

  Drupal.tableDrag.prototype.row.prototype.removeIndentClasses = function () {
    var _this5 = this;

    Object.keys(this.children || {}).forEach(function (n) {
      $(_this5.children[n]).find('.js-indentation').removeClass('tree-child').removeClass('tree-child-first').removeClass('tree-child-last').removeClass('tree-child-horizontal');
    });
  };

  Drupal.tableDrag.prototype.row.prototype.markChanged = function () {
    var marker = Drupal.theme('tableDragChangedMarker');
    var cell = $(this.element).find('td:first-of-type');

    if (cell.find('abbr.tabledrag-changed').length === 0) {
      cell.append(marker);
    }
  };

  Drupal.tableDrag.prototype.row.prototype.onIndent = function () {
    return null;
  };

  Drupal.tableDrag.prototype.row.prototype.onSwap = function (swappedRow) {
    return null;
  };

  $.extend(Drupal.theme, {
    tableDragChangedMarker: function tableDragChangedMarker() {
      return "<abbr class=\"warning tabledrag-changed\" title=\"".concat(Drupal.t('Changed'), "\">*</abbr>");
    },
    tableDragIndentation: function tableDragIndentation() {
      return '<div class="js-indentation indentation">&nbsp;</div>';
    },
    tableDragChangedWarning: function tableDragChangedWarning() {
      return "<div class=\"tabledrag-changed-warning messages messages--warning\" role=\"alert\">".concat(Drupal.theme('tableDragChangedMarker'), " ").concat(Drupal.t('You have unsaved changes.'), "</div>");
    },
    tableDragToggle: function tableDragToggle() {
      return "<div class=\"tabledrag-toggle-weight-wrapper\" data-drupal-selector=\"tabledrag-toggle-weight-wrapper\">\n            <button type=\"button\" class=\"link tabledrag-toggle-weight\" data-drupal-selector=\"tabledrag-toggle-weight\"></button>\n            </div>";
    },
    toggleButtonContent: function toggleButtonContent(show) {
      return show ? Drupal.t('Hide row weights') : Drupal.t('Show row weights');
    },
    tableDragHandle: function tableDragHandle() {
      return "<a href=\"#\" title=\"".concat(Drupal.t('Drag to re-order'), "\"\n        class=\"tabledrag-handle\"><div class=\"handle\">&nbsp;</div></a>");
    }
  });
})(jQuery, Drupal, drupalSettings);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal) {
  var autocomplete;

  function autocompleteSplitValues(value) {
    var result = [];
    var quote = false;
    var current = '';
    var valueLength = value.length;
    var character;

    for (var i = 0; i < valueLength; i++) {
      character = value.charAt(i);

      if (character === '"') {
        current += character;
        quote = !quote;
      } else if (character === ',' && !quote) {
        result.push(current.trim());
        current = '';
      } else {
        current += character;
      }
    }

    if (value.length > 0) {
      result.push(current.trim());
    }

    return result;
  }

  function extractLastTerm(terms) {
    return autocomplete.splitValues(terms).pop();
  }

  function searchHandler(event) {
    var options = autocomplete.options;

    if (options.isComposing) {
      return false;
    }

    var term = autocomplete.extractLastTerm(event.target.value);

    if (term.length > 0 && options.firstCharacterBlacklist.indexOf(term[0]) !== -1) {
      return false;
    }

    return term.length >= options.minLength;
  }

  function sourceData(request, response) {
    var elementId = this.element.attr('id');

    if (!(elementId in autocomplete.cache)) {
      autocomplete.cache[elementId] = {};
    }

    function showSuggestions(suggestions) {
      var tagged = autocomplete.splitValues(request.term);
      var il = tagged.length;

      for (var i = 0; i < il; i++) {
        var index = suggestions.indexOf(tagged[i]);

        if (index >= 0) {
          suggestions.splice(index, 1);
        }
      }

      response(suggestions);
    }

    var term = autocomplete.extractLastTerm(request.term);

    function sourceCallbackHandler(data) {
      autocomplete.cache[elementId][term] = data;
      showSuggestions(data);
    }

    if (autocomplete.cache[elementId].hasOwnProperty(term)) {
      showSuggestions(autocomplete.cache[elementId][term]);
    } else {
      var options = $.extend({
        success: sourceCallbackHandler,
        data: {
          q: term
        }
      }, autocomplete.ajax);
      $.ajax(this.element.attr('data-autocomplete-path'), options);
    }
  }

  function focusHandler() {
    return false;
  }

  function selectHandler(event, ui) {
    var terms = autocomplete.splitValues(event.target.value);
    terms.pop();
    terms.push(ui.item.value);
    event.target.value = terms.join(', ');
    return false;
  }

  function renderItem(ul, item) {
    return $('<li>').append($('<a>').html(item.label)).appendTo(ul);
  }

  Drupal.behaviors.autocomplete = {
    attach: function attach(context) {
      var $autocomplete = $(once('autocomplete', 'input.form-autocomplete', context));

      if ($autocomplete.length) {
        var blacklist = $autocomplete.attr('data-autocomplete-first-character-blacklist');
        $.extend(autocomplete.options, {
          firstCharacterBlacklist: blacklist || ''
        });
        $autocomplete.autocomplete(autocomplete.options).each(function () {
          $(this).data('ui-autocomplete')._renderItem = autocomplete.options.renderItem;
        });
        $autocomplete.on('compositionstart.autocomplete', function () {
          autocomplete.options.isComposing = true;
        });
        $autocomplete.on('compositionend.autocomplete', function () {
          autocomplete.options.isComposing = false;
        });
      }
    },
    detach: function detach(context, settings, trigger) {
      if (trigger === 'unload') {
        $(once.remove('autocomplete', 'input.form-autocomplete', context)).autocomplete('destroy');
      }
    }
  };
  autocomplete = {
    cache: {},
    splitValues: autocompleteSplitValues,
    extractLastTerm: extractLastTerm,
    options: {
      source: sourceData,
      focus: focusHandler,
      search: searchHandler,
      select: selectHandler,
      renderItem: renderItem,
      minLength: 1,
      firstCharacterBlacklist: '',
      isComposing: false
    },
    ajax: {
      dataType: 'json',
      jsonp: false
    }
  };
  Drupal.autocomplete = autocomplete;
})(jQuery, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal) {
  Drupal.theme.progressBar = function (id) {
    return "<div id=\"".concat(id, "\" class=\"progress\" aria-live=\"polite\">") + '<div class="progress__label">&nbsp;</div>' + '<div class="progress__track"><div class="progress__bar"></div></div>' + '<div class="progress__percentage"></div>' + '<div class="progress__description">&nbsp;</div>' + '</div>';
  };

  Drupal.ProgressBar = function (id, updateCallback, method, errorCallback) {
    this.id = id;
    this.method = method || 'GET';
    this.updateCallback = updateCallback;
    this.errorCallback = errorCallback;
    this.element = $(Drupal.theme('progressBar', id));
  };

  $.extend(Drupal.ProgressBar.prototype, {
    setProgress: function setProgress(percentage, message, label) {
      if (percentage >= 0 && percentage <= 100) {
        $(this.element).find('div.progress__bar').css('width', "".concat(percentage, "%"));
        $(this.element).find('div.progress__percentage').html("".concat(percentage, "%"));
      }

      $('div.progress__description', this.element).html(message);
      $('div.progress__label', this.element).html(label);

      if (this.updateCallback) {
        this.updateCallback(percentage, message, this);
      }
    },
    startMonitoring: function startMonitoring(uri, delay) {
      this.delay = delay;
      this.uri = uri;
      this.sendPing();
    },
    stopMonitoring: function stopMonitoring() {
      clearTimeout(this.timer);
      this.uri = null;
    },
    sendPing: function sendPing() {
      if (this.timer) {
        clearTimeout(this.timer);
      }

      if (this.uri) {
        var pb = this;
        var uri = this.uri;

        if (uri.indexOf('?') === -1) {
          uri += '?';
        } else {
          uri += '&';
        }

        uri += '_format=json';
        $.ajax({
          type: this.method,
          url: uri,
          data: '',
          dataType: 'json',
          success: function success(progress) {
            if (progress.status === 0) {
              pb.displayError(progress.data);
              return;
            }

            pb.setProgress(progress.percentage, progress.message, progress.label);
            pb.timer = setTimeout(function () {
              pb.sendPing();
            }, pb.delay);
          },
          error: function error(xmlhttp) {
            var e = new Drupal.AjaxError(xmlhttp, pb.uri);
            pb.displayError("<pre>".concat(e.message, "</pre>"));
          }
        });
      }
    },
    displayError: function displayError(string) {
      var error = $('<div class="messages messages--error"></div>').html(string);
      $(this.element).before(error).hide();

      if (this.errorCallback) {
        this.errorCallback(this);
      }
    }
  });
})(jQuery, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, once) {
  var deprecatedMessageSuffix = "is deprecated in Drupal 9.3.0 and will be removed in Drupal 10.0.0. Use the core/once library instead. See https://www.drupal.org/node/3158256";
  var originalJQOnce = $.fn.once;
  var originalJQRemoveOnce = $.fn.removeOnce;

  $.fn.once = function jQueryOnce(id) {
    Drupal.deprecationError({
      message: "jQuery.once() ".concat(deprecatedMessageSuffix)
    });
    return originalJQOnce.apply(this, [id]);
  };

  $.fn.removeOnce = function jQueryRemoveOnce(id) {
    Drupal.deprecationError({
      message: "jQuery.removeOnce() ".concat(deprecatedMessageSuffix)
    });
    return originalJQRemoveOnce.apply(this, [id]);
  };

  var drupalOnce = once;

  function augmentedOnce(id, selector, context) {
    originalJQOnce.apply($(selector, context), [id]);
    return drupalOnce(id, selector, context);
  }

  function remove(id, selector, context) {
    originalJQRemoveOnce.apply($(selector, context), [id]);
    return drupalOnce.remove(id, selector, context);
  }

  window.once = Object.assign(augmentedOnce, drupalOnce, {
    remove: remove
  });
})(jQuery, once);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

(function ($, window, Drupal, drupalSettings, _ref) {
  var isFocusable = _ref.isFocusable,
      tabbable = _ref.tabbable;
  Drupal.behaviors.AJAX = {
    attach: function attach(context, settings) {
      function loadAjaxBehavior(base) {
        var elementSettings = settings.ajax[base];

        if (typeof elementSettings.selector === 'undefined') {
          elementSettings.selector = "#".concat(base);
        }

        once('drupal-ajax', $(elementSettings.selector)).forEach(function (el) {
          elementSettings.element = el;
          elementSettings.base = base;
          Drupal.ajax(elementSettings);
        });
      }

      Object.keys(settings.ajax || {}).forEach(function (base) {
        return loadAjaxBehavior(base);
      });
      Drupal.ajax.bindAjaxLinks(document.body);
      once('ajax', '.use-ajax-submit').forEach(function (el) {
        var elementSettings = {};
        elementSettings.url = $(el.form).attr('action');
        elementSettings.setClick = true;
        elementSettings.event = 'click';
        elementSettings.progress = {
          type: 'throbber'
        };
        elementSettings.base = el.id;
        elementSettings.element = el;
        Drupal.ajax(elementSettings);
      });
    },
    detach: function detach(context, settings, trigger) {
      if (trigger === 'unload') {
        Drupal.ajax.expired().forEach(function (instance) {
          Drupal.ajax.instances[instance.instanceIndex] = null;
        });
      }
    }
  };

  Drupal.AjaxError = function (xmlhttp, uri, customMessage) {
    var statusCode;
    var statusText;
    var responseText;

    if (xmlhttp.status) {
      statusCode = "\n".concat(Drupal.t('An AJAX HTTP error occurred.'), "\n").concat(Drupal.t('HTTP Result Code: !status', {
        '!status': xmlhttp.status
      }));
    } else {
      statusCode = "\n".concat(Drupal.t('An AJAX HTTP request terminated abnormally.'));
    }

    statusCode += "\n".concat(Drupal.t('Debugging information follows.'));
    var pathText = "\n".concat(Drupal.t('Path: !uri', {
      '!uri': uri
    }));
    statusText = '';

    try {
      statusText = "\n".concat(Drupal.t('StatusText: !statusText', {
        '!statusText': xmlhttp.statusText.trim()
      }));
    } catch (e) {}

    responseText = '';

    try {
      responseText = "\n".concat(Drupal.t('ResponseText: !responseText', {
        '!responseText': xmlhttp.responseText.trim()
      }));
    } catch (e) {}

    responseText = responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi, '');
    responseText = responseText.replace(/[\n]+\s+/g, '\n');
    var readyStateText = xmlhttp.status === 0 ? "\n".concat(Drupal.t('ReadyState: !readyState', {
      '!readyState': xmlhttp.readyState
    })) : '';
    customMessage = customMessage ? "\n".concat(Drupal.t('CustomMessage: !customMessage', {
      '!customMessage': customMessage
    })) : '';
    this.message = statusCode + pathText + statusText + customMessage + responseText + readyStateText;
    this.name = 'AjaxError';
  };

  Drupal.AjaxError.prototype = new Error();
  Drupal.AjaxError.prototype.constructor = Drupal.AjaxError;

  Drupal.ajax = function (settings) {
    if (arguments.length !== 1) {
      throw new Error('Drupal.ajax() function must be called with one configuration object only');
    }

    var base = settings.base || false;
    var element = settings.element || false;
    delete settings.base;
    delete settings.element;

    if (!settings.progress && !element) {
      settings.progress = false;
    }

    var ajax = new Drupal.Ajax(base, element, settings);
    ajax.instanceIndex = Drupal.ajax.instances.length;
    Drupal.ajax.instances.push(ajax);
    return ajax;
  };

  Drupal.ajax.instances = [];

  Drupal.ajax.expired = function () {
    return Drupal.ajax.instances.filter(function (instance) {
      return instance && instance.element !== false && !document.body.contains(instance.element);
    });
  };

  Drupal.ajax.bindAjaxLinks = function (element) {
    once('ajax', '.use-ajax', element).forEach(function (ajaxLink) {
      var $linkElement = $(ajaxLink);
      var elementSettings = {
        progress: {
          type: 'throbber'
        },
        dialogType: $linkElement.data('dialog-type'),
        dialog: $linkElement.data('dialog-options'),
        dialogRenderer: $linkElement.data('dialog-renderer'),
        base: $linkElement.attr('id'),
        element: ajaxLink
      };
      var href = $linkElement.attr('href');

      if (href) {
        elementSettings.url = href;
        elementSettings.event = 'click';
      }

      Drupal.ajax(elementSettings);
    });
  };

  Drupal.Ajax = function (base, element, elementSettings) {
    var defaults = {
      event: element ? 'mousedown' : null,
      keypress: true,
      selector: base ? "#".concat(base) : null,
      effect: 'none',
      speed: 'none',
      method: 'replaceWith',
      progress: {
        type: 'throbber',
        message: Drupal.t('Please wait...')
      },
      submit: {
        js: true
      }
    };
    $.extend(this, defaults, elementSettings);
    this.commands = new Drupal.AjaxCommands();
    this.instanceIndex = false;

    if (this.wrapper) {
      this.wrapper = "#".concat(this.wrapper);
    }

    this.element = element;
    this.element_settings = elementSettings;
    this.elementSettings = elementSettings;

    if (this.element && this.element.form) {
      this.$form = $(this.element.form);
    }

    if (!this.url) {
      var $element = $(this.element);

      if ($element.is('a')) {
        this.url = $element.attr('href');
      } else if (this.element && element.form) {
        this.url = this.$form.attr('action');
      }
    }

    var originalUrl = this.url;
    this.url = this.url.replace(/\/nojs(\/|$|\?|#)/, '/ajax$1');

    if (drupalSettings.ajaxTrustedUrl[originalUrl]) {
      drupalSettings.ajaxTrustedUrl[this.url] = true;
    }

    var ajax = this;
    ajax.options = {
      url: ajax.url,
      data: ajax.submit,
      beforeSerialize: function beforeSerialize(elementSettings, options) {
        return ajax.beforeSerialize(elementSettings, options);
      },
      beforeSubmit: function beforeSubmit(formValues, elementSettings, options) {
        ajax.ajaxing = true;
        return ajax.beforeSubmit(formValues, elementSettings, options);
      },
      beforeSend: function beforeSend(xmlhttprequest, options) {
        ajax.ajaxing = true;
        return ajax.beforeSend(xmlhttprequest, options);
      },
      success: function success(response, status, xmlhttprequest) {
        if (typeof response === 'string') {
          response = $.parseJSON(response);
        }

        if (response !== null && !drupalSettings.ajaxTrustedUrl[ajax.url]) {
          if (xmlhttprequest.getResponseHeader('X-Drupal-Ajax-Token') !== '1') {
            var customMessage = Drupal.t('The response failed verification so will not be processed.');
            return ajax.error(xmlhttprequest, ajax.url, customMessage);
          }
        }

        return ajax.success(response, status);
      },
      complete: function complete(xmlhttprequest, status) {
        ajax.ajaxing = false;

        if (status === 'error' || status === 'parsererror') {
          return ajax.error(xmlhttprequest, ajax.url);
        }
      },
      dataType: 'json',
      jsonp: false,
      type: 'POST'
    };

    if (elementSettings.dialog) {
      ajax.options.data.dialogOptions = elementSettings.dialog;
    }

    if (ajax.options.url.indexOf('?') === -1) {
      ajax.options.url += '?';
    } else {
      ajax.options.url += '&';
    }

    var wrapper = "drupal_".concat(elementSettings.dialogType || 'ajax');

    if (elementSettings.dialogRenderer) {
      wrapper += ".".concat(elementSettings.dialogRenderer);
    }

    ajax.options.url += "".concat(Drupal.ajax.WRAPPER_FORMAT, "=").concat(wrapper);
    $(ajax.element).on(elementSettings.event, function (event) {
      if (!drupalSettings.ajaxTrustedUrl[ajax.url] && !Drupal.url.isLocal(ajax.url)) {
        throw new Error(Drupal.t('The callback URL is not local and not trusted: !url', {
          '!url': ajax.url
        }));
      }

      return ajax.eventResponse(this, event);
    });

    if (elementSettings.keypress) {
      $(ajax.element).on('keypress', function (event) {
        return ajax.keypressResponse(this, event);
      });
    }

    if (elementSettings.prevent) {
      $(ajax.element).on(elementSettings.prevent, false);
    }
  };

  Drupal.ajax.WRAPPER_FORMAT = '_wrapper_format';
  Drupal.Ajax.AJAX_REQUEST_PARAMETER = '_drupal_ajax';

  Drupal.Ajax.prototype.execute = function () {
    if (this.ajaxing) {
      return;
    }

    try {
      this.beforeSerialize(this.element, this.options);
      return $.ajax(this.options);
    } catch (e) {
      this.ajaxing = false;
      window.alert("An error occurred while attempting to process ".concat(this.options.url, ": ").concat(e.message));
      return $.Deferred().reject();
    }
  };

  Drupal.Ajax.prototype.keypressResponse = function (element, event) {
    var ajax = this;

    if (event.which === 13 || event.which === 32 && element.type !== 'text' && element.type !== 'textarea' && element.type !== 'tel' && element.type !== 'number') {
      event.preventDefault();
      event.stopPropagation();
      $(element).trigger(ajax.elementSettings.event);
    }
  };

  Drupal.Ajax.prototype.eventResponse = function (element, event) {
    event.preventDefault();
    event.stopPropagation();
    var ajax = this;

    if (ajax.ajaxing) {
      return;
    }

    try {
      if (ajax.$form) {
        if (ajax.setClick) {
          element.form.clk = element;
        }

        ajax.$form.ajaxSubmit(ajax.options);
      } else {
        ajax.beforeSerialize(ajax.element, ajax.options);
        $.ajax(ajax.options);
      }
    } catch (e) {
      ajax.ajaxing = false;
      window.alert("An error occurred while attempting to process ".concat(ajax.options.url, ": ").concat(e.message));
    }
  };

  Drupal.Ajax.prototype.beforeSerialize = function (element, options) {
    if (this.$form && document.body.contains(this.$form.get(0))) {
      var settings = this.settings || drupalSettings;
      Drupal.detachBehaviors(this.$form.get(0), settings, 'serialize');
    }

    options.data[Drupal.Ajax.AJAX_REQUEST_PARAMETER] = 1;
    var pageState = drupalSettings.ajaxPageState;
    options.data['ajax_page_state[theme]'] = pageState.theme;
    options.data['ajax_page_state[theme_token]'] = pageState.theme_token;
    options.data['ajax_page_state[libraries]'] = pageState.libraries;
  };

  Drupal.Ajax.prototype.beforeSubmit = function (formValues, element, options) {};

  Drupal.Ajax.prototype.beforeSend = function (xmlhttprequest, options) {
    if (this.$form) {
      options.extraData = options.extraData || {};
      options.extraData.ajax_iframe_upload = '1';
      var v = $.fieldValue(this.element);

      if (v !== null) {
        options.extraData[this.element.name] = v;
      }
    }

    $(this.element).prop('disabled', true);

    if (!this.progress || !this.progress.type) {
      return;
    }

    var progressIndicatorMethod = "setProgressIndicator".concat(this.progress.type.slice(0, 1).toUpperCase()).concat(this.progress.type.slice(1).toLowerCase());

    if (progressIndicatorMethod in this && typeof this[progressIndicatorMethod] === 'function') {
      this[progressIndicatorMethod].call(this);
    }
  };

  Drupal.theme.ajaxProgressThrobber = function (message) {
    var messageMarkup = typeof message === 'string' ? Drupal.theme('ajaxProgressMessage', message) : '';
    var throbber = '<div class="throbber">&nbsp;</div>';
    return "<div class=\"ajax-progress ajax-progress-throbber\">".concat(throbber).concat(messageMarkup, "</div>");
  };

  Drupal.theme.ajaxProgressIndicatorFullscreen = function () {
    return '<div class="ajax-progress ajax-progress-fullscreen">&nbsp;</div>';
  };

  Drupal.theme.ajaxProgressMessage = function (message) {
    return "<div class=\"message\">".concat(message, "</div>");
  };

  Drupal.theme.ajaxProgressBar = function ($element) {
    return $('<div class="ajax-progress ajax-progress-bar"></div>').append($element);
  };

  Drupal.Ajax.prototype.setProgressIndicatorBar = function () {
    var progressBar = new Drupal.ProgressBar("ajax-progress-".concat(this.element.id), $.noop, this.progress.method, $.noop);

    if (this.progress.message) {
      progressBar.setProgress(-1, this.progress.message);
    }

    if (this.progress.url) {
      progressBar.startMonitoring(this.progress.url, this.progress.interval || 1500);
    }

    this.progress.element = $(Drupal.theme('ajaxProgressBar', progressBar.element));
    this.progress.object = progressBar;
    $(this.element).after(this.progress.element);
  };

  Drupal.Ajax.prototype.setProgressIndicatorThrobber = function () {
    this.progress.element = $(Drupal.theme('ajaxProgressThrobber', this.progress.message));
    $(this.element).after(this.progress.element);
  };

  Drupal.Ajax.prototype.setProgressIndicatorFullscreen = function () {
    this.progress.element = $(Drupal.theme('ajaxProgressIndicatorFullscreen'));
    $('body').append(this.progress.element);
  };

  Drupal.Ajax.prototype.success = function (response, status) {
    var _this = this;

    if (this.progress.element) {
      $(this.progress.element).remove();
    }

    if (this.progress.object) {
      this.progress.object.stopMonitoring();
    }

    $(this.element).prop('disabled', false);
    var elementParents = $(this.element).parents('[data-drupal-selector]').addBack().toArray();
    var focusChanged = false;
    Object.keys(response || {}).forEach(function (i) {
      if (response[i].command && _this.commands[response[i].command]) {
        _this.commands[response[i].command](_this, response[i], status);

        if (response[i].command === 'invoke' && response[i].method === 'focus' || response[i].command === 'focusFirst') {
          focusChanged = true;
        }
      }
    });

    if (!focusChanged && this.element && !$(this.element).data('disable-refocus')) {
      var target = false;

      for (var n = elementParents.length - 1; !target && n >= 0; n--) {
        target = document.querySelector("[data-drupal-selector=\"".concat(elementParents[n].getAttribute('data-drupal-selector'), "\"]"));
      }

      if (target) {
        $(target).trigger('focus');
      }
    }

    if (this.$form && document.body.contains(this.$form.get(0))) {
      var settings = this.settings || drupalSettings;
      Drupal.attachBehaviors(this.$form.get(0), settings);
    }

    this.settings = null;
  };

  Drupal.Ajax.prototype.getEffect = function (response) {
    var type = response.effect || this.effect;
    var speed = response.speed || this.speed;
    var effect = {};

    if (type === 'none') {
      effect.showEffect = 'show';
      effect.hideEffect = 'hide';
      effect.showSpeed = '';
    } else if (type === 'fade') {
      effect.showEffect = 'fadeIn';
      effect.hideEffect = 'fadeOut';
      effect.showSpeed = speed;
    } else {
      effect.showEffect = "".concat(type, "Toggle");
      effect.hideEffect = "".concat(type, "Toggle");
      effect.showSpeed = speed;
    }

    return effect;
  };

  Drupal.Ajax.prototype.error = function (xmlhttprequest, uri, customMessage) {
    if (this.progress.element) {
      $(this.progress.element).remove();
    }

    if (this.progress.object) {
      this.progress.object.stopMonitoring();
    }

    $(this.wrapper).show();
    $(this.element).prop('disabled', false);

    if (this.$form && document.body.contains(this.$form.get(0))) {
      var settings = this.settings || drupalSettings;
      Drupal.attachBehaviors(this.$form.get(0), settings);
    }

    throw new Drupal.AjaxError(xmlhttprequest, uri, customMessage);
  };

  Drupal.theme.ajaxWrapperNewContent = function ($newContent, ajax, response) {
    return (response.effect || ajax.effect) !== 'none' && $newContent.filter(function (i) {
      return !($newContent[i].nodeName === '#comment' || $newContent[i].nodeName === '#text' && /^(\s|\n|\r)*$/.test($newContent[i].textContent));
    }).length > 1 ? Drupal.theme('ajaxWrapperMultipleRootElements', $newContent) : $newContent;
  };

  Drupal.theme.ajaxWrapperMultipleRootElements = function ($elements) {
    return $('<div></div>').append($elements);
  };

  Drupal.AjaxCommands = function () {};

  Drupal.AjaxCommands.prototype = {
    insert: function insert(ajax, response) {
      var $wrapper = response.selector ? $(response.selector) : $(ajax.wrapper);
      var method = response.method || ajax.method;
      var effect = ajax.getEffect(response);
      var settings = response.settings || ajax.settings || drupalSettings;
      var $newContent = $($.parseHTML(response.data, document, true));
      $newContent = Drupal.theme('ajaxWrapperNewContent', $newContent, ajax, response);

      switch (method) {
        case 'html':
        case 'replaceWith':
        case 'replaceAll':
        case 'empty':
        case 'remove':
          Drupal.detachBehaviors($wrapper.get(0), settings);
          break;

        default:
          break;
      }

      $wrapper[method]($newContent);

      if (effect.showEffect !== 'show') {
        $newContent.hide();
      }

      var $ajaxNewContent = $newContent.find('.ajax-new-content');

      if ($ajaxNewContent.length) {
        $ajaxNewContent.hide();
        $newContent.show();
        $ajaxNewContent[effect.showEffect](effect.showSpeed);
      } else if (effect.showEffect !== 'show') {
        $newContent[effect.showEffect](effect.showSpeed);
      }

      if ($newContent.parents('html').length) {
        $newContent.each(function (index, element) {
          if (element.nodeType === Node.ELEMENT_NODE) {
            Drupal.attachBehaviors(element, settings);
          }
        });
      }
    },
    remove: function remove(ajax, response, status) {
      var settings = response.settings || ajax.settings || drupalSettings;
      $(response.selector).each(function () {
        Drupal.detachBehaviors(this, settings);
      }).remove();
    },
    changed: function changed(ajax, response, status) {
      var $element = $(response.selector);

      if (!$element.hasClass('ajax-changed')) {
        $element.addClass('ajax-changed');

        if (response.asterisk) {
          $element.find(response.asterisk).append(" <abbr class=\"ajax-changed\" title=\"".concat(Drupal.t('Changed'), "\">*</abbr> "));
        }
      }
    },
    alert: function alert(ajax, response, status) {
      window.alert(response.text);
    },
    announce: function announce(ajax, response) {
      if (response.priority) {
        Drupal.announce(response.text, response.priority);
      } else {
        Drupal.announce(response.text);
      }
    },
    redirect: function redirect(ajax, response, status) {
      window.location = response.url;
    },
    css: function css(ajax, response, status) {
      $(response.selector).css(response.argument);
    },
    settings: function settings(ajax, response, status) {
      var ajaxSettings = drupalSettings.ajax;

      if (ajaxSettings) {
        Drupal.ajax.expired().forEach(function (instance) {
          if (instance.selector) {
            var selector = instance.selector.replace('#', '');

            if (selector in ajaxSettings) {
              delete ajaxSettings[selector];
            }
          }
        });
      }

      if (response.merge) {
        $.extend(true, drupalSettings, response.settings);
      } else {
        ajax.settings = response.settings;
      }
    },
    data: function data(ajax, response, status) {
      $(response.selector).data(response.name, response.value);
    },
    focusFirst: function focusFirst(ajax, response, status) {
      var focusChanged = false;
      var container = document.querySelector(response.selector);

      if (container) {
        var tabbableElements = tabbable(container);

        if (tabbableElements.length) {
          tabbableElements[0].focus();
          focusChanged = true;
        } else if (isFocusable(container)) {
          container.focus();
          focusChanged = true;
        }
      }

      if (ajax.hasOwnProperty('element') && !focusChanged) {
        ajax.element.focus();
      }
    },
    invoke: function invoke(ajax, response, status) {
      var $element = $(response.selector);
      $element[response.method].apply($element, _toConsumableArray(response.args));
    },
    restripe: function restripe(ajax, response, status) {
      $(response.selector).find('> tbody > tr:visible, > tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even');
    },
    update_build_id: function update_build_id(ajax, response, status) {
      $("input[name=\"form_build_id\"][value=\"".concat(response.old, "\"]")).val(response.new);
    },
    add_css: function add_css(ajax, response, status) {
      $('head').prepend(response.data);
    },
    message: function message(ajax, response) {
      var messages = new Drupal.Message(document.querySelector(response.messageWrapperQuerySelector));

      if (response.clearPrevious) {
        messages.clear();
      }

      messages.add(response.message, response.messageOptions);
    }
  };
})(jQuery, window, Drupal, drupalSettings, window.tabbable);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, drupalSettings) {
  Drupal.behaviors.activeLinks = {
    attach: function attach(context) {
      var path = drupalSettings.path;
      var queryString = JSON.stringify(path.currentQuery);
      var querySelector = path.currentQuery ? "[data-drupal-link-query='".concat(queryString, "']") : ':not([data-drupal-link-query])';
      var originalSelectors = ["[data-drupal-link-system-path=\"".concat(path.currentPath, "\"]")];
      var selectors;

      if (path.isFront) {
        originalSelectors.push('[data-drupal-link-system-path="<front>"]');
      }

      selectors = [].concat(originalSelectors.map(function (selector) {
        return "".concat(selector, ":not([hreflang])");
      }), originalSelectors.map(function (selector) {
        return "".concat(selector, "[hreflang=\"").concat(path.currentLanguage, "\"]");
      }));
      selectors = selectors.map(function (current) {
        return current + querySelector;
      });
      var activeLinks = context.querySelectorAll(selectors.join(','));
      var il = activeLinks.length;

      for (var i = 0; i < il; i++) {
        activeLinks[i].classList.add('is-active');
      }
    },
    detach: function detach(context, settings, trigger) {
      if (trigger === 'unload') {
        var activeLinks = context.querySelectorAll('[data-drupal-link-system-path].is-active');
        var il = activeLinks.length;

        for (var i = 0; i < il; i++) {
          activeLinks[i].classList.remove('is-active');
        }
      }
    }
  };
})(Drupal, drupalSettings);;
var urlParams = (function (url) {
  'use strict';

  var result = {};
  var idx = url.lastIndexOf('?');

  if (idx > 0) {
    var params = url.substring(idx + 1).split('&');

    for (var i = 0; i < params.length; i++) {
      idx = params[i].indexOf('=');

      if (idx > 0) {
        result[params[i].substring(0, idx)] = params[i].substring(idx + 1);
      }
    }
  }

  return result;
})(window.location.href);

var mxLoadResources = false;
var mxBasePath = 'src';
;
// NOTE: Modified to support data URIs for images, ie. data:image/*
(function(){var c=void 0,n=!0,s=null,C=!1,J=["aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),
"all-scroll,col-resize,crosshair,default,e-resize,hand,help,move,n-resize,ne-resize,no-drop,not-allowed,nw-resize,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,vertical-text,w-resize,wait".split(","),"armenian,decimal,decimal-leading-zero,disc,georgian,lower-alpha,lower-greek,lower-latin,lower-roman,square,upper-alpha,upper-latin,upper-roman".split(","),"100,200,300,400,500,600,700,800,900,bold,bolder,lighter".split(","),"block-level,inline-level,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group".split(","),
"condensed,expanded,extra-condensed,extra-expanded,narrower,semi-condensed,semi-expanded,ultra-condensed,ultra-expanded,wider".split(","),"inherit,inline,inline-block,inline-box,inline-flex,inline-grid,inline-list-item,inline-stack,inline-table,run-in".split(","),"behind,center-left,center-right,far-left,far-right,left-side,leftwards,right-side,rightwards".split(","),"large,larger,small,smaller,x-large,x-small,xx-large,xx-small".split(","),"dashed,dotted,double,groove,outset,ridge,solid".split(","),
"ease,ease-in,ease-in-out,ease-out,linear,step-end,step-start".split(","),"at,closest-corner,closest-side,ellipse,farthest-corner,farthest-side".split(","),"baseline,middle,sub,super,text-bottom,text-top".split(","),"caption,icon,menu,message-box,small-caption,status-bar".split(","),"fast,faster,slow,slower,x-fast,x-slow".split(","),["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y",
"round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],
["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],
["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]],L={animation:{cssPropBits:517,cssLitGroup:[J[10],J[24],J[29],J[45],J[48],J[54],J[63],J[71],J[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[J[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[J[24],J[48],J[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[J[29],J[48],
J[54],J[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[J[48],J[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[J[48],J[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[J[45],J[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[J[10],J[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[J[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[J[7],J[42],J[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,
cssLitGroup:[J[59],J[62],J[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[J[0],J[18],J[25],J[31],J[34],J[42],J[48],J[49],J[52],J[56],J[61],J[68],J[71],J[74],J[75]],cssFns:"image(),linear-gradient(),radial-gradient(),repeating-linear-gradient(),repeating-radial-gradient(),rgb(),rgba()".split(",")},"background-attachment":{cssPropBits:0,cssLitGroup:[J[48],J[61],J[68],J[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[J[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,
cssLitGroup:[J[48],J[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[J[31],J[42],J[48],J[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[J[18],J[48],J[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[J[34],J[48],J[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[J[0],J[9],J[47],J[62],J[64],J[69],J[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border",
"border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[J[9],J[62],J[64],J[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[J[47],J[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[J[59],J[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style",
"border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[J[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius",
"border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[J[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[J[60],J[71],J[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[J[0],J[48],J[64],J[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[J[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[J[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[J[42],J[54],J[71]],cssFns:[]},
clip:{cssPropBits:0,cssLitGroup:[J[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[J[71],J[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[J[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[J[1],J[48],J[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[J[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[J[4],J[6],J[20],J[52],J[67],J[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[J[67],J[71]],cssFns:[]},
"display-inside":{cssPropBits:0,cssLitGroup:[J[20],J[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[J[4],J[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[J[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[J[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},"float":{cssPropBits:0,cssLitGroup:[J[42],J[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[J[3],J[8],J[13],J[16],J[41],J[48],J[49],J[69],J[72],J[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[J[16],
J[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[J[8],J[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[J[5],J[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[J[41],J[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[J[72],J[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[J[3],J[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[J[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[J[72]],cssFns:[]},"list-style":{cssPropBits:16,
cssLitGroup:[J[2],J[40],J[57],J[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[J[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[J[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[J[2],J[57],J[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom",
"margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[J[52],J[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[J[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[J[0],J[9],J[47],J[62],J[64],J[65],J[69],J[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[J[0],J[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style",
"outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[J[52],J[62],J[75],J[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[J[55],J[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[J[44],J[52],J[62],J[75],J[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[J[42],J[51],J[52],J[53]],cssFns:[]},"page-break-before":"page-break-after",
"page-break-inside":{cssPropBits:0,cssLitGroup:[J[52],J[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[J[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[J[31],J[42],J[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[J[21],J[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[J[52],J[70],J[71],J[74]],cssFns:[]},
position:{cssPropBits:0,cssLitGroup:[J[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[J[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[J[39],J[54],J[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[J[71],J[72],J[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[J[51],J[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[J[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[J[58],J[71]],cssFns:[]},"speech-rate":{cssPropBits:5,
cssLitGroup:[J[14],J[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[J[52],J[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[J[42],J[56],J[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[J[19],J[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[J[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[J[26],J[71]],cssFns:[]},"text-wrap":{cssPropBits:0,
cssLitGroup:[J[46],J[71],J[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[J[71]],cssFns:"matrix(),perspective(),rotate(),rotate3d(),rotatex(),rotatey(),rotatez(),scale(),scale3d(),scalex(),scaley(),scalez(),skew(),skewx(),skewy(),translate(),translate3d(),translatex(),translatey(),translatez()".split(",")},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[J[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[J[10],J[48],J[50],J[71]],cssFns:["cubic-bezier()",
"steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[J[48],J[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[J[30],J[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[J[12],J[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[J[27],J[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[J[17],J[69]],
cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[J[22],J[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[J[32],J[72]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[J[36],J[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[J[0],J[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[J[0],J[31],J[42],J[48],
J[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[J[0],J[11],J[31],J[42],J[48],J[56],J[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[J[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[J[48],J[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[J[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius",
"rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay",
"translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"},O;for(O in L)"string"===typeof L[O]&&Object.hasOwnProperty.call(L,O)&&(L[O]=L[L[O]]);"undefined"!==typeof window&&(window.cssSchema=L);var U,X;
(function(){function g(a){var f=parseInt(a.substring(1),16);return 65535<f?(f-=65536,String.fromCharCode(55296+(f>>10),56320+(f&1023))):f==f?String.fromCharCode(f):" ">a[1]?"":a[1]}function w(a,f){return'"'+a.replace(/[\u0000-\u001f\\\"<>]/g,f)+'"'}function M(a){return E[a]||(E[a]="\\"+a.charCodeAt(0).toString(16)+" ")}function x(a){return e[a]||(e[a]=("\u0010">a?"%0":"%")+a.charCodeAt(0).toString(16))}var E={"\\":"\\\\"},e={"\\":"%5c"},v=RegExp("\\uFEFF|U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?|url[(][\\t\\n\\f ]*(?:\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)[\\t\\n\\f ]*[)]|(?!url[(])-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*[(]|(?:@?-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))|#)(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*|\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)(?:%|-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)?|<\!--|--\>|[\\t\\n\\f ]+|/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)|[~|^$*]=|[^\"'\\\\/]|/(?![/*])","gi"),
b=RegExp("\\\\(?:(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])|[\\n\\f])","g"),a=RegExp("^url\\([\\t\\n\\f ]*[\"']?|[\"']?[\\t\\n\\f ]*\\)$","gi");X=function(a){return a.replace(b,g)};U=function(b){for(var b=(""+b).replace(/\r\n?/g,"\n").match(v)||[],f=0,h=" ",d=0,y=b.length;d<y;++d){var l=X(b[d]),V=l.length,g=l.charCodeAt(0),l=34==g||39==g?w(l.substring(1,V-1),M):47==g&&1<V||"\\"==l||"--\>"==l||"<\!--"==l||"\ufeff"==l||32>=g?" ":
/url\(/i.test(l)?"url("+w(l.replace(a,""),x)+")":l;if(h!=l||" "!=l)b[f++]=h=l}b.length=f;return b}})();"undefined"!==typeof window&&(window.lexCss=U,window.decodeCss=X);var Y=function(){function g(d){d=(""+d).match(k);return!d?s:new e(v(d[1]),v(d[2]),v(d[3]),v(d[4]),v(d[5]),v(d[6]),v(d[7]))}function w(d,a){return"string"==typeof d?encodeURI(d).replace(a,M):s}function M(d){d=d.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(d>>4&15)+"0123456789ABCDEF".charAt(d&15)}function x(d){if(d===s)return s;for(var d=d.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),a=b,h;(h=d.replace(a,"$1"))!=d;d=h);return d}function E(d,h){var b=d.T(),f=h.K();f?b.ga(h.j):f=h.X();
f?b.da(h.n):f=h.Y();f?b.ea(h.k):f=h.$();var g=h.g,k=x(g);if(f)b.ca(h.V()),k=k&&k.replace(a,"");else if(f=!!g){if(47!==k.charCodeAt(0))var k=x(b.g||"").replace(a,""),e=k.lastIndexOf("/")+1,k=x((e?k.substring(0,e):"")+x(g)).replace(a,"")}else k=k&&k.replace(a,""),k!==g&&b.G(k);f?b.G(k):f=h.aa();f?b.O(h.l):f=h.Z();f&&b.fa(h.o);return b}function e(d,a,h,f,b,g,k){this.j=d;this.n=a;this.k=h;this.h=f;this.g=b;this.l=g;this.o=k}function v(d){return"string"==typeof d&&0<d.length?d:s}var b=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),
a=/^(?:\.\.\/)*(?:\.\.$)?/;e.prototype.toString=function(){var d=[];s!==this.j&&d.push(this.j,":");s!==this.k&&(d.push("//"),s!==this.n&&d.push(this.n,"@"),d.push(this.k),s!==this.h&&d.push(":",this.h.toString()));s!==this.g&&d.push(this.g);s!==this.l&&d.push("?",this.l);s!==this.o&&d.push("#",this.o);return d.join("")};e.prototype.T=function(){return new e(this.j,this.n,this.k,this.h,this.g,this.l,this.o)};e.prototype.W=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()};e.prototype.ga=
function(d){this.j=d?d:s};e.prototype.K=function(){return s!==this.j};e.prototype.da=function(d){this.n=d?d:s};e.prototype.X=function(){return s!==this.n};e.prototype.ea=function(d){this.k=d?d:s;this.G(this.g)};e.prototype.Y=function(){return s!==this.k};e.prototype.V=function(){return this.h&&decodeURIComponent(this.h)};e.prototype.ca=function(d){if(d){d=Number(d);if(d!==(d&65535))throw Error("Bad port number "+d);this.h=""+d}else this.h=s};e.prototype.$=function(){return s!==this.h};e.prototype.U=
function(){return this.g&&decodeURIComponent(this.g)};e.prototype.G=function(d){d?(d=""+d,this.g=!this.k||/^\//.test(d)?d:"/"+d):this.g=s};e.prototype.O=function(d){this.l=d?d:s};e.prototype.aa=function(){return s!==this.l};e.prototype.ba=function(d){if("object"===typeof d&&!(d instanceof Array)&&(d instanceof Object||"[object Array]"!==Object.prototype.toString.call(d))){var a=[],h=-1,f;for(f in d){var b=d[f];"string"===typeof b&&(a[++h]=f,a[++h]=b)}d=a}for(var a=[],h="",g=0;g<d.length;)f=d[g++],
b=d[g++],a.push(h,encodeURIComponent(f.toString())),h="&",b&&a.push("=",encodeURIComponent(b.toString()));this.l=a.join("")};e.prototype.fa=function(d){this.o=d?d:s};e.prototype.Z=function(){return s!==this.o};var k=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,f=/[#\/\?@]/g,h=/[\#\?]/g;e.parse=g;e.create=function(d,a,b,g,k,Q,N){d=new e(w(d,f),w(a,f),"string"==typeof b?encodeURIComponent(b):s,0<g?g.toString():s,w(k,h),s,"string"==typeof N?encodeURIComponent(N):
s);Q&&("string"===typeof Q?d.O(Q.replace(/[^?&=0-9A-Za-z_\-~.%]/g,M)):d.ba(Q));return d};e.N=E;e.ma=x;e.ha={ua:function(d){return/\.html$/.test(g(d).U())?"text/html":"application/javascript"},N:function(d,a){return d?E(g(d),g(a)).toString():""+a}};return e}();"undefined"!==typeof window&&(window.URI=Y);var aa=c,ba=c,da=c,Z=c;
(function(){function g(a){return"string"===typeof a?'url("'+a.replace(e,w)+'")':'url("about:blank")'}function w(a){return v[a]}function M(a,d){return a?Y.ha.N(a,d):d}function x(h,d,f){if(!f)return s;var g=(""+h).match(b);return g&&(!g[1]||a.test(g[1]))?f(h,d):s}function E(a){return a.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}var e=/[\n\f\r\"\'()*<>]/g,v={"\n":"%0a","\u000c":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"},
b=/^(?:([^:/?# ]+):)?/,a=/^(?:https?|mailto|data)$/i;aa=function(){var a={};return function y(f,b,k,e,N){var f=E(f),u=L[f];if(!u||"object"!==typeof u)b.length=0;else{for(var i=u.cssPropBits,q=i&80,B=i&1536,F=NaN,r=0,o=0;r<b.length;++r){var j=b[r].toLowerCase(),I=j.charCodeAt(0),R,v,P,S,D,w;if(32===I)j="";else if(34===I)j=16===q?k?g(x(M(e,X(b[r].substring(1,j.length-1))),f,k)):"":i&8&&!(q&q-1)?j:"";else if("inherit"!==j){if(D=u.cssLitGroup){var G;if(!(G=u.cssLitMap)){G={};for(var K=D.length;0<=--K;)for(var A=
D[K],T=A.length;0<=--T;)G[A[T]]=a;G=u.cssLitMap=G}D=G}else D=a;if(!(w=D,w[E(j)]===a))if(35===I&&/^#(?:[0-9a-f]{3}){1,2}$/.test(j))j=i&2?j:"";else if(48<=I&&57>=I)j=i&1?j:"";else if(R=j.charCodeAt(1),v=j.charCodeAt(2),P=48<=R&&57>=R,S=48<=v&&57>=v,43===I&&(P||46===R&&S))j=i&1?(P?"":"0")+j.substring(1):"";else if(45===I&&(P||46===R&&S))j=i&4?(P?"-":"-0")+j.substring(1):i&1?"0":"";else if(46===I&&P)j=i&1?"0"+j:"";else if('url("'===j.substring(0,5))j=k&&i&16?g(x(M(e,b[r].substring(5,j.length-2)),f,k)):
"";else if("("===j.charAt(j.length-1))a:{D=b;G=r;j=1;K=G+1;for(I=D.length;K<I&&j;)A=D[K++],j+=")"===A?-1:/^[^"']*\($/.test(A);if(!j){j=D[G].toLowerCase();I=E(j);D=D.splice(G,K-G,"");G=u.cssFns;K=0;for(A=G.length;K<A;++K)if(G[K].substring(0,I.length)==I){D[0]=D[D.length-1]="";y(G[K],D,k,e);j=j+D.join(" ")+")";break a}}j=""}else j=B&&/^-?[a-z_][\w\-]*$/.test(j)&&!/__$/.test(j)?N&&512===B?b[r]+N:1024===B&&L[j]&&"number"===typeof L[j].oa?j:"":/^\w+$/.test(j)&&64===q&&i&8?F+1===o?(b[F]=b[F].substring(0,
b[F].length-1)+" "+j+'"',""):(F=o,'"'+j+'"'):""}j&&(b[o++]=j)}1===o&&'url("about:blank")'===b[0]&&(o=0);b.length=o}}}();var k=RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),f={};f[">"]=
f["+"]=f["~"]=f;ba=function(a,d,b){function g(i,r){function o(b,f,g){var y,e,i,l,o,m=n;y="";if(b<f)if(o=a[b],"*"===o)++b,y=o;else if(/^[a-zA-Z]/.test(o)&&(e=x(o.toLowerCase(),[])))"tagName"in e&&(o=e.tagName),++b,y=o;for(l=i=e="";m&&b<f;++b)if(o=a[b],"#"===o.charAt(0))/^#_|__$|[^\w#:\-]/.test(o)?m=C:e+=o+v;else if("."===o)++b<f&&/^[0-9A-Za-z:_\-]+$/.test(o=a[b])&&!/^_|__$/.test(o)?e+="."+o:m=C;else if(b+1<f&&"["===a[b]){++b;var H=a[b++].toLowerCase();o=$.m[y+"::"+H];o!==+o&&(o=$.m["*::"+H]);var W;
d.ia?(W=d.ia(y,H),"string"!==typeof W&&(m=C,W=H),m&&o!==+o&&(o=$.d.NONE)):(W=H,o!==+o&&(m=C));var p=H="",ca=C;/^[~^$*|]?=$/.test(a[b])&&(H=a[b++],p=a[b++],/^[0-9A-Za-z:_\-]+$/.test(p)?p='"'+p+'"':"]"===p&&(p='""',--b),/^"([^\"\\]|\\.)*"$/.test(p)||(m=C),(ca="i"===a[b])&&++b);"]"!==a[b]&&(++b,m=C);switch(o){case $.d.CLASSES:case $.d.LOCAL_NAME:case $.d.NONE:break;case $.d.GLOBAL_NAME:case $.d.ID:case $.d.IDREF:("="===H||"~="===H||"$="===H)&&'""'!=p&&!ca?p='"'+p.substring(1,p.length-1)+v+'"':"|="===
H||""===H||(m=C);break;case $.d.URI:case $.d.URI_FRAGMENT:""!==H&&(m=C);break;default:m=C}m&&(i+="["+W.replace(/[^\w-]/g,"\\$&")+H+p+(ca?" i]":"]"))}else if(b<f&&":"===a[b])if(o=a[++b],k.test(o))l+=":"+o;else break;else break;b!==f&&(m=C);m&&(b=(y+e).replace(/[^ .*#\w-]/g,"\\$&")+i+l+g)&&j.push(b);return m}" "===a[i]&&++i;r-1!==i&&" "===a[r]&&--r;for(var j=[],l=i,q=n,u=i;q&&u<r;++u){var B=a[u];if(f[B]===f||" "===B)o(l,u,B)?l=u+1:q=C}o(l,r,"")||(q=C);return q?(j.length&&(l=j.join(""),e!==s&&(l="."+
e+" "+l),N.push(l)),n):!b||b(a.slice(i,r))}var e=d.na,v=d.L,x=d.Aa,N=[],u=0,i,q=0,B;for(i=0;i<a.length;++i)if(B=a[i],"("==B||"["==B?(++q,n):")"==B||"]"==B?(q&&--q,n):!(" "==a[i]&&(q||f[a[i-1]]===f||f[a[i+1]]===f)))a[u++]=a[i];a.length=u;u=a.length;for(i=q=0;i<u;++i)if(","===a[i]){if(!g(q,i))return s;q=i+1}return!g(q,u)?s:N};(function(){var a=/^\w/,d=RegExp("^(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*)(?: , (?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*))*$",
"i");Z=function(b){for(var b=b.slice(),f=b.length,g=0,k=0;k<f;++k){var e=b[k];" "!=e&&(b[g++]=e)}b.length=g;b=b.join(" ");return b=!b.length?"":!d.test(b)?"not all":a.test(b)?b:"not all , "+b}})();(function(){function a(b){var d=/^\s*[']([^']*)[']\s*$/,f=/^\s*url\s*[(]["]([^"]*)["][)]\s*$/,g=/^\s*url\s*[(][']([^']*)['][)]\s*$/,h=/^\s*url\s*[(]([^)]*)[)]\s*$/,k;return(k=/^\s*["]([^"]*)["]\s*$/.exec(b))||(k=d.exec(b))||(k=f.exec(b))||(k=g.exec(b))||(k=h.exec(b))?k[1]:s}function b(f,g,k,e,v,w,u){function i(){r=
F.length&&F[F.length-1]===s}var q=c,B=u||[0],F=[],r=C;fa(g,{startStylesheet:function(){q=[]},endStylesheet:function(){},startAtrule:function(g,j){if(r)g=s;else if("@media"===g)q.push("@media"," ",Z(j));else if("@keyframes"===g||"@-webkit-keyframes"===g){var i=j[0];1===j.length&&!/__$|[^\w\-]/.test(i)?(q.push(g," ",i+k.L),g="@keyframes"):g=s}else if("@import"===g&&0<j.length)if(g=s,"function"===typeof w){var l=Z(j.slice(1));if("not all"!==l){++B[0];var u=[];q.push(u);var E=x(M(f,a(j[0])),function(a){var f=
b(E,a.qa,k,e,v,w,B);--B[0];a=l?{toString:function(){return"@media "+l+" {"+f.result+"}"}}:f.result;u[0]=a;w(a,!!B[0])},v)}}else window.console&&window.console.log("@import "+j.join(" ")+" elided");r=!g;F.push(g)},endAtrule:function(){F.pop();r||q.push(";");i()},startBlock:function(){r||q.push("{")},endBlock:function(){r||(q.push("}"),r=n)},startRuleset:function(a){if(!r){var b=c;"@keyframes"===F[F.length-1]?(b=a.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),
r=!b,b&&(b=b[0].replace(/ +/g,""))):(a=ba(a,k),!a||!a.length?r=n:b=a.join(", "));r||q.push(b,"{")}F.push(s)},endRuleset:function(){F.pop();r||q.push("}");i()},declaration:function(a,b){if(!r){var d=C,g=b.length;2<=g&&"!"===b[g-2]&&"important"===b[g-1].toLowerCase()&&(d=n,b.length-=2);aa(a,b,e,f,k.L);b.length&&q.push(a,":",b.join(" "),d?" !important;":";")}}});return{result:{toString:function(){return q.join("")}},va:!!B[0]}}da=function(a,f,g,k){return b(a,f,g,k,c,c).result.toString()}})()})();
"undefined"!==typeof window&&(window.sanitizeCssProperty=aa,window.sanitizeCssSelectorList=ba,window.sanitizeStylesheet=da,window.sanitizeMediaQuery=Z);var fa,ga;
(function(){function g(b,a,g,f,h){for(var d=a++;a<g&&"{"!==b[a]&&";"!==b[a];)++a;if(a<g&&(h||";"===b[a])){var h=d+1,e=a;h<g&&" "===b[h]&&++h;e>h&&" "===b[e-1]&&--e;f.startAtrule&&f.startAtrule(b[d].toLowerCase(),b.slice(h,e));a="{"===b[a]?w(b,a,g,f):a+1;f.endAtrule&&f.endAtrule()}return a}function w(b,a,k,f){++a;for(f.startBlock&&f.startBlock();a<k;){var h=b[a].charAt(0);if("}"==h){++a;break}a=" "===h||";"===h?a+1:"@"===h?g(b,a,k,f,C):"{"===h?w(b,a,k,f):M(b,a,k,f)}f.endBlock&&f.endBlock();return a}
function M(b,a,g,f){var h=a,d=x(b,a,g,n);if(0>d)return d=~d,d===h?d+1:d;var y=b[d];if("{"!==y)return d===h?d+1:d;a=d+1;d>h&&" "===b[d-1]&&--d;for(f.startRuleset&&f.startRuleset(b.slice(h,d));a<g;){y=b[a];if("}"===y){++a;break}a=" "===y?a+1:e(b,a,g,f)}f.endRuleset&&f.endRuleset();return a}function x(b,a,g,f){for(var h,d=[],e=-1;a<g;++a)if(h=b[a].charAt(0),"["===h||"("===h)d[++e]=h;else if("]"===h&&"["===d[e]||")"===h&&"("===d[e])--e;else if("{"===h||"}"===h||";"===h||"@"===h||":"===h&&!f)break;0<=
e&&(a=~(a+1));return a}function E(b,a,g){for(;a<g&&";"!==b[a]&&"}"!==b[a];)++a;return a<g&&";"===b[a]?a+1:a}function e(b,a,g,f){var h=b[a++];if(!v.test(h))return E(b,a,g);a<g&&" "===b[a]&&++a;if(a==g||":"!==b[a])return E(b,a,g);++a;a<g&&" "===b[a]&&++a;var d=x(b,a,g,C);if(0>d)d=~d;else{for(var e=[],l=0,w=a;w<d;++w)a=b[w]," "!==a&&(e[l++]=a);if(d<g){do{a=b[d];if(";"===a||"}"===a)break;l=0}while(++d<g);";"===a&&++d}l&&f.declaration&&f.declaration(h.toLowerCase(),e)}return d}fa=function(b,a){var e=U(b);
a.startStylesheet&&a.startStylesheet();for(var f=0,h=e.length;f<h;)f=" "===e[f]?f+1:f<h?"@"===e[f].charAt(0)?g(e,f,h,a,n):M(e,f,h,a):f;a.endStylesheet&&a.endStylesheet()};var v=/^-?[a-z]/i;ga=function(b,a){for(var g=U(b),f=0,h=g.length;f<h;)f=" "!==g[f]?e(g,f,h,a):f+1}})();"undefined"!==typeof window&&(window.parseCssStylesheet=fa,window.parseCssDeclarations=ga);var $={d:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};$.atype=$.d;
$.m={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,
"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,
"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,
"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,
"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,
"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,
"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,
"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,
"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,
"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,
"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0};$.ATTRIBS=$.m;$.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256};$.eflags=$.c;
$.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,
kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2};$.ELEMENTS=$.f;
$.Q={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",
cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",
form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",
label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",
progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",
th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"};$.ELEMENT_DOM_INTERFACES=$.Q;$.P={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2};$.ueffects=$.P;
$.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1};$.URIEFFECTS=$.J;$.M={UNSANDBOXED:2,SANDBOXED:1,DATA:0};$.ltypes=$.M;$.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2};$.LOADERTYPES=$.I;
"undefined"!==typeof window&&(window.html4=$);var ha=function(g){function w(a){if(i.hasOwnProperty(a))return i[a];var b=a.match(q);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(B))?String.fromCharCode(parseInt(b[1],16)):r&&F.test(a)?(r.innerHTML="&"+a+";",b=r.textContent,i[a]=b):"&"+a+";"}function M(a,b){return w(b)}function x(a){return a.replace(j,M)}function E(a){return(""+a).replace(R,"&amp;").replace(P,"&lt;").replace(S,"&gt;").replace(D,"&#34;")}function e(a){return a.replace(ia,"&amp;$1").replace(P,"&lt;").replace(S,"&gt;")}
function v(b){var d={z:b.z||b.cdata,A:b.A||b.comment,B:b.B||b.endDoc,t:b.t||b.endTag,e:b.e||b.pcdata,F:b.F||b.rcdata,H:b.H||b.startDoc,w:b.w||b.startTag};return function(b,g){var f;var H=/(<\/|<\!--|<[!?]|[&<>])/g;f=b+"";if(G)f=f.split(H);else{for(var e=[],h=0,j;(j=H.exec(f))!==s;)e.push(f.substring(h,j.index)),e.push(j[0]),h=j.index+j[0].length;e.push(f.substring(h));f=e}a(d,f,0,{r:C,C:C},g)}}function b(b,d,g,f,t){return function(){a(b,d,g,f,t)}}function a(a,d,p,e,t){try{a.H&&0==p&&a.H(t);for(var h,
z,j,i=d.length;p<i;){var o=d[p++],l=d[p];switch(o){case "&":I.test(l)?(a.e&&a.e("&"+l,t,A,b(a,d,p,e,t)),p++):a.e&&a.e("&amp;",t,A,b(a,d,p,e,t));break;case "</":if(h=/^([-\w:]+)[^\'\"]*/.exec(l))if(h[0].length===l.length&&">"===d[p+1])p+=2,j=h[1].toLowerCase(),a.t&&a.t(j,t,A,b(a,d,p,e,t));else{var m=d,q=p,r=a,u=t,v=A,y=e,w=f(m,q);w?(r.t&&r.t(w.name,u,v,b(r,m,q,y,u)),p=w.next):p=m.length}else a.e&&a.e("&lt;/",t,A,b(a,d,p,e,t));break;case "<":if(h=/^([-\w:]+)\s*\/?/.exec(l))if(h[0].length===l.length&&
">"===d[p+1]){p+=2;j=h[1].toLowerCase();a.w&&a.w(j,[],t,A,b(a,d,p,e,t));var B=g.f[j];B&K&&(p=k(d,{name:j,next:p,c:B},a,t,A,e))}else{var m=d,q=a,r=t,u=A,v=e,x=f(m,p);x?(q.w&&q.w(x.name,x.R,r,u,b(q,m,x.next,v,r)),p=x.c&K?k(m,x,q,r,u,v):x.next):p=m.length}else a.e&&a.e("&lt;",t,A,b(a,d,p,e,t));break;case "<\!--":if(!e.C){for(z=p+1;z<i&&!(">"===d[z]&&/--$/.test(d[z-1]));z++);if(z<i){if(a.A){var D=d.slice(p,z).join("");a.A(D.substr(0,D.length-2),t,A,b(a,d,z+1,e,t))}p=z+1}else e.C=n}e.C&&a.e&&a.e("&lt;!--",
t,A,b(a,d,p,e,t));break;case "<!":if(/^\w/.test(l)){if(!e.r){for(z=p+1;z<i&&">"!==d[z];z++);z<i?p=z+1:e.r=n}e.r&&a.e&&a.e("&lt;!",t,A,b(a,d,p,e,t))}else a.e&&a.e("&lt;!",t,A,b(a,d,p,e,t));break;case "<?":if(!e.r){for(z=p+1;z<i&&">"!==d[z];z++);z<i?p=z+1:e.r=n}e.r&&a.e&&a.e("&lt;?",t,A,b(a,d,p,e,t));break;case ">":a.e&&a.e("&gt;",t,A,b(a,d,p,e,t));break;case "":break;default:a.e&&a.e(o,t,A,b(a,d,p,e,t))}}a.B&&a.B(t)}catch(E){if(E!==A)throw E;}}function k(a,d,f,h,t,j){var z=a.length;T.hasOwnProperty(d.name)||
(T[d.name]=RegExp("^"+d.name+"(?:[\\s\\/]|$)","i"));for(var i=T[d.name],k=d.next,l=d.next+1;l<z&&!("</"===a[l-1]&&i.test(a[l]));l++);l<z&&(l-=1);z=a.slice(k,l).join("");if(d.c&g.c.CDATA)f.z&&f.z(z,h,t,b(f,a,l,j,h));else if(d.c&g.c.RCDATA)f.F&&f.F(e(z),h,t,b(f,a,l,j,h));else throw Error("bug");return l}function f(a,b){var d=/^([-\w:]+)/.exec(a[b]),f={};f.name=d[1].toLowerCase();f.c=g.f[f.name];for(var e=a[b].substr(d[0].length),h=b+1,j=a.length;h<j&&">"!==a[h];h++)e+=a[h];if(!(j<=h)){for(var l=[];""!==
e;)if(d=ja.exec(e))if(d[4]&&!d[5]||d[6]&&!d[7]){for(var d=d[4]||d[6],i=C,e=[e,a[h++]];h<j;h++){if(i){if(">"===a[h])break}else 0<=a[h].indexOf(d)&&(i=n);e.push(a[h])}if(j<=h)break;e=e.join("")}else{var i=d[1].toLowerCase(),k;if(d[2]){k=d[3];var m=k.charCodeAt(0);if(34===m||39===m)k=k.substr(1,k.length-2);k=x(k.replace(o,""))}else k="";l.push(i,k);e=e.substr(d[0].length)}else e=e.replace(/^[\s\S][^a-z\s]*/,"");f.R=l;f.next=h+1;return f}}function h(a){function b(a,d){f||d.push(a)}var d,f;return v({startDoc:function(){d=
[];f=C},startTag:function(b,e,h){if(!f&&g.f.hasOwnProperty(b)){var j=g.f[b];if(!(j&g.c.FOLDABLE)){var k=a(b,e);if(k){if("object"!==typeof k)throw Error("tagPolicy did not return object (old API?)");if("attribs"in k)e=k.attribs;else throw Error("tagPolicy gave no attribs");var i;"tagName"in k?(i=k.tagName,k=g.f[i]):(i=b,k=j);if(j&g.c.OPTIONAL_ENDTAG){var l=d[d.length-1];l&&l.D===b&&(l.v!==i||b!==i)&&h.push("</",l.v,">")}j&g.c.EMPTY||d.push({D:b,v:i});h.push("<",i);b=0;for(l=e.length;b<l;b+=2){var m=
e[b],o=e[b+1];o!==s&&o!==c&&h.push(" ",m,'="',E(o),'"')}h.push(">");j&g.c.EMPTY&&!(k&g.c.EMPTY)&&h.push("</",i,">")}else f=!(j&g.c.EMPTY)}}},endTag:function(a,b){if(f)f=C;else if(g.f.hasOwnProperty(a)){var e=g.f[a];if(!(e&(g.c.EMPTY|g.c.FOLDABLE))){if(e&g.c.OPTIONAL_ENDTAG)for(e=d.length;0<=--e;){var h=d[e].D;if(h===a)break;if(!(g.f[h]&g.c.OPTIONAL_ENDTAG))return}else for(e=d.length;0<=--e&&d[e].D!==a;);if(!(0>e)){for(h=d.length;--h>e;){var j=d[h].v;g.f[j]&g.c.OPTIONAL_ENDTAG||b.push("</",j,">")}e<
d.length&&(a=d[e].v);d.length=e;b.push("</",a,">")}}}},pcdata:b,rcdata:b,cdata:b,endDoc:function(a){for(;d.length;d.length--)a.push("</",d[d.length-1].v,">")}})}function d(a,b,d,f,e){if(!e)return s;try{var g=Y.parse(""+a);if(g&&(!g.K()||ka.test(g.W()))){var h=e(g,b,d,f);return h?h.toString():s}}catch(j){}return s}function y(a,b,d,f,e){d||a(b+" removed",{S:"removed",tagName:b});if(f!==e){var g="changed";f&&!e?g="removed":!f&&e&&(g="added");a(b+"."+d+" "+g,{S:g,tagName:b,la:d,oldValue:f,newValue:e})}}
function l(a,b,d){b=b+"::"+d;if(a.hasOwnProperty(b))return a[b];b="*::"+d;if(a.hasOwnProperty(b))return a[b]}function V(a,b,f,e,h){for(var j=0;j<b.length;j+=2){var k=b[j],i=b[j+1],m=i,o=s,q;if((q=a+"::"+k,g.m.hasOwnProperty(q))||(q="*::"+k,g.m.hasOwnProperty(q)))o=g.m[q];if(o!==s)switch(o){case g.d.NONE:break;case g.d.SCRIPT:i=s;h&&y(h,a,k,m,i);break;case g.d.STYLE:if("undefined"===typeof N){i=s;h&&y(h,a,k,m,i);break}var r=[];N(i,{declaration:function(a,b){var e=a.toLowerCase();u(e,b,f?function(a){return d(a,
g.P.ja,g.M.ka,{TYPE:"CSS",CSS_PROP:e},f)}:s);b.length&&r.push(e+": "+b.join(" "))}});i=0<r.length?r.join(" ; "):s;h&&y(h,a,k,m,i);break;case g.d.ID:case g.d.IDREF:case g.d.IDREFS:case g.d.GLOBAL_NAME:case g.d.LOCAL_NAME:case g.d.CLASSES:i=e?e(i):i;h&&y(h,a,k,m,i);break;case g.d.URI:i=d(i,l(g.J,a,k),l(g.I,a,k),{TYPE:"MARKUP",XML_ATTR:k,XML_TAG:a},f);h&&y(h,a,k,m,i);break;case g.d.URI_FRAGMENT:i&&"#"===i.charAt(0)?(i=i.substring(1),i=e?e(i):i,i!==s&&i!==c&&(i="#"+i)):i=s;h&&y(h,a,k,m,i);break;default:i=
s,h&&y(h,a,k,m,i)}else i=s,h&&y(h,a,k,m,i);b[j+1]=i}return b}function ea(a,b,d){return function(e,f){if(g.f[e]&g.c.UNSAFE)d&&y(d,e,c,c,c);else return{attribs:V(e,f,a,b,d)}}}function Q(a,b){var d=[];h(b)(a,d);return d.join("")}var N,u;"undefined"!==typeof window&&(N=window.parseCssDeclarations,u=window.sanitizeCssProperty);var i={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:"\u00a0"},q=/^#(\d+)$/,B=/^#x([0-9A-Fa-f]+)$/,F=/^[A-Za-z][A-za-z0-9]+$/,r="undefined"!==typeof window&&
window.document?window.document.createElement("textarea"):s,o=/\0/g,j=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,I=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,R=/&/g,ia=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,P=/[<]/g,S=/>/g,D=/\"/g,ja=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,G=3==="a,b".split(/(,)/).length,K=g.c.CDATA|g.c.RCDATA,A={},T={},ka=/^(?:https?|mailto|data)$/i,m={};m.pa=m.escapeAttrib=E;m.ra=m.makeHtmlSanitizer=h;m.sa=m.makeSaxParser=v;m.ta=m.makeTagPolicy=
ea;m.wa=m.normalizeRCData=e;m.xa=m.sanitize=function(a,b,d,e){return Q(a,ea(b,d,e))};m.ya=m.sanitizeAttribs=V;m.za=m.sanitizeWithPolicy=Q;m.Ba=m.unescapeEntities=x;return m}($),la=ha.sanitize;"undefined"!==typeof window&&(window.html=ha,window.html_sanitize=la);})();;
function mxDictionary(){this.clear()}function mxPoint(a,b){this.x=null!=a?a:0,this.y=null!=b?b:0}function mxRectangle(a,b,c,d){mxPoint.call(this,a,b),this.width=null!=c?c:0,this.height=null!=d?d:0}function mxEventObject(a){this.name=a,this.properties=[];for(var b=1;b<arguments.length;b+=2)null!=arguments[b+1]&&(this.properties[arguments[b]]=arguments[b+1])}function mxMouseEvent(a,b){this.evt=a,this.state=b,this.sourceState=b}function mxEventSource(a){this.setEventSource(a)}function mxXmlRequest(a,b,c,d,e,f){this.url=a,this.params=b,this.method=c||"POST",this.async=null==d||d,this.username=e,this.password=f}function mxWindow(a,b,c,d,e,f,g,h,i,j){null!=b&&(g=null==g||g,this.content=b,this.init(c,d,e,f,j),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(g),this.setTitle(a),(null==h||h)&&this.installMoveHandler(),null!=i&&null!=i.parentNode?i.parentNode.replaceChild(this.div,i):document.body.appendChild(this.div))}function mxForm(a){this.table=document.createElement("table"),this.table.className=a,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(a,b,c){this.src=a,this.width=b,this.height=c}function mxDivResizer(a,b){if("div"==a.nodeName.toLowerCase()){null==b&&(b=window),this.div=a;var c=mxUtils.getCurrentStyle(a);null!=c&&(this.resizeWidth="auto"==c.width,this.resizeHeight="auto"==c.height),mxEvent.addListener(b,"resize",mxUtils.bind(this,function(a){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize()}}function mxDragSource(a,b){this.element=a,this.dropHandler=b,mxEvent.addGestureListeners(a,mxUtils.bind(this,function(a){this.mouseDown(a)})),mxEvent.addListener(a,"dragstart",function(a){mxEvent.consume(a)}),this.eventConsumer=function(a,b){var c=b.getProperty("eventName"),d=b.getProperty("event");c!=mxEvent.MOUSE_DOWN&&d.consume()}}function mxToolbar(a){this.container=a}function mxUndoableEdit(a,b){this.source=a,this.changes=[],this.significant=null==b||b}function mxUndoManager(a){this.size=null!=a?a:100,this.clear()}function mxPanningManager(a){this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(a,b){},mouseMove:function(a,b){},mouseUp:mxUtils.bind(this,function(a,b){this.active&&this.stop()})},a.addMouseListener(this.mouseListener),mxEvent.addListener(document,"mouseup",mxUtils.bind(this,function(){this.active&&this.stop()}));var b=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(a.container),this.scrollLeft=a.container.scrollLeft,this.scrollTop=a.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var b=-a.container.scrollLeft-Math.ceil(this.dx),c=-a.container.scrollTop-Math.ceil(this.dy);a.panGraph(b,c),a.panDx=this.scrollLeft-a.container.scrollLeft,a.panDy=this.scrollTop-a.container.scrollTop,a.fireEvent(new mxEventObject(mxEvent.PAN))}else a.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=a.view.translate.x,this.t0y=a.view.translate.y,this.active=!0},this.panTo=function(c,d,e,f){this.active||this.start(),this.scrollLeft=a.container.scrollLeft,this.scrollTop=a.container.scrollTop,e=null!=e?e:0,f=null!=f?f:0;var g=a.container;this.dx=c+e-g.scrollLeft-g.clientWidth,this.dx<0&&Math.abs(this.dx)<this.border?this.dx=this.border+this.dx:this.handleMouseOut?this.dx=Math.max(this.dx,0):this.dx=0,0==this.dx&&(this.dx=c-g.scrollLeft,this.dx>0&&this.dx<this.border?this.dx=this.dx-this.border:this.handleMouseOut?this.dx=Math.min(0,this.dx):this.dx=0),this.dy=d+f-g.scrollTop-g.clientHeight,this.dy<0&&Math.abs(this.dy)<this.border?this.dy=this.border+this.dy:this.handleMouseOut?this.dy=Math.max(this.dy,0):this.dy=0,0==this.dy&&(this.dy=d-g.scrollTop,this.dy>0&&this.dy<this.border?this.dy=this.dy-this.border:this.handleMouseOut?this.dy=Math.min(0,this.dy):this.dy=0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=b())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)a.panDx=0,a.panDy=0,a.fireEvent(new mxEventObject(mxEvent.PAN));else{var b=a.panDx,c=a.panDy;0==b&&0==c||(a.panGraph(0,0),a.view.setTranslate(this.t0x+b/a.view.scale,this.t0y+c/a.view.scale))}},this.destroy=function(){a.removeMouseListener(this.mouseListener)}}function mxPopupMenu(a){this.factoryMethod=a,null!=a&&this.init()}function mxAutoSaveManager(a){this.changeHandler=mxUtils.bind(this,function(a,b){this.isEnabled()&&this.graphModelChanged(b.getProperty("edit").changes)}),this.setGraph(a)}function mxAnimation(a){this.delay=null!=a?a:20}function mxMorphing(a,b,c,d){mxAnimation.call(this,d),this.graph=a,this.steps=null!=b?b:6,this.ease=null!=c?c:1.5}function mxImageBundle(a){this.images=[],this.alt=null!=a&&a}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(a){mxAbstractCanvas2D.call(this),this.root=a,this.writeDefaults()}function mxSvgCanvas2D(a,b){mxAbstractCanvas2D.call(this),this.root=a,this.gradients=[],this.defs=null,this.styleEnabled=null!=b&&b;var c=null;if(a.ownerDocument!=document){for(var d=a;null!=d&&"svg"!=d.nodeName;)d=d.parentNode;c=d}if(null!=c){var e=c.getElementsByTagName("defs");e.length>0&&(this.defs=c.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=c.firstChild?c.insertBefore(this.defs,c.firstChild):c.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle())}}function mxGuide(a,b){this.graph=a,this.setStates(b)}function mxStencil(a){this.desc=a,this.parseDescription(),this.parseConstraints()}function mxShape(a){this.stencil=a,this.initStyles()}function mxActor(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxCloud(a,b,c,d){mxActor.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxRectangleShape(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxEllipse(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxDoubleEllipse(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxRhombus(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxPolyline(a,b,c){mxShape.call(this),this.points=a,this.stroke=b,this.strokewidth=null!=c?c:1}function mxArrow(a,b,c,d,e,f,g){mxShape.call(this),this.points=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1,this.arrowWidth=null!=e?e:mxConstants.ARROW_WIDTH,this.spacing=null!=f?f:mxConstants.ARROW_SPACING,this.endSize=null!=g?g:mxConstants.ARROW_SIZE}function mxArrowConnector(a,b,c,d,e,f,g){mxShape.call(this),this.points=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1,this.arrowWidth=null!=e?e:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=f?f:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){mxShape.call(this),this.value=a,this.bounds=b,this.color=null!=e?e:"black",this.align=null!=c?c:mxConstants.ALIGN_CENTER,this.valign=null!=d?d:mxConstants.ALIGN_MIDDLE,this.family=null!=f?f:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=g?g:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=h?h:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(i||2),this.spacingTop=this.spacing+parseInt(j||0),this.spacingRight=this.spacing+parseInt(k||0),this.spacingBottom=this.spacing+parseInt(l||0),this.spacingLeft=this.spacing+parseInt(m||0),this.horizontal=null==n||n,this.background=o,this.border=p,this.wrap=null!=q&&q,this.clipped=null!=r&&r,this.overflow=null!=s?s:"visible",this.labelPadding=null!=t?t:0,this.textDirection=u,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(a,b,c){mxShape.call(this),this.bounds=a,this.stroke=b,this.strokewidth=null!=c?c:1}function mxImageShape(a,b,c,d,e){mxShape.call(this),this.bounds=a,this.image=b,this.fill=c,this.stroke=d,this.strokewidth=null!=e?e:1,this.shadow=!1}function mxLabel(a,b,c,d){mxRectangleShape.call(this,a,b,c,d)}function mxCylinder(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxConnector(a,b,c){mxPolyline.call(this,a,b,c)}function mxSwimlane(a,b,c,d){mxShape.call(this),this.bounds=a,this.fill=b,this.stroke=c,this.strokewidth=null!=d?d:1}function mxGraphLayout(a){this.graph=a}function mxStackLayout(a,b,c,d,e,f){mxGraphLayout.call(this,a),this.horizontal=null==b||b,this.spacing=null!=c?c:0,this.x0=null!=d?d:0,this.y0=null!=e?e:0,this.border=null!=f?f:0}function mxPartitionLayout(a,b,c,d){mxGraphLayout.call(this,a),this.horizontal=null==b||b,this.spacing=c||0,this.border=d||0}function mxCompactTreeLayout(a,b,c){mxGraphLayout.call(this,a),this.horizontal=null==b||b,this.invert=null!=c&&c}function WeightedCellSorter(a,b){this.cell=a,this.weightedValue=b}function mxRadialTreeLayout(a){mxCompactTreeLayout.call(this,a,!1)}function mxFastOrganicLayout(a){mxGraphLayout.call(this,a)}function mxCircleLayout(a,b){mxGraphLayout.call(this,a),this.radius=null!=b?b:100}function mxParallelEdgeLayout(a){mxGraphLayout.call(this,a)}function mxCompositeLayout(a,b,c){mxGraphLayout.call(this,a),this.layouts=b,this.master=c}function mxEdgeLabelLayout(a,b){mxGraphLayout.call(this,a)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(a){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=a,this.id=mxObjectIdentity.get(a),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(a){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=a,this.ids=[];for(var b=0;b<a.length;b++)this.ids.push(mxObjectIdentity.get(a[b]))}function mxGraphHierarchyModel(a,b,c,d,e){a.getGraph();this.tightenToSource=e,this.roots=c,this.parent=d,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var g=[];null==b&&(b=this.graph.getChildVertices(d)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(a,b,g);for(var h=0;h<b.length;h++){for(var i=g[h].connectsAsSource,j=0;j<i.length;j++){var k=i[j],l=k.edges;if(null!=l&&l.length>0){var m=l[0],n=a.getVisibleTerminal(m,!1),o=this.vertexMapper.get(n);g[h]==o&&(n=a.getVisibleTerminal(m,!0),o=this.vertexMapper.get(n)),null!=o&&g[h]!=o&&(k.target=o,0==o.connectsAsTarget.length&&(o.connectsAsTarget=[]),mxUtils.indexOf(o.connectsAsTarget,k)<0&&o.connectsAsTarget.push(k))}}g[h].temp[0]=1}}function mxSwimlaneModel(a,b,c,d,e){a.getGraph();this.tightenToSource=e,this.roots=c,this.parent=d,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var g=[];null==b&&(b=this.graph.getChildVertices(d)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(a,b,g);for(var h=0;h<b.length;h++){for(var i=g[h].connectsAsSource,j=0;j<i.length;j++){var k=i[j],l=k.edges;if(null!=l&&l.length>0){var m=l[0],n=a.getVisibleTerminal(m,!1),o=this.vertexMapper.get(n);g[h]==o&&(n=a.getVisibleTerminal(m,!0),o=this.vertexMapper.get(n)),null!=o&&g[h]!=o&&(k.target=o,0==o.connectsAsTarget.length&&(o.connectsAsTarget=[]),mxUtils.indexOf(o.connectsAsTarget,k)<0&&o.connectsAsTarget.push(k))}}g[h].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(a){this.layout=a}function MedianCellSorter(){}function mxMinimumCycleRemover(a){this.layout=a}function mxCoordinateAssignment(a,b,c,d,e,f){this.layout=a,this.intraCellSpacing=b,this.interRankCellSpacing=c,this.orientation=d,this.initialX=e,this.parallelEdgeSpacing=f}function WeightedCellSorter(a,b){this.cell=a,this.weightedValue=b}function mxSwimlaneOrdering(a){this.layout=a}function mxHierarchicalLayout(a,b,c){mxGraphLayout.call(this,a),this.orientation=null!=b?b:mxConstants.DIRECTION_NORTH,this.deterministic=null==c||c}function mxSwimlaneLayout(a,b,c){mxGraphLayout.call(this,a),this.orientation=null!=b?b:mxConstants.DIRECTION_NORTH,this.deterministic=null==c||c}function mxGraphModel(a){this.currentEdit=this.createUndoableEdit(),null!=a?this.setRoot(a):this.clear()}function mxRootChange(a,b){this.model=a,this.root=b,this.previous=b}function mxChildChange(a,b,c,d){this.model=a,this.parent=b,this.previous=b,this.child=c,this.index=d,this.previousIndex=d}function mxTerminalChange(a,b,c,d){this.model=a,this.cell=b,this.terminal=c,this.previous=c,this.source=d}function mxValueChange(a,b,c){this.model=a,this.cell=b,this.value=c,this.previous=c}function mxStyleChange(a,b,c){this.model=a,this.cell=b,this.style=c,this.previous=c}function mxGeometryChange(a,b,c){this.model=a,this.cell=b,this.geometry=c,this.previous=c}function mxCollapseChange(a,b,c){this.model=a,this.cell=b,this.collapsed=c,this.previous=c}function mxVisibleChange(a,b,c){this.model=a,this.cell=b,this.visible=c,this.previous=c}function mxCellAttributeChange(a,b,c){this.cell=a,this.attribute=b,this.value=c,this.previous=c}function mxCell(a,b,c){this.value=a,this.setGeometry(b),this.setStyle(c),null!=this.onInit&&this.onInit()}function mxGeometry(a,b,c,d){mxRectangle.call(this,a,b,c,d)}function mxPrintPreview(a,b,c,d,e,f,g,h,i){this.graph=a,this.scale=null!=b?b:1/a.pageScale,this.border=null!=d?d:0,this.pageFormat=mxRectangle.fromRectangle(null!=c?c:a.pageFormat),this.title=null!=h?h:"Printer-friendly version",this.x0=null!=e?e:0,this.y0=null!=f?f:0,this.borderColor=g,this.pageSelector=null==i||i}function mxStylesheet(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxCellState(a,b,c){this.view=a,this.cell=b,this.style=c,this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(a){this.graph=a,this.cells=[]}function mxSelectionChange(a,b,c){this.selectionModel=a,this.added=null!=b?b.slice():null,this.removed=null!=c?c.slice():null}function mxCellEditor(a){this.graph=a,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(a){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}function mxGraphView(a){this.graph=a,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(a,b){if(this.view=a,this.root=b,this.previous=b,this.isUp=null==b,!this.isUp)for(var c=this.view.currentRoot,d=this.view.graph.getModel();null!=c;){if(c==b){this.isUp=!0;break}c=d.getParent(c)}}function mxGraph(a,b,c,d){this.mouseListeners=null,this.renderHint=c,mxClient.IS_SVG?this.dialect=mxConstants.DIALECT_SVG:c==mxConstants.RENDERING_HINT_EXACT&&mxClient.IS_VML?this.dialect=mxConstants.DIALECT_VML:c==mxConstants.RENDERING_HINT_FASTEST?this.dialect=mxConstants.DIALECT_STRICTHTML:c==mxConstants.RENDERING_HINT_FASTER?this.dialect=mxConstants.DIALECT_PREFERHTML:this.dialect=mxConstants.DIALECT_MIXEDHTML,this.model=null!=b?b:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=d?d:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(a,b){this.graphModelChanged(b.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=a&&this.init(a),this.view.revalidate()}function mxCellOverlay(a,b,c,d,e,f){this.image=a,this.tooltip=b,this.align=null!=c?c:this.align,this.verticalAlign=null!=d?d:this.verticalAlign,this.offset=null!=e?e:new mxPoint,this.cursor=null!=f?f:"help"}function mxOutline(a,b){this.source=a,null!=b&&this.init(b)}function mxMultiplicity(a,b,c,d,e,f,g,h,i,j){this.source=a,this.type=b,this.attr=c,this.value=d,this.min=null!=e?e:0,this.max=null!=f?f:"n",this.validNeighbors=g,this.countError=mxResources.get(h)||h,this.typeError=mxResources.get(i)||i,this.validNeighborsAllowed=null==j||j}function mxLayoutManager(a){this.undoHandler=mxUtils.bind(this,function(a,b){this.isEnabled()&&this.beforeUndo(b.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(a,b){this.isEnabled()&&this.cellsMoved(b.getProperty("cells"),b.getProperty("event"))}),this.setGraph(a)}function mxSwimlaneManager(a,b,c,d){this.horizontal=null==b||b,this.addEnabled=null==c||c,this.resizeEnabled=null==d||d,this.addHandler=mxUtils.bind(this,function(a,b){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(b.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(a,b){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(b.getProperty("cells"))}),this.setGraph(a)}function mxTemporaryCellStates(a,b,c,d){b=null!=b?b:1,this.view=a,this.oldValidateCellState=a.validateCellState,this.oldBounds=a.getGraphBounds(),this.oldStates=a.getStates(),this.oldScale=a.getScale();var e=this;if(a.validateCellState=function(b,c){return null==b||null==d||d(b)?e.oldValidateCellState.apply(a,arguments):null},a.setStates(new mxDictionary),a.setScale(b),null!=c){a.resetValidationState();for(var f=null,g=0;g<c.length;g++){var h=a.getBoundingBox(a.validateCellState(a.validateCell(c[g])));null==f?f=h:f.add(h)}a.setGraphBounds(f||new mxRectangle)}}function mxCellStatePreview(a){this.deltas=new mxDictionary,this.graph=a}function mxConnectionConstraint(a,b,c){this.point=a,this.perimeter=null==b||b,this.name=c}function mxGraphHandler(a){this.graph=a,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.updatePreviewShape(),this.updateHint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(a,b){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler)}function mxPanningHandler(a){null!=a&&(this.graph=a,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(a,b){var c=b.getProperty("eventName"),d=b.getProperty("event");c==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(d)&&(this.start(d),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",d)),d.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(a,b){if(this.isPinchEnabled()){var c=b.getProperty("event");if(mxEvent.isConsumed(c)||"gesturestart"!=c.type?"gestureend"==c.type&&null==this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale){var d=Math.round(this.initialScale*c.scale*100)/100;null!=this.minScale&&(d=Math.max(this.minScale,d)),null!=this.maxScale&&(d=Math.min(this.maxScale,d)),this.graph.view.scale!=d&&(this.graph.zoomTo(d),mxEvent.consume(c))}}}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler))}function mxPopupMenuHandler(a,b){null!=a&&(this.graph=a,this.factoryMethod=b,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(a,b){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(a,b,c,d){mxEventSource.call(this),null!=a&&(this.graph=a,this.validColor=null!=b?b:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=b?c:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=d?d:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(a))}function mxSelectionCellsHandler(a){mxEventSource.call(this),this.graph=a,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(a,b){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(a,b){mxEventSource.call(this),null!=a&&(this.graph=a,this.factoryMethod=b,this.init(),this.escapeHandler=mxUtils.bind(this,function(a,b){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(a){this.graph=a,this.resetHandler=mxUtils.bind(this,function(a,b){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(a){null!=a&&(this.graph=a,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(a,b){var c=b.getProperty("eventName"),d=b.getProperty("event");if(c==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(d)){var e=mxUtils.getOffset(this.graph.container),f=mxUtils.getScrollOrigin(this.graph.container);f.x-=e.x,f.y-=e.y,this.start(d.getX()+f.x,d.getY()+f.y),d.consume(!1)}}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(a,b){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxHandle(a,b,c){this.graph=a.view.graph,this.state=a,this.cursor=null!=b?b:this.cursor,this.image=null!=c?c:this.image,this.init()}function mxVertexHandler(a){null!=a&&(this.state=a,this.init(),this.escapeHandler=mxUtils.bind(this,function(a,b){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(a){null!=a&&(this.state=a,this.init(),this.escapeHandler=mxUtils.bind(this,function(a,b){this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(a){mxEdgeHandler.call(this,a)}function mxEdgeSegmentHandler(a){mxEdgeHandler.call(this,a)}function mxKeyHandler(a,b){null!=a&&(this.graph=a,this.target=b||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(a){this.keyDown(a)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxTooltipHandler(a,b){null!=a&&(this.graph=a,this.delay=b||500,this.graph.addMouseListener(this))}function mxCellTracker(a,b,c){mxCellMarker.call(this,a,b),this.graph.addMouseListener(this),null!=c&&(this.getCell=c),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(a,b,c,d){null!=a&&(this.graph=a,this.highlightColor=null!=b?b:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=c?c:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=d&&d,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){if(null!=this.state){var a=this.graph.view.getState(this.state.cell);null==a?this.hide():(this.state=a,this.repaint())}}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxDefaultKeyHandler(a){if(null!=a){this.editor=a,this.handler=new mxKeyHandler(a.graph);var b=this.handler.escape;this.handler.escape=function(c){b.apply(this,arguments),a.hideProperties(),a.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",c))}}}function mxDefaultPopupMenu(a){this.config=a}function mxDefaultToolbar(a,b){this.editor=b,null!=a&&null!=b&&this.init(a)}function mxEditor(a){this.actions=[],this.addActions(),null!=document.body&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(a),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,null!=this.onInit&&this.onInit(),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxCodec(a){this.document=a||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(a,b,c,d){this.template=a,this.exclude=null!=b?b:[],this.idrefs=null!=c?c:[],this.mapping=null!=d?d:[],this.reverse=new Object;for(var e in this.mapping)this.reverse[this.mapping[e]]=e}var mxClient={VERSION:"3.7.1",IS_IE:navigator.userAgent.indexOf("MSIE")>=0,IS_IE6:navigator.userAgent.indexOf("MSIE 6")>=0,IS_IE11:!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:!!navigator.userAgent.match(/Edge\//),IS_QUIRKS:navigator.userAgent.indexOf("MSIE")>=0&&(null==document.documentMode||5==document.documentMode),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0,IS_OT:navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:navigator.userAgent.indexOf("AppleWebKit/")>=0&&navigator.userAgent.indexOf("Chrome/")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_IOS:!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),IS_GC:navigator.userAgent.indexOf("Chrome/")>=0&&navigator.userAgent.indexOf("Edge/")<0,IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:navigator.userAgent.indexOf("Firefox/")>=0,IS_MT:navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_SVG:navigator.userAgent.indexOf("Firefox/")>=0||navigator.userAgent.indexOf("Iceweasel/")>=0||navigator.userAgent.indexOf("Seamonkey/")>=0||navigator.userAgent.indexOf("Iceape/")>=0||navigator.userAgent.indexOf("Galeon/")>=0||navigator.userAgent.indexOf("Epiphany/")>=0||navigator.userAgent.indexOf("AppleWebKit/")>=0||navigator.userAgent.indexOf("Gecko/")>=0||navigator.userAgent.indexOf("Opera/")>=0||null!=document.documentMode&&document.documentMode>=9,NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||navigator.userAgent.indexOf("Opera/")>=0,IS_VML:"MICROSOFT INTERNET EXPLORER"==navigator.appName.toUpperCase(),IS_WIN:navigator.appVersion.indexOf("Win")>0,IS_MAC:navigator.appVersion.indexOf("Mac")>0,IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(navigator.appVersion.indexOf("Mac")>0),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,isBrowserSupported:function(){return mxClient.IS_VML||mxClient.IS_SVG},link:function(a,b,c){if(c=c||document,mxClient.IS_IE6)c.write('<link rel="'+a+'" href="'+b+'" charset="UTF-8" type="text/css"/>');else{var d=c.createElement("link");d.setAttribute("rel",a),d.setAttribute("href",b),d.setAttribute("charset","UTF-8"),d.setAttribute("type","text/css");var e=c.getElementsByTagName("head")[0];e.appendChild(d)}},include:function(a){document.write('<script src="'+a+'"></script>')},dispose:function(){for(var a=0;a<mxEvent.objects.length;a++)null!=mxEvent.objects[a].mxListenerList&&mxEvent.removeAllListeners(mxEvent.objects[a])}};"undefined"==typeof mxLoadResources&&(mxLoadResources=!0),"undefined"==typeof mxResourceExtension&&(mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&mxBasePath.length>0?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath=".","undefined"!=typeof mxImageBasePath&&mxImageBasePath.length>0?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images","undefined"!=typeof mxLanguage&&null!=mxLanguage?mxClient.language=mxLanguage:mxClient.language=mxClient.IS_IE?navigator.userLanguage:navigator.language,"undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxClient.defaultLanguage=mxDefaultLanguage:mxClient.defaultLanguage="en","undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(8==document.documentMode?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office")),mxClient.IS_QUIRKS&&document.styleSheets.length>=30?!function(){var a=document.createElement("style");a.type="text/css",a.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(a)}():document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",window.attachEvent("onunload",mxClient.dispose)));var mxLog={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){if(null==mxLog.window&&null!=document.body){var a=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,b=document.createElement("table");b.setAttribute("width","100%"),b.setAttribute("height","100%");var c=document.createElement("tbody"),d=document.createElement("tr"),e=document.createElement("td");
  e.style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxClient.IS_NS&&"BackCompat"!=document.compatMode?mxLog.textarea.style.width="99%":mxLog.textarea.style.width="100%",e.appendChild(mxLog.textarea),d.appendChild(e),c.appendChild(d),d=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),d.appendChild(mxLog.td),c.appendChild(d),b.appendChild(c),mxLog.addButton("Info",function(a){mxLog.info()}),mxLog.addButton("DOM",function(a){var b=mxUtils.getInnerHtml(document.body);mxLog.debug(b)}),mxLog.addButton("Trace",function(a){mxLog.TRACE=!mxLog.TRACE,mxLog.TRACE?mxLog.debug("Tracing enabled"):mxLog.debug("Tracing disabled")}),mxLog.addButton("Copy",function(a){try{mxUtils.copy(mxLog.textarea.value)}catch(a){mxUtils.alert(a)}}),mxLog.addButton("Show",function(a){try{mxUtils.popup(mxLog.textarea.value)}catch(a){mxUtils.alert(a)}}),mxLog.addButton("Clear",function(a){mxLog.textarea.value=""});var f=0,g=0;if("number"==typeof window.innerWidth?(f=window.innerHeight,g=window.innerWidth):(f=document.documentElement.clientHeight||document.body.clientHeight,g=document.body.clientWidth),mxLog.window=new mxWindow(a,b,Math.max(0,g-320),Math.max(0,f-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&"BackCompat"!=document.compatMode||11==document.documentMode){var h=mxLog.window.getElement(),i=function(a,b){mxLog.textarea.style.height=Math.max(0,h.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,i),mxLog.window.addListener(mxEvent.MAXIMIZE,i),mxLog.window.addListener(mxEvent.NORMALIZE,i),mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(a,b){var c=document.createElement("button");mxUtils.write(c,a),mxEvent.addListener(c,"click",b),mxLog.td.appendChild(c)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(a){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(a)},enter:function(a){if(mxLog.TRACE)return mxLog.writeln("Entering "+a),(new Date).getTime()},leave:function(a,b){if(mxLog.TRACE){var c=0!=b?" ("+((new Date).getTime()-b)+" ms)":"";mxLog.writeln("Leaving "+a+c)}},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b],b<arguments.length-1&&(a+=" ");null!=mxLog.textarea?(mxLog.textarea.value=mxLog.textarea.value+a,navigator.userAgent.indexOf("Presto/2.5")>=0&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=a},writeln:function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b],b<arguments.length-1&&(a+=" ");mxLog.write(a+"\n")}},mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(a){if(null!=a){if(null==a[mxObjectIdentity.FIELD_NAME])if("object"==typeof a){var b=mxUtils.getFunctionName(a.constructor);a[mxObjectIdentity.FIELD_NAME]=b+"#"+mxObjectIdentity.counter++}else"function"==typeof a&&(a[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++);return a[mxObjectIdentity.FIELD_NAME]}return null},clear:function(a){"object"!=typeof a&&"function"!=typeof a||delete a[mxObjectIdentity.FIELD_NAME]}};mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(a){var b=mxObjectIdentity.get(a);return this.map[b]},mxDictionary.prototype.put=function(a,b){var c=mxObjectIdentity.get(a),d=this.map[c];return this.map[c]=b,d},mxDictionary.prototype.remove=function(a){var b=mxObjectIdentity.get(a),c=this.map[b];return delete this.map[b],c},mxDictionary.prototype.getKeys=function(){var a=[];for(var b in this.map)a.push(b);return a},mxDictionary.prototype.getValues=function(){var a=[];for(var b in this.map)a.push(this.map[b]);return a},mxDictionary.prototype.visit=function(a){for(var b in this.map)a(b,this.map[b])};var mxResources={resources:[],extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(a){return null==mxClient.languages||mxUtils.indexOf(mxClient.languages,a)>=0},getDefaultBundle:function(a,b){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(b)?a+mxResources.extension:null},getSpecialBundle:function(a,b){if(null==mxClient.languages||!this.isLanguageSupported(b)){var c=b.indexOf("-");c>0&&(b=b.substring(0,c))}return mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(b)&&b!=mxClient.defaultLanguage?a+"_"+b+mxResources.extension:null},add:function(a,b,c){if(b=null!=b?b:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE,b!=mxConstants.NONE){var d=mxResources.getDefaultBundle(a,b),e=mxResources.getSpecialBundle(a,b),f=function(){if(null!=e)if(c)mxUtils.get(e,function(a){mxResources.parse(a.getText()),c()},function(){c()});else try{var a=mxUtils.load(e);a.isReady()&&mxResources.parse(a.getText())}catch(a){}else null!=c&&c()};if(null!=d)if(c)mxUtils.get(d,function(a){mxResources.parse(a.getText()),f()},function(){f()});else try{var g=mxUtils.load(d);g.isReady()&&mxResources.parse(g.getText()),f()}catch(a){}else f()}},parse:function(a){if(null!=a)for(var b=a.split("\n"),c=0;c<b.length;c++)if("#"!=b[c].charAt(0)){var d=b[c].indexOf("=");if(d>0){var e=b[c].substring(0,d),f=b[c].length;13==b[c].charCodeAt(f-1)&&f--;var g=b[c].substring(d+1,f);this.resourcesEncoded?(g=g.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[e]=unescape(g)):mxResources.resources[e]=g}}},get:function(a,b,c){var d=mxResources.resources[a];return null==d&&(d=c),null!=d&&null!=b&&(d=mxResources.replacePlaceholders(d,b)),d},replacePlaceholders:function(a,b){for(var c=[],d=null,e=0;e<a.length;e++){var f=a.charAt(e);"{"==f?d="":null!=d&&"}"==f?(d=parseInt(d)-1,d>=0&&d<b.length&&c.push(b[d]),d=null):null!=d?d+=f:c.push(f)}return c.join("")},loadResources:function(a){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,a)})}};mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(a){return null!=a&&a.x==this.x&&a.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(a){if(null!=a){var b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x+a.width),e=Math.max(this.y+this.height,a.y+a.height);this.x=b,this.y=c,this.width=d-b,this.height=e-c}},mxRectangle.prototype.intersect=function(a){if(null!=a){var b=this.x+this.width,c=a.x+a.width,d=this.y+this.height,e=a.y+a.height;this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.width=Math.min(b,c)-this.x,this.height=Math.min(d,e)-this.y}},mxRectangle.prototype.grow=function(a){this.x-=a,this.y-=a,this.width+=2*a,this.height+=2*a},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var a=(this.width-this.height)/2;this.x+=a,this.y-=a;var b=this.width;this.width=this.height,this.height=b},mxRectangle.prototype.equals=function(a){return null!=a&&a.x==this.x&&a.y==this.y&&a.width==this.width&&a.height==this.height},mxRectangle.fromRectangle=function(a){return new mxRectangle(a.x,a.y,a.width,a.height)};var mxEffects={animateChanges:function(a,b,c){var d=10,e=0,f=function(){for(var h=!1,i=0;i<b.length;i++){var j=b[i];if(j instanceof mxGeometryChange||j instanceof mxTerminalChange||j instanceof mxValueChange||j instanceof mxChildChange||j instanceof mxStyleChange){var k=a.getView().getState(j.cell||j.child,!1);if(null!=k)if(h=!0,j.constructor!=mxGeometryChange||a.model.isEdge(j.cell))mxUtils.setOpacity(k.shape.node,100*e/d);else{var l=a.getView().scale,m=(j.geometry.x-j.previous.x)*l,n=(j.geometry.y-j.previous.y)*l,o=(j.geometry.width-j.previous.width)*l,p=(j.geometry.height-j.previous.height)*l;0==e?(k.x-=m,k.y-=n,k.width-=o,k.height-=p):(k.x+=m/d,k.y+=n/d,k.width+=o/d,k.height+=p/d),a.cellRenderer.redraw(k),mxEffects.cascadeOpacity(a,j.cell,100*e/d)}}}e<d&&h?(e++,window.setTimeout(f,g)):null!=c&&c()},g=30;f()},cascadeOpacity:function(a,b,c){for(var d=a.model.getChildCount(b),e=0;e<d;e++){var f=a.model.getChildAt(b,e),g=a.getView().getState(f);null!=g&&(mxUtils.setOpacity(g.shape.node,c),mxEffects.cascadeOpacity(a,f,c))}var h=a.model.getEdges(b);if(null!=h)for(var e=0;e<h.length;e++){var i=a.getView().getState(h[e]);null!=i&&mxUtils.setOpacity(i.shape.node,c)}},fadeOut:function(a,b,c,d,e,f){d=d||40,e=e||30;var g=b||100;if(mxUtils.setOpacity(a,g),f||null==f){var h=function(){g=Math.max(g-d,0),mxUtils.setOpacity(a,g),g>0?window.setTimeout(h,e):(a.style.visibility="hidden",c&&a.parentNode&&a.parentNode.removeChild(a))};window.setTimeout(h,e)}else a.style.visibility="hidden",c&&a.parentNode&&a.parentNode.removeChild(a)}},mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(a){null!=a.style&&(a.style.cursor="");var b=a.childNodes;if(null!=b)for(var c=b.length,d=0;d<c;d+=1)mxUtils.removeCursors(b[d])},getCurrentStyle:function(){return mxClient.IS_IE?function(a){return null!=a?a.currentStyle:null}:function(a){return null!=a?window.getComputedStyle(a,""):null}}(),parseCssNumber:function(a){return"thin"==a?a="2":"medium"==a?a="4":"thick"==a&&(a="6"),a=parseFloat(a),isNaN(a)&&(a=0),a},setPrefixedStyle:function(){var a=null;return mxClient.IS_OT?a="O":mxClient.IS_SF||mxClient.IS_GC?a="Webkit":mxClient.IS_MT?a="Moz":mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10&&(a="ms"),function(b,c,d){b[c]=d,null!=a&&c.length>0&&(c=a+c.substring(0,1).toUpperCase()+c.substring(1),b[c]=d)}}(),hasScrollbars:function(a){var b=mxUtils.getCurrentStyle(a);return null!=b&&("scroll"==b.overflow||"auto"==b.overflow)},bind:function(a,b){return function(){return b.apply(a,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0)try{eval("var _mxJavaScriptExpression="+expr),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(a){mxLog.warn(a.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(a){mxLog.warn(a.message+" while evaluating "+expr)}return result},findNode:function(a,b,c){if(a.nodeType==mxConstants.NODETYPE_ELEMENT){var d=a.getAttribute(b);if(null!=d&&d==c)return a}for(a=a.firstChild;null!=a;){var e=mxUtils.findNode(a,b,c);if(null!=e)return e;a=a.nextSibling}return null},getFunctionName:function(a){var b=null;if(null!=a)if(null!=a.name)b=a.name;else if(b=mxUtils.trim(a.toString()),/^function\s/.test(b)){b=mxUtils.ltrim(b.substring(9));var c=b.indexOf("(");c>0&&(b=b.substring(0,c))}return b},indexOf:function(a,b){if(null!=a&&null!=b)for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},forEach:function(a,b){if(null!=a&&null!=b)for(var c=0;c<a.length;c++)b(a[c]);return a},remove:function(a,b){var c=null;if("object"==typeof b)for(var d=mxUtils.indexOf(b,a);d>=0;)b.splice(d,1),c=a,d=mxUtils.indexOf(b,a);for(var e in b)b[e]==a&&(delete b[e],c=a);return c},isNode:function(a,b,c,d){return!(null==a||isNaN(a.nodeType)||null!=b&&a.nodeName.toLowerCase()!=b.toLowerCase())&&(null==c||a.getAttribute(c)==d)},isAncestorNode:function(a,b){for(var c=b;null!=c;){if(c==a)return!0;c=c.parentNode}return!1},getChildNodes:function(a,b){b=b||mxConstants.NODETYPE_ELEMENT;for(var c=[],d=a.firstChild;null!=d;)d.nodeType==b&&c.push(d),d=d.nextSibling;return c},importNode:function(a,b,c){if(!mxClient.IS_IE||!(null==document.documentMode||document.documentMode<10))return a.importNode(b,c);switch(b.nodeType){case 1:var d=a.createElement(b.nodeName);if(b.attributes&&b.attributes.length>0){for(var e=0;e<b.attributes.length;e++)d.setAttribute(b.attributes[e].nodeName,b.getAttribute(b.attributes[e].nodeName));if(c&&b.childNodes&&b.childNodes.length>0)for(var e=0;e<b.childNodes.length;e++)d.appendChild(mxUtils.importNode(a,b.childNodes[e],c))}return d;case 3:case 4:case 8:return a.createTextNode(b.value)}},createXmlDocument:function(){var a=null;return document.implementation&&document.implementation.createDocument?a=document.implementation.createDocument("","",null):window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLDOM")),a},parseXml:function(){return window.DOMParser?function(a){var b=new DOMParser;return b.parseFromString(a,"text/xml")}:function(a){var b=mxUtils.createXmlDocument();return b.async=!1,b.validateOnParse=!1,b.resolveExternals=!1,b.loadXML(a),b}}(),clearSelection:function(){return document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){}}(),getPrettyXml:function(a,b,c){var d=[];if(null!=a)if(b=b||"  ",c=c||"",a.nodeType==mxConstants.NODETYPE_TEXT)d.push(a.value);else{d.push(c+"<"+a.nodeName);var e=a.attributes;if(null!=e)for(var f=0;f<e.length;f++){var g=mxUtils.htmlEntities(e[f].value);d.push(" "+e[f].nodeName+'="'+g+'"')}var h=a.firstChild;if(null!=h){for(d.push(">\n");null!=h;)d.push(mxUtils.getPrettyXml(h,b,c+b)),h=h.nextSibling;d.push(c+"</"+a.nodeName+">\n")}else d.push("/>\n")}return d.join("")},removeWhitespace:function(a,b){for(var c=b?a.previousSibling:a.nextSibling;null!=c&&c.nodeType==mxConstants.NODETYPE_TEXT;){var d=b?c.previousSibling:c.nextSibling,e=mxUtils.getTextContent(c);0==mxUtils.trim(e).length&&c.parentNode.removeChild(c),c=d}},htmlEntities:function(a,b){return a=String(a||""),a=a.replace(/&/g,"&amp;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/\'/g,"&#39;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),(null==b||b)&&(a=a.replace(/\n/g,"&#xa;")),a},isVml:function(a){return null!=a&&"urn:schemas-microsoft-com:vml"==a.tagUrn},getXml:function(a,b){var c="";if(null!=window.XMLSerializer){var d=new XMLSerializer;c=d.serializeToString(a)}else null!=a.xml&&(c=a.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n"));return b=b||"&#xa;",c=c.replace(/\n/g,b)},extractTextWithWhitespace:function(a){function d(a){if(1!=a.length||"BR"!=a[0].nodeName&&"\n"!=a[0].innerHTML)for(var e=0;e<a.length;e++){var f=a[e];"BR"==f.nodeName||"\n"==f.innerHTML||(1==a.length||0==e)&&"DIV"==f.nodeName&&"<br>"==f.innerHTML.toLowerCase()?c.push("\n"):(3===f.nodeType||4===f.nodeType?f.nodeValue.length>0&&c.push(f.nodeValue):8!==f.nodeType&&f.childNodes.length>0&&d(f.childNodes),e<a.length-1&&mxUtils.indexOf(b,a[e+1].nodeName)>=0&&c.push("\n"))}}var b=["BLOCKQUOTE","DIV","H1","H2","H3","H4","H5","H6","OL","P","PRE","TABLE","UL"],c=[];return d(a),c.join("")},replaceTrailingNewlines:function(a,b){for(var c="";a.length>0&&"\n"==a.charAt(a.length-1);)a=a.substring(0,a.length-1),c+=b;return a+c},getTextContent:function(a){return void 0!==a.innerText?a.innerText:null!=a?a[void 0===a.textContent?"text":"textContent"]:""},setTextContent:function(a,b){void 0!==a.innerText?a.innerText=b:a[void 0===a.textContent?"text":"textContent"]=b},getInnerHtml:function(){return mxClient.IS_IE?function(a){return null!=a?a.innerHTML:""}:function(a){if(null!=a){var b=new XMLSerializer;return b.serializeToString(a)}return""}}(),getOuterHtml:function(){return mxClient.IS_IE?function(a){if(null!=a){if(null!=a.outerHTML)return a.outerHTML;var b=[];b.push("<"+a.nodeName);var c=a.attributes;if(null!=c)for(var d=0;d<c.length;d++){var e=c[d].value;null!=e&&e.length>0&&(b.push(" "),b.push(c[d].nodeName),b.push('="'),b.push(e),b.push('"'))}return 0==a.innerHTML.length?b.push("/>"):(b.push(">"),b.push(a.innerHTML),b.push("</"+a.nodeName+">")),b.join("")}return""}:function(a){if(null!=a){var b=new XMLSerializer;return b.serializeToString(a)}return""}}(),write:function(a,b){var c=a.ownerDocument,d=c.createTextNode(b);return null!=a&&a.appendChild(d),d},writeln:function(a,b){var c=a.ownerDocument,d=c.createTextNode(b);return null!=a&&(a.appendChild(d),a.appendChild(document.createElement("br"))),d},br:function(a,b){b=b||1;for(var c=null,d=0;d<b;d++)null!=a&&(c=a.ownerDocument.createElement("br"),a.appendChild(c));return c},button:function(a,b,c){c=null!=c?c:document;var d=c.createElement("button");return mxUtils.write(d,a),mxEvent.addListener(d,"click",function(a){b(a)}),d},para:function(a,b){var c=document.createElement("p");return mxUtils.write(c,b),null!=a&&a.appendChild(c),c},addTransparentBackgroundFilter:function(a){a.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(a,b,c,d,e){return mxUtils.link(a,b,function(){c.execute(d)},e)},linkInvoke:function(a,b,c,d,e,f){return mxUtils.link(a,b,function(){c[d](e)},f)},link:function(a,b,c,d){var e=document.createElement("span");return e.style.color="blue",e.style.textDecoration="underline",e.style.cursor="pointer",null!=d&&(e.style.paddingLeft=d+"px"),mxEvent.addListener(e,"click",c),mxUtils.write(e,b),null!=a&&a.appendChild(e),e},fit:function(a){var b=parseInt(a.offsetLeft),c=parseInt(a.offsetWidth),d=mxUtils.getDocumentScrollOrigin(a.ownerDocument),e=d.x,f=d.y,g=document.body,h=document.documentElement,i=e+(g.clientWidth||h.clientWidth);b+c>i&&(a.style.left=Math.max(e,i-c)+"px");var j=parseInt(a.offsetTop),k=parseInt(a.offsetHeight),l=f+Math.max(g.clientHeight||0,h.clientHeight);j+k>l&&(a.style.top=Math.max(f,l-k)+"px")},load:function(a){var b=new mxXmlRequest(a,null,"GET",!1);return b.send(),b},get:function(a,b,c,d,e,f){var g=new mxXmlRequest(a,null,"GET");return null!=d&&g.setBinary(d),g.send(b,c,e,f),g},getAll:function(a,b,c){for(var d=a.length,e=[],f=0,g=function(){0==f&&null!=c&&c(),f++},h=0;h<a.length;h++)!function(a,c){mxUtils.get(a,function(a){var f=a.getStatus();f<200||f>299?g():(e[c]=a,d--,0==d&&b(e))},g)}(a[h],h);0==d&&b(e)},post:function(a,b,c,d){return new mxXmlRequest(a,b).send(c,d)},submit:function(a,b,c,d){return new mxXmlRequest(a,b).simulate(c,d)},loadInto:function(a,b,c){mxClient.IS_IE?b.onreadystatechange=function(){4==b.readyState&&c()}:b.addEventListener("load",c,!1),b.load(a)},getValue:function(a,b,c){var d=null!=a?a[b]:null;return null==d&&(d=c),d},getNumber:function(a,b,c){var d=null!=a?a[b]:null;return null==d&&(d=c||0),Number(d)},getColor:function(a,b,c){var d=null!=a?a[b]:null;return null==d?d=c:d==mxConstants.NONE&&(d=null),d},clone:function(a,b,c){c=null!=c&&c;var d=null;if(null!=a&&"function"==typeof a.constructor){d=new a.constructor;for(var e in a)e!=mxObjectIdentity.FIELD_NAME&&(null==b||mxUtils.indexOf(b,e)<0)&&(c||"object"!=typeof a[e]?d[e]=a[e]:d[e]=mxUtils.clone(a[e]))}return d},equalPoints:function(a,b){if(null==a&&null!=b||null!=a&&null==b||null!=a&&null!=b&&a.length!=b.length)return!1;if(null!=a&&null!=b)for(var c=0;c<a.length;c++)if(a[c]==b[c]||null!=a[c]&&!a[c].equals(b[c]))return!1;return!0},equalEntries:function(a,b){if(null==a&&null!=b||null!=a&&null==b||null!=a&&null!=b&&a.length!=b.length)return!1;if(null!=a&&null!=b){var c=0;for(var d in b)c++;for(var d in a)if(c--,!(mxUtils.isNaN(a[d])&&mxUtils.isNaN(b[d])||a[d]==b[d]))return!1}return 0==c},removeDuplicates:function(a){for(var b=new mxDictionary,c=[],d=0;d<a.length;d++)b.get(a[d])||(c.push(a[d]),b.put(a[d],!0));return c},isNaN:function(a){return"number"==typeof a&&isNaN(a)},extend:function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},toString:function(a){var b="";for(var c in a)try{if(null==a[c])b+=c+" = [null]\n";else if("function"==typeof a[c])b+=c+" => [Function]\n";else if("object"==typeof a[c]){var d=mxUtils.getFunctionName(a[c].constructor);b+=c+" => ["+d+"]\n"}else b+=c+" = "+a[c]+"\n"}catch(a){b+=c+"="+a.message}return b},toRadians:function(a){return Math.PI*a/180},toDegree:function(a){return 180*a/Math.PI},arcToCurves:function(a,b,c,d,e,f,g,h,i){if(h-=a,i-=b,0===c||0===d)return T;var j=g,k=e;c=Math.abs(c),d=Math.abs(d);var w,l=-h/2,m=-i/2,n=Math.cos(k*Math.PI/180),o=Math.sin(k*Math.PI/180),p=n*l+o*m,q=-1*o*l+n*m,r=p*p,s=q*q,t=c*c,u=d*d,v=r/t+s/u;if(v>1)c=Math.sqrt(v)*c,d=Math.sqrt(v)*d,w=0;else{var x=1;f===j&&(x=-1),w=x*Math.sqrt((t*u-t*s-u*r)/(t*s+u*r))}var y=w*c*q/d,z=-1*w*d*p/c,A=n*y-o*z+h/2,B=o*y+n*z+i/2,C=Math.atan2((q-z)/d,(p-y)/c)-Math.atan2(0,1),D=C>=0?C:2*Math.PI+C;C=Math.atan2((-q-z)/d,(-p-y)/c)-Math.atan2((q-z)/d,(p-y)/c);var E=C>=0?C:2*Math.PI+C;0==j&&E>0?E-=2*Math.PI:0!=j&&E<0&&(E+=2*Math.PI);for(var F=2*E/Math.PI,G=Math.ceil(F<0?-1*F:F),H=E/G,I=8/3*Math.sin(H/4)*Math.sin(H/4)/Math.sin(H/2),J=n*c,K=n*d,L=o*c,M=o*d,N=Math.cos(D),O=Math.sin(D),P=-I*(J*O+M*N),Q=-I*(L*O-K*N),R=0,S=0,T=[],U=0;U<G;++U){D+=H,N=Math.cos(D),O=Math.sin(D),R=J*N-M*O+A,S=L*N+K*O+B;var V=-I*(J*O+M*N),W=-I*(L*O-K*N),X=6*U;T[X]=Number(P+a),T[X+1]=Number(Q+b),T[X+2]=Number(R-V+a),T[X+3]=Number(S-W+b),T[X+4]=Number(R+a),T[X+5]=Number(S+b),P=R+V,Q=S+W}return T},getBoundingBox:function(a,b,c){var d=null;if(null!=a&&null!=b&&0!=b){var e=mxUtils.toRadians(b),f=Math.cos(e),g=Math.sin(e);c=null!=c?c:new mxPoint(a.x+a.width/2,a.y+a.height/2);var h=new mxPoint(a.x,a.y),i=new mxPoint(a.x+a.width,a.y),j=new mxPoint(i.x,a.y+a.height),k=new mxPoint(a.x,j.y);h=mxUtils.getRotatedPoint(h,f,g,c),i=mxUtils.getRotatedPoint(i,f,g,c),j=mxUtils.getRotatedPoint(j,f,g,c),k=mxUtils.getRotatedPoint(k,f,g,c),d=new mxRectangle(h.x,h.y,0,0),d.add(new mxRectangle(i.x,i.y,0,0)),d.add(new mxRectangle(j.x,j.y,0,0)),d.add(new mxRectangle(k.x,k.y,0,0))}return d},getRotatedPoint:function(a,b,c,d){d=null!=d?d:new mxPoint;var e=a.x-d.x,f=a.y-d.y,g=e*b-f*c,h=f*b+e*c;return new mxPoint(g+d.x,h+d.y)},getPortConstraints:function(a,b,c,d){var e=mxUtils.getValue(a.style,mxConstants.STYLE_PORT_CONSTRAINT,null);if(null==e)return d;var f=e.toString(),g=mxConstants.DIRECTION_MASK_NONE,h=mxUtils.getValue(a.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0),i=0;1==h&&(i=mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0));var j=0;if(i>45?(j=1,i>=135&&(j=2)):i<-45&&(j=3,i<=-135&&(j=2)),f.indexOf(mxConstants.DIRECTION_NORTH)>=0)switch(j){case 0:g|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:g|=mxConstants.DIRECTION_MASK_EAST;break;case 2:g|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:g|=mxConstants.DIRECTION_MASK_WEST}if(f.indexOf(mxConstants.DIRECTION_WEST)>=0)switch(j){case 0:g|=mxConstants.DIRECTION_MASK_WEST;break;case 1:g|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:g|=mxConstants.DIRECTION_MASK_EAST;break;case 3:g|=mxConstants.DIRECTION_MASK_SOUTH}if(f.indexOf(mxConstants.DIRECTION_SOUTH)>=0)switch(j){case 0:g|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:g|=mxConstants.DIRECTION_MASK_WEST;break;case 2:g|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:g|=mxConstants.DIRECTION_MASK_EAST}if(f.indexOf(mxConstants.DIRECTION_EAST)>=0)switch(j){case 0:g|=mxConstants.DIRECTION_MASK_EAST;break;case 1:g|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:g|=mxConstants.DIRECTION_MASK_WEST;break;case 3:g|=mxConstants.DIRECTION_MASK_NORTH}return g},reversePortConstraints:function(a){var b=0;return b=(a&mxConstants.DIRECTION_MASK_WEST)<<3,b|=(a&mxConstants.DIRECTION_MASK_NORTH)<<1,b|=(a&mxConstants.DIRECTION_MASK_SOUTH)>>1,b|=(a&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(a,b,c){var d=-1;if(a.absolutePoints.length>0)for(var e=a.absolutePoints[0],f=null,g=1;g<a.absolutePoints.length;g++){var h=a.absolutePoints[g],i=mxUtils.ptSegDistSq(e.x,e.y,h.x,h.y,b,c);(null==f||i<f)&&(f=i,d=g-1),e=h}return d},rectangleIntersectsSegment:function(a,b,c){var d=a.y,e=a.x,f=d+a.height,g=e+a.width,h=b.x,i=c.x;if(b.x>c.x&&(h=c.x,i=b.x),i>g&&(i=g),h<e&&(h=e),h>i)return!1;var j=b.y,k=c.y,l=c.x-b.x;if(Math.abs(l)>1e-7){var m=(c.y-b.y)/l,n=b.y-m*b.x;j=m*h+n,k=m*i+n}if(j>k){var o=k;k=j,j=o}return k>f&&(k=f),j<d&&(j=d),!(j>k)},contains:function(a,b,c){return a.x<=b&&a.x+a.width>=b&&a.y<=c&&a.y+a.height>=c},intersects:function(a,b){var c=a.width,d=a.height,e=b.width,f=b.height;if(e<=0||f<=0||c<=0||d<=0)return!1;var g=a.x,h=a.y,i=b.x,j=b.y;return e+=i,f+=j,c+=g,d+=h,(e<i||e>g)&&(f<j||f>h)&&(c<g||c>i)&&(d<h||d>j)},intersectsHotspot:function(a,b,c,d,e,f){if(d=null!=d?d:1,e=null!=e?e:0,f=null!=f?f:0,d>0){var g=a.getCenterX(),h=a.getCenterY(),i=a.width,j=a.height,k=mxUtils.getValue(a.style,mxConstants.STYLE_STARTSIZE)*a.view.scale;k>0&&(mxUtils.getValue(a.style,mxConstants.STYLE_HORIZONTAL,!0)?(h=a.y+k/2,j=k):(g=a.x+k/2,i=k)),i=Math.max(e,i*d),j=Math.max(e,j*d),f>0&&(i=Math.min(i,f),j=Math.min(j,f));var l=new mxRectangle(g-i/2,h-j/2,i,j),m=mxUtils.toRadians(mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION)||0);if(0!=m){var n=Math.cos(-m),o=Math.sin(-m),g=new mxPoint(a.getCenterX(),a.getCenterY()),p=mxUtils.getRotatedPoint(new mxPoint(b,c),n,o,g);b=p.x,c=p.y}return mxUtils.contains(l,b,c)}return!0},getOffset:function(a,b){for(var c=0,d=0,e=!1,f=a,g=document.body,h=document.documentElement;null!=f&&f!=g&&f!=h&&!e;)e=e||"fixed"==mxUtils.getCurrentStyle(f).position,f=f.parentNode;if(!b&&!e){var i=mxUtils.getDocumentScrollOrigin(a.ownerDocument);c+=i.x,d+=i.y}var j=a.getBoundingClientRect();return null!=j&&(c+=j.left,d+=j.top),new mxPoint(c,d)},getDocumentScrollOrigin:function(a){if(mxClient.IS_QUIRKS)return new mxPoint(a.body.scrollLeft,a.body.scrollTop);var b=a.defaultView||a.parentWindow,c=null!=b&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,d=null!=b&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return new mxPoint(c,d)},getScrollOrigin:function(a){for(var b=null!=a?a.ownerDocument:document,c=b.body,d=b.documentElement,e=new mxPoint,f=!1;null!=a&&a!=c&&a!=d;)isNaN(a.scrollLeft)||isNaN(a.scrollTop)||(e.x+=a.scrollLeft,e.y+=a.scrollTop),f=f||"fixed"==mxUtils.getCurrentStyle(a).position,a=a.parentNode;if(!f){var g=mxUtils.getDocumentScrollOrigin(b);e.x+=g.x,e.y+=g.y}return e},convertPoint:function(a,b,c){var d=mxUtils.getScrollOrigin(a),e=mxUtils.getOffset(a);return e.x-=d.x,e.y-=d.y,new mxPoint(b-e.x,c-e.y)},ltrim:function(a,b){return b=b||"\\s",a.replace(new RegExp("^["+b+"]+","g"),"")},rtrim:function(a,b){return b=b||"\\s",a.replace(new RegExp("["+b+"]+$","g"),"")},trim:function(a,b){return mxUtils.ltrim(mxUtils.rtrim(a,b),b)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)&&("string"!=typeof a||a.toLowerCase().indexOf("0x")<0)},isInteger:function(a){return String(parseInt(a))===String(a)},mod:function(a,b){return(a%b+b)%b},intersection:function(a,b,c,d,e,f,g,h){var i=(h-f)*(c-a)-(g-e)*(d-b),j=(g-e)*(b-f)-(h-f)*(a-e),k=(c-a)*(b-f)-(d-b)*(a-e),l=j/i,m=k/i;if(l>=0&&l<=1&&m>=0&&m<=1){var n=a+l*(c-a),o=b+l*(d-b);return new mxPoint(n,o)}return null},ptSegDistSq:function(a,b,c,d,e,f){c-=a,d-=b,e-=a,f-=b;var h,g=e*c+f*d;g<=0?h=0:(e=c-e,f=d-f,g=e*c+f*d,h=g<=0?0:g*g/(c*c+d*d));var i=e*e+f*f-h;return i<0&&(i=0),i},ptLineDist:function(a,b,c,d,e,f){return Math.abs((d-b)*e-(c-a)*f+c*b-d*a)/Math.sqrt((d-b)*(d-b)+(c-a)*(c-a))},relativeCcw:function(a,b,c,d,e,f){c-=a,d-=b,e-=a,f-=b;var g=e*d-f*c;return 0==g&&(g=e*c+f*d,g>0&&(e-=c,f-=d,g=e*c+f*d,g<0&&(g=0))),g<0?-1:g>0?1:0},animateChanges:function(a,b){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(a,b,c){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(a,b,c,d,e,f){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(a,b){mxUtils.isVml(a)?b>=100?a.style.filter="":a.style.filter="alpha(opacity="+b/5+")":mxClient.IS_IE&&("undefined"==typeof document.documentMode||document.documentMode<9)?b>=100?a.style.filter="":a.style.filter="alpha(opacity="+b+")":a.style.opacity=b/100},createImage:function(a){var b=null;return mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?(b=document.createElement(mxClient.VML_PREFIX+":image"),b.setAttribute("src",a),b.style.borderStyle="none"):(b=document.createElement("img"),b.setAttribute("src",a),b.setAttribute("border","0")),b},sortCells:function(a,b){b=null==b||b;var c=new mxDictionary;return a.sort(function(a,d){var e=c.get(a);null==e&&(e=mxCellPath.create(a).split(mxCellPath.PATH_SEPARATOR),c.put(a,e));var f=c.get(d);null==f&&(f=mxCellPath.create(d).split(mxCellPath.PATH_SEPARATOR),c.put(d,f));var g=mxCellPath.compare(e,f);return 0==g?0:g>0==b?1:-1}),a},getStylename:function(a){if(null!=a){var b=a.split(";"),c=b[0];if(c.indexOf("=")<0)return c}return""},getStylenames:function(a){var b=[];if(null!=a)for(var c=a.split(";"),d=0;d<c.length;d++)c[d].indexOf("=")<0&&b.push(c[d]);return b},indexOfStylename:function(a,b){if(null!=a&&null!=b)for(var c=a.split(";"),d=0,e=0;e<c.length;e++){if(c[e]==b)return d;d+=c[e].length+1}return-1},addStylename:function(a,b){return mxUtils.indexOfStylename(a,b)<0&&(null==a?a="":a.length>0&&";"!=a.charAt(a.length-1)&&(a+=";"),a+=b),a},removeStylename:function(a,b){var c=[];if(null!=a)for(var d=a.split(";"),e=0;e<d.length;e++)d[e]!=b&&c.push(d[e]);return c.join(";")},removeAllStylenames:function(a){var b=[];if(null!=a)for(var c=a.split(";"),d=0;d<c.length;d++)c[d].indexOf("=")>=0&&b.push(c[d]);return b.join(";")},setCellStyles:function(a,b,c,d){if(null!=b&&b.length>0){a.beginUpdate();try{for(var e=0;e<b.length;e++)if(null!=b[e]){var f=mxUtils.setStyle(a.getStyle(b[e]),c,d);a.setStyle(b[e],f)}}finally{a.endUpdate()}}},setStyle:function(a,b,c){var d=null!=c&&("undefined"==typeof c.length||c.length>0);if(null==a||0==a.length)d&&(a=b+"="+c+";");else if(a.substring(0,b.length+1)==b+"="){var e=a.indexOf(";");a=d?b+"="+c+(e<0?";":a.substring(e)):e<0||e==a.length-1?"":a.substring(e+1)}else{var f=a.indexOf(";"+b+"=");if(f<0){if(d){var g=";"==a.charAt(a.length-1)?"":";";a=a+g+b+"="+c+";"}}else{var e=a.indexOf(";",f+1);a=d?a.substring(0,f+1)+b+"="+c+(e<0?";":a.substring(e)):a.substring(0,f)+(e<0?";":a.substring(e))}}return a},setCellStyleFlags:function(a,b,c,d,e){if(null!=b&&b.length>0){a.beginUpdate();try{for(var f=0;f<b.length;f++)if(null!=b[f]){var g=mxUtils.setStyleFlag(a.getStyle(b[f]),c,d,e);a.setStyle(b[f],g)}}finally{a.endUpdate()}}},setStyleFlag:function(a,b,c,d){if(null==a||0==a.length)a=d||null==d?b+"="+c:b+"=0";else{var e=a.indexOf(b+"=");if(e<0){var f=";"==a.charAt(a.length-1)?"":";";a=d||null==d?a+f+b+"="+c:a+f+b+"=0"}else{var g=a.indexOf(";",e),h="";h=g<0?a.substring(e+b.length+1):a.substring(e+b.length+1,g),h=null==d?parseInt(h)^c:d?parseInt(h)|c:parseInt(h)&~c,a=a.substring(0,e)+b+"="+h+(g>=0?a.substring(g):"")}}return a},getAlignmentAsPoint:function(a,b){var c=0,d=0;return a==mxConstants.ALIGN_CENTER?c=-.5:a==mxConstants.ALIGN_RIGHT&&(c=-1),b==mxConstants.ALIGN_MIDDLE?d=-.5:b==mxConstants.ALIGN_BOTTOM&&(d=-1),new mxPoint(c,d)},getSizeForString:function(a,b,c,d){b=null!=b?b:mxConstants.DEFAULT_FONTSIZE,c=null!=c?c:mxConstants.DEFAULT_FONTFAMILY;var e=document.createElement("div");e.style.fontFamily=c,e.style.fontSize=Math.round(b)+"px",e.style.lineHeight=Math.round(b*mxConstants.LINE_HEIGHT)+"px",e.style.position="absolute",e.style.visibility="hidden",e.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",e.style.zoom="1",null!=d?(e.style.width=d+"px",e.style.whiteSpace="normal"):e.style.whiteSpace="nowrap",e.innerHTML=a,document.body.appendChild(e);var f=new mxRectangle(0,0,e.offsetWidth,e.offsetHeight);return document.body.removeChild(e),f},getViewXml:function(a,b,c,d,e){if(d=null!=d?d:0,
    e=null!=e?e:0,b=null!=b?b:1,null==c){var f=a.getModel();c=[f.getRoot()]}var g=a.getView(),h=null,i=g.isEventsEnabled();g.setEventsEnabled(!1);var j=g.drawPane,k=g.overlayPane;a.dialect==mxConstants.DIALECT_SVG?(g.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),g.canvas.appendChild(g.drawPane),g.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),g.canvas.appendChild(g.overlayPane)):(g.drawPane=g.drawPane.cloneNode(!1),g.canvas.appendChild(g.drawPane),g.overlayPane=g.overlayPane.cloneNode(!1),g.canvas.appendChild(g.overlayPane));var l=g.getTranslate();g.translate=new mxPoint(d,e);var m=new mxTemporaryCellStates(a.getView(),b,c);try{var n=new mxCodec;h=n.encode(a.getView())}finally{m.destroy(),g.translate=l,g.canvas.removeChild(g.drawPane),g.canvas.removeChild(g.overlayPane),g.drawPane=j,g.overlayPane=k,g.setEventsEnabled(i)}return h},getScaleForPageCount:function(a,b,c,d){if(a<1)return 1;c=null!=c?c:mxConstants.PAGE_FORMAT_A4_PORTRAIT,d=null!=d?d:0;var e=c.width-2*d,f=c.height-2*d,g=b.getGraphBounds().clone(),h=b.getView().getScale();g.width/=h,g.height/=h;var i=g.width,j=g.height,k=1,l=e/f,m=i/j,n=m/l,o=Math.sqrt(a),p=Math.sqrt(n),q=o*p,r=o/p;if(q<1&&r>a){var s=r/a;r=a,q/=s}if(r<1&&q>a){var s=q/a;q=a,r/=s}for(var t=Math.ceil(q)*Math.ceil(r),u=0;t>a;){var v=Math.floor(q)/q,w=Math.floor(r)/r;1==v&&(v=Math.floor(q-1)/q),1==w&&(w=Math.floor(r-1)/r);var s=1;if(s=v>w?v:w,q*=s,r*=s,t=Math.ceil(q)*Math.ceil(r),u++,u>10)break}var x=e*q;return k=x/i,.99999*k},show:function(a,b,c,d,e,f){if(c=null!=c?c:0,d=null!=d?d:0,null==b){var g=window.open();b=g.document}else b.open();9==document.documentMode&&b.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->');var h=a.getGraphBounds(),i=Math.ceil(c-h.x),j=Math.ceil(d-h.y);if(null==e&&(e=Math.ceil(h.width+c)+Math.ceil(Math.ceil(h.x)-h.x)),null==f&&(f=Math.ceil(h.height+d)+Math.ceil(Math.ceil(h.y)-h.y)),mxClient.IS_IE||11==document.documentMode){for(var k="<html><head>",l=document.getElementsByTagName("base"),m=0;m<l.length;m++)k+=l[m].outerHTML;k+="<style>";for(var m=0;m<document.styleSheets.length;m++)try{k+=document.styleSheets[m].cssText}catch(a){}k+='</style></head><body style="margin:0px;">',k+='<div style="position:absolute;overflow:hidden;width:'+e+"px;height:"+f+'px;"><div style="position:relative;left:'+i+"px;top:"+j+'px;">',k+=a.container.innerHTML,k+="</div></div></body><html>",b.writeln(k),b.close()}else{b.writeln("<html><head>");for(var l=document.getElementsByTagName("base"),m=0;m<l.length;m++)b.writeln(mxUtils.getOuterHtml(l[m]));for(var n=document.getElementsByTagName("link"),m=0;m<n.length;m++)b.writeln(mxUtils.getOuterHtml(n[m]));for(var o=document.getElementsByTagName("style"),m=0;m<o.length;m++)b.writeln(mxUtils.getOuterHtml(o[m]));b.writeln('</head><body style="margin:0px;"></body></html>'),b.close();var p=b.createElement("div");p.position="absolute",p.overflow="hidden",p.style.width=e+"px",p.style.height=f+"px";var q=b.createElement("div");q.style.position="absolute",q.style.left=i+"px",q.style.top=j+"px";for(var r=a.container.firstChild,s=null;null!=r;){var t=r.cloneNode(!0);r==a.view.drawPane.ownerSVGElement?(p.appendChild(t),s=t):q.appendChild(t),r=r.nextSibling}b.body.appendChild(p),null!=q.firstChild&&b.body.appendChild(q),null!=s&&(s.style.minWidth="",s.style.minHeight="",s.firstChild.setAttribute("transform","translate("+i+","+j+")"))}return mxUtils.removeCursors(b.body),b},printScreen:function(a){var b=window.open();a.getGraphBounds();mxUtils.show(a,b.document);var d=function(){b.focus(),b.print(),b.close()};mxClient.IS_GC?b.setTimeout(d,500):d()},popup:function(a,b){if(b){var c=document.createElement("div");c.style.overflow="scroll",c.style.width="636px",c.style.height="460px";var d=document.createElement("pre");d.innerHTML=mxUtils.htmlEntities(a,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),c.appendChild(d);var e=document.body.clientWidth,f=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight),g=new mxWindow("Popup Window",c,e/2-320,f/2-240,640,480,!1,!0);g.setClosable(!0),g.setVisible(!0)}else if(mxClient.IS_NS){var g=window.open();g.document.writeln("<pre>"+mxUtils.htmlEntities(a)+"</pre"),g.document.close()}else{var g=window.open(),d=g.document.createElement("pre");d.innerHTML=mxUtils.htmlEntities(a,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),g.document.body.appendChild(d)}},alert:function(a){alert(a)},prompt:function(a,b){return prompt(a,null!=b?b:"")},confirm:function(a){return confirm(a)},error:function(a,b,c,d){var e=document.createElement("div");e.style.padding="20px";var f=document.createElement("img");f.setAttribute("src",d||mxUtils.errorImage),f.setAttribute("valign","bottom"),f.style.verticalAlign="middle",e.appendChild(f),e.appendChild(document.createTextNode("")),e.appendChild(document.createTextNode("")),e.appendChild(document.createTextNode("")),mxUtils.write(e,a);var g=document.body.clientWidth,h=document.body.clientHeight||document.documentElement.clientHeight,i=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,e,(g-b)/2,h/4,b,null,!1,!0);if(c){mxUtils.br(e);var j=document.createElement("p"),k=document.createElement("button");mxClient.IS_IE?k.style.cssText="float:right":k.setAttribute("style","float:right"),mxEvent.addListener(k,"click",function(a){i.destroy()}),mxUtils.write(k,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),j.appendChild(k),e.appendChild(j),mxUtils.br(e),i.setClosable(!0)}return i.setVisible(!0),i},makeDraggable:function(a,b,c,d,e,f,g,h,i,j){var k=new mxDragSource(a,c);return k.dragOffset=new mxPoint(null!=e?e:0,null!=f?f:mxConstants.TOOLTIP_VERTICAL_OFFSET),k.autoscroll=g,k.setGuidesEnabled(!1),null!=i&&(k.highlightDropTargets=i),null!=j&&(k.getDropTarget=j),k.getGraphForEvent=function(a){return"function"==typeof b?b(a):b},null!=d&&(k.createDragElement=function(){return d.cloneNode(!0)},h&&(k.createPreviewElement=function(a){var b=d.cloneNode(!0),c=parseInt(b.style.width),e=parseInt(b.style.height);return b.style.width=Math.round(c*a.view.scale)+"px",b.style.height=Math.round(e*a.view.scale)+"px",b})),k}},mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,826,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,826),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_SMOOTH:"smooth",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(a){return this.properties[a]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(a){return null!=a&&mxUtils.isAncestorNode(a.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var a=this.getState();return null!=a?a.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(a){a=null==a||a,a&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(a){this.eventsEnabled=a},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(a){this.eventSource=a},mxEventSource.prototype.addListener=function(a,b){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(a),this.eventListeners.push(b)},mxEventSource.prototype.removeListener=function(a){if(null!=this.eventListeners)for(var b=0;b<this.eventListeners.length;)this.eventListeners[b+1]==a?this.eventListeners.splice(b,2):b+=2},mxEventSource.prototype.fireEvent=function(a,b){if(null!=this.eventListeners&&this.isEventsEnabled()){null==a&&(a=new mxEventObject),null==b&&(b=this.getEventSource()),null==b&&(b=this);for(var c=[b,a],d=0;d<this.eventListeners.length;d+=2){var e=this.eventListeners[d];null!=e&&e!=a.getName()||this.eventListeners[d+1].apply(this,c)}}};var mxEvent={objects:[],addListener:function(){var a=function(a,b,c){null==a.mxListenerList&&(a.mxListenerList=[],mxEvent.objects.push(a));var d={name:b,f:c};a.mxListenerList.push(d)};return window.addEventListener?function(b,c,d){b.addEventListener(c,d,!1),a(b,c,d)}:function(b,c,d){b.attachEvent("on"+c,d),a(b,c,d)}}(),removeListener:function(){var a=function(a,b,c){if(null!=a.mxListenerList){for(var d=a.mxListenerList.length,e=0;e<d;e++){var f=a.mxListenerList[e];if(f.f==c){a.mxListenerList.splice(e,1);break}}if(0==a.mxListenerList.length){a.mxListenerList=null;var g=mxUtils.indexOf(mxEvent.objects,a);g>=0&&mxEvent.objects.splice(g,1)}}};return window.removeEventListener?function(b,c,d){b.removeEventListener(c,d,!1),a(b,c,d)}:function(b,c,d){b.detachEvent("on"+c,d),a(b,c,d)}}(),removeAllListeners:function(a){var b=a.mxListenerList;if(null!=b)for(;b.length>0;){var c=b[0];mxEvent.removeListener(a,c.name,c.f)}},addGestureListeners:function(a,b,c,d){null!=b&&mxEvent.addListener(a,mxClient.IS_POINTER?"pointerdown":"mousedown",b),null!=c&&mxEvent.addListener(a,mxClient.IS_POINTER?"pointermove":"mousemove",c),null!=d&&mxEvent.addListener(a,mxClient.IS_POINTER?"pointerup":"mouseup",d),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=b&&mxEvent.addListener(a,"touchstart",b),null!=c&&mxEvent.addListener(a,"touchmove",c),null!=d&&mxEvent.addListener(a,"touchend",d))},removeGestureListeners:function(a,b,c,d){null!=b&&mxEvent.removeListener(a,mxClient.IS_POINTER?"pointerdown":"mousedown",b),null!=c&&mxEvent.removeListener(a,mxClient.IS_POINTER?"pointermove":"mousemove",c),null!=d&&mxEvent.removeListener(a,mxClient.IS_POINTER?"pointerup":"mouseup",d),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=b&&mxEvent.removeListener(a,"touchstart",b),null!=c&&mxEvent.removeListener(a,"touchmove",c),null!=d&&mxEvent.removeListener(a,"touchend",d))},redirectMouseEvents:function(a,b,c,d,e,f,g){var h=function(a){return"function"==typeof c?c(a):c};mxEvent.addGestureListeners(a,function(a){null!=d?d(a):mxEvent.isConsumed(a)||b.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a,h(a)))},function(a){null!=e?e(a):mxEvent.isConsumed(a)||b.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a,h(a)))},function(a){null!=f?f(a):mxEvent.isConsumed(a)||b.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a,h(a)))}),mxEvent.addListener(a,"dblclick",function(a){if(null!=g)g(a);else if(!mxEvent.isConsumed(a)){var c=h(a);b.dblClick(a,null!=c?c.cell:null)}})},release:function(a){if(null!=a){mxEvent.removeAllListeners(a);var b=a.childNodes;if(null!=b)for(var c=b.length,d=0;d<c;d+=1)mxEvent.release(b[d])}},addMouseWheelListener:function(a){if(null!=a){var b=function(b){null==b&&(b=window.event);var c=0;c=mxClient.IS_FF?-b.detail/2:b.wheelDelta/120,0!=c&&a(b,c>0)};if(mxClient.IS_NS&&null==document.documentMode){var c=mxClient.IS_SF||mxClient.IS_GC?"mousewheel":"DOMMouseScroll";mxEvent.addListener(window,c,b)}else mxEvent.addListener(document,"mousewheel",b)}},disableContextMenu:function(){return mxClient.IS_IE&&("undefined"==typeof document.documentMode||document.documentMode<9)?function(a){mxEvent.addListener(a,"contextmenu",function(){return!1})}:function(a){a.setAttribute("oncontextmenu","return false;")}}(),getSource:function(a){return null!=a.srcElement?a.srcElement:a.target},isConsumed:function(a){return null!=a.isConsumed&&a.isConsumed},isTouchEvent:function(a){return null!=a.pointerType?"touch"==a.pointerType||a.pointerType===a.MSPOINTER_TYPE_TOUCH:null!=a.mozInputSource?5==a.mozInputSource:0==a.type.indexOf("touch")},isMultiTouchEvent:function(a){return null!=a.type&&0==a.type.indexOf("touch")&&null!=a.touches&&a.touches.length>1},isMouseEvent:function(a){return null!=a.pointerType?"mouse"==a.pointerType||a.pointerType===a.MSPOINTER_TYPE_MOUSE:null!=a.mozInputSource?1==a.mozInputSource:0==a.type.indexOf("mouse")},isLeftMouseButton:function(a){return"buttons"in a&&("mousedown"==a.type||"mousemove"==a.type)?1==a.buttons:"which"in a?1===a.which:1===a.button},isMiddleMouseButton:function(a){return"which"in a?2===a.which:4===a.button},isRightMouseButton:function(a){return"which"in a?3===a.which:2===a.button},isPopupTrigger:function(a){return mxEvent.isRightMouseButton(a)||mxClient.IS_MAC&&mxEvent.isControlDown(a)&&!mxEvent.isShiftDown(a)&&!mxEvent.isMetaDown(a)&&!mxEvent.isAltDown(a)},isShiftDown:function(a){return null!=a&&a.shiftKey},isAltDown:function(a){return null!=a&&a.altKey},isControlDown:function(a){return null!=a&&a.ctrlKey},isMetaDown:function(a){return null!=a&&a.metaKey},getMainEvent:function(a){return"touchstart"!=a.type&&"touchmove"!=a.type||null==a.touches||null==a.touches[0]?"touchend"==a.type&&null!=a.changedTouches&&null!=a.changedTouches[0]&&(a=a.changedTouches[0]):a=a.touches[0],a},getClientX:function(a){return mxEvent.getMainEvent(a).clientX},getClientY:function(a){return mxEvent.getMainEvent(a).clientY},consume:function(a,b,c){b=null==b||b,c=null==c||c,b&&(a.preventDefault?(c&&a.stopPropagation(),a.preventDefault()):c&&(a.cancelBubble=!0)),a.isConsumed=!0,a.preventDefault||(a.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset"};mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(a){this.binary=a},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var a=this.getXml();return null!=a?a.documentElement:null},mxXmlRequest.prototype.getXml=function(){var a=this.request.responseXML;return(document.documentMode>=9||null==a||null==a.documentElement)&&(a=mxUtils.parseXml(this.request.responseText)),a},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.getStatus=function(){return this.request.status},mxXmlRequest.prototype.create=function(){return window.XMLHttpRequest?function(){var a=new XMLHttpRequest;return this.isBinary()&&a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),a}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0}(),mxXmlRequest.prototype.send=function(a,b,c,d){this.request=this.create(),null!=this.request&&(null!=a&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(a(this),this.onreadystatechaange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(null==document.documentMode||document.documentMode>9)&&window.XMLHttpRequest&&null!=c&&null!=d&&(this.request.timeout=c,this.request.ontimeout=d),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(a,b){null!=b&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(a,b){a=a||document;var c=null;a==document&&(c=window.onbeforeunload,window.onbeforeunload=null);var d=a.createElement("form");d.setAttribute("method",this.method),d.setAttribute("action",this.url),null!=b&&d.setAttribute("target",b),d.style.display="none",d.style.visibility="hidden";for(var e=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),f=0;f<e.length;f++){var g=e[f].indexOf("=");if(g>0){var h=e[f].substring(0,g),i=e[f].substring(g+1);this.decodeSimulateValues&&(i=decodeURIComponent(i));var j=a.createElement("textarea");j.setAttribute("wrap","off"),j.setAttribute("name",h),mxUtils.write(j,i),d.appendChild(j)}}a.body.appendChild(d),d.submit(),null!=d.parentNode&&d.parentNode.removeChild(d),null!=c&&(window.onbeforeunload=c)};var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(a){mxClipboard.cells=a},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(a,b){return b=mxClipboard.copy(a,b),mxClipboard.insertCount=0,mxClipboard.removeCells(a,b),b},removeCells:function(a,b){a.removeCells(b)},copy:function(a,b){b=b||a.getSelectionCells();var c=a.getExportableCells(a.model.getTopmostCells(b));return mxClipboard.insertCount=1,mxClipboard.setCells(a.cloneCells(c)),c},paste:function(a){var b=null;if(!mxClipboard.isEmpty()){b=a.getImportableCells(mxClipboard.getCells());var c=mxClipboard.insertCount*mxClipboard.STEPSIZE,d=a.getDefaultParent();b=a.importCells(b,c,c,d),mxClipboard.insertCount++,a.setSelectionCells(b)}return b}};mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(a,b,c,d,e){e=null!=e?e:"mxWindow",this.div=document.createElement("div"),this.div.className=e,this.div.style.left=a+"px",this.div.style.top=b+"px",this.table=document.createElement("table"),this.table.className=e,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=c&&(mxClient.IS_QUIRKS||(this.div.style.width=c+"px"),this.table.style.width=c+"px"),null!=d&&(mxClient.IS_QUIRKS||(this.div.style.height=d+"px"),this.table.style.height=d+"px");var f=document.createElement("tbody"),g=document.createElement("tr");this.title=document.createElement("td"),this.title.className=e+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),g.appendChild(this.title),f.appendChild(g),g=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=e+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=e+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),(mxClient.IS_QUIRKS||"DIV"!=this.content.nodeName.toUpperCase())&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),g.appendChild(this.td),f.appendChild(g),this.table.appendChild(f),this.div.appendChild(this.table);var h=mxUtils.bind(this,function(a){this.activate()});mxEvent.addGestureListeners(this.title,h),mxEvent.addGestureListeners(this.table,h),this.hide()},mxWindow.prototype.setTitle=function(a){for(var b=this.title.firstChild;null!=b;){var c=b.nextSibling;b.nodeType==mxConstants.NODETYPE_TEXT&&b.parentNode.removeChild(b),b=c}mxUtils.write(this.title,a||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(a){navigator.userAgent.indexOf("Presto/2.5")<0&&(a?this.contentWrapper.style.overflow="auto":this.contentWrapper.style.overflow="hidden")},mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var a=mxUtils.getCurrentStyle(this.getElement()),b=null!=a?a.zIndex:3;if(mxWindow.activeWindow){var c=mxWindow.activeWindow.getElement();null!=c&&null!=c.style&&(c.style.zIndex=b)}var d=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(b)+1,mxWindow.activeWindow=this,this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",d))}},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(a){if(a)if(null==this.resize){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",mxClient.imageBasePath+"/resize.gif"),this.resize.style.cursor="nw-resize";var b=null,c=null,d=null,e=null,f=mxUtils.bind(this,function(a){this.activate(),b=mxEvent.getClientX(a),c=mxEvent.getClientY(a),d=this.div.offsetWidth,e=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,g,h),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",a)),mxEvent.consume(a)}),g=mxUtils.bind(this,function(a){if(null!=b&&null!=c){var f=mxEvent.getClientX(a)-b,g=mxEvent.getClientY(a)-c;this.setSize(d+f,e+g),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",a)),mxEvent.consume(a)}}),h=mxUtils.bind(this,function(a){null!=b&&null!=c&&(b=null,c=null,mxEvent.removeGestureListeners(document,null,g,h),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",a)),mxEvent.consume(a));
});mxEvent.addGestureListeners(this.resize,f,g,h),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(a,b){a=Math.max(this.minimumSize.width,a),b=Math.max(this.minimumSize.height,b),mxClient.IS_QUIRKS||(this.div.style.width=a+"px",this.div.style.height=b+"px"),this.table.style.width=a+"px",this.table.style.height=b+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")},mxWindow.prototype.setMinimizable=function(a){this.minimize.style.display=a?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var a=!1,b=null,c=null,d=mxUtils.bind(this,function(d){if(this.activate(),a)a=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=b,mxClient.IS_QUIRKS||(this.div.style.height=c),this.table.style.height=c,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",d));else{a=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",b=this.maximize.style.display,this.maximize.style.display="none",c=this.table.style.height;var e=this.getMinimumSize();e.height>0&&(mxClient.IS_QUIRKS||(this.div.style.height=e.height+"px"),this.table.style.height=e.height+"px"),e.width>0&&(mxClient.IS_QUIRKS||(this.div.style.width=e.width+"px"),this.table.style.width=e.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",d))}mxEvent.consume(d)});mxEvent.addGestureListeners(this.minimize,d)},mxWindow.prototype.setMaximizable=function(a){this.maximize.style.display=a?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var a=!1,b=null,c=null,d=null,e=null,f=null,g=mxUtils.bind(this,function(g){if(this.activate(),"none"!=this.maximize.style.display){if(a){if(a=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=f,this.div.style.left=b+"px",this.div.style.top=c+"px",!mxClient.IS_QUIRKS){this.div.style.height=d,this.div.style.width=e;var i=mxUtils.getCurrentStyle(this.contentWrapper);"auto"!=i.overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}this.table.style.height=d,this.table.style.width=e,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",g))}else{a=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",f=this.minimize.style.display,this.minimize.style.display="none",b=parseInt(this.div.style.left),c=parseInt(this.div.style.top),d=this.table.style.height,e=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var h=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);if(mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=h-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=h-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),!mxClient.IS_QUIRKS){var i=mxUtils.getCurrentStyle(this.contentWrapper);"auto"!=i.overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")}this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",g))}mxEvent.consume(g)}});mxEvent.addGestureListeners(this.maximize,g),mxEvent.addListener(this.title,"dblclick",g)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(a){var b=mxEvent.getClientX(a),c=mxEvent.getClientY(a),d=this.getX(),e=this.getY(),f=mxUtils.bind(this,function(a){var f=mxEvent.getClientX(a)-b,g=mxEvent.getClientY(a)-c;this.setLocation(d+f,e+g),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",a)),mxEvent.consume(a)}),g=mxUtils.bind(this,function(a){mxEvent.removeGestureListeners(document,null,f,g),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",a)),mxEvent.consume(a)});mxEvent.addGestureListeners(document,null,f,g),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",a)),mxEvent.consume(a)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(a,b){this.div.style.left=a+"px",this.div.style.top=b+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(a){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",a)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(a)}))},mxWindow.prototype.setImage=function(a){this.image=document.createElement("img"),this.image.setAttribute("src",a),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(a){this.closeImg.style.display=a?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(a){null!=this.div&&this.isVisible()!=a&&(a?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate();var a=mxUtils.getCurrentStyle(this.contentWrapper);mxClient.IS_QUIRKS||"auto"!=a.overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null},mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(a,b){var c=document.createElement("tr"),d=document.createElement("td");c.appendChild(d),d=document.createElement("td");var e=document.createElement("button");mxUtils.write(e,mxResources.get("ok")||"OK"),d.appendChild(e),mxEvent.addListener(e,"click",function(){a()}),e=document.createElement("button"),mxUtils.write(e,mxResources.get("cancel")||"Cancel"),d.appendChild(e),mxEvent.addListener(e,"click",function(){b()}),c.appendChild(d),this.body.appendChild(c)},mxForm.prototype.addText=function(a,b){var c=document.createElement("input");return c.setAttribute("type","text"),c.value=b,this.addField(a,c)},mxForm.prototype.addCheckbox=function(a,b){var c=document.createElement("input");return c.setAttribute("type","checkbox"),this.addField(a,c),b&&(c.checked=!0),c},mxForm.prototype.addTextarea=function(a,b,c){var d=document.createElement("textarea");return mxClient.IS_NS&&c--,d.setAttribute("rows",c||2),d.value=b,this.addField(a,d)},mxForm.prototype.addCombo=function(a,b,c){var d=document.createElement("select");return null!=c&&d.setAttribute("size",c),b&&d.setAttribute("multiple","true"),this.addField(a,d)},mxForm.prototype.addOption=function(a,b,c,d){var e=document.createElement("option");mxUtils.writeln(e,b),e.setAttribute("value",c),d&&e.setAttribute("selected",d),a.appendChild(e)},mxForm.prototype.addField=function(a,b){var c=document.createElement("tr"),d=document.createElement("td");return mxUtils.write(d,a),c.appendChild(d),d=document.createElement("td"),d.appendChild(b),c.appendChild(d),this.body.appendChild(c),b},mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var a=this.getDocumentWidth(),b=this.getDocumentHeight(),c=parseInt(this.div.style.left),d=parseInt(this.div.style.right),e=parseInt(this.div.style.top),f=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(c)&&!isNaN(d)&&c>=0&&d>=0&&a-d-c>0&&(this.div.style.width=a-d-c+"px"),this.resizeHeight&&!isNaN(e)&&!isNaN(f)&&e>=0&&f>=0&&b-e-f>0&&(this.div.style.height=b-e-f+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(a){this.enabled=a},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(a){this.guidesEnabled=a},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(a){this.gridEnabled=a},mxDragSource.prototype.getGraphForEvent=function(a){return null},mxDragSource.prototype.getDropTarget=function(a,b,c,d){return a.getCellAt(b,c)},mxDragSource.prototype.createDragElement=function(a){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(a){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(a){this.enabled&&!mxEvent.isConsumed(a)&&null==this.mouseMoveHandler&&(this.startDrag(a),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(a)&&(this.eventSource=mxEvent.getSource(a),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))},mxDragSource.prototype.startDrag=function(a){this.dragElement=this.createDragElement(a),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity)},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.graphContainsEvent=function(a,b){var c=mxEvent.getClientX(b),d=mxEvent.getClientY(b),e=mxUtils.getOffset(a.container),f=mxUtils.getScrollOrigin();return c>=e.x-f.x&&d>=e.y-f.y&&c<=e.x-f.x+a.container.offsetWidth&&d<=e.y-f.y+a.container.offsetHeight},mxDragSource.prototype.mouseMove=function(a){var b=this.getGraphForEvent(a);if(null==b||this.graphContainsEvent(b,a)||(b=null),b!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,a),this.currentGraph=b,null!=this.currentGraph&&this.dragEnter(this.currentGraph,a)),null!=this.currentGraph&&this.dragOver(this.currentGraph,a),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility)null!=this.dragElement&&(this.dragElement.style.visibility="hidden");else{var c=mxEvent.getClientX(a),d=mxEvent.getClientY(a);null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(c+=this.dragOffset.x,d+=this.dragOffset.y);var e=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=c+e.x+"px",this.dragElement.style.top=d+e.y+"px"}mxEvent.consume(a)},mxDragSource.prototype.mouseUp=function(a){if(null!=this.currentGraph){if(null!=this.currentPoint&&(null==this.previewElement||"hidden"!=this.previewElement.style.visibility)){var b=this.currentGraph.view.scale,c=this.currentGraph.view.translate,d=this.currentPoint.x/b-c.x,e=this.currentPoint.y/b-c.y;this.drop(this.currentGraph,a,this.currentDropTarget,d,e)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent.consume(a)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null},mxDragSource.prototype.dragEnter=function(a,b){a.isMouseDown=!0,a.isMouseTrigger=mxEvent.isMouseEvent(b),this.previewElement=this.createPreviewElement(a),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(a,a.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(a,mxConstants.DROP_TARGET_COLOR)),a.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(a,b){this.currentDropTarget=null,this.currentPoint=null,a.isMouseDown=!1,a.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(a,b){var c=mxUtils.getOffset(a.container),d=mxUtils.getScrollOrigin(a.container),e=mxEvent.getClientX(b)-c.x+d.x-a.panDx,f=mxEvent.getClientY(b)-c.y+d.y-a.panDy;if(a.autoScroll&&(null==this.autoscroll||this.autoscroll)&&a.scrollPointToVisible(e,f,a.autoExtend),null!=this.currentHighlight&&a.isDropEnabled()){this.currentDropTarget=this.getDropTarget(a,e,f,b);var g=a.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(g)}if(null!=this.previewElement){null==this.previewElement.parentNode&&(a.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var h=this.isGridEnabled()&&a.isGridEnabledEvent(b),i=!0;if(null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(b)){var j=parseInt(this.previewElement.style.width),k=parseInt(this.previewElement.style.height),l=new mxRectangle(0,0,j,k),m=new mxPoint(e,f);m=this.currentGuide.move(l,m,h),i=!1,e=m.x,f=m.y}else if(h){var n=a.view.scale,o=a.view.translate,p=a.gridSize/2;e=(a.snap(e/n-o.x-p)+o.x)*n,f=(a.snap(f/n-o.y-p)+o.y)*n}null!=this.currentGuide&&i&&this.currentGuide.hide(),null!=this.previewOffset&&(e+=this.previewOffset.x,f+=this.previewOffset.y),this.previewElement.style.left=Math.round(e)+"px",this.previewElement.style.top=Math.round(f)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(e,f)},mxDragSource.prototype.drop=function(a,b,c,d,e){this.dropHandler(a,b,c,d,e),"hidden"!=a.container.style.visibility&&a.container.focus()},mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(a,b,c,d,e,f){var g=document.createElement(null!=b?"img":"button"),h=e||(null!=f?"mxToolbarMode":"mxToolbarItem");g.className=h,g.setAttribute("src",b),null!=a&&(null!=b?g.setAttribute("title",a):mxUtils.write(g,a)),this.container.appendChild(g),null!=c&&(mxEvent.addListener(g,"click",c),mxClient.IS_TOUCH&&mxEvent.addListener(g,"touchend",c));var i=mxUtils.bind(this,function(a){null!=d?g.setAttribute("src",b):g.style.backgroundColor=""});return mxEvent.addGestureListeners(g,mxUtils.bind(this,function(a){if(null!=d?g.setAttribute("src",d):g.style.backgroundColor="gray",null!=f){null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init());var b=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),b!=g){this.currentImg=g,this.menu.factoryMethod=f;var c=new mxPoint(g.offsetLeft,g.offsetTop+g.offsetHeight);this.menu.popup(c.x,c.y,null,a),this.menu.isMenuShowing()&&(g.className=h+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),g.className=h,this.currentImg=null})}}}),null,i),mxEvent.addListener(g,"mouseout",i),g},mxToolbar.prototype.addCombo=function(a){var b=document.createElement("div");b.style.display="inline",b.className="mxToolbarComboContainer";var c=document.createElement("select");return c.className=a||"mxToolbarCombo",b.appendChild(c),this.container.appendChild(b),c},mxToolbar.prototype.addActionCombo=function(a,b){var c=document.createElement("select");return c.className=b||"mxToolbarCombo",this.addOption(c,a,null),mxEvent.addListener(c,"change",function(a){var b=c.options[c.selectedIndex];c.selectedIndex=0,null!=b.funct&&b.funct(a)}),this.container.appendChild(c),c},mxToolbar.prototype.addOption=function(a,b,c){var d=document.createElement("option");return mxUtils.writeln(d,b),"function"==typeof c?d.funct=c:d.setAttribute("value",c),a.appendChild(d),d},mxToolbar.prototype.addSwitchMode=function(a,b,c,d,e){var f=document.createElement("img");return f.initialClassName=e||"mxToolbarMode",f.className=f.initialClassName,f.setAttribute("src",b),f.altIcon=d,null!=a&&f.setAttribute("title",a),mxEvent.addListener(f,"click",mxUtils.bind(this,function(a){var b=this.selectedMode.altIcon;null!=b?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",b)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=f),this.selectedMode=f;var b=f.altIcon;null!=b?(f.altIcon=f.getAttribute("src"),f.setAttribute("src",b)):f.className=f.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),c()})),this.container.appendChild(f),null==this.defaultMode&&(this.defaultMode=f,this.selectMode(f),c()),f},mxToolbar.prototype.addMode=function(a,b,c,d,e,f){f=null==f||f;var g=document.createElement(null!=b?"img":"button");return g.initialClassName=e||"mxToolbarMode",g.className=g.initialClassName,g.setAttribute("src",b),g.altIcon=d,null!=a&&g.setAttribute("title",a),this.enabled&&f&&(mxEvent.addListener(g,"click",mxUtils.bind(this,function(a){this.selectMode(g,c),this.noReset=!1})),mxEvent.addListener(g,"dblclick",mxUtils.bind(this,function(a){this.selectMode(g,c),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=g,this.defaultFunction=c,this.selectMode(g,c))),this.container.appendChild(g),g},mxToolbar.prototype.selectMode=function(a,b){if(this.selectedMode!=a){if(null!=this.selectedMode){var c=this.selectedMode.altIcon;null!=c?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",c)):this.selectedMode.className=this.selectedMode.initialClassName}this.selectedMode=a;var c=this.selectedMode.altIcon;null!=c?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",c)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",b))}},mxToolbar.prototype.resetMode=function(a){!a&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(a){return this.addItem(null,a,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var a=document.createElement("hr");a.style.marginRight="6px",a.setAttribute("size","1"),this.container.appendChild(a)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,null!=this.menu&&this.menu.destroy()},mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(a){this.changes.push(a)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var a=this.changes.length,b=a-1;b>=0;b--){var c=this.changes[b];null!=c.execute?c.execute():null!=c.undo&&c.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",c))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var a=this.changes.length,b=0;b<a;b++){var c=this.changes[b];null!=c.execute?c.execute():null!=c.redo&&c.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",c))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0},mxUndoManager.prototype.undo=function(){for(;this.indexOfNextAdd>0;){var a=this.history[--this.indexOfNextAdd];if(a.undo(),a.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",a));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var a=this.history.length;this.indexOfNextAdd<a;){var b=this.history[this.indexOfNextAdd++];if(b.redo(),b.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",b));break}}},mxUndoManager.prototype.undoableEditHappened=function(a){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(a),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",a))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var a=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),b=0;b<a.length;b++)a[b].die()};var mxUrlConverter=function(){};mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var a=this.baseUrl.lastIndexOf("/");a>0&&(this.baseUrl=this.baseUrl.substring(0,a+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(a){this.enabled=a},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(a){this.baseUrl=a},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(a){this.baseDomain=a},mxUrlConverter.prototype.isRelativeUrl=function(a){return"//"!=a.substring(0,2)&&"http://"!=a.substring(0,7)&&"https://"!=a.substring(0,8)&&"data:image"!=a.substring(0,10)},mxUrlConverter.prototype.convert=function(a){return this.isEnabled()&&this.isRelativeUrl(a)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),a="/"==a.charAt(0)?this.getBaseDomain()+a:this.getBaseUrl()+a),a},mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(a){this.enabled=a},mxPopupMenu.prototype.isPopupTrigger=function(a){return a.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(a.getEvent())},mxPopupMenu.prototype.addItem=function(a,b,c,d,e,f,g){d=d||this,this.itemCount++,d.willAddSeparator&&(d.containsItems&&this.addSeparator(d,!0),d.willAddSeparator=!1),d.containsItems=!0;var h=document.createElement("tr");h.className="mxPopupMenuItem";var i=document.createElement("td");if(i.className="mxPopupMenuIcon",null!=b){var j=document.createElement("img");j.src=b,i.appendChild(j)}else if(null!=e){var k=document.createElement("div");k.className=e,i.appendChild(k)}if(h.appendChild(i),this.labels){var l=document.createElement("td");l.className="mxPopupMenuItem"+(null==f||f?"":" mxDisabled"),mxUtils.write(l,a),l.align="left",h.appendChild(l);var m=document.createElement("td");m.className="mxPopupMenuItem"+(null==f||f?"":" mxDisabled"),m.style.paddingRight="6px",m.style.textAlign="right",h.appendChild(m),null==d.div&&this.createSubmenu(d)}if(d.tbody.appendChild(h),0!=g&&0!=f){var n=null;mxEvent.addGestureListeners(h,mxUtils.bind(this,function(a){this.eventReceiver=h,d.activeRow!=h&&d.activeRow!=d&&(null!=d.activeRow&&null!=d.activeRow.div.parentNode&&this.hideSubmenu(d),null!=h.div&&(this.showSubmenu(d,h),d.activeRow=h)),(mxClient.IS_QUIRKS||8==document.documentMode)&&(n=document.selection.createRange()),mxEvent.consume(a)}),mxUtils.bind(this,function(a){d.activeRow!=h&&d.activeRow!=d&&(null!=d.activeRow&&null!=d.activeRow.div.parentNode&&this.hideSubmenu(d),this.autoExpand&&null!=h.div&&(this.showSubmenu(d,h),d.activeRow=h)),h.className="mxPopupMenuItemHover"}),mxUtils.bind(this,function(a){if(this.eventReceiver==h){if(d.activeRow!=h&&this.hideMenu(),null!=n){try{n.select()}catch(a){}n=null}null!=c&&c(a)}this.eventReceiver=null,mxEvent.consume(a)})),mxEvent.addListener(h,"mouseout",mxUtils.bind(this,function(a){h.className="mxPopupMenuItem"}))}return h},mxPopupMenu.prototype.addCheckmark=function(a,b){var c=a.firstChild.nextSibling;c.style.backgroundImage="url('"+b+"')",c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(a){a.table=document.createElement("table"),a.table.className="mxPopupMenu",a.tbody=document.createElement("tbody"),a.table.appendChild(a.tbody),a.div=document.createElement("div"),a.div.className="mxPopupMenu",a.div.style.position="absolute",a.div.style.display="inline",a.div.style.zIndex=this.zIndex,a.div.appendChild(a.table);var b=document.createElement("img");b.setAttribute("src",this.submenuImage),td=a.firstChild.nextSibling.nextSibling,td.appendChild(b)},mxPopupMenu.prototype.showSubmenu=function(a,b){if(null!=b.div){b.div.style.left=a.div.offsetLeft+b.offsetLeft+b.offsetWidth-1+"px",b.div.style.top=a.div.offsetTop+b.offsetTop+"px",document.body.appendChild(b.div);var c=parseInt(b.div.offsetLeft),d=parseInt(b.div.offsetWidth),e=mxUtils.getDocumentScrollOrigin(document),f=document.body,g=document.documentElement,h=e.x+(f.clientWidth||g.clientWidth);c+d>h&&(b.div.style.left=a.div.offsetLeft-d+(mxClient.IS_IE?6:-6)+"px"),mxUtils.fit(b.div)}},mxPopupMenu.prototype.addSeparator=function(a,b){if(a=a||this,this.smartSeparators&&!b)a.willAddSeparator=!0;else if(null!=a.tbody){a.willAddSeparator=!1;var c=document.createElement("tr"),d=document.createElement("td");d.className="mxPopupMenuIcon",d.style.padding="0 0 0 0px",c.appendChild(d);var e=document.createElement("td");e.style.padding="0 0 0 0px",e.setAttribute("colSpan","2");var f=document.createElement("hr");f.setAttribute("size","1"),e.appendChild(f),c.appendChild(e),a.tbody.appendChild(c)}},mxPopupMenu.prototype.popup=function(a,b,c,d){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=a+"px",this.div.style.top=b+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,c,d),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(a){null!=a.activeRow&&(this.hideSubmenu(a.activeRow),null!=a.activeRow.div.parentNode&&a.activeRow.div.parentNode.removeChild(a.activeRow.div),a.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},mxAutoSaveManager.prototype=new mxEventSource,
  mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(a){this.enabled=a},mxAutoSaveManager.prototype.setGraph=function(a){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=a,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(a){var b=(new Date).getTime(),c=(b-this.lastSnapshot)/1e3;c>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&c>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){var a=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var b=0;b<this.cells.length;b++)this.animateCell(this.cells[b],a,!1);else this.animateCell(this.graph.getModel().getRoot(),a,!0);this.show(a),(a.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(a){a.show()},mxMorphing.prototype.animateCell=function(a,b,c){var d=this.graph.getView().getState(a),e=null;if(null!=d&&(e=this.getDelta(d),this.graph.getModel().isVertex(a)&&(0!=e.x||0!=e.y))){var f=this.graph.view.getTranslate(),g=this.graph.view.getScale();e.x+=f.x*g,e.y+=f.y*g,b.moveState(d,-e.x/this.ease,-e.y/this.ease)}if(c&&!this.stopRecursion(d,e))for(var h=this.graph.getModel().getChildCount(a),i=0;i<h;i++)this.animateCell(this.graph.getModel().getChildAt(a,i),b,c)},mxMorphing.prototype.stopRecursion=function(a,b){return null!=b&&(0!=b.x||0!=b.y)},mxMorphing.prototype.getDelta=function(a){var b=this.getOriginForCell(a.cell),c=this.graph.getView().getTranslate(),d=this.graph.getView().getScale(),e=a.x/d-c.x,f=a.y/d-c.y;return new mxPoint((b.x-e)*d,(b.y-f)*d)},mxMorphing.prototype.getOriginForCell=function(a){var b=null;if(null!=a){var c=this.graph.getModel().getParent(a),d=this.graph.getCellGeometry(a);if(b=this.getOriginForCell(c),null!=d)if(d.relative){var e=this.graph.getCellGeometry(c);null!=e&&(b.x+=d.x*e.width,b.y+=d.y*e.height)}else b.x+=d.x,b.y+=d.y}if(null==b){var f=this.graph.view.getTranslate();b=new mxPoint(-f.x,-f.y)}return b},mxImageBundle.prototype.images=null,mxImageBundle.prototype.images=null,mxImageBundle.prototype.putImage=function(a,b,c){this.images[a]={value:b,fallback:c}},mxImageBundle.prototype.getImage=function(a){var b=null;if(null!=a){var c=this.images[a];null!=c&&(b=this.alt?c.fallback:c.value)}return b},mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(a,b){null!=a&&(this.visitStatesRecursive(a,b,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(a,b,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))},mxImageExport.prototype.visitStatesRecursive=function(a,b,c){if(null!=a){c(a,b);for(var d=a.view.graph,e=d.model.getChildCount(a.cell),f=0;f<e;f++){var g=d.view.getState(d.model.getChildAt(a.cell,f));this.visitStatesRecursive(g,b,c)}}},mxImageExport.prototype.getLinkForCellState=function(a,b){return null},mxImageExport.prototype.drawCellState=function(a,b){var c=this.getLinkForCellState(a,b);null!=c&&b.setLink(c),this.drawShape(a,b),this.drawText(a,b),null!=c&&b.setLink(null)},mxImageExport.prototype.drawShape=function(a,b){a.shape instanceof mxShape&&a.shape.checkBounds()&&(b.save(),a.shape.paint(b),b.restore())},mxImageExport.prototype.drawText=function(a,b){null!=a.text&&a.text.checkBounds()&&(b.save(),a.text.paint(b),b.restore())},mxImageExport.prototype.drawOverlays=function(a,b){null!=a.overlays&&a.overlays.visit(function(a,c){c instanceof mxShape&&c.paint(b)})},mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(a){return Math.round(parseFloat(a))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),arguments.length>2))for(var a=this.state,b=2;b<arguments.length;b+=2)this.lastX=arguments[b-1],this.lastY=arguments[b],this.path.push(this.format((this.lastX+a.dx)*a.scale)),this.path.push(this.format((this.lastY+a.dy)*a.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(a,b,c,d,e){var f=c*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(a,b),Math.cos(f),Math.sin(f),new mxPoint(d,e))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){this.states.length>0&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(a){},mxAbstractCanvas2D.prototype.scale=function(a){this.state.scale*=a,this.state.strokeWidth*=a},mxAbstractCanvas2D.prototype.translate=function(a,b){this.state.dx+=a,this.state.dy+=b},mxAbstractCanvas2D.prototype.rotate=function(a,b,c,d,e){},mxAbstractCanvas2D.prototype.setAlpha=function(a){this.state.alpha=a},mxAbstractCanvas2D.prototype.setFillAlpha=function(a){this.state.fillAlpha=a},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(a){this.state.strokeAlpha=a},mxAbstractCanvas2D.prototype.setFillColor=function(a){a==mxConstants.NONE&&(a=null),this.state.fillColor=a,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(a,b,c,d,e,f,g,h,i){var j=this.state;j.fillColor=a,j.gradientFillAlpha=null!=h?h:1,j.gradientColor=b,j.gradientAlpha=null!=i?i:1,j.gradientDirection=g},mxAbstractCanvas2D.prototype.setStrokeColor=function(a){a==mxConstants.NONE&&(a=null),this.state.strokeColor=a},mxAbstractCanvas2D.prototype.setStrokeWidth=function(a){this.state.strokeWidth=a},mxAbstractCanvas2D.prototype.setDashed=function(a){this.state.dashed=a},mxAbstractCanvas2D.prototype.setDashPattern=function(a){this.state.dashPattern=a},mxAbstractCanvas2D.prototype.setLineCap=function(a){this.state.lineCap=a},mxAbstractCanvas2D.prototype.setLineJoin=function(a){this.state.lineJoin=a},mxAbstractCanvas2D.prototype.setMiterLimit=function(a){this.state.miterLimit=a},mxAbstractCanvas2D.prototype.setFontColor=function(a){a==mxConstants.NONE&&(a=null),this.state.fontColor=a},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(a){a==mxConstants.NONE&&(a=null),this.state.fontBackgroundColor=a},mxAbstractCanvas2D.prototype.setFontBorderColor=function(a){a==mxConstants.NONE&&(a=null),this.state.fontBorderColor=a},mxAbstractCanvas2D.prototype.setFontSize=function(a){this.state.fontSize=parseFloat(a)},mxAbstractCanvas2D.prototype.setFontFamily=function(a){this.state.fontFamily=a},mxAbstractCanvas2D.prototype.setFontStyle=function(a){null==a&&(a=0),this.state.fontStyle=a},mxAbstractCanvas2D.prototype.setShadow=function(a){this.state.shadow=a},mxAbstractCanvas2D.prototype.setShadowColor=function(a){a==mxConstants.NONE&&(a=null),this.state.shadowColor=a},mxAbstractCanvas2D.prototype.setShadowAlpha=function(a){this.state.shadowAlpha=a},mxAbstractCanvas2D.prototype.setShadowOffset=function(a,b){this.state.shadowDx=a,this.state.shadowDy=b},mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0,this.lastY=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(a,b){this.addOp(this.moveOp,a,b)},mxAbstractCanvas2D.prototype.lineTo=function(a,b){this.addOp(this.lineOp,a,b)},mxAbstractCanvas2D.prototype.quadTo=function(a,b,c,d){this.addOp(this.quadOp,a,b,c,d)},mxAbstractCanvas2D.prototype.curveTo=function(a,b,c,d,e,f){this.addOp(this.curveOp,a,b,c,d,e,f)},mxAbstractCanvas2D.prototype.arcTo=function(a,b,c,d,e,f,g){var h=mxUtils.arcToCurves(this.lastX,this.lastY,a,b,c,d,e,f,g);if(null!=h)for(var i=0;i<h.length;i+=6)this.curveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5])},mxAbstractCanvas2D.prototype.close=function(a,b,c,d,e,f){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var a;a=this.createElement("fontfamily"),a.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(a),a=this.createElement("fontsize"),a.setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(a),a=this.createElement("shadowcolor"),a.setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(a),a=this.createElement("shadowalpha"),a.setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(a),a=this.createElement("shadowoffset"),a.setAttribute("dx",mxConstants.SHADOW_OFFSET_X),a.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(a)},mxXmlCanvas2D.prototype.format=function(a){return parseFloat(parseFloat(a).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(a){return this.root.ownerDocument.createElement(a)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(a){var b=this.createElement("scale");b.setAttribute("scale",a),this.root.appendChild(b)},mxXmlCanvas2D.prototype.translate=function(a,b){var c=this.createElement("translate");c.setAttribute("dx",this.format(a)),c.setAttribute("dy",this.format(b)),this.root.appendChild(c)},mxXmlCanvas2D.prototype.rotate=function(a,b,c,d,e){var f=this.createElement("rotate");(0!=a||b||c)&&(f.setAttribute("theta",this.format(a)),f.setAttribute("flipH",b?"1":"0"),f.setAttribute("flipV",c?"1":"0"),f.setAttribute("cx",this.format(d)),f.setAttribute("cy",this.format(e)),this.root.appendChild(f))},mxXmlCanvas2D.prototype.setAlpha=function(a){if(this.compressed){if(this.state.alpha==a)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var b=this.createElement("alpha");b.setAttribute("alpha",this.format(a)),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setFillAlpha=function(a){if(this.compressed){if(this.state.fillAlpha==a)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var b=this.createElement("fillalpha");b.setAttribute("alpha",this.format(a)),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(a){if(this.compressed){if(this.state.strokeAlpha==a)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var b=this.createElement("strokealpha");b.setAttribute("alpha",this.format(a)),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setFillColor=function(a){if(a==mxConstants.NONE&&(a=null),this.compressed){if(this.state.fillColor==a)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var b=this.createElement("fillcolor");b.setAttribute("color",null!=a?a:mxConstants.NONE),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setGradient=function(a,b,c,d,e,f,g,h,i){if(null!=a&&null!=b){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var j=this.createElement("gradient");j.setAttribute("c1",a),j.setAttribute("c2",b),j.setAttribute("x",this.format(c)),j.setAttribute("y",this.format(d)),j.setAttribute("w",this.format(e)),j.setAttribute("h",this.format(f)),null!=g&&j.setAttribute("direction",g),null!=h&&j.setAttribute("alpha1",h),null!=i&&j.setAttribute("alpha2",i),this.root.appendChild(j)}},mxXmlCanvas2D.prototype.setStrokeColor=function(a){if(a==mxConstants.NONE&&(a=null),this.compressed){if(this.state.strokeColor==a)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var b=this.createElement("strokecolor");b.setAttribute("color",null!=a?a:mxConstants.NONE),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setStrokeWidth=function(a){if(this.compressed){if(this.state.strokeWidth==a)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var b=this.createElement("strokewidth");b.setAttribute("width",this.format(a)),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setDashed=function(a){if(this.compressed){if(this.state.dashed==a)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var b=this.createElement("dashed");b.setAttribute("dashed",a?"1":"0"),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setDashPattern=function(a){if(this.compressed){if(this.state.dashPattern==a)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var b=this.createElement("dashpattern");b.setAttribute("pattern",a),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setLineCap=function(a){if(this.compressed){if(this.state.lineCap==a)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var b=this.createElement("linecap");b.setAttribute("cap",a),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setLineJoin=function(a){if(this.compressed){if(this.state.lineJoin==a)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var b=this.createElement("linejoin");b.setAttribute("join",a),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setMiterLimit=function(a){if(this.compressed){if(this.state.miterLimit==a)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var b=this.createElement("miterlimit");b.setAttribute("limit",a),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setFontColor=function(a){if(this.textEnabled){if(a==mxConstants.NONE&&(a=null),this.compressed){if(this.state.fontColor==a)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var b=this.createElement("fontcolor");b.setAttribute("color",null!=a?a:mxConstants.NONE),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(a){if(this.textEnabled){if(a==mxConstants.NONE&&(a=null),this.compressed){if(this.state.fontBackgroundColor==a)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var b=this.createElement("fontbackgroundcolor");b.setAttribute("color",null!=a?a:mxConstants.NONE),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(a){if(this.textEnabled){if(a==mxConstants.NONE&&(a=null),this.compressed){if(this.state.fontBorderColor==a)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var b=this.createElement("fontbordercolor");b.setAttribute("color",null!=a?a:mxConstants.NONE),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.setFontSize=function(a){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==a)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var b=this.createElement("fontsize");b.setAttribute("size",a),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.setFontFamily=function(a){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==a)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var b=this.createElement("fontfamily");b.setAttribute("family",a),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.setFontStyle=function(a){if(this.textEnabled){if(null==a&&(a=0),this.compressed){if(this.state.fontStyle==a)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var b=this.createElement("fontstyle");b.setAttribute("style",a),this.root.appendChild(b)}},mxXmlCanvas2D.prototype.setShadow=function(a){if(this.compressed){if(this.state.shadow==a)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var b=this.createElement("shadow");b.setAttribute("enabled",a?"1":"0"),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setShadowColor=function(a){if(this.compressed){if(a==mxConstants.NONE&&(a=null),this.state.shadowColor==a)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var b=this.createElement("shadowcolor");b.setAttribute("color",null!=a?a:mxConstants.NONE),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setShadowAlpha=function(a){if(this.compressed){if(this.state.shadowAlpha==a)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var b=this.createElement("shadowalpha");b.setAttribute("alpha",a),this.root.appendChild(b)},mxXmlCanvas2D.prototype.setShadowOffset=function(a,b){if(this.compressed){if(this.state.shadowDx==a&&this.state.shadowDy==b)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var c=this.createElement("shadowoffset");c.setAttribute("dx",a),c.setAttribute("dy",b),this.root.appendChild(c)},mxXmlCanvas2D.prototype.rect=function(a,b,c,d){var e=this.createElement("rect");e.setAttribute("x",this.format(a)),e.setAttribute("y",this.format(b)),e.setAttribute("w",this.format(c)),e.setAttribute("h",this.format(d)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.roundrect=function(a,b,c,d,e,f){var g=this.createElement("roundrect");g.setAttribute("x",this.format(a)),g.setAttribute("y",this.format(b)),g.setAttribute("w",this.format(c)),g.setAttribute("h",this.format(d)),g.setAttribute("dx",this.format(e)),g.setAttribute("dy",this.format(f)),this.root.appendChild(g)},mxXmlCanvas2D.prototype.ellipse=function(a,b,c,d){var e=this.createElement("ellipse");e.setAttribute("x",this.format(a)),e.setAttribute("y",this.format(b)),e.setAttribute("w",this.format(c)),e.setAttribute("h",this.format(d)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.image=function(a,b,c,d,e,f,g,h){e=this.converter.convert(e);var i=this.createElement("image");i.setAttribute("x",this.format(a)),i.setAttribute("y",this.format(b)),i.setAttribute("w",this.format(c)),i.setAttribute("h",this.format(d)),i.setAttribute("src",e),i.setAttribute("aspect",f?"1":"0"),i.setAttribute("flipH",g?"1":"0"),i.setAttribute("flipV",h?"1":"0"),this.root.appendChild(i)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastX=0,this.lastY=0},mxXmlCanvas2D.prototype.moveTo=function(a,b){var c=this.createElement("move");c.setAttribute("x",this.format(a)),c.setAttribute("y",this.format(b)),this.root.appendChild(c),this.lastX=a,this.lastY=b},mxXmlCanvas2D.prototype.lineTo=function(a,b){var c=this.createElement("line");c.setAttribute("x",this.format(a)),c.setAttribute("y",this.format(b)),this.root.appendChild(c),this.lastX=a,this.lastY=b},mxXmlCanvas2D.prototype.quadTo=function(a,b,c,d){var e=this.createElement("quad");e.setAttribute("x1",this.format(a)),e.setAttribute("y1",this.format(b)),e.setAttribute("x2",this.format(c)),e.setAttribute("y2",this.format(d)),this.root.appendChild(e),this.lastX=c,this.lastY=d},mxXmlCanvas2D.prototype.curveTo=function(a,b,c,d,e,f){var g=this.createElement("curve");g.setAttribute("x1",this.format(a)),g.setAttribute("y1",this.format(b)),g.setAttribute("x2",this.format(c)),g.setAttribute("y2",this.format(d)),g.setAttribute("x3",this.format(e)),g.setAttribute("y3",this.format(f)),this.root.appendChild(g),this.lastX=e,this.lastY=f},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(this.textEnabled&&null!=e){mxUtils.isNode(e)&&(e=mxUtils.getOuterHtml(e));var n=this.createElement("text");n.setAttribute("x",this.format(a)),n.setAttribute("y",this.format(b)),n.setAttribute("w",this.format(c)),n.setAttribute("h",this.format(d)),n.setAttribute("str",e),null!=f&&n.setAttribute("align",f),null!=g&&n.setAttribute("valign",g),n.setAttribute("wrap",h?"1":"0"),null==i&&(i=""),n.setAttribute("format",i),null!=j&&n.setAttribute("overflow",j),null!=k&&n.setAttribute("clip",k?"1":"0"),null!=l&&n.setAttribute("rotation",l),null!=m&&n.setAttribute("dir",m),this.root.appendChild(n)}},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var a=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=a}catch(a){mxSvgCanvas2D.prototype.useDomParser=!1}}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.blockImagePointerEvents=!1,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(a){return parseFloat(parseFloat(a).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var a=window.location.href,b=a.lastIndexOf("#");return b>0&&(a=a.substring(0,b)),a},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(a){var b=this.createElement("style");return b.setAttribute("type","text/css"),mxUtils.write(b,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),b},mxSvgCanvas2D.prototype.createElement=function(a,b){if(null!=this.root.ownerDocument.createElementNS)return this.root.ownerDocument.createElementNS(b||mxConstants.NS_SVG,a);var c=this.root.ownerDocument.createElement(a);return null!=b&&c.setAttribute("xmlns",b),c},mxSvgCanvas2D.prototype.createAlternateContent=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(null!=this.foAltText){var n=this.state,o=this.createElement("text");return o.setAttribute("x",Math.round(d/2)),o.setAttribute("y",Math.round((e+n.fontSize)/2)),o.setAttribute("fill",n.fontColor||"black"),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size",n.fontSize+"px"),o.setAttribute("font-family",n.fontFamily),(n.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&o.setAttribute("font-weight","bold"),(n.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&o.setAttribute("font-style","italic"),(n.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.setAttribute("text-decoration","underline"),mxUtils.write(o,this.foAltText),o}return null},mxSvgCanvas2D.prototype.createGradientId=function(a,b,c,d,e){"#"==a.charAt(0)&&(a=a.substring(1)),"#"==b.charAt(0)&&(b=b.substring(1)),a=a.toLowerCase()+"-"+c,b=b.toLowerCase()+"-"+d;var f=null;if(null==e||e==mxConstants.DIRECTION_SOUTH)f="s";else if(e==mxConstants.DIRECTION_EAST)f="e";else{var g=a;a=b,b=g,e==mxConstants.DIRECTION_NORTH?f="s":e==mxConstants.DIRECTION_WEST&&(f="e")}return"mx-gradient-"+a+"-"+b+"-"+f},mxSvgCanvas2D.prototype.getSvgGradient=function(a,b,c,d,e){var f=this.createGradientId(a,b,c,d,e),g=this.gradients[f];if(null==g){var h=this.root.ownerSVGElement,i=0,j=f+"-"+i;if(null!=h)for(g=h.ownerDocument.getElementById(j);null!=g&&g.ownerSVGElement!=h;)j=f+"-"+i++,g=h.ownerDocument.getElementById(j);else j="id"+ ++this.refCount;null==g&&(g=this.createSvgGradient(a,b,c,d,e),g.setAttribute("id",j),null!=this.defs?this.defs.appendChild(g):h.appendChild(g)),this.gradients[f]=g}return g.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(a,b,c,d,e){var f=this.createElement("linearGradient");f.setAttribute("x1","0%"),f.setAttribute("y1","0%"),f.setAttribute("x2","0%"),f.setAttribute("y2","0%"),null==e||e==mxConstants.DIRECTION_SOUTH?f.setAttribute("y2","100%"):e==mxConstants.DIRECTION_EAST?f.setAttribute("x2","100%"):e==mxConstants.DIRECTION_NORTH?f.setAttribute("y1","100%"):e==mxConstants.DIRECTION_WEST&&f.setAttribute("x1","100%");var g=c<1?";stop-opacity:"+c:"",h=this.createElement("stop");return h.setAttribute("offset","0%"),h.setAttribute("style","stop-color:"+a+g),f.appendChild(h),g=d<1?";stop-opacity:"+d:"",h=this.createElement("stop"),h.setAttribute("offset","100%"),h.setAttribute("style","stop-color:"+b+g),f.appendChild(h),f},mxSvgCanvas2D.prototype.addNode=function(a,b){var c=this.node,d=this.state;if(null!=c){if("path"==c.nodeName){if(!(null!=this.path&&this.path.length>0))return;c.setAttribute("d",this.path.join(" "))}a&&null!=d.fillColor?this.updateFill():this.styleEnabled||("ellipse"==c.nodeName&&mxClient.IS_FF?c.setAttribute("fill","transparent"):c.setAttribute("fill","none"),a=!1),b&&null!=d.strokeColor?this.updateStroke():this.styleEnabled||c.setAttribute("stroke","none"),null!=d.transform&&d.transform.length>0&&c.setAttribute("transform",d.transform),d.shadow&&this.root.appendChild(this.createShadow(c)),this.strokeTolerance>0&&!a&&this.root.appendChild(this.createTolerance(c)),!this.pointerEvents||"path"==c.nodeName&&this.path[this.path.length-1]!=this.closeOp?this.pointerEvents||null!=this.originalRoot||c.setAttribute("pointer-events","none"):c.setAttribute("pointer-events",this.pointerEventsValue),("rect"!=c.nodeName&&"path"!=c.nodeName&&"ellipse"!=c.nodeName||"none"!=c.getAttribute("fill")&&"transparent"!=c.getAttribute("fill")||"none"!=c.getAttribute("stroke")||"none"!=c.getAttribute("pointer-events"))&&this.root.appendChild(c),this.node=null}},mxSvgCanvas2D.prototype.updateFill=function(){var a=this.state;if((a.alpha<1||a.fillAlpha<1)&&this.node.setAttribute("fill-opacity",a.alpha*a.fillAlpha),null!=a.fillColor)if(null!=a.gradientColor){var b=this.getSvgGradient(a.fillColor,a.gradientColor,a.gradientFillAlpha,a.gradientAlpha,a.gradientDirection);if(mxClient.IS_CHROME_APP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)this.node.setAttribute("fill","url(#"+b+")");else{var c=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+c+"#"+b+")")}}else this.node.setAttribute("fill",a.fillColor.toLowerCase())},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(1,this.format(this.state.strokeWidth*this.state.scale))},mxSvgCanvas2D.prototype.updateStroke=function(){var a=this.state;this.node.setAttribute("stroke",a.strokeColor.toLowerCase()),(a.alpha<1||a.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",a.alpha*a.strokeAlpha);var b=this.getCurrentStrokeWidth();1!=b&&this.node.setAttribute("stroke-width",b),"path"==this.node.nodeName&&this.updateStrokeAttributes(),a.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern(a.strokeWidth*a.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var a=this.state;if(null!=a.lineJoin&&"miter"!=a.lineJoin&&this.node.setAttribute("stroke-linejoin",a.lineJoin),null!=a.lineCap){var b=a.lineCap;"flat"==b&&(b="butt"),"butt"!=b&&this.node.setAttribute("stroke-linecap",b)}null==a.miterLimit||this.styleEnabled&&10==a.miterLimit||this.node.setAttribute("stroke-miterlimit",a.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(a){var b=[];if("string"==typeof this.state.dashPattern){var c=this.state.dashPattern.split(" ");if(c.length>0)for(var d=0;d<c.length;d++)b[d]=Number(c[d])*a}return b.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(a){var b=a.cloneNode(!0),c=parseFloat(b.getAttribute("stroke-width")||1)+this.strokeTolerance;return b.setAttribute("pointer-events","stroke"),b.setAttribute("visibility","hidden"),b.removeAttribute("stroke-dasharray"),b.setAttribute("stroke-width",c),b.setAttribute("fill","none"),b.setAttribute("stroke",mxClient.IS_OT?"none":"white"),b},mxSvgCanvas2D.prototype.createShadow=function(a){var b=a.cloneNode(!0),c=this.state;return"none"==b.getAttribute("fill")||mxClient.IS_FF&&"transparent"==b.getAttribute("fill")||b.setAttribute("fill",c.shadowColor),"none"!=b.getAttribute("stroke")&&b.setAttribute("stroke",c.shadowColor),b.setAttribute("transform","translate("+this.format(c.shadowDx*c.scale)+","+this.format(c.shadowDy*c.scale)+")"+(c.transform||"")),b.setAttribute("opacity",c.shadowAlpha),b},mxSvgCanvas2D.prototype.setLink=function(a){if(null==a)this.root=this.originalRoot;else{this.originalRoot=this.root;var b=this.createElement("a");null==b.setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?b.setAttribute("xlink:href",a):b.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",a),this.root.appendChild(b),this.root=b}},mxSvgCanvas2D.prototype.rotate=function(a,b,c,d,e){if(0!=a||b||c){var f=this.state;if(d+=f.dx,e+=f.dy,d*=f.scale,e*=f.scale,f.transform=f.transform||"",b&&c)a+=180;else if(b!=c){var g=b?d:0,h=b?-1:1,i=c?e:0,j=c?-1:1;f.transform+="translate("+this.format(g)+","+this.format(i)+")scale("+this.format(h)+","+this.format(j)+")translate("+this.format(-g)+","+this.format(-i)+")"}(b?!c:c)&&(a*=-1),0!=a&&(f.transform+="rotate("+this.format(a)+","+this.format(d)+","+this.format(e)+")"),f.rotation=f.rotation+a,f.rotationCx=d,f.rotationCy=e}},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(a,b,c,d){var e=this.state,f=this.createElement("rect");f.setAttribute("x",this.format((a+e.dx)*e.scale)),f.setAttribute("y",this.format((b+e.dy)*e.scale)),f.setAttribute("width",this.format(c*e.scale)),f.setAttribute("height",this.format(d*e.scale)),this.node=f},mxSvgCanvas2D.prototype.roundrect=function(a,b,c,d,e,f){
  this.rect(a,b,c,d),e>0&&this.node.setAttribute("rx",this.format(e*this.state.scale)),f>0&&this.node.setAttribute("ry",this.format(f*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(a,b,c,d){var e=this.state,f=this.createElement("ellipse");f.setAttribute("cx",Math.round((a+c/2+e.dx)*e.scale)),f.setAttribute("cy",Math.round((b+d/2+e.dy)*e.scale)),f.setAttribute("rx",c/2*e.scale),f.setAttribute("ry",d/2*e.scale),this.node=f},mxSvgCanvas2D.prototype.image=function(a,b,c,d,e,f,g,h){e=this.converter.convert(e),f=null==f||f,g=null!=g&&g,h=null!=h&&h;var i=this.state;a+=i.dx,b+=i.dy;var j=this.createElement("image");j.setAttribute("x",this.format(a*i.scale)+this.imageOffset),j.setAttribute("y",this.format(b*i.scale)+this.imageOffset),j.setAttribute("width",this.format(c*i.scale)),j.setAttribute("height",this.format(d*i.scale)),null==j.setAttributeNS?j.setAttribute("xlink:href",e):j.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",e),f||j.setAttribute("preserveAspectRatio","none"),(i.alpha<1||i.fillAlpha<1)&&j.setAttribute("opacity",i.alpha*i.fillAlpha);var k=this.state.transform||"";if(g||h){var l=1,m=1,n=0,o=0;g&&(l=-1,n=-c-2*a),h&&(m=-1,o=-d-2*b),k+="scale("+l+","+m+")translate("+n*i.scale+","+o*i.scale+")"}k.length>0&&j.setAttribute("transform",k),this.pointerEvents||j.setAttribute("pointer-events","none"),this.root.appendChild(j),this.blockImagePointerEvents&&(j.setAttribute("style","pointer-events:none"),j=this.createElement("rect"),j.setAttribute("visibility","hidden"),j.setAttribute("pointer-events","fill"),j.setAttribute("x",this.format(a*i.scale)),j.setAttribute("y",this.format(b*i.scale)),j.setAttribute("width",this.format(c*i.scale)),j.setAttribute("height",this.format(d*i.scale)),this.root.appendChild(j))},mxSvgCanvas2D.prototype.convertHtml=function(a){if(this.useDomParser){var b=(new DOMParser).parseFromString(a,"text/html");null!=b&&(a=(new XMLSerializer).serializeToString(b.body),"<body"==a.substring(0,5)&&(a=a.substring(a.indexOf(">",5)+1)),"</body>"==a.substring(a.length-7,a.length)&&(a=a.substring(0,a.length-7)))}else{if(null!=document.implementation&&null!=document.implementation.createDocument){var c=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),d=c.createElement("body");c.documentElement.appendChild(d);var e=document.createElement("div");e.innerHTML=a;for(var f=e.firstChild;null!=f;){var g=f.nextSibling;d.appendChild(c.adoptNode(f)),f=g}return d.innerHTML}var h=document.createElement("textarea");h.innerHTML=a.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=h.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return a},mxSvgCanvas2D.prototype.createDiv=function(a,b,c,d,e){var f=this.state,g=mxConstants.ABSOLUTE_LINE_HEIGHT?f.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection;d="display:inline-block;font-size:"+f.fontSize+"px;font-family:"+f.fontFamily+";color:"+f.fontColor+";line-height:"+g+";"+d,(f.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(d+="font-weight:bold;"),(f.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(d+="font-style:italic;"),(f.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(d+="text-decoration:underline;"),b==mxConstants.ALIGN_CENTER?d+="text-align:center;":b==mxConstants.ALIGN_RIGHT&&(d+="text-align:right;");var h="";null!=f.fontBackgroundColor&&(h+="background-color:"+f.fontBackgroundColor+";"),null!=f.fontBorderColor&&(h+="border:1px solid "+f.fontBorderColor+";");var i=a;if(mxUtils.isNode(i)||(i=this.convertHtml(i),"fill"!=e&&"width"!=e?i='<div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;'+h+'">'+i+"</div>":d+=h),!mxClient.IS_IE&&document.createElementNS){var j=document.createElementNS("http://www.w3.org/1999/xhtml","div");return j.setAttribute("style",d),mxUtils.isNode(i)?this.root.ownerDocument!=document?j.appendChild(i.cloneNode(!0)):j.appendChild(i):j.innerHTML=i,j}return mxUtils.isNode(i)&&this.root.ownerDocument!=document&&(i=i.outerHTML),mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml" style="'+d+'">'+i+"</div>").documentElement},mxSvgCanvas2D.prototype.invalidateCachedOffsetSize=function(a){delete a.firstChild.mxCachedOffsetWidth,delete a.firstChild.mxCachedFinalOffsetWidth,delete a.firstChild.mxCachedFinalOffsetHeight},mxSvgCanvas2D.prototype.updateText=function(a,b,c,d,e,f,g,h,i,j,k){if(null!=k&&null!=k.firstChild&&null!=k.firstChild.firstChild&&null!=k.firstChild.firstChild.firstChild){var l=k.firstChild,m=l.firstChild,n=m.firstChild;j=null!=j?j:0;var o=this.state;a+=o.dx,b+=o.dy,i?(n.style.maxHeight=Math.round(d)+"px",n.style.maxWidth=Math.round(c)+"px"):"fill"==h?(n.style.width=Math.round(c+1)+"px",n.style.height=Math.round(d+1)+"px"):"width"==h&&(n.style.width=Math.round(c+1)+"px",d>0&&(n.style.maxHeight=Math.round(d)+"px")),g&&c>0&&(n.style.width=Math.round(c+1)+"px");var p=0,q=0,r=2,t=n;null!=t.firstChild&&"DIV"==t.firstChild.nodeName&&(t=t.firstChild);var u=null!=l.mxCachedOffsetWidth?l.mxCachedOffsetWidth:t.offsetWidth;p=u+r,g&&"fill"!=h&&(i&&(p=Math.min(p,c)),n.style.width=p+"px"),p=(null!=l.mxCachedFinalOffsetWidth?l.mxCachedFinalOffsetWidth:t.offsetWidth)+r,q=(null!=l.mxCachedFinalOffsetHeight?l.mxCachedFinalOffsetHeight:t.offsetHeight)-2,i&&(q=Math.min(q,d),p=Math.min(p,c)),"width"==h?d=q:"fill"!=h&&(c=p,d=q);var v=0,w=0;e==mxConstants.ALIGN_CENTER?v-=c/2:e==mxConstants.ALIGN_RIGHT&&(v-=c),a+=v,f==mxConstants.ALIGN_MIDDLE?w-=d/2:f==mxConstants.ALIGN_BOTTOM&&(w-=d),"fill"!=h&&mxClient.IS_FF&&mxClient.IS_WIN&&(w-=2),b+=w;var x=1!=o.scale?"scale("+o.scale+")":"";if(0!=o.rotation&&this.rotateHtml){x+="rotate("+o.rotation+","+c/2+","+d/2+")";var y=this.rotatePoint((a+c/2)*o.scale,(b+d/2)*o.scale,o.rotation,o.rotationCx,o.rotationCy);a=y.x-c*o.scale/2,b=y.y-d*o.scale/2}else a*=o.scale,b*=o.scale;0!=j&&(x+="rotate("+j+","+-v+","+-w+")"),l.setAttribute("transform","translate("+Math.round(a)+","+Math.round(b)+")"+x),m.setAttribute("width",Math.round(Math.max(1,c))),m.setAttribute("height",Math.round(Math.max(1,d)))}},mxSvgCanvas2D.prototype.text=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(this.textEnabled&&null!=e){l=null!=l?l:0;var n=this.state;if(a+=n.dx,b+=n.dy,this.foEnabled&&"html"==i){var o="vertical-align:top;";k?o+="overflow:hidden;max-height:"+Math.round(d)+"px;max-width:"+Math.round(c)+"px;":"fill"==j?o+="width:"+Math.round(c+1)+"px;height:"+Math.round(d+1)+"px;overflow:hidden;":"width"==j&&(o+="width:"+Math.round(c+1)+"px;",d>0&&(o+="max-height:"+Math.round(d)+"px;overflow:hidden;")),o+=h&&c>0?"width:"+Math.round(c+1)+"px;white-space:normal;word-wrap:"+mxConstants.WORD_WRAP+";":"white-space:nowrap;";var p=this.createElement("g");n.alpha<1&&p.setAttribute("opacity",n.alpha);var q=this.createElement("foreignObject");q.setAttribute("style","overflow:visible;"),q.setAttribute("pointer-events","all");var r=this.createDiv(e,f,g,o,j);if(null==r)return;null!=m&&r.setAttribute("dir",m),p.appendChild(q),this.root.appendChild(p);var s=0,t=0,u=2,v=2;if(!mxClient.IS_IE||9!=document.documentMode&&mxClient.IS_SVG){this.root.ownerDocument!=document?(r.style.visibility="hidden",document.body.appendChild(r)):q.appendChild(r);var B=r;null!=B.firstChild&&"DIV"==B.firstChild.nodeName&&(B=B.firstChild,h&&"break-word"==r.style.wordWrap&&(B.style.width="100%"));var y=B.offsetWidth;if(0==y&&r.parentNode==q&&(r.style.visibility="hidden",document.body.appendChild(r),y=B.offsetWidth),this.cacheOffsetSize&&(p.mxCachedOffsetWidth=y),!k&&h&&c>0&&this.root.ownerDocument!=document&&"fill"!=j&&"width"!=j){var A=r.style.whiteSpace;r.style.whiteSpace="nowrap",y<B.offsetWidth&&(r.style.whiteSpace=A)}s=y+u-1,h&&"fill"!=j&&"width"!=j&&(k&&(s=Math.min(s,c)),r.style.width=s+"px"),s=B.offsetWidth,t=B.offsetHeight,this.cacheOffsetSize&&(p.mxCachedFinalOffsetWidth=s,p.mxCachedFinalOffsetHeight=t),t-=v,r.parentNode!=q&&(q.appendChild(r),r.style.visibility="")}else{var w=document.createElement("div");w.style.cssText=r.getAttribute("style"),w.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",w.style.position="absolute",w.style.visibility="hidden";var x=document.createElement("div");if(x.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",x.style.wordWrap=mxConstants.WORD_WRAP,x.innerHTML=mxUtils.isNode(e)?e.outerHTML:e,w.appendChild(x),document.body.appendChild(w),8!=document.documentMode&&9!=document.documentMode&&null!=n.fontBorderColor&&(u+=2,v+=2),h&&c>0){var y=x.offsetWidth,z=0;if(!k&&h&&c>0&&this.root.ownerDocument!=document&&"fill"!=j){var A=w.style.whiteSpace;x.style.whiteSpace="nowrap",y<x.offsetWidth&&(w.style.whiteSpace=A)}k&&(y=Math.min(y,c)),w.style.width=y+"px",s=x.offsetWidth+u+z,t=x.offsetHeight+v,w.style.display="inline-block",w.style.position="",w.style.visibility="",w.style.width=s+"px",r.setAttribute("style",w.style.cssText)}else s=x.offsetWidth+u,t=x.offsetHeight+v;w.parentNode.removeChild(w),q.appendChild(r)}k&&(t=Math.min(t,d),s=Math.min(s,c)),"width"==j?d=t:"fill"!=j&&(c=s,d=t),n.alpha<1&&p.setAttribute("opacity",n.alpha);var C=0,D=0;f==mxConstants.ALIGN_CENTER?C-=c/2:f==mxConstants.ALIGN_RIGHT&&(C-=c),a+=C,g==mxConstants.ALIGN_MIDDLE?D-=d/2:g==mxConstants.ALIGN_BOTTOM&&(D-=d),"fill"!=j&&mxClient.IS_FF&&mxClient.IS_WIN&&(D-=2),b+=D;var E=1!=n.scale?"scale("+n.scale+")":"";if(0!=n.rotation&&this.rotateHtml){E+="rotate("+n.rotation+","+c/2+","+d/2+")";var F=this.rotatePoint((a+c/2)*n.scale,(b+d/2)*n.scale,n.rotation,n.rotationCx,n.rotationCy);a=F.x-c*n.scale/2,b=F.y-d*n.scale/2}else a*=n.scale,b*=n.scale;if(0!=l&&(E+="rotate("+l+","+-C+","+-D+")"),p.setAttribute("transform","translate("+(Math.round(a)+this.foOffset)+","+(Math.round(b)+this.foOffset)+")"+E),q.setAttribute("width",Math.round(Math.max(1,c))),q.setAttribute("height",Math.round(Math.max(1,d))),this.root.ownerDocument!=document){var G=this.createAlternateContent(q,a,b,c,d,e,f,g,h,i,j,k,l);if(null!=G){q.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var H=this.createElement("switch");H.appendChild(q),H.appendChild(G),p.appendChild(H)}}}else this.plainText(a,b,c,d,e,f,g,h,j,k,l,m)}},mxSvgCanvas2D.prototype.createClip=function(a,b,c,d){a=Math.round(a),b=Math.round(b),c=Math.round(c),d=Math.round(d);for(var e="mx-clip-"+a+"-"+b+"-"+c+"-"+d,f=0,g=e+"-"+f;null!=document.getElementById(g);)g=e+"-"+ ++f;clip=this.createElement("clipPath"),clip.setAttribute("id",g);var h=this.createElement("rect");return h.setAttribute("x",a),h.setAttribute("y",b),h.setAttribute("width",c),h.setAttribute("height",d),clip.appendChild(h),clip},mxSvgCanvas2D.prototype.plainText=function(a,b,c,d,e,f,g,h,i,j,k,l){k=null!=k?k:0;var m=this.state,n=m.fontSize,o=this.createElement("g"),p=m.transform||"";if(this.updateFont(o),0!=k&&(p+="rotate("+k+","+this.format(a*m.scale)+","+this.format(b*m.scale)+")"),null!=l&&o.setAttribute("direction",l),j&&c>0&&d>0){var q=a,r=b;f==mxConstants.ALIGN_CENTER?q-=c/2:f==mxConstants.ALIGN_RIGHT&&(q-=c),"fill"!=i&&(g==mxConstants.ALIGN_MIDDLE?r-=d/2:g==mxConstants.ALIGN_BOTTOM&&(r-=d));var s=this.createClip(q*m.scale-2,r*m.scale-2,c*m.scale+4,d*m.scale+4);if(null!=this.defs?this.defs.appendChild(s):this.root.appendChild(s),mxClient.IS_CHROME_APP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)o.setAttribute("clip-path","url(#"+s.getAttribute("id")+")");else{var t=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");o.setAttribute("clip-path","url("+t+"#"+s.getAttribute("id")+")")}}var u=f==mxConstants.ALIGN_RIGHT?"end":f==mxConstants.ALIGN_CENTER?"middle":"start";"start"!=u&&o.setAttribute("text-anchor",u),this.styleEnabled&&n==mxConstants.DEFAULT_FONTSIZE||o.setAttribute("font-size",n*m.scale+"px"),p.length>0&&o.setAttribute("transform",p),m.alpha<1&&o.setAttribute("opacity",m.alpha);var v=e.split("\n"),w=Math.round(n*mxConstants.LINE_HEIGHT),x=n+(v.length-1)*w,r=b+n-1;if(g==mxConstants.ALIGN_MIDDLE)if("fill"==i)r-=d/2;else{var y=(this.matchHtmlAlignment&&j&&d>0?Math.min(x,d):x)/2;r-=y+1}else if(g==mxConstants.ALIGN_BOTTOM)if("fill"==i)r-=d;else{var y=this.matchHtmlAlignment&&j&&d>0?Math.min(x,d):x;r-=y+2}for(var z=0;z<v.length;z++){if(v[z].length>0&&mxUtils.trim(v[z]).length>0){var A=this.createElement("text");A.setAttribute("x",this.format(a*m.scale)+this.textOffset),A.setAttribute("y",this.format(r*m.scale)+this.textOffset),mxUtils.write(A,v[z]),o.appendChild(A)}r+=w}this.root.appendChild(o),this.addTextBackground(o,e,a,b,c,"fill"==i?d:x,f,g,i)},mxSvgCanvas2D.prototype.updateFont=function(a){var b=this.state;a.setAttribute("fill",b.fontColor),this.styleEnabled&&b.fontFamily==mxConstants.DEFAULT_FONTFAMILY||a.setAttribute("font-family",b.fontFamily),(b.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&a.setAttribute("font-weight","bold"),(b.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&a.setAttribute("font-style","italic"),(b.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&a.setAttribute("text-decoration","underline")},mxSvgCanvas2D.prototype.addTextBackground=function(a,b,c,d,e,f,g,h,i){var j=this.state;if(null!=j.fontBackgroundColor||null!=j.fontBorderColor){var k=null;if("fill"==i||"width"==i)g==mxConstants.ALIGN_CENTER?c-=e/2:g==mxConstants.ALIGN_RIGHT&&(c-=e),h==mxConstants.ALIGN_MIDDLE?d-=f/2:h==mxConstants.ALIGN_BOTTOM&&(d-=f),k=new mxRectangle((c+1)*j.scale,d*j.scale,(e-2)*j.scale,(f+2)*j.scale);else if(null!=a.getBBox&&this.root.ownerDocument==document)try{k=a.getBBox();var l=mxClient.IS_IE&&mxClient.IS_SVG;k=new mxRectangle(k.x,k.y+(l?0:1),k.width,k.height+(l?1:0))}catch(a){}else{var m=document.createElement("div");m.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?j.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,m.style.fontSize=j.fontSize+"px",m.style.fontFamily=j.fontFamily,m.style.whiteSpace="nowrap",m.style.position="absolute",m.style.visibility="hidden",m.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",m.style.zoom="1",(j.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(m.style.fontWeight="bold"),(j.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(m.style.fontStyle="italic"),b=mxUtils.htmlEntities(b,!1),m.innerHTML=b.replace(/\n/g,"<br/>"),document.body.appendChild(m);var e=m.offsetWidth,f=m.offsetHeight;m.parentNode.removeChild(m),g==mxConstants.ALIGN_CENTER?c-=e/2:g==mxConstants.ALIGN_RIGHT&&(c-=e),h==mxConstants.ALIGN_MIDDLE?d-=f/2:h==mxConstants.ALIGN_BOTTOM&&(d-=f),k=new mxRectangle((c+1)*j.scale,(d+2)*j.scale,e*j.scale,(f+1)*j.scale)}if(null!=k){var n=this.createElement("rect");n.setAttribute("fill",j.fontBackgroundColor||"none"),n.setAttribute("stroke",j.fontBorderColor||"none"),n.setAttribute("x",Math.floor(k.x-1)),n.setAttribute("y",Math.floor(k.y-1)),n.setAttribute("width",Math.ceil(k.width+2)),n.setAttribute("height",Math.ceil(k.height));var o=null!=j.fontBorderColor?Math.max(1,this.format(j.scale)):0;n.setAttribute("stroke-width",o),this.root.ownerDocument==document&&1==mxUtils.mod(o,2)&&n.setAttribute("transform","translate(0.5, 0.5)"),a.insertBefore(n,a.firstChild)}}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)};var mxVmlCanvas2D=function(a){mxAbstractCanvas2D.call(this),this.root=a};mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D),mxVmlCanvas2D.prototype.node=null,mxVmlCanvas2D.prototype.textEnabled=!0,mxVmlCanvas2D.prototype.moveOp="m",mxVmlCanvas2D.prototype.lineOp="l",mxVmlCanvas2D.prototype.curveOp="c",mxVmlCanvas2D.prototype.closeOp="x",mxVmlCanvas2D.prototype.rotatedHtmlBackground="",mxVmlCanvas2D.prototype.vmlScale=1,mxVmlCanvas2D.prototype.createElement=function(a){return document.createElement(a)},mxVmlCanvas2D.prototype.createVmlElement=function(a){return this.createElement(mxClient.VML_PREFIX+":"+a)},mxVmlCanvas2D.prototype.addNode=function(a,b){var c=this.node,d=this.state;if(null!=c){if("shape"==c.nodeName){if(!(null!=this.path&&this.path.length>0))return;c.path=this.path.join(" ")+" e",c.style.width=this.root.style.width,c.style.height=this.root.style.height,c.coordsize=parseInt(c.style.width)+" "+parseInt(c.style.height)}c.strokeweight=this.format(Math.max(1,d.strokeWidth*d.scale/this.vmlScale))+"px",d.shadow&&this.root.appendChild(this.createShadow(c,a&&null!=d.fillColor,b&&null!=d.strokeColor)),b&&null!=d.strokeColor?(c.stroked="true",c.strokecolor=d.strokeColor):c.stroked="false",c.appendChild(this.createStroke()),a&&null!=d.fillColor?c.appendChild(this.createFill()):!this.pointerEvents||"shape"==c.nodeName&&this.path[this.path.length-1]!=this.closeOp?c.filled="false":c.appendChild(this.createTransparentFill()),this.root.appendChild(c)}},mxVmlCanvas2D.prototype.createTransparentFill=function(){var a=this.createVmlElement("fill");return a.src=mxClient.imageBasePath+"/transparent.gif",a.type="tile",a},mxVmlCanvas2D.prototype.createFill=function(){var a=this.state,b=this.createVmlElement("fill");if(b.color=a.fillColor,null!=a.gradientColor){b.type="gradient",b.method="none",b.color2=a.gradientColor;var c=180-a.rotation;a.gradientDirection==mxConstants.DIRECTION_WEST?c-=90+("x"==this.root.style.flip?180:0):a.gradientDirection==mxConstants.DIRECTION_EAST?c+=90+("x"==this.root.style.flip?180:0):a.gradientDirection==mxConstants.DIRECTION_NORTH?c-=180+("y"==this.root.style.flip?-180:0):c+="y"==this.root.style.flip?-180:0,"x"!=this.root.style.flip&&"y"!=this.root.style.flip||(c*=-1),b.angle=mxUtils.mod(c,360),b.opacity=a.alpha*a.gradientFillAlpha*100+"%",b.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",a.alpha*a.gradientAlpha*100+"%")}else(a.alpha<1||a.fillAlpha<1)&&(b.opacity=a.alpha*a.fillAlpha*100+"%");return b},mxVmlCanvas2D.prototype.createStroke=function(){var a=this.state,b=this.createVmlElement("stroke");return b.endcap=a.lineCap||"flat",b.joinstyle=a.lineJoin||"miter",b.miterlimit=a.miterLimit||"10",(a.alpha<1||a.strokeAlpha<1)&&(b.opacity=a.alpha*a.strokeAlpha*100+"%"),a.dashed&&(b.dashstyle=this.getVmlDashStyle()),b},mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var a="dash";if("string"==typeof this.state.dashPattern){var b=this.state.dashPattern.split(" ");b.length>0&&1==b[0]&&(a="0 2")}return a},mxVmlCanvas2D.prototype.createShadow=function(a,b,c){var d=this.state,e=-d.rotation*(Math.PI/180),f=Math.cos(e),g=Math.sin(e),h=d.shadowDx*d.scale,i=d.shadowDy*d.scale;"x"==this.root.style.flip?h*=-1:"y"==this.root.style.flip&&(i*=-1);var j=a.cloneNode(!0);return j.style.marginLeft=Math.round(h*f-i*g)+"px",j.style.marginTop=Math.round(h*g+i*f)+"px",8==document.documentMode&&(j.strokeweight=a.strokeweight,"shape"==a.nodeName&&(j.path=this.path.join(" ")+" e",j.style.width=this.root.style.width,j.style.height=this.root.style.height,j.coordsize=parseInt(a.style.width)+" "+parseInt(a.style.height))),c?(j.strokecolor=d.shadowColor,j.appendChild(this.createShadowStroke())):j.stroked="false",b?j.appendChild(this.createShadowFill()):j.filled="false",j},mxVmlCanvas2D.prototype.createShadowFill=function(){var a=this.createVmlElement("fill");return a.color=this.state.shadowColor,a.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",a},mxVmlCanvas2D.prototype.createShadowStroke=function(){var a=this.createStroke();return a.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",a},mxVmlCanvas2D.prototype.rotate=function(a,b,c,d,e){b&&c?a+=180:b?this.root.style.flip="x":c&&(this.root.style.flip="y"),(b?!c:c)&&(a*=-1),this.root.style.rotation=a,this.state.rotation=this.state.rotation+a,this.state.rotationCx=d,this.state.rotationCy=e},mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"},mxVmlCanvas2D.prototype.quadTo=function(a,b,c,d){var e=this.state,f=(this.lastX+e.dx)*e.scale,g=(this.lastY+e.dy)*e.scale,h=(a+e.dx)*e.scale,i=(b+e.dy)*e.scale,j=(c+e.dx)*e.scale,k=(d+e.dy)*e.scale,l=f+2/3*(h-f),m=g+2/3*(i-g),n=j+2/3*(h-j),o=k+2/3*(i-k);this.path.push("c "+this.format(l)+" "+this.format(m)+" "+this.format(n)+" "+this.format(o)+" "+this.format(j)+" "+this.format(k)),this.lastX=j/e.scale-e.dx,this.lastY=k/e.scale-e.dy},mxVmlCanvas2D.prototype.createRect=function(a,b,c,d,e){var f=this.state,g=this.createVmlElement(a);return g.style.position="absolute",g.style.left=this.format((b+f.dx)*f.scale)+"px",g.style.top=this.format((c+f.dy)*f.scale)+"px",g.style.width=this.format(d*f.scale)+"px",g.style.height=this.format(e*f.scale)+"px",g},mxVmlCanvas2D.prototype.rect=function(a,b,c,d){this.node=this.createRect("rect",a,b,c,d)},mxVmlCanvas2D.prototype.roundrect=function(a,b,c,d,e,f){this.node=this.createRect("roundrect",a,b,c,d),this.node.setAttribute("arcsize",Math.max(100*e/c,100*f/d)+"%")},mxVmlCanvas2D.prototype.ellipse=function(a,b,c,d){this.node=this.createRect("oval",a,b,c,d)},mxVmlCanvas2D.prototype.image=function(a,b,c,d,e,f,g,h){var i=null;if(f){i=this.createRect("rect",a,b,c,d),i.stroked="false";var j=this.createVmlElement("fill");j.aspect=f?"atmost":"ignore",j.rotate="true",j.type="frame",j.src=e,i.appendChild(j)}else i=this.createRect("image",a,b,c,d),i.src=e;g&&h?i.style.rotation="180":g?i.style.flip="x":h&&(i.style.flip="y"),(this.state.alpha<1||this.state.fillAlpha<1)&&(i.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")"),this.root.appendChild(i)},mxVmlCanvas2D.prototype.createDiv=function(a,b,c,d){var e=this.createElement("div"),f=this.state,g="";if(null!=f.fontBackgroundColor&&(g+="background-color:"+f.fontBackgroundColor+";"),null!=f.fontBorderColor&&(g+="border:1px solid "+f.fontBorderColor+";"),mxUtils.isNode(a))e.appendChild(a);else if("fill"!=d&&"width"!=d){var h=this.createElement("div");h.style.cssText=g,h.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",h.style.zoom="1",h.style.textDecoration="inherit",h.innerHTML=a,e.appendChild(h)}else e.style.cssText=g,e.innerHTML=a;var i=e.style;return i.fontSize=f.fontSize/this.vmlScale+"px",i.fontFamily=f.fontFamily,i.color=f.fontColor,i.verticalAlign="top",i.textAlign=b||"left",i.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?f.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale+"px":mxConstants.LINE_HEIGHT,(f.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(i.fontWeight="bold"),(f.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(i.fontStyle="italic"),(f.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(i.textDecoration="underline"),e},mxVmlCanvas2D.prototype.text=function(a,b,c,d,e,f,g,h,i,j,k,l,m){if(this.textEnabled&&null!=e){var n=this.state;if("html"==i){if(null!=n.rotation){var o=this.rotatePoint(a,b,n.rotation,n.rotationCx,n.rotationCy);a=o.x,b=o.y}8!=document.documentMode||mxClient.IS_EM?(a*=n.scale,b*=n.scale):(a+=n.dx,b+=n.dy,"fill"!=j&&g==mxConstants.ALIGN_TOP&&(b-=1));var p=8!=document.documentMode||mxClient.IS_EM?this.createElement("div"):this.createVmlElement("group");p.style.position="absolute",p.style.display="inline",p.style.left=this.format(a)+"px",p.style.top=this.format(b)+"px",p.style.zoom=n.scale;var q=this.createElement("div");q.style.position="relative",q.style.display="inline";var r=mxUtils.getAlignmentAsPoint(f,g),s=r.x,t=r.y,u=this.createDiv(e,f,g,j),v=this.createElement("div");if(null!=m&&u.setAttribute("dir",m),h&&c>0){if(k||(u.style.width=Math.round(c)+"px"),u.style.wordWrap=mxConstants.WORD_WRAP,u.style.whiteSpace="normal","break-word"==u.style.wordWrap){var w=u;null!=w.firstChild&&"DIV"==w.firstChild.nodeName&&(w.firstChild.style.width="100%")}}else u.style.whiteSpace="nowrap";var x=n.rotation+(l||0);if(this.rotateHtml&&0!=x?(v.style.display="inline",v.style.zoom="1",v.appendChild(u),8!=document.documentMode||mxClient.IS_EM||"DIV"==this.root.nodeName?p.appendChild(v):(q.appendChild(v),p.appendChild(q))):8!=document.documentMode||mxClient.IS_EM?(u.style.display="inline",p.appendChild(u)):(q.appendChild(u),p.appendChild(q)),"DIV"!=this.root.nodeName){var y=this.createVmlElement("rect");y.stroked="false",y.filled="false",y.appendChild(p),this.root.appendChild(y)}else this.root.appendChild(p);if(k?(u.style.overflow="hidden",u.style.width=Math.round(c)+"px",mxClient.IS_QUIRKS||(u.style.maxHeight=Math.round(d)+"px")):"fill"==j?(u.style.overflow="hidden",u.style.width=Math.max(0,c)+1+"px",u.style.height=Math.max(0,d)+1+"px"):"width"==j&&(u.style.overflow="hidden",u.style.width=Math.max(0,c)+1+"px",u.style.maxHeight=Math.max(0,d)+1+"px"),this.rotateHtml&&0!=x){var z=x*(Math.PI/180),A=parseFloat(parseFloat(Math.cos(z)).toFixed(8)),B=parseFloat(parseFloat(Math.sin(-z)).toFixed(8));z%=2*Math.PI,z<0&&(z+=2*Math.PI),z%=Math.PI,z>Math.PI/2&&(z=Math.PI-z);var C=Math.cos(z),D=Math.sin(z);8!=document.documentMode||mxClient.IS_EM||(u.style.display="inline-block",v.style.display="inline-block",q.style.display="inline-block"),u.style.visibility="hidden",u.style.position="absolute",document.body.appendChild(u);var E=u;null!=E.firstChild&&"DIV"==E.firstChild.nodeName&&(E=E.firstChild);var w=E.offsetWidth+3,F=E.offsetHeight;k?(c=Math.min(c,w),F=Math.min(F,d)):c=w,h&&(u.style.width=c+"px"),mxClient.IS_QUIRKS&&(k||"width"==j)&&F>d&&(F=d,u.style.height=F+"px"),d=F;var G=(d-d*C+c*-D)/2-B*c*(s+.5)+A*d*(t+.5),H=(c-c*C+d*-D)/2+A*c*(s+.5)+B*d*(t+.5);if("group"==p.nodeName&&"DIV"==this.root.nodeName){var I=this.createElement("div");I.style.display="inline-block",I.style.position="absolute",I.style.left=this.format(a+(H-c/2)*n.scale)+"px",I.style.top=this.format(b+(G-d/2)*n.scale)+"px",p.parentNode.appendChild(I),I.appendChild(p)}else{var J=8!=document.documentMode||mxClient.IS_EM?n.scale:1;p.style.left=this.format(a+(H-c/2)*J)+"px",p.style.top=this.format(b+(G-d/2)*J)+"px"}v.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+A+", M12="+B+", M21="+-B+", M22="+A+", sizingMethod='auto expand')",v.style.backgroundColor=this.rotatedHtmlBackground,this.state.alpha<1&&(v.style.filter+="alpha(opacity="+100*this.state.alpha+")"),v.appendChild(u),u.style.position="",u.style.visibility=""}else if(8!=document.documentMode||mxClient.IS_EM){u.style.verticalAlign="top",this.state.alpha<1&&(p.style.filter="alpha(opacity="+100*this.state.alpha+")");var K=u.parentNode;u.style.visibility="hidden",document.body.appendChild(u),c=u.offsetWidth;var F=u.offsetHeight;mxClient.IS_QUIRKS&&k&&F>d&&(F=d,u.style.height=F+"px"),d=F,u.style.visibility="",K.appendChild(u),p.style.left=this.format(a+c*s*this.state.scale)+"px",p.style.top=this.format(b+d*t*this.state.scale)+"px"}else this.state.alpha<1&&(u.style.filter="alpha(opacity="+100*this.state.alpha+")"),q.style.left=100*s+"%",q.style.top=100*t+"%"}else this.plainText(a,b,c,d,mxUtils.htmlEntities(e,!1),f,g,h,i,j,k,l,m)}},mxVmlCanvas2D.prototype.plainText=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this.state;a=(a+n.dx)*n.scale,b=(b+n.dy)*n.scale;var o=this.createVmlElement("shape");o.style.width="1px",o.style.height="1px",o.stroked="false";var p=this.createVmlElement("fill");p.color=n.fontColor,p.opacity=100*n.alpha+"%",o.appendChild(p);var q=this.createVmlElement("path");q.textpathok="true",q.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),o.appendChild(q);var r=this.createVmlElement("textpath");r.style.cssText="v-text-align:"+f,r.style.align=f,r.style.fontFamily=n.fontFamily,r.string=e,r.on="true";var s=n.fontSize*n.scale/this.vmlScale;r.style.fontSize=s+"px",(n.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(r.style.fontWeight="bold"),(n.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(r.style.fontStyle="italic"),(n.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(r.style.textDecoration="underline");var t=e.split("\n"),u=s+(t.length-1)*s*mxConstants.LINE_HEIGHT,v=0,w=0;if(g==mxConstants.ALIGN_BOTTOM?w=-u/2:g!=mxConstants.ALIGN_MIDDLE&&(w=u/2),null!=l){o.style.rotation=l;var x=l*(Math.PI/180);v=Math.sin(x)*w,w=Math.cos(x)*w}o.appendChild(r),o.style.left=this.format(a-v)+"px",o.style.top=this.format(b+w)+"px",this.root.appendChild(o)},mxVmlCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxVmlCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.setStates=function(a){this.states=a},mxGuide.prototype.isEnabledForEvent=function(a){return!0},mxGuide.prototype.getGuideTolerance=function(){return this.graph.gridSize/2},mxGuide.prototype.createGuideShape=function(a){var b=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return b.isDashed=!0,b},mxGuide.prototype.move=function(a,b,c){function x(b,c){b+=this.graph.panDx;var d=!1;Math.abs(b-t)<o?(f=b-a.getCenterX(),o=Math.abs(b-t),d=!0):Math.abs(b-r)<o?(f=b-a.x,o=Math.abs(b-r),d=!0):Math.abs(b-s)<o&&(f=b-a.x-a.width,o=Math.abs(b-s),d=!0),d&&(i=c,j=Math.round(b-this.graph.panDx),null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),h=h||d}function y(b){b+=this.graph.panDy;var c=!1;Math.abs(b-w)<p?(g=b-a.getCenterY(),p=Math.abs(b-w),c=!0):Math.abs(b-u)<p?(g=b-a.y,p=Math.abs(b-u),c=!0):Math.abs(b-v)<p&&(g=b-a.y-a.height,p=Math.abs(b-v),c=!0),c&&(l=A,m=Math.round(b-this.graph.panDy),null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),k=k||c}if(null!=this.states&&(this.horizontal||this.vertical)&&null!=a&&null!=b){var d=this.graph.getView().translate,e=this.graph.getView().scale,f=b.x,g=b.y,h=!1,i=null,j=null,k=!1,l=null,m=null,n=this.getGuideTolerance(),o=n,p=n,q=a.clone();q.x+=b.x,q.y+=b.y;for(var r=q.x,s=q.x+q.width,t=q.getCenterX(),u=q.y,v=q.y+q.height,w=q.getCenterY(),z=0;z<this.states.length;z++){var A=this.states[z];null!=A&&(this.horizontal&&(x.call(this,A.getCenterX(),A),x.call(this,A.x,A),x.call(this,A.x+A.width,A)),this.vertical&&(y.call(this,A.getCenterY(),A),y.call(this,A.y,A),y.call(this,A.y+A.height,A)))}if(c){if(!h){var B=a.x-(this.graph.snap(a.x/e-d.x)+d.x)*e;f=this.graph.snap(f/e)*e-B}if(!k){var C=a.y-(this.graph.snap(a.y/e-d.y)+d.y)*e;g=this.graph.snap(g/e)*e-C}}var D=this.graph.container;h||null==this.guideX?null!=this.guideX&&(null!=i&&null!=a&&(minY=Math.min(a.y+g-this.graph.panDy,i.y),maxY=Math.max(a.y+a.height+g-this.graph.panDy,i.y+i.height)),null!=minY&&null!=maxY?this.guideX.points=[new mxPoint(j,minY),new mxPoint(j,maxY)]:this.guideX.points=[new mxPoint(j,-this.graph.panDy),new mxPoint(j,D.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(i,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()):this.guideX.node.style.visibility="hidden",k||null==this.guideY?null!=this.guideY&&(null!=l&&null!=a&&(minX=Math.min(a.x+f-this.graph.panDx,l.x),maxX=Math.max(a.x+a.width+f-this.graph.panDx,l.x+l.width)),null!=minX&&null!=maxX?this.guideY.points=[new mxPoint(minX,m),new mxPoint(maxX,m)]:this.guideY.points=[new mxPoint(-this.graph.panDx,m),new mxPoint(D.scrollWidth-3-this.graph.panDx,m)],this.guideY.stroke=this.getGuideColor(l,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()):this.guideY.node.style.visibility="hidden",b=new mxPoint(f,g)}return b},mxGuide.prototype.getGuideColor=function(a,b){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(a){
  null!=this.guideX&&(this.guideX.node.style.visibility=a?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=a?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var a=this.desc.getAttribute("aspect");this.aspect=null!=a?a:"variable";var b=this.desc.getAttribute("strokewidth");this.strokewidth=null!=b?b:"1"},mxStencil.prototype.parseConstraints=function(){var a=this.desc.getElementsByTagName("connections")[0];if(null!=a){var b=mxUtils.getChildNodes(a);if(null!=b&&b.length>0){this.constraints=[];for(var c=0;c<b.length;c++)this.constraints.push(this.parseConstraint(b[c]))}}},mxStencil.prototype.parseConstraint=function(a){var b=Number(a.getAttribute("x")),c=Number(a.getAttribute("y")),d="1"==a.getAttribute("perimeter"),e=a.getAttribute("name");return new mxConnectionConstraint(new mxPoint(b,c),d,e)},mxStencil.prototype.evaluateTextAttribute=function(a,b,c){var d=this.evaluateAttribute(a,b,c),e=a.getAttribute("localized");return(mxStencil.defaultLocalized&&null==e||"1"==e)&&(d=mxResources.get(d)),d},mxStencil.prototype.evaluateAttribute=function(a,b,c){var d=a.getAttribute(b);if(null==d){var e=mxUtils.getTextContent(a);if(null!=e&&mxStencil.allowEval){var f=mxUtils.eval(e);"function"==typeof f&&(d=f(c))}}return d},mxStencil.prototype.drawShape=function(a,b,c,d,e,f){var g=mxUtils.getValue(b.style,mxConstants.STYLE_DIRECTION,null),h=this.computeAspect(b.style,c,d,e,f,g),i=Math.min(h.width,h.height),j="inherit"==this.strokewidth?Number(mxUtils.getNumber(b.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*i;a.setStrokeWidth(j),this.drawChildren(a,b,c,d,e,f,this.bgNode,h,!1),this.drawChildren(a,b,c,d,e,f,this.fgNode,h,!0)},mxStencil.prototype.drawChildren=function(a,b,c,d,e,f,g,h,i){if(null!=g&&e>0&&f>0)for(var j=g.firstChild;null!=j;)j.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(a,b,j,h,i),j=j.nextSibling},mxStencil.prototype.computeAspect=function(a,b,c,d,e,f){var g=b,h=c,i=d/this.w0,j=e/this.h0,k=f==mxConstants.DIRECTION_NORTH||f==mxConstants.DIRECTION_SOUTH;if(k){j=d/this.h0,i=e/this.w0;var l=(d-e)/2;g+=l,h-=l}return"fixed"==this.aspect&&(j=Math.min(i,j),i=j,k?(g+=(e-this.w0*i)/2,h+=(d-this.h0*j)/2):(g+=(d-this.w0*i)/2,h+=(e-this.h0*j)/2)),new mxRectangle(g,h,i,j)},mxStencil.prototype.drawNode=function(a,b,c,d,e){var f=c.nodeName,g=d.x,h=d.y,i=d.width,j=d.height,k=Math.min(i,j);if("save"==f)a.save();else if("restore"==f)a.restore();else if("path"==f){a.begin();for(var l=c.firstChild;null!=l;)l.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(a,b,l,d,e),l=l.nextSibling}else if("close"==f)a.close();else if("move"==f)a.moveTo(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j);else if("line"==f)a.lineTo(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j);else if("quad"==f)a.quadTo(g+Number(c.getAttribute("x1"))*i,h+Number(c.getAttribute("y1"))*j,g+Number(c.getAttribute("x2"))*i,h+Number(c.getAttribute("y2"))*j);else if("curve"==f)a.curveTo(g+Number(c.getAttribute("x1"))*i,h+Number(c.getAttribute("y1"))*j,g+Number(c.getAttribute("x2"))*i,h+Number(c.getAttribute("y2"))*j,g+Number(c.getAttribute("x3"))*i,h+Number(c.getAttribute("y3"))*j);else if("arc"==f)a.arcTo(Number(c.getAttribute("rx"))*i,Number(c.getAttribute("ry"))*j,Number(c.getAttribute("x-axis-rotation")),Number(c.getAttribute("large-arc-flag")),Number(c.getAttribute("sweep-flag")),g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j);else if("rect"==f)a.rect(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j,Number(c.getAttribute("w"))*i,Number(c.getAttribute("h"))*j);else if("roundrect"==f){var m=Number(c.getAttribute("arcsize"));0==m&&(m=100*mxConstants.RECTANGLE_ROUNDING_FACTOR);var n=Number(c.getAttribute("w"))*i,o=Number(c.getAttribute("h"))*j,p=Number(m)/100,q=Math.min(n*p,o*p);a.roundrect(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j,n,o,q,q)}else if("ellipse"==f)a.ellipse(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j,Number(c.getAttribute("w"))*i,Number(c.getAttribute("h"))*j);else if("image"==f){if(!b.outline){var r=this.evaluateAttribute(c,"src",b);a.image(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j,Number(c.getAttribute("w"))*i,Number(c.getAttribute("h"))*j,r,!1,"1"==c.getAttribute("flipH"),"1"==c.getAttribute("flipV"))}}else if("text"==f){if(!b.outline){var s=this.evaluateTextAttribute(c,"str",b),t="1"==c.getAttribute("vertical")?-90:0;if("0"==c.getAttribute("align-shape")){var u=b.rotation,v=1==mxUtils.getValue(b.style,mxConstants.STYLE_FLIPH,0),w=1==mxUtils.getValue(b.style,mxConstants.STYLE_FLIPV,0);v&&w?t-=u:v||w?t+=u:t-=u}t-=c.getAttribute("rotation"),a.text(g+Number(c.getAttribute("x"))*i,h+Number(c.getAttribute("y"))*j,0,0,s,c.getAttribute("align")||"left",c.getAttribute("valign")||"top",!1,"",null,!1,t)}}else if("include-shape"==f){var x=mxStencilRegistry.getStencil(c.getAttribute("name"));if(null!=x){var y=g+Number(c.getAttribute("x"))*i,z=h+Number(c.getAttribute("y"))*j,n=Number(c.getAttribute("w"))*i,o=Number(c.getAttribute("h"))*j;x.drawShape(a,b,y,z,n,o)}}else if("fillstroke"==f)a.fillAndStroke();else if("fill"==f)a.fill();else if("stroke"==f)a.stroke();else if("strokewidth"==f){var A="1"==c.getAttribute("fixed")?1:k;a.setStrokeWidth(Number(c.getAttribute("width"))*A)}else if("dashed"==f)a.setDashed("1"==c.getAttribute("dashed"));else if("dashpattern"==f){var B=c.getAttribute("pattern");if(null!=B){for(var C=B.split(" "),D=[],E=0;E<C.length;E++)C[E].length>0&&D.push(Number(C[E])*k);B=D.join(" "),a.setDashPattern(B)}}else"strokecolor"==f?a.setStrokeColor(c.getAttribute("color")):"linecap"==f?a.setLineCap(c.getAttribute("cap")):"linejoin"==f?a.setLineJoin(c.getAttribute("join")):"miterlimit"==f?a.setMiterLimit(Number(c.getAttribute("limit"))):"fillcolor"==f?a.setFillColor(c.getAttribute("color")):"alpha"==f?a.setAlpha(c.getAttribute("alpha")):"fontcolor"==f?a.setFontColor(c.getAttribute("color")):"fontstyle"==f?a.setFontStyle(c.getAttribute("style")):"fontfamily"==f?a.setFontFamily(c.getAttribute("family")):"fontsize"==f&&a.setFontSize(Number(c.getAttribute("size"))*k);!e||"fillstroke"!=f&&"fill"!=f&&"stroke"!=f||(e=!1,a.setShadow(!1))},mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.vmlScale=1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(a){null==this.node&&(this.node=this.create(a),null!=a&&a.appendChild(this.node))},mxShape.prototype.initStyles=function(a){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1},mxShape.prototype.isParseVml=function(){return!0},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){var a=this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth;return 1==mxUtils.mod(Math.max(1,Math.round(a*this.scale)),2)?.5:0},mxShape.prototype.create=function(a){var b=null;return b=null!=a&&null!=a.ownerSVGElement?this.createSvg(a):8==document.documentMode||!mxClient.IS_VML||this.dialect!=mxConstants.DIALECT_VML&&this.isHtmlAllowed()?this.createHtml(a):this.createVml(a)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createVml=function(){var a=document.createElement(mxClient.VML_PREFIX+":group");return a.style.position="absolute",a},mxShape.prototype.createHtml=function(){var a=document.createElement("div");return a.style.position="absolute",a},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML?this.redrawShape():this.redrawHtmlShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var a=this.points;if(null!=a&&a.length>0&&null!=a[0]){this.bounds=new mxRectangle(Number(a[0].x),Number(a[0].y),1,1);for(var b=1;b<this.points.length;b++)null!=a[b]&&this.bounds.add(new mxRectangle(Number(a[b].x),Number(a[b].y),1,1))}},mxShape.prototype.getLabelBounds=function(a){return a},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0},mxShape.prototype.createVmlGroup=function(){var a=document.createElement(mxClient.VML_PREFIX+":group");return a.style.position="absolute",a.style.width=this.node.style.width,a.style.height=this.node.style.height,a},mxShape.prototype.redrawShape=function(){var a=this.createCanvas();null!=a&&(a.pointerEvents=this.pointerEvents,this.paint(a),this.node!=a.root&&this.node.insertAdjacentHTML("beforeend",a.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(a))},mxShape.prototype.createCanvas=function(){var a=null;return null!=this.node.ownerSVGElement?a=this.createSvgCanvas():mxClient.IS_VML&&(this.updateVmlContainer(),a=this.createVmlCanvas()),null!=a&&this.outline&&(a.setStrokeWidth(this.strokewidth),a.setStrokeColor(this.stroke),null!=this.isDashed&&a.setDashed(this.isDashed),a.setStrokeWidth=function(){},a.setStrokeColor=function(){},a.setFillColor=function(){},a.setGradient=function(){},a.setDashed=function(){}),a},mxShape.prototype.createSvgCanvas=function(){var a=new mxSvgCanvas2D(this.node,!1);a.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,a.pointerEventsValue=this.svgPointerEvents,a.blockImagePointerEvents=mxClient.IS_FF;var b=this.getSvgScreenOffset();return 0!=b?this.node.setAttribute("transform","translate("+b+","+b+")"):this.node.removeAttribute("transform"),this.antiAlias||(a.format=function(a){return Math.round(parseFloat(a))}),a},mxShape.prototype.createVmlCanvas=function(){var a=8==document.documentMode&&this.isParseVml()?this.createVmlGroup():this.node,b=new mxVmlCanvas2D(a,!1);if(""!=a.tagUrn){var c=Math.max(1,Math.round(this.bounds.width)),d=Math.max(1,Math.round(this.bounds.height));a.coordsize=c*this.vmlScale+","+d*this.vmlScale,b.scale(this.vmlScale),b.vmlScale=this.vmlScale}var e=this.scale;return b.translate(-Math.round(this.bounds.x/e),-Math.round(this.bounds.y/e)),b},mxShape.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var a=Math.max(1,Math.round(this.bounds.width)),b=Math.max(1,Math.round(this.bounds.height));this.node.style.width=a+"px",this.node.style.height=b+"px",this.node.style.overflow="visible"},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(a){var b="";if(this.opacity<100&&(b+="alpha(opacity="+this.opacity+")"),this.isShadow&&(b+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var c=this.fill,d=this.gradient,e="0",f={east:0,south:1,west:2,north:3},g=null!=this.direction?f[this.direction]:0;if(null!=this.gradientDirection&&(g=mxUtils.mod(g+f[this.gradientDirection]-1,4)),1==g){e="1";var h=c;c=d,d=h}else if(2==g){var h=c;c=d,d=h}else 3==g&&(e="1");b+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+c+"', endColorStr='"+d+"', gradientType='"+e+"')"}a.style.filter=b},mxShape.prototype.updateHtmlColors=function(a){var b=this.stroke;null!=b&&b!=mxConstants.NONE?(a.style.borderColor=b,this.isDashed?a.style.borderStyle="dashed":this.strokewidth>0&&(a.style.borderStyle="solid"),a.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):a.style.borderWidth="0px",b=this.outline?null:this.fill,null!=b&&b!=mxConstants.NONE?(a.style.backgroundColor=b,a.style.backgroundImage="none"):this.pointerEvents?a.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(a):this.setTransparentBackgroundImage(a)},mxShape.prototype.updateHtmlBounds=function(a){var b=document.documentMode>=9?0:Math.ceil(this.strokewidth*this.scale);a.style.borderWidth=Math.max(1,b)+"px",a.style.overflow="hidden",a.style.left=Math.round(this.bounds.x-b/2)+"px",a.style.top=Math.round(this.bounds.y-b/2)+"px","CSS1Compat"==document.compatMode&&(b=-b),a.style.width=Math.round(Math.max(0,this.bounds.width+b))+"px",a.style.height=Math.round(Math.max(0,this.bounds.height+b))+"px"},mxShape.prototype.destroyCanvas=function(a){if(a instanceof mxSvgCanvas2D){for(var b in a.gradients){var c=a.gradients[b];null!=c&&(c.mxRefCount=(c.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=a.gradients}},mxShape.prototype.paint=function(a){var b=this.scale,c=this.bounds.x/b,d=this.bounds.y/b,e=this.bounds.width/b,f=this.bounds.height/b;if(this.isPaintBoundsInverted()){var g=(e-f)/2;c+=g,d-=g;var h=e;e=f,f=h}this.updateTransform(a,c,d,e,f),this.configureCanvas(a,c,d,e,f);var i=null;if(null==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents){var j=this.createBoundingBox();if(this.dialect==mxConstants.DIALECT_SVG)i=this.createTransparentSvgRectangle(j.x,j.y,j.width,j.height),this.node.appendChild(i);else{var k=a.createRect("rect",j.x/b,j.y/b,j.width/b,j.height/b);k.appendChild(a.createTransparentFill()),k.stroked="false",a.root.appendChild(k)}}if(null!=this.stencil)this.stencil.drawShape(a,this,c,d,e,f);else if(a.setStrokeWidth(this.strokewidth),null!=this.points){for(var l=[],m=0;m<this.points.length;m++)null!=this.points[m]&&l.push(new mxPoint(this.points[m].x/b,this.points[m].y/b));this.paintEdgeShape(a,l)}else this.paintVertexShape(a,c,d,e,f);null!=i&&null!=a.state&&null!=a.state.transform&&i.setAttribute("transform",a.state.transform)},mxShape.prototype.configureCanvas=function(a,b,c,d,e){var f=null;if(null!=this.style&&(f=this.style.dashPattern),a.setAlpha(this.opacity/100),a.setFillAlpha(this.fillOpacity/100),a.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&a.setShadow(this.isShadow),null!=this.isDashed&&a.setDashed(this.isDashed),null!=f&&a.setDashPattern(f),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var g=this.getGradientBounds(a,b,c,d,e);a.setGradient(this.fill,this.gradient,g.x,g.y,g.width,g.height,this.gradientDirection)}else a.setFillColor(this.fill);a.setStrokeColor(this.stroke)},mxShape.prototype.getGradientBounds=function(a,b,c,d,e){return new mxRectangle(b,c,d,e)},mxShape.prototype.updateTransform=function(a,b,c,d,e){a.scale(this.scale),a.rotate(this.getShapeRotation(),this.flipH,this.flipV,b+d/2,c+e/2)},mxShape.prototype.paintVertexShape=function(a,b,c,d,e){this.paintBackground(a,b,c,d,e),a.setShadow(!1),this.paintForeground(a,b,c,d,e)},mxShape.prototype.paintBackground=function(a,b,c,d,e){},mxShape.prototype.paintForeground=function(a,b,c,d,e){},mxShape.prototype.paintEdgeShape=function(a,b){},mxShape.prototype.getArcSize=function(a,b){var c=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;return Math.min(a*c,b*c)},mxShape.prototype.paintGlassEffect=function(a,b,c,d,e,f){var g=Math.ceil(this.strokewidth/2),h=.4;a.setGradient("#ffffff","#ffffff",b,c,d,.6*e,"south",.9,.1),a.begin(),f+=2*g,this.isRounded?(a.moveTo(b-g+f,c-g),a.quadTo(b-g,c-g,b-g,c-g+f),a.lineTo(b-g,c+e*h),a.quadTo(b+.5*d,c+.7*e,b+d+g,c+e*h),a.lineTo(b+d+g,c-g+f),a.quadTo(b+d+g,c-g,b+d+g-f,c-g)):(a.moveTo(b-g,c-g),a.lineTo(b-g,c+e*h),a.quadTo(b+.5*d,c+.7*e,b+d+g,c+e*h),a.lineTo(b+d+g,c-g)),a.close(),a.fill()},mxShape.prototype.addPoints=function(a,b,c,d,e){var f=b[b.length-1];if(e&&c){b=b.slice();var g=b[0],h=new mxPoint(f.x+(g.x-f.x)/2,f.y+(g.y-f.y)/2);b.splice(0,0,h)}var i=b[0],j=1;for(a.moveTo(i.x,i.y);j<(e?b.length:b.length-1);){var k=b[mxUtils.mod(j,b.length)],l=i.x-k.x,m=i.y-k.y;if(!c||0==l&&0==m)a.lineTo(k.x,k.y);else{var n=Math.sqrt(l*l+m*m),o=l*Math.min(d,n/2)/n,p=m*Math.min(d,n/2)/n,q=k.x+o,r=k.y+p;a.lineTo(q,r);for(var s=b[mxUtils.mod(j+1,b.length)];j<b.length-2&&0==Math.round(s.x-k.x)&&0==Math.round(s.y-k.y);)s=b[mxUtils.mod(j+2,b.length)],j++;l=s.x-k.x,m=s.y-k.y,n=Math.max(1,Math.sqrt(l*l+m*m));var t=l*Math.min(d,n/2)/n,u=m*Math.min(d,n/2)/n,v=k.x+t,w=k.y+u;a.quadTo(k.x,k.y,v,w),k=new mxPoint(v,w)}i=k,j++}e?a.close():a.lineTo(f.x,f.y)},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(a){if(this.state=a,this.style=a.style,null!=this.style){if(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.arrowStrokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH){var b=this.flipH;this.flipH=this.flipV,this.flipV=b}this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE&&(this.stroke=null)}},mxShape.prototype.setCursor=function(a){null==a&&(a=""),this.cursor=a,null!=this.node&&(this.node.style.cursor=a)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var a=this.node.getBBox();if(a.width>0&&a.height>0)return this.boundingBox=new mxRectangle(a.x,a.y,a.width,a.height),void this.boundingBox.grow(this.strokewidth*this.scale/2)}catch(a){}if(null!=this.bounds){var b=this.createBoundingBox();if(null!=b){this.augmentBoundingBox(b);var c=this.getShapeRotation();0!=c&&(b=mxUtils.getBoundingBox(b,c))}this.boundingBox=b}},mxShape.prototype.createBoundingBox=function(){var a=this.bounds.clone();return(null!=this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&a.rotate90(),a},mxShape.prototype.augmentBoundingBox=function(a){this.isShadow&&(a.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),a.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),a.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var a=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(a+=mxText.prototype.verticalTextRotation),a},mxShape.prototype.getShapeRotation=function(){var a=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?a+=270:this.direction==mxConstants.DIRECTION_WEST?a+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(a+=90)),a},mxShape.prototype.createTransparentSvgRectangle=function(a,b,c,d){var e=document.createElementNS(mxConstants.NS_SVG,"rect");return e.setAttribute("x",a),e.setAttribute("y",b),e.setAttribute("width",c),e.setAttribute("height",d),e.setAttribute("fill","none"),e.setAttribute("stroke","none"),e.setAttribute("pointer-events","all"),e},mxShape.prototype.setTransparentBackgroundImage=function(a){a.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(a){if(null!=a)for(var b in a){var c=a[b];null!=c&&(c.mxRefCount=(c.mxRefCount||0)-1,0==c.mxRefCount&&null!=c.parentNode&&c.parentNode.removeChild(c))}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null};var mxStencilRegistry={stencils:{},addStencil:function(a,b){mxStencilRegistry.stencils[a]=b},getStencil:function(a){return mxStencilRegistry.stencils[a]}},mxMarker={markers:[],addMarker:function(a,b){mxMarker.markers[a]=b},createMarker:function(a,b,c,d,e,f,g,h,i,j){var k=mxMarker.markers[c];return null!=k?k(a,b,c,d,e,f,g,h,i,j):null}};!function(){function a(a){return a=null!=a?a:2,function(b,c,d,e,f,g,h,i,j,k){var l=f*j*1.118,m=g*j*1.118;f*=h+j,g*=h+j;var n=e.clone();n.x-=l,n.y-=m;var o=d!=mxConstants.ARROW_CLASSIC&&d!=mxConstants.ARROW_CLASSIC_THIN?1:.75;return e.x+=-f*o-l,e.y+=-g*o-m,function(){b.begin(),b.moveTo(n.x,n.y),b.lineTo(n.x-f-g/a,n.y-g+f/a),d!=mxConstants.ARROW_CLASSIC&&d!=mxConstants.ARROW_CLASSIC_THIN||b.lineTo(n.x-3*f/4,n.y-3*g/4),b.lineTo(n.x+g/a-f,n.y-g-f/a),b.close(),k?b.fillAndStroke():b.stroke()}}}function b(a){return a=null!=a?a:2,function(b,c,d,e,f,g,h,i,j,k){var l=f*j*1.118,m=g*j*1.118;f*=h+j,g*=h+j;var n=e.clone();return n.x-=l,n.y-=m,e.x+=2*-l,e.y+=2*-m,function(){b.begin(),b.moveTo(n.x-f-g/a,n.y-g+f/a),b.lineTo(n.x,n.y),b.lineTo(n.x+g/a-f,n.y-g-f/a),b.stroke()}}}function c(a,b,c,d,e,f,g,h,i,j){var k=c==mxConstants.ARROW_DIAMOND?.7071:.9862,l=e*i*k,m=f*i*k;e*=g+i,f*=g+i;var n=d.clone();n.x-=l,n.y-=m,d.x+=-e-l,d.y+=-f-m;var o=c==mxConstants.ARROW_DIAMOND?2:3.4;return function(){a.begin(),a.moveTo(n.x,n.y),a.lineTo(n.x-e/2-f/o,n.y+e/o-f/2),a.lineTo(n.x-e,n.y-f),a.lineTo(n.x-e/2+f/o,n.y-f/2-e/o),a.close(),j?a.fillAndStroke():a.stroke()}}mxMarker.addMarker("classic",a(2)),mxMarker.addMarker("classicThin",a(3)),mxMarker.addMarker("block",a(2)),mxMarker.addMarker("blockThin",a(3)),mxMarker.addMarker("open",b(2)),mxMarker.addMarker("openThin",b(3)),mxMarker.addMarker("oval",function(a,b,c,d,e,f,g,h,i,j){var k=g/2,l=d.clone();return d.x-=e*k,d.y-=f*k,function(){a.ellipse(l.x-k,l.y-k,g,g),j?a.fillAndStroke():a.stroke()}}),mxMarker.addMarker("diamond",c),mxMarker.addMarker("diamondThin",c)}(),mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(a,b,c,d,e){a.translate(b,c),a.begin(),this.redrawPath(a,b,c,d,e),a.fillAndStroke()},mxActor.prototype.redrawPath=function(a,b,c,d,e){var f=d/3;a.moveTo(0,e),a.curveTo(0,3*e/5,0,2*e/5,d/2,2*e/5),a.curveTo(d/2-f,2*e/5,d/2-f,0,d/2,0),a.curveTo(d/2+f,0,d/2+f,2*e/5,d/2,2*e/5),a.curveTo(d,2*e/5,d,3*e/5,d,e),a.close()},mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(a,b,c,d,e){a.moveTo(.25*d,.25*e),a.curveTo(.05*d,.25*e,0,.5*e,.16*d,.55*e),a.curveTo(0,.66*e,.18*d,.9*e,.31*d,.8*e),a.curveTo(.4*d,e,.7*d,e,.8*d,.8*e),a.curveTo(d,.8*e,d,.6*e,.875*d,.5*e),a.curveTo(d,.3*e,.8*d,.1*e,.625*d,.2*e),a.curveTo(.5*d,.05*e,.3*d,.05*e,.25*d,.25*e),a.close()},mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var a=!0;return null!=this.style&&(a="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(a||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(a,b,c,d,e){var f=!0;if(null!=this.style&&(f="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),f||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE){if(f||null!=this.fill&&this.fill!=mxConstants.NONE||(a.pointerEvents=!1),this.isRounded){var g=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,h=Math.min(d*g,e*g);a.roundrect(b,c,d,e,h,h)}else a.rect(b,c,d,e);a.fillAndStroke()}},mxRectangleShape.prototype.paintForeground=function(a,b,c,d,e){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(a,b,c,d,e,this.getArcSize(d+this.strokewidth,e+this.strokewidth))},mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(a,b,c,d,e){a.ellipse(b,c,d,e),a.fillAndStroke()},mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.vmlScale=10,mxDoubleEllipse.prototype.paintBackground=function(a,b,c,d,e){a.ellipse(b,c,d,e),a.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(a,b,c,d,e){if(!this.outline){var f=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(d/5,e/5)));b+=f,c+=f,d-=2*f,e-=2*f,d>0&&e>0&&a.ellipse(b,c,d,e),a.stroke()}},mxDoubleEllipse.prototype.getLabelBounds=function(a){var b=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(a.width/5/this.scale,a.height/5/this.scale)))*this.scale;return new mxRectangle(a.x+b,a.y+b,a.width-2*b,a.height-2*b)},mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.paintVertexShape=function(a,b,c,d,e){var f=d/2,g=e/2,h=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;a.begin(),this.addPoints(a,[new mxPoint(b+f,c),new mxPoint(b+d,c+g),new mxPoint(b+f,c+e),new mxPoint(b,c+g)],this.isRounded,h,!0),a.fillAndStroke()},mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(a,b){null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(a,b,this.isRounded):this.paintCurvedLine(a,b)},mxPolyline.prototype.paintLine=function(a,b,c){var d=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;a.begin(),this.addPoints(a,b,c,d,!1),a.stroke()},mxPolyline.prototype.paintCurvedLine=function(a,b){a.begin();var c=b[0],d=b.length;a.moveTo(c.x,c.y);for(var e=1;e<d-2;e++){var f=b[e],g=b[e+1],h=(f.x+g.x)/2,i=(f.y+g.y)/2;a.quadTo(f.x,f.y,h,i)}var f=b[d-2],g=b[d-1];a.quadTo(f.x,f.y,g.x,g.y),a.stroke()},mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(a){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var b=Math.max(this.arrowWidth,this.endSize);a.grow((b/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(a,b){var c=mxConstants.ARROW_SPACING,d=mxConstants.ARROW_WIDTH,e=mxConstants.ARROW_SIZE,f=b[0],g=b[b.length-1],h=g.x-f.x,i=g.y-f.y,j=Math.sqrt(h*h+i*i),k=j-2*c-e,l=h/j,m=i/j,n=k*l,o=k*m,p=d*m/3,q=-d*l/3,r=f.x-p/2+c*l,s=f.y-q/2+c*m,t=r+p,u=s+q,v=t+n,w=u+o,x=v+p,y=w+q,z=x-3*p,A=y-3*q;a.begin(),a.moveTo(r,s),a.lineTo(t,u),a.lineTo(v,w),a.lineTo(x,y),a.lineTo(g.x-c*l,g.y-c*m),a.lineTo(z,A),a.lineTo(z+p,A+q),a.close(),a.fillAndStroke()},mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(a){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(a){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var b=this.getEdgeWidth();this.isMarkerStart()&&(b=Math.max(b,this.getStartArrowWidth())),this.isMarkerEnd()&&(b=Math.max(b,this.getEndArrowWidth())),a.grow((b/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(a,b){var c=this.strokewidth;this.outline&&(c=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));for(var d=this.getStartArrowWidth()+c,e=this.getEndArrowWidth()+c,f=this.outline?this.getEdgeWidth()+c:this.getEdgeWidth(),g=this.isOpenEnded(),h=this.isMarkerStart(),i=this.isMarkerEnd(),j=g?0:this.arrowSpacing+c/2,k=this.startSize+c,l=this.endSize+c,m=this.isArrowRounded(),n=b[b.length-1],o=1;o<b.length-1&&b[o].x==b[0].x&&b[o].y==b[0].y;)o++;var p=b[o].x-b[0].x,q=b[o].y-b[0].y,r=Math.sqrt(p*p+q*q);if(0!=r){var t,w,s=p/r,u=s,v=q/r,x=v,y=f*v,z=-f*s,A=[];m?a.setLineJoin("round"):b.length>2&&a.setMiterLimit(1.42),a.begin();var B=s,C=v;if(h&&!g)this.paintMarker(a,b[0].x,b[0].y,s,v,k,d,f,j,!0);else{var D=b[0].x+y/2+j*s,E=b[0].y+z/2+j*v,F=b[0].x-y/2+j*s,G=b[0].y-z/2+j*v;g?(a.moveTo(D,E),A.push(function(){a.lineTo(F,G)})):(a.moveTo(F,G),a.lineTo(D,E));
}for(var H=0,I=0,J=0,K=0;K<b.length-2;K++){var L=mxUtils.relativeCcw(b[K].x,b[K].y,b[K+1].x,b[K+1].y,b[K+2].x,b[K+2].y);if(H=b[K+2].x-b[K+1].x,I=b[K+2].y-b[K+1].y,J=Math.sqrt(H*H+I*I),0!=J){u=H/J,x=I/J;var M=s*u+v*x;tmp=Math.max(Math.sqrt((M+1)/2),.04),t=s+u,w=v+x;var N=Math.sqrt(t*t+w*w);if(0!=N){t/=N,w/=N;var O=Math.max(tmp,Math.min(this.strokewidth/200+.04,.35)),P=0!=L&&m?Math.max(.1,O):Math.max(tmp,.06),Q=b[K+1].x+w*f/2/P,R=b[K+1].y-t*f/2/P,S=b[K+1].x-w*f/2/P,T=b[K+1].y+t*f/2/P;if(0!=L&&m)if(L==-1){var U=S+v*f,V=T-s*f,W=S+x*f,X=T-u*f;a.lineTo(U,V),a.quadTo(Q,R,W,X),function(b,c){A.push(function(){a.lineTo(b,c)})}(S,T)}else a.lineTo(Q,R),function(b,c){var d=Q-v*f,e=R+s*f,g=Q-x*f,h=R+u*f;A.push(function(){a.quadTo(b,c,d,e)}),A.push(function(){a.lineTo(g,h)})}(S,T);else a.lineTo(Q,R),function(b,c){A.push(function(){a.lineTo(b,c)})}(S,T);s=u,v=x}}}if(y=f*x,z=-f*u,i&&!g)this.paintMarker(a,n.x,n.y,-s,-v,l,e,f,j,!1);else{a.lineTo(n.x-j*u+y/2,n.y-j*x+z/2);var Y=n.x-j*u-y/2,Z=n.y-j*x-z/2;g?(a.moveTo(Y,Z),A.splice(0,0,function(){a.moveTo(Y,Z)})):a.lineTo(Y,Z)}for(var K=A.length-1;K>=0;K--)A[K]();g?(a.end(),a.stroke()):(a.close(),a.fillAndStroke()),a.setShadow(!1),a.setMiterLimit(4),m&&a.setLineJoin("flat"),b.length>2&&(a.setMiterLimit(4),h&&!g&&(a.begin(),this.paintMarker(a,b[0].x,b[0].y,B,C,k,d,f,j,!0),a.stroke(),a.end()),i&&!g&&(a.begin(),this.paintMarker(a,n.x,n.y,-s,-v,l,e,f,j,!0),a.stroke(),a.end()))}},mxArrowConnector.prototype.paintMarker=function(a,b,c,d,e,f,g,h,i,j){var k=h/g,l=h*e/2,m=-h*d/2,n=(i+f)*d,o=(i+f)*e;j?a.moveTo(b-l+n,c-m+o):a.lineTo(b-l+n,c-m+o),a.lineTo(b-l/k+n,c-m/k+o),a.lineTo(b+i*d,c+i*e),a.lineTo(b+l/k+n,c+m/k+o),a.lineTo(b+l+n,c+m+o)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isParseVml=function(){return!1},mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(a,b){var c=this.scale,d=this.bounds.x/c,e=this.bounds.y/c,f=this.bounds.width/c,g=this.bounds.height/c;if(this.updateTransform(a,d,e,f,g),this.configureCanvas(a,d,e,f,g),b){var h=null!=this.state?this.state.unscaledWidth:null;null!=this.node.firstChild&&this.lastUnscaledWidth!=h&&a.invalidateCachedOffsetSize(this.node),a.updateText(d,e,f,g,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node)}else{var i=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML,j=i||a instanceof mxVmlCanvas2D?"html":"",k=this.value;i||"html"!=j||(k=mxUtils.htmlEntities(k,!1)),"html"!=j||mxUtils.isNode(this.value)||(k=mxUtils.replaceTrailingNewlines(k,"<div><br></div>")),k=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==j?k.replace(/\n/g,"<br/>"):k;var l=this.textDirection;l!=mxConstants.TEXT_DIRECTION_AUTO||i||(l=this.getAutoDirection()),l!=mxConstants.TEXT_DIRECTION_LTR&&l!=mxConstants.TEXT_DIRECTION_RTL&&(l=null),a.text(d,e,f,g,k,this.align,this.valign,this.wrap,j,this.overflow,this.clipped,this.getTextRotation(),l)}this.lastUnscaledWidth=null!=this.state?this.state.unscaledWidth:null},mxText.prototype.redraw=function(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML))if("DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML){var a=this.createCanvas();null!=a&&null!=a.updateText&&null!=a.invalidateCachedOffsetSize?(this.paint(a,!0),this.destroyCanvas(a),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments)}else this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform(),this.updateBoundingBox();else mxShape.prototype.redraw.apply(this,arguments),mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=0,this.spacingRight=0,this.spacingBottom=0,this.spacingLeft=0,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(a){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.spacingTop=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop)+this.spacing,this.spacingRight=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight)+this.spacing,this.spacingBottom=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom)+this.spacing,this.spacingLeft=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft)+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipV=null,this.flipH=null},mxText.prototype.getAutoDirection=function(){var a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=a&&a.length>0&&a[0]>"z"?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.updateBoundingBox=function(){var a=this.node;this.boundingBox=this.bounds.clone();var b=this.getTextRotation(),c=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,d=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==a||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&c==mxConstants.ALIGN_CENTER&&d==mxConstants.ALIGN_MIDDLE)){var e=null,f=null;if(null!=a.ownerSVGElement)if(null!=a.firstChild&&null!=a.firstChild.firstChild&&"foreignObject"==a.firstChild.firstChild.nodeName)a=a.firstChild.firstChild,e=parseInt(a.getAttribute("width"))*this.scale,f=parseInt(a.getAttribute("height"))*this.scale;else try{var g=a.getBBox();return void("string"==typeof this.value&&0==mxUtils.trim(this.value)?this.boundingBox=null:0==g.width&&0==g.height?this.boundingBox=null:this.boundingBox=new mxRectangle(g.x,g.y,g.width,g.height))}catch(a){}else{var h=null!=this.state?this.state.view.textDiv:null;if(null!=this.offsetWidth&&null!=this.offsetHeight)e=this.offsetWidth*this.scale,f=this.offsetHeight*this.scale;else{null!=h&&(this.updateFont(h),this.updateSize(h,!1),this.updateInnerHtml(h),a=h);var i=a;if(8!=document.documentMode||mxClient.IS_EM)null!=i.firstChild&&"DIV"==i.firstChild.nodeName&&(i=i.firstChild);else{var j=Math.round(this.bounds.width/this.scale);if(this.wrap&&j>0){if(a.style.wordWrap=mxConstants.WORD_WRAP,a.style.whiteSpace="normal","break-word"!=a.style.wordWrap){var k=i.getElementsByTagName("div");k.length>0&&(i=k[k.length-1]),e=i.offsetWidth+2,k=this.node.getElementsByTagName("div"),this.clipped&&(e=Math.min(j,e)),k.length>1&&(k[k.length-2].style.width=e+"px")}}else a.style.whiteSpace="nowrap"}this.offsetWidth=i.offsetWidth+this.textWidthPadding,this.offsetHeight=i.offsetHeight,e=this.offsetWidth*this.scale,f=this.offsetHeight*this.scale}}null!=e&&null!=f&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,e,f))}if(null!=this.boundingBox)if(0!=b){var l=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),b,new mxPoint(0,0));this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=l.x,this.boundingBox.y+=l.y,this.boundingBox.width=l.width,this.boundingBox.height=l.height}else this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(a,b,c,d,e){mxShape.prototype.configureCanvas.apply(this,arguments),a.setFontColor(this.color),a.setFontBackgroundColor(this.background),a.setFontBorderColor(this.border),a.setFontFamily(this.family),a.setFontSize(this.size),a.setFontStyle(this.fontStyle)},mxText.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"},mxText.prototype.redrawHtmlShape=function(){var a=this.node.style;a.whiteSpace="normal",a.overflow="",a.width="",a.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetWidth=null,this.offsetHeight=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()},mxText.prototype.updateHtmlTransform=function(){var a=this.getTextRotation(),b=this.node.style,c=this.margin.x,d=this.margin.y;0!=a?(mxUtils.setPrefixedStyle(b,"transformOrigin",100*-c+"% "+100*-d+"%"),mxUtils.setPrefixedStyle(b,"transform","translate("+100*c+"%,"+100*d+"%)scale("+this.scale+") rotate("+a+"deg)")):(mxUtils.setPrefixedStyle(b,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(b,"transform","scale("+this.scale+")translate("+100*c+"%,"+100*d+"%)")),b.left=Math.round(this.bounds.x-Math.ceil(c*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",b.top=Math.round(this.bounds.y-d*("fill"!=this.overflow?3:1))+"px",this.opacity<100?b.opacity=this.opacity/100:b.opacity=""},mxText.prototype.updateInnerHtml=function(a){if(mxUtils.isNode(this.value))a.innerHTML=this.value.outerHTML;else{var b=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(b=mxUtils.htmlEntities(b,!1)),b=mxUtils.replaceTrailingNewlines(b,"<div>&nbsp;</div>"),b=this.replaceLinefeeds?b.replace(/\n/g,"<br/>"):b,b='<div style="display:inline-block;_display:inline;">'+b+"</div>",a.innerHTML=b}},mxText.prototype.updateHtmlFilter=function(){var a=this.node.style,b=this.margin.x,c=this.margin.y,d=this.scale;mxUtils.setOpacity(this.node,this.opacity);var e=0,f=0,g=null!=this.state?this.state.view.textDiv:null,h=this.node;if(null!=g){g.style.overflow="",g.style.height="",g.style.width="",this.updateFont(g),this.updateSize(g,!1),this.updateInnerHtml(g);var i=Math.round(this.bounds.width/this.scale);this.wrap&&i>0?(g.style.whiteSpace="normal",g.style.wordWrap=mxConstants.WORD_WRAP,e=i,this.clipped&&(e=Math.min(e,this.bounds.width)),g.style.width=e+"px"):g.style.whiteSpace="nowrap",h=g,null!=h.firstChild&&"DIV"==h.firstChild.nodeName&&(h=h.firstChild,this.wrap&&"break-word"==g.style.wordWrap&&(h.style.width="100%")),!this.clipped&&this.wrap&&i>0&&(e=h.offsetWidth+this.textWidthPadding,g.style.width=e+"px"),f=h.offsetHeight+2,mxClient.IS_QUIRKS&&null!=this.border&&this.border!=mxConstants.NONE&&(f+=3)}else null!=h.firstChild&&"DIV"==h.firstChild.nodeName&&(h=h.firstChild,f=h.offsetHeight);e=h.offsetWidth+this.textWidthPadding,this.clipped&&(f=Math.min(f,this.bounds.height));var i=this.bounds.width/d,j=this.bounds.height/d;"fill"==this.overflow?(f=j,e=i):"width"==this.overflow&&(f=h.scrollHeight,e=i),this.offsetWidth=e,this.offsetHeight=f,mxClient.IS_QUIRKS&&(this.clipped||"width"==this.overflow&&j>0)?(j=Math.min(j,f),a.height=Math.round(j)+"px"):j=f,"fill"!=this.overflow&&"width"!=this.overflow&&(this.clipped&&(e=Math.min(i,e)),i=e,(mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(a.width=Math.round(i)+"px")),j*=d,i*=d;var k=this.getTextRotation()*(Math.PI/180),l=parseFloat(parseFloat(Math.cos(k)).toFixed(8)),m=parseFloat(parseFloat(Math.sin(-k)).toFixed(8));k%=2*Math.PI,k<0&&(k+=2*Math.PI),k%=Math.PI,k>Math.PI/2&&(k=Math.PI-k);var n=Math.cos(k),o=Math.sin(-k),p=i*-(b+.5),q=j*-(c+.5),r=(j-j*n+i*o)/2+m*p-l*q,s=(i-i*n+j*o)/2-l*p-m*q;if(0!=k){var t="progid:DXImageTransform.Microsoft.Matrix(M11="+l+", M12="+m+", M21="+-m+", M22="+l+", sizingMethod='auto expand')";null!=a.filter&&a.filter.length>0?a.filter+=" "+t:a.filter=t}var c=0;"fill"!=this.overflow&&mxClient.IS_QUIRKS&&(this.valign==mxConstants.ALIGN_TOP?c-=1:c+=this.valign==mxConstants.ALIGN_BOTTOM?2:1),a.zoom=d,a.left=Math.round(this.bounds.x+s-i/2)+"px",a.top=Math.round(this.bounds.y+r-j/2+c)+"px"},mxText.prototype.updateValue=function(){if(mxUtils.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var a=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(a=mxUtils.htmlEntities(a,!1)),a=mxUtils.replaceTrailingNewlines(a,"<div><br></div>"),a=this.replaceLinefeeds?a.replace(/\n/g,"<br/>"):a;var b=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,c=null!=this.border&&this.border!=mxConstants.NONE?this.border:null;if("fill"==this.overflow||"width"==this.overflow)null!=b&&(this.node.style.backgroundColor=b),null!=c&&(this.node.style.border="1px solid "+c);else{var d="";null!=b&&(d+="background-color:"+b+";"),null!=c&&(d+="border:1px solid "+c+";");var e=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT;a='<div style="zoom:1;'+d+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+e+'">'+a+"</div>"}this.node.innerHTML=a;var f=this.node.getElementsByTagName("div");if(f.length>0){var g=this.textDirection;g==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML&&(g=this.getAutoDirection()),g==mxConstants.TEXT_DIRECTION_LTR||g==mxConstants.TEXT_DIRECTION_RTL?f[f.length-1].setAttribute("dir",g):f[f.length-1].removeAttribute("dir")}}},mxText.prototype.updateFont=function(a){var b=a.style;b.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,b.fontSize=this.size+"px",b.fontFamily=this.family,b.verticalAlign="top",b.color=this.color,(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?b.fontWeight="bold":b.fontWeight="",(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?b.fontStyle="italic":b.fontStyle="",(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE?b.textDecoration="underline":b.textDecoration="",this.align==mxConstants.ALIGN_CENTER?b.textAlign="center":this.align==mxConstants.ALIGN_RIGHT?b.textAlign="right":b.textAlign="left"},mxText.prototype.updateSize=function(a,b){var c=Math.max(0,Math.round(this.bounds.width/this.scale)),d=Math.max(0,Math.round(this.bounds.height/this.scale)),e=a.style;if(this.clipped?(e.overflow="hidden",mxClient.IS_QUIRKS?e.width=c+"px":(e.maxHeight=d+"px",e.maxWidth=c+"px")):"fill"==this.overflow?(e.width=c+1+"px",e.height=d+1+"px",e.overflow="hidden"):"width"==this.overflow&&(e.width=c+1+"px",e.maxHeight=d+1+"px",e.overflow="hidden"),this.wrap&&c>0){if(e.wordWrap=mxConstants.WORD_WRAP,e.whiteSpace="normal",e.width=c+"px",b&&"fill"!=this.overflow&&"width"!=this.overflow){var f=a;null!=f.firstChild&&"DIV"==f.firstChild.nodeName&&(f=f.firstChild,"break-word"==a.style.wordWrap&&(f.style.width="100%"));var g=f.offsetWidth;if(0==g){var h=a.parentNode;a.style.visibility="hidden",document.body.appendChild(a),g=f.offsetWidth,a.style.visibility="",h.appendChild(a)}g+=3,this.clipped&&(g=Math.min(g,c)),e.width=g+"px"}}else e.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(){var a=0,b=0;return a=this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-this.baseSpacingRight:this.spacingLeft+this.baseSpacingLeft,b=this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-this.baseSpacingBottom:this.spacingTop+this.baseSpacingTop,new mxPoint(a,b)},mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.redrawPath=function(a,b,c,d,e){var f=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(a,[new mxPoint(0,0),new mxPoint(d,.5*e),new mxPoint(0,e)],this.isRounded,f,!0)},mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(a,b,c,d,e){var f=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(a,[new mxPoint(.25*d,0),new mxPoint(.75*d,0),new mxPoint(d,.5*e),new mxPoint(.75*d,e),new mxPoint(.25*d,e),new mxPoint(0,.5*e)],this.isRounded,f,!0)},mxUtils.extend(mxLine,mxShape),mxLine.prototype.paintVertexShape=function(a,b,c,d,e){var f=c+e/2;a.begin(),a.moveTo(b,f),a.lineTo(b+d,f),a.stroke()},mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(a){mxShape.prototype.apply.apply(this,arguments),this.fill=null,this.stroke=null,this.gradient=null,null!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var a=document.createElement("div");return a.style.position="absolute",a},mxImageShape.prototype.paintVertexShape=function(a,b,c,d,e){if(null!=this.image){var f=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),g=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);null!=f&&(a.setFillColor(f),a.setStrokeColor(g),a.rect(b,c,d,e),a.fillAndStroke()),a.image(b,c,d,e,this.image,this.preserveImageAspect,!1,!1);var g=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);null!=g&&(a.setShadow(!1),a.setStrokeColor(g),a.rect(b,c,d,e),a.stroke())}else mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",null!=this.image){var a=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),b=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=a,this.node.style.borderColor=b;var c=mxClient.IS_IE6||(null==document.documentMode||document.documentMode<=8)&&0!=this.rotation,d=document.createElement(c?mxClient.VML_PREFIX+":image":"img");d.setAttribute("border","0"),d.style.position="absolute",d.src=this.image;var e=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=e,this.flipH&&this.flipV?e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?e+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),d.style.filter!=e&&(d.style.filter=e),"image"==d.nodeName?d.style.rotation=this.rotation:0!=this.rotation?mxUtils.setPrefixedStyle(d.style,"transform","rotate("+this.rotation+"deg)"):mxUtils.setPrefixedStyle(d.style,"transform",""),d.style.width=this.node.style.width,d.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(d)}else this.setTransparentBackgroundImage(this.node)},mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(a){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(a,b,c,d,e){this.paintImage(a,b,c,d,e),this.paintIndicator(a,b,c,d,e),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(a,b,c,d,e){if(null!=this.image){var f=this.getImageBounds(b,c,d,e);a.image(f.x,f.y,f.width,f.height,this.image,!1,!1,!1)}},mxLabel.prototype.getImageBounds=function(a,b,c,d){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),f=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),g=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),h=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),i=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return a+=e==mxConstants.ALIGN_CENTER?(c-g)/2:e==mxConstants.ALIGN_RIGHT?c-g-i:i,b+=f==mxConstants.ALIGN_TOP?i:f==mxConstants.ALIGN_BOTTOM?d-h-i:(d-h)/2,new mxRectangle(a,b,g,h)},mxLabel.prototype.paintIndicator=function(a,b,c,d,e){if(null!=this.indicator)this.indicator.bounds=this.getIndicatorBounds(b,c,d,e),this.indicator.paint(a);else if(null!=this.indicatorImage){var f=this.getIndicatorBounds(b,c,d,e);a.image(f.x,f.y,f.width,f.height,this.indicatorImage,!1,!1,!1)}},mxLabel.prototype.getIndicatorBounds=function(a,b,c,d){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),f=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),g=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),h=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),i=this.spacing+5;return a+=e==mxConstants.ALIGN_RIGHT?c-g-i:e==mxConstants.ALIGN_CENTER?(c-g)/2:i,b+=f==mxConstants.ALIGN_BOTTOM?d-h-i:f==mxConstants.ALIGN_TOP?i:(d-h)/2,new mxRectangle(a,b,g,h)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(null!=this.image){var a=document.createElement("img");a.style.position="relative",a.setAttribute("border","0");var b=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);b.x-=this.bounds.x,b.y-=this.bounds.y,a.style.left=Math.round(b.x)+"px",a.style.top=Math.round(b.y)+"px",a.style.width=Math.round(b.width)+"px",a.style.height=Math.round(b.height)+"px",a.src=this.image,this.node.appendChild(a)}},mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(a,b,c,d,e){a.translate(b,c),a.begin(),this.redrawPath(a,b,c,d,e,!1),a.fillAndStroke(),a.setShadow(!1),a.begin(),this.redrawPath(a,b,c,d,e,!0),a.stroke()},mxCylinder.prototype.redrawPath=function(a,b,c,d,e,f){var g=Math.min(this.maxHeight,Math.round(e/5));(f&&null!=this.fill||!f&&null==this.fill)&&(a.moveTo(0,g),a.curveTo(0,2*g,d,2*g,d,g),f||(a.stroke(),a.begin())),f||(a.moveTo(0,g),a.curveTo(0,-g/3,d,-g/3,d,g),a.lineTo(d,e-g),a.curveTo(d,e+g/3,0,e+g/3,0,e-g),a.close())},mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(a,b){var c=this.createMarker(a,b,!0),d=this.createMarker(a,b,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),a.setFillColor(this.stroke),a.setShadow(!1),a.setDashed(!1),null!=c&&c(),null!=d&&d()},mxConnector.prototype.createMarker=function(a,b,c){var d=null,e=b.length,f=mxUtils.getValue(this.style,c?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),g=c?b[1]:b[e-2],h=c?b[0]:b[e-1];if(null!=f&&null!=g&&null!=h){for(var i=1;i<e-1&&0==Math.round(g.x-h.x)&&0==Math.round(g.y-h.y);)g=c?b[1+i]:b[e-2-i],i++;var j=h.x-g.x,k=h.y-g.y,l=Math.max(1,Math.sqrt(j*j+k*k)),m=j/l,n=k/l,o=mxUtils.getNumber(this.style,c?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),p=0!=this.style[c?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL];d=mxMarker.createMarker(a,this,f,h,m,n,o,c,this.arrowStrokewidth,p)}return d},mxConnector.prototype.augmentBoundingBox=function(a){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var b=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(b=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(b=Math.max(b,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),a.grow(b*this.scale)},mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(a){var b=this.getTitleSize(),c=new mxRectangle(a.x,a.y,a.width,a.height),d=this.isHorizontal(),e=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),f=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),g=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,h=d==!g,i=!h&&e!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),j=h&&f!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);if(g){var k=Math.min(c.width,b*this.scale);(i||j)&&(c.x+=c.width-k),c.width=k}else{var k=Math.min(c.height,b*this.scale);(i||j)&&(c.y+=c.height-k),c.height=k}return c},mxSwimlane.prototype.getGradientBounds=function(a,b,c,d,e){var f=this.getTitleSize();return this.isHorizontal()?(f=Math.min(f,e),new mxRectangle(b,c,d,f)):(f=Math.min(f,d),new mxRectangle(b,c,f,e))},mxSwimlane.prototype.getArcSize=function(a,b,c){var d=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;return c*d*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(a,b,c,d,e){var f=this.getTitleSize(),g=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),h=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),i=0;f=this.isHorizontal()?Math.min(f,e):Math.min(f,d),a.translate(b,c),this.isRounded?(i=this.getArcSize(d,e,f),this.paintRoundedSwimlane(a,b,c,d,e,f,i,g,h)):this.paintSwimlane(a,b,c,d,e,f,g,h);var j=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE);if(this.paintSeparator(a,b,c,d,e,f,j),null!=this.image){var k=this.getImageBounds(b,c,d,e);a.image(k.x-b,k.y-c,k.width,k.height,this.image,!1,!1,!1)}this.glass&&(a.setShadow(!1),this.paintGlassEffect(a,0,0,d,f,i))},mxSwimlane.prototype.paintSwimlane=function(a,b,c,d,e,f,g,h){g!=mxConstants.NONE&&(a.save(),a.setFillColor(g),a.rect(0,0,d,e),a.fillAndStroke(),a.restore(),a.setShadow(!1)),a.begin(),this.isHorizontal()?(a.moveTo(0,f),a.lineTo(0,0),a.lineTo(d,0),a.lineTo(d,f),(h||f>=e)&&a.close(),a.fillAndStroke(),f<e&&g==mxConstants.NONE&&(a.pointerEvents=!1,a.begin(),a.moveTo(0,f),a.lineTo(0,e),a.lineTo(d,e),a.lineTo(d,f),a.stroke())):(a.moveTo(f,0),a.lineTo(0,0),a.lineTo(0,e),a.lineTo(f,e),(h||f>=d)&&a.close(),a.fillAndStroke(),f<d&&g==mxConstants.NONE&&(a.pointerEvents=!1,a.begin(),a.moveTo(f,0),a.lineTo(d,0),a.lineTo(d,e),a.lineTo(f,e),a.stroke()))},mxSwimlane.prototype.paintRoundedSwimlane=function(a,b,c,d,e,f,g,h,i){h!=mxConstants.NONE&&(a.save(),a.setFillColor(h),a.roundrect(0,0,d,e,g,g),a.fillAndStroke(),a.restore(),a.setShadow(!1)),a.begin(),this.isHorizontal()?(a.moveTo(d,f),a.lineTo(d,g),a.quadTo(d,0,d-Math.min(d/2,g),0),a.lineTo(Math.min(d/2,g),0),a.quadTo(0,0,0,g),a.lineTo(0,f),(i||f>=e)&&a.close(),a.fillAndStroke(),f<e&&h==mxConstants.NONE&&(a.pointerEvents=!1,a.begin(),a.moveTo(0,f),a.lineTo(0,e-g),a.quadTo(0,e,Math.min(d/2,g),e),a.lineTo(d-Math.min(d/2,g),e),a.quadTo(d,e,d,e-g),a.lineTo(d,f),a.stroke())):(a.moveTo(f,0),a.lineTo(g,0),a.quadTo(0,0,0,Math.min(e/2,g)),a.lineTo(0,e-Math.min(e/2,g)),a.quadTo(0,e,g,e),a.lineTo(f,e),(i||f>=d)&&a.close(),a.fillAndStroke(),f<d&&h==mxConstants.NONE&&(a.pointerEvents=!1,a.begin(),a.moveTo(f,e),a.lineTo(d-g,e),a.quadTo(d,e,d,e-Math.min(e/2,g)),a.lineTo(d,Math.min(e/2,g)),a.quadTo(d,0,d-g,0),a.lineTo(f,0),a.stroke()))},mxSwimlane.prototype.paintSeparator=function(a,b,c,d,e,f,g){g!=mxConstants.NONE&&(a.setStrokeColor(g),a.setDashed(!0),a.begin(),this.isHorizontal()?(a.moveTo(d,f),a.lineTo(d,e)):(a.moveTo(f,0),a.lineTo(d,0)),a.stroke(),
  a.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(a,b,c,d){return this.isHorizontal()?new mxRectangle(a+c-this.imageSize,b,this.imageSize,this.imageSize):new mxRectangle(a,b,this.imageSize,this.imageSize)},mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(a,b,c){},mxGraphLayout.prototype.execute=function(a){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(a,b,c,d){var e=this.graph.view.getState(b),f=null!=e?e.style:this.graph.getCellStyle(b);return null!=f?f[a]:null},mxGraphLayout.traverse=function(a,b,c,d,e){if(null!=c&&null!=a&&(b=null==b||b,e=e||new mxDictionary,!e.get(a))){e.put(a,!0);var f=c(a,d);if(null==f||f){var g=this.graph.model.getEdgeCount(a);if(g>0)for(var h=0;h<g;h++){var i=this.graph.model.getEdgeAt(a,h),j=this.graph.model.getTerminal(i,!0)==a;if(!b||j){var k=this.graph.view.getVisibleTerminal(i,!j);this.traverse(k,b,c,i,e)}}}}},mxGraphLayout.prototype.isVertexMovable=function(a){return this.graph.isCellMovable(a)},mxGraphLayout.prototype.isVertexIgnored=function(a){return!this.graph.getModel().isVertex(a)||!this.graph.isCellVisible(a)},mxGraphLayout.prototype.isEdgeIgnored=function(a){var b=this.graph.getModel();return!b.isEdge(a)||!this.graph.isCellVisible(a)||null==b.getTerminal(a,!0)||null==b.getTerminal(a,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(a,b){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,b?"0":"1",[a])},mxGraphLayout.prototype.setOrthogonalEdge=function(a,b){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,b?"1":"0",[a])},mxGraphLayout.prototype.getParentOffset=function(a){var b=new mxPoint;if(null!=a&&a!=this.parent){var c=this.graph.getModel();if(c.isAncestor(this.parent,a))for(var d=c.getGeometry(a);a!=this.parent;)b.x=b.x+d.x,b.y=b.y+d.y,a=c.getParent(a),d=c.getGeometry(a)}return b},mxGraphLayout.prototype.setEdgePoints=function(a,b){if(null!=a){var c=this.graph.model,d=c.getGeometry(a);if(null==d?(d=new mxGeometry,d.setRelative(!0)):d=d.clone(),null!=this.parent&&null!=b)for(var e=c.getParent(a),f=this.getParentOffset(e),g=0;g<b.length;g++)b[g].x=b[g].x-f.x,b[g].y=b[g].y-f.y;d.points=b,c.setGeometry(a,d)}},mxGraphLayout.prototype.setVertexLocation=function(a,b,c){var d=this.graph.getModel(),e=d.getGeometry(a),f=null;if(null!=e){if(f=new mxRectangle(b,c,e.width,e.height),this.useBoundingBox){var g=this.graph.getView().getState(a);if(null!=g&&null!=g.text&&null!=g.text.boundingBox){var h=this.graph.getView().scale,i=g.text.boundingBox;g.text.boundingBox.x<g.x&&(b+=(g.x-i.x)/h,f.width=i.width),g.text.boundingBox.y<g.y&&(c+=(g.y-i.y)/h,f.height=i.height)}}if(null!=this.parent){var j=d.getParent(a);if(null!=j&&j!=this.parent){var k=this.getParentOffset(j);b-=k.x,c-=k.y}}e.x==b&&e.y==c||(e=e.clone(),e.x=b,e.y=c,d.setGeometry(a,e))}return f},mxGraphLayout.prototype.getVertexBounds=function(a){var b=this.graph.getModel().getGeometry(a);if(this.useBoundingBox){var c=this.graph.getView().getState(a);if(null!=c&&null!=c.text&&null!=c.text.boundingBox){var d=this.graph.getView().scale,e=c.text.boundingBox,f=Math.max(c.x-e.x,0)/d,g=Math.max(c.y-e.y,0)/d,h=Math.max(e.x+e.width-(c.x+c.width),0)/d,i=Math.max(e.y+e.height-(c.y+c.height),0)/d;b=new mxRectangle(b.x-f,b.y-g,b.width+f+h,b.height+g+i)}}if(null!=this.parent){var j=this.graph.getModel().getParent(a);if(b=b.clone(),null!=j&&j!=this.parent){var k=this.getParentOffset(j);b.x=b.x+k.x,b.y=b.y+k.y}}return new mxRectangle(b.x,b.y,b.width,b.height)},mxGraphLayout.prototype.arrangeGroups=function(a,b,c,d,e,f){return this.graph.updateGroupBounds(a,b,!0,c,d,e,f)},mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(a,b,c){var d=this.graph.getModel(),e=d.getParent(a),f=this.isHorizontal();if(null!=a&&null!=e){var g=0,h=0,i=d.getChildCount(e),j=f?b:c,k=this.graph.getView().getState(e);for(null!=k&&(j-=f?k.x:k.y),j/=this.graph.view.scale,g=0;g<i;g++){var l=d.getChildAt(e,g);if(l!=a){var m=d.getGeometry(l);if(null!=m){var n=f?m.x+m.width/2:m.y+m.height/2;if(h<=j&&n>j)break;h=n}}}var o=e.getIndex(a);o=Math.max(0,g-(g>o?1:0)),d.add(e,a,o)}},mxStackLayout.prototype.getParentSize=function(a){var b=this.graph.getModel(),c=b.getGeometry(a);if(null!=this.graph.container&&(null==c&&b.isLayer(a)||a==this.graph.getView().currentRoot)){var d=this.graph.container.offsetWidth-1,e=this.graph.container.offsetHeight-1;c=new mxRectangle(0,0,d,e)}return c},mxStackLayout.prototype.execute=function(a){if(null!=a){var b=this.getParentSize(a),c=this.isHorizontal(),d=this.graph.getModel(),e=null;null!=b&&(e=c?b.height-this.marginTop-this.marginBottom:b.width-this.marginLeft-this.marginRight),e-=2*this.spacing+2*this.border;var f=this.x0+this.border+this.marginLeft,g=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(a)){var h=this.graph.getCellStyle(a),i=mxUtils.getNumber(h,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),j=1==mxUtils.getValue(h,mxConstants.STYLE_HORIZONTAL,!0);null!=b&&(i=j?Math.min(i,b.height):Math.min(i,b.width)),c==j&&(e-=i),j?g+=i:f+=i}d.beginUpdate();try{for(var k=0,l=null,m=0,n=null,o=d.getChildCount(a),p=0;p<o;p++){var q=d.getChildAt(a,p);if(!this.isVertexIgnored(q)&&this.isVertexMovable(q)){var r=d.getGeometry(q);if(null!=r){r=r.clone(),null!=this.wrap&&null!=l&&(c&&l.x+l.width+r.width+2*this.spacing>this.wrap||!c&&l.y+l.height+r.height+2*this.spacing>this.wrap)&&(l=null,c?g+=k+this.spacing:f+=k+this.spacing,k=0),k=Math.max(k,c?r.height:r.width);var s=0;if(!this.borderCollapse){var t=this.graph.getCellStyle(q);s=mxUtils.getNumber(t,mxConstants.STYLE_STROKEWIDTH,1)}null!=l?c?r.x=m+this.spacing+Math.floor(s/2):r.y=m+this.spacing+Math.floor(s/2):this.keepFirstLocation||(c?r.x=f:r.y=g),c?r.y=g:r.x=f,this.fill&&null!=e&&(c?r.height=e:r.width=e),this.setChildGeometry(q,r),n=q,l=r,m=c?l.x+l.width+Math.floor(s/2):l.y+l.height+Math.floor(s/2)}}}this.resizeParent&&null!=b&&null!=l&&!this.graph.isCellCollapsed(a)?this.updateParentGeometry(a,b,l):this.resizeLast&&null!=b&&null!=l&&null!=n&&(c?l.width=b.width-l.x-this.spacing-this.marginRight-this.marginLeft:l.height=b.height-l.y-this.spacing-this.marginBottom,this.setChildGeometry(n,l))}finally{d.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(a,b){var c=this.graph.getCellGeometry(a);null!=c&&b.x==c.x&&b.y==c.y&&b.width==c.width&&b.height==c.height||this.graph.getModel().setGeometry(a,b)},mxStackLayout.prototype.updateParentGeometry=function(a,b,c){var d=this.isHorizontal(),e=this.graph.getModel(),f=b.clone();if(d){var g=c.x+c.width+this.spacing+this.marginRight;this.resizeParentMax?f.width=Math.max(f.width,g):f.width=g}else{var g=c.y+c.height+this.spacing+this.marginBottom;this.resizeParentMax?f.height=Math.max(f.height,g):f.height=g}b.x==f.x&&b.y==f.y&&b.width==f.width&&b.height==f.height||e.setGeometry(a,f)},mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(a,b,c){var d=this.graph.getModel(),e=d.getParent(a);if(null!=a&&null!=e){var f=0,g=0,h=d.getChildCount(e);for(f=0;f<h;f++){var i=d.getChildAt(e,f),j=this.getVertexBounds(i);if(null!=j){var k=j.x+j.width/2;if(g<b&&k>b)break;g=k}}var l=e.getIndex(a);l=Math.max(0,f-(f>l?1:0)),d.add(e,a,l)}},mxPartitionLayout.prototype.execute=function(a){var b=this.isHorizontal(),c=this.graph.getModel(),d=c.getGeometry(a);if(null!=this.graph.container&&(null==d&&c.isLayer(a)||a==this.graph.getView().currentRoot)){var e=this.graph.container.offsetWidth-1,f=this.graph.container.offsetHeight-1;d=new mxRectangle(0,0,e,f)}if(null!=d){for(var g=[],h=c.getChildCount(a),i=0;i<h;i++){var j=c.getChildAt(a,i);!this.isVertexIgnored(j)&&this.isVertexMovable(j)&&g.push(j)}var k=g.length;if(k>0){var l=this.border,m=this.border,n=b?d.height:d.width;n-=2*this.border;var o=this.graph.isSwimlane(a)?this.graph.getStartSize(a):new mxRectangle;n-=b?o.height:o.width,l+=o.width,m+=o.height;var p=this.border+(k-1)*this.spacing,q=b?(d.width-l-p)/k:(d.height-m-p)/k;if(q>0){c.beginUpdate();try{for(var i=0;i<k;i++){var j=g[i],r=c.getGeometry(j);null!=r&&(r=r.clone(),r.x=l,r.y=m,b?(this.resizeVertices&&(r.width=q,r.height=n),l+=q+this.spacing):(this.resizeVertices&&(r.height=q,r.width=n),m+=q+this.spacing),c.setGeometry(j,r))}}finally{c.endUpdate()}}}}},mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8;mxCompactTreeLayout.prototype.channelBuffer=4;mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(a){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(a).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(a,b){this.parent=a;var c=this.graph.getModel();if(null==b)if(this.graph.getEdges(a,c.getParent(a),this.invert,!this.invert,!1).length>0)this.root=a;else{var d=this.graph.findTreeRoots(a,!0,this.invert);if(d.length>0)for(var e=0;e<d.length;e++)if(!this.isVertexIgnored(d[e])&&this.graph.getEdges(d[e],null,this.invert,!this.invert,!1).length>0){this.root=d[e];break}}else this.root=b;if(null!=this.root){if(this.resizeParent?this.parentsChanged=new Object:this.parentsChanged=null,this.parentX=null,this.parentY=null,a!=this.root&&null!=c.isVertex(a)&&this.maintainParentLocation){var f=this.graph.getCellGeometry(a);null!=f&&(this.parentX=f.x,this.parentY=f.y)}c.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,a),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node){this.layout(this.node);var g=this.graph.gridSize,h=g;if(!this.moveTree){var i=this.getVertexBounds(this.root);null!=i&&(g=i.x,h=i.y)}var j=null;if(j=this.isHorizontal()?this.horizontalLayout(this.node,g,h):this.verticalLayout(this.node,null,g,h),null!=j){var k=0,l=0;j.x<0&&(k=Math.abs(g-j.x)),j.y<0&&(l=Math.abs(h-j.y)),0==k&&0==l||this.moveNode(this.node,k,l),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}if(null!=this.parentX&&null!=this.parentY){var f=this.graph.getCellGeometry(a);null!=f&&(f=f.clone(),f.x=this.parentX,f.y=this.parentY,c.setGeometry(a,f))}}}finally{c.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(a,b,c){a.x+=b,a.y+=c,this.apply(a);for(var d=a.child;null!=d;)this.moveNode(d,b,c),d=d.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(a,b){var c=new mxDictionary;b.sort(function(b,d){var e=b.getTerminal(b.getTerminal(!1)==a),f=c.get(e);null==f&&(f=mxCellPath.create(e).split(mxCellPath.PATH_SEPARATOR),c.put(e,f));var g=d.getTerminal(d.getTerminal(!1)==a),h=c.get(g);return null==h&&(h=mxCellPath.create(g).split(mxCellPath.PATH_SEPARATOR),c.put(g,h)),mxCellPath.compare(f,h)})},mxCompactTreeLayout.prototype.findRankHeights=function(a,b){(null==this.maxRankHeight[b]||this.maxRankHeight[b]<a.height)&&(this.maxRankHeight[b]=a.height);for(var c=a.child;null!=c;)this.findRankHeights(c,b+1),c=c.next},mxCompactTreeLayout.prototype.setCellHeights=function(a,b){null!=this.maxRankHeight[b]&&this.maxRankHeight[b]>a.height&&(a.height=this.maxRankHeight[b]);for(var c=a.child;null!=c;)this.setCellHeights(c,b+1),c=c.next},mxCompactTreeLayout.prototype.dfs=function(a,b){var c=mxCellPath.create(a),d=null;if(null!=a&&null==this.visited[c]&&!this.isVertexIgnored(a)){this.visited[c]=a,d=this.createNode(a);var e=this.graph.getModel(),f=null,g=this.graph.getEdges(a,b,this.invert,!this.invert,!1,!0),h=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(a,g);for(var i=0;i<g.length;i++){var j=g[i];if(!this.isEdgeIgnored(j)){this.resetEdges&&this.setEdgePoints(j,null),this.edgeRouting&&(this.setEdgeStyleEnabled(j,!1),this.setEdgePoints(j,null));var k=h.getState(j),l=null!=k?k.getVisibleTerminal(this.invert):h.getVisibleTerminal(j,this.invert),m=this.dfs(l,b);null!=m&&null!=e.getGeometry(l)&&(null==f?d.child=m:f.next=m,f=m)}}}return d},mxCompactTreeLayout.prototype.layout=function(a){if(null!=a){for(var b=a.child;null!=b;)this.layout(b),b=b.next;null!=a.child?this.attachParent(a,this.join(a)):this.layoutLeaf(a)}},mxCompactTreeLayout.prototype.horizontalLayout=function(a,b,c,d){a.x+=b+a.offsetX,a.y+=c+a.offsetY,d=this.apply(a,d);var e=a.child;if(null!=e){d=this.horizontalLayout(e,a.x,a.y,d);for(var f=a.y+e.offsetY,g=e.next;null!=g;)d=this.horizontalLayout(g,a.x+e.offsetX,f,d),f+=g.offsetY,g=g.next}return d},mxCompactTreeLayout.prototype.verticalLayout=function(a,b,c,d,e){a.x+=c+a.offsetY,a.y+=d+a.offsetX,e=this.apply(a,e);var f=a.child;if(null!=f){e=this.verticalLayout(f,a,a.x,a.y,e);for(var g=a.x+f.offsetY,h=f.next;null!=h;)e=this.verticalLayout(h,a,g,a.y+f.offsetX,e),g+=h.offsetY,h=h.next}return e},mxCompactTreeLayout.prototype.attachParent=function(a,b){var c=this.nodeDistance+this.levelDistance,d=(b-a.width)/2-this.nodeDistance,e=d+a.width+2*this.nodeDistance-b;a.child.offsetX=c+a.height,a.child.offsetY=e,a.contour.upperHead=this.createLine(a.height,0,this.createLine(c,e,a.contour.upperHead)),a.contour.lowerHead=this.createLine(a.height,0,this.createLine(c,d,a.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(a){var b=2*this.nodeDistance;a.contour.upperTail=this.createLine(a.height+b,0),a.contour.upperHead=a.contour.upperTail,a.contour.lowerTail=this.createLine(0,-a.width-b),a.contour.lowerHead=this.createLine(a.height+b,0,a.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(a){var b=2*this.nodeDistance,c=a.child;a.contour=c.contour;var d=c.width+b,e=d;for(c=c.next;null!=c;){var f=this.merge(a.contour,c.contour);c.offsetY=f+d,c.offsetX=0,d=c.width+b,e+=f+d,c=c.next}return e},mxCompactTreeLayout.prototype.merge=function(a,b){for(var c=0,d=0,e=0,f=a.lowerHead,g=b.upperHead;null!=g&&null!=f;){var h=this.offset(c,d,g.dx,g.dy,f.dx,f.dy);d+=h,e+=h,c+g.dx<=f.dx?(c+=g.dx,d+=g.dy,g=g.next):(c-=f.dx,d-=f.dy,f=f.next)}if(null!=g){var i=this.bridge(a.upperTail,0,0,g,c,d);a.upperTail=null!=i.next?b.upperTail:i,a.lowerTail=b.lowerTail}else{var i=this.bridge(b.lowerTail,c,d,f,0,0);null==i.next&&(a.lowerTail=i)}return a.lowerHead=b.lowerHead,e},mxCompactTreeLayout.prototype.offset=function(a,b,c,d,e,f){var g=0;if(e<=a||a+c<=0)return 0;var h=e*d-c*f;if(h>0)if(a<0){var i=a*d;g=i/c-b}else if(a>0){var i=a*f;g=i/e-b}else g=-b;else if(e<a+c){var i=(e-a)*d;g=f-(b+i/c)}else if(e>a+c){var i=(c+a)*f;g=i/e-(b+d)}else g=f-(b+d);return g>0?g:0},mxCompactTreeLayout.prototype.bridge=function(a,b,c,d,e,f){var g=e+d.dx-b,h=0,i=0;0==d.dx?h=d.dy:(i=g*d.dy,h=i/d.dx);var j=this.createLine(g,h,d.next);return a.next=this.createLine(0,f+d.dy-h-c,j),j},mxCompactTreeLayout.prototype.createNode=function(a){var b=new Object;b.cell=a,b.x=0,b.y=0,b.width=0,b.height=0;var c=this.getVertexBounds(a);return null!=c&&(this.isHorizontal()?(b.width=c.height,b.height=c.width):(b.width=c.width,b.height=c.height)),b.offsetX=0,b.offsetY=0,b.contour=new Object,b},mxCompactTreeLayout.prototype.apply=function(a,b){var c=this.graph.getModel(),d=a.cell,e=c.getGeometry(d);if(null!=d&&null!=e){if(this.isVertexMovable(d)&&(e=this.setVertexLocation(d,a.x,a.y),this.resizeParent)){var f=c.getParent(d),g=mxCellPath.create(f);null==this.parentsChanged[g]&&(this.parentsChanged[g]=f)}b=null==b?new mxRectangle(e.x,e.y,e.width,e.height):new mxRectangle(Math.min(b.x,e.x),Math.min(b.y,e.y),Math.max(b.x+b.width,e.x+e.width),Math.max(b.y+b.height,e.y+e.height))}return b},mxCompactTreeLayout.prototype.createLine=function(a,b,c){var d=new Object;return d.dx=a,d.dy=b,d.next=c,d},mxCompactTreeLayout.prototype.adjustParents=function(){var a=[];for(var b in this.parentsChanged)a.push(this.parentsChanged[b]);this.arrangeGroups(mxUtils.sortCells(a,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(a){this.processNodeOutgoing(a);for(var b=a.child;null!=b;)this.localEdgeProcessing(b),b=b.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(a){for(var b=a.child,c=a.cell,d=0,e=[];null!=b;){d++;var f=b.x;this.horizontal&&(f=b.y),e.push(new WeightedCellSorter(b,f)),b=b.next}e.sort(WeightedCellSorter.prototype.compare);var g=a.width,h=(d+1)*this.prefHozEdgeSep;g>h+2*this.prefHozEdgeSep&&(g-=2*this.prefHozEdgeSep);var i=g/d,j=i/2;g>h+2*this.prefHozEdgeSep&&(j+=this.prefHozEdgeSep);var k=this.minEdgeJetty-this.prefVertEdgeOff,l=0,m=this.getVertexBounds(c);b=a.child;for(var n=0;n<e.length;n++){for(var o=e[n].cell.cell,p=this.getVertexBounds(o),q=this.graph.getEdgesBetween(c,o,!1),r=[],s=0,t=0,u=0;u<q.length;u++)this.horizontal?(s=m.x+m.width,t=m.y+j,r.push(new mxPoint(s,t)),s=m.x+m.width+k,r.push(new mxPoint(s,t)),t=p.y+p.height/2,r.push(new mxPoint(s,t)),this.setEdgePoints(q[u],r)):(s=m.x+j,t=m.y+m.height,r.push(new mxPoint(s,t)),t=m.y+m.height+k,r.push(new mxPoint(s,t)),s=p.x+p.width/2,r.push(new mxPoint(s,t)),this.setEdgePoints(q[u],r));n<d/2?k+=this.prefVertEdgeOff:n>d/2&&(k-=this.prefVertEdgeOff),j+=i,l=Math.max(l,k)}},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(a,b){return null!=a&&null!=b?b.weightedValue>a.weightedValue?1:b.weightedValue<a.weightedValue?-1:b.nudge?1:-1:0},mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(a){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(a).length},mxRadialTreeLayout.prototype.execute=function(a,b){this.parent=a,this.useBoundingBox=!1,this.edgeRouting=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var c=null,d=this.getVertexBounds(this.root);this.centerX=d.x+d.width/2,this.centerY=d.y+d.height/2;for(var e in this.visited){var f=this.getVertexBounds(this.visited[e]);c=null!=c?c:f.clone(),c.add(f)}this.calcRowDims([this.node],0);for(var g=0,h=0,i=0;i<this.row.length;i++){var j=(this.centerX-this.rowMinX[i]-this.nodeDistance)/this.rowRadi[i],k=(this.rowMaxX[i]-this.centerX-this.nodeDistance)/this.rowRadi[i];g=Math.max(g,j),h=Math.max(h,k)}for(var i=0;i<this.row.length;i++)for(var l=this.centerX-this.nodeDistance-g*this.rowRadi[i],m=this.centerX+this.nodeDistance+h*this.rowRadi[i],n=m-l,o=0;o<this.row[i].length;o++){var p=this.row[i],q=p[o],f=this.getVertexBounds(q.cell),r=(f.x+f.width/2-l)/n,s=2*Math.PI*r;q.theta=s}for(var i=this.row.length-2;i>=0;i--)for(var p=this.row[i],o=0;o<p.length;o++){for(var q=p[o],t=q.child,u=0,v=0;null!=t;)v+=t.theta,u++,t=t.next;if(u>0){var w=v/u;if(w>q.theta&&o<p.length-1){var x=p[o+1].theta;q.theta=Math.min(w,x-Math.PI/10)}else if(w<q.theta&&o>0){var y=p[o-1].theta;q.theta=Math.max(w,y+Math.PI/10)}}}for(var i=0;i<this.row.length;i++)for(var o=0;o<this.row[i].length;o++){var p=this.row[i],q=p[o],f=this.getVertexBounds(q.cell);this.setVertexLocation(q.cell,this.centerX-f.width/2+this.rowRadi[i]*Math.cos(q.theta),this.centerY-f.height/2+this.rowRadi[i]*Math.sin(q.theta))}},mxRadialTreeLayout.prototype.calcRowDims=function(a,b){if(null!=a&&0!=a.length){this.rowMinX[b]=this.centerX,this.rowMaxX[b]=this.centerX,this.rowMinCenX[b]=this.centerX,this.rowMaxCenX[b]=this.centerX,this.row[b]=[];for(var c=!1,d=0;d<a.length;d++)for(var e=null!=a[d]?a[d].child:null;null!=e;){var f=e.cell;vertexBounds=this.getVertexBounds(f),this.rowMinX[b]=Math.min(vertexBounds.x,this.rowMinX[b]),this.rowMaxX[b]=Math.max(vertexBounds.x+vertexBounds.width,this.rowMaxX[b]),this.rowMinCenX[b]=Math.min(vertexBounds.x+vertexBounds.width/2,this.rowMinCenX[b]),this.rowMaxCenX[b]=Math.max(vertexBounds.x+vertexBounds.width/2,this.rowMaxCenX[b]),this.rowRadi[b]=vertexBounds.y-this.getVertexBounds(this.root).y,null!=e.child&&(c=!0),this.row[b].push(e),e=e.next}c&&this.calcRowDims(this.row[b],b+1)}},mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.vertexArray,mxFastOrganicLayout.prototype.dispX,mxFastOrganicLayout.prototype.dispY,mxFastOrganicLayout.prototype.cellLocation,mxFastOrganicLayout.prototype.radius,mxFastOrganicLayout.prototype.radiusSquared,mxFastOrganicLayout.prototype.isMoveable,mxFastOrganicLayout.prototype.neighbours,mxFastOrganicLayout.prototype.indices,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(a){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(a).length},mxFastOrganicLayout.prototype.execute=function(a){var b=this.graph.getModel();this.vertexArray=[];for(var c=this.graph.getChildVertices(a),d=0;d<c.length;d++)this.isVertexIgnored(c[d])||this.vertexArray.push(c[d]);var e=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,f=this.vertexArray.length;this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant;for(var d=0;d<this.vertexArray.length;d++){var g=this.vertexArray[d];this.cellLocation[d]=[];var h=mxObjectIdentity.get(g);this.indices[h]=d;var i=this.getVertexBounds(g),j=i.width,k=i.height,l=i.x,m=i.y;this.cellLocation[d][0]=l+j/2,this.cellLocation[d][1]=m+k/2,this.radius[d]=Math.min(j,k),this.radiusSquared[d]=this.radius[d]*this.radius[d]}b.beginUpdate();try{for(var d=0;d<f;d++){this.dispX[d]=0,this.dispY[d]=0,this.isMoveable[d]=this.isVertexMovable(this.vertexArray[d]);var n=this.graph.getConnections(this.vertexArray[d],a),c=this.graph.getOpposites(n,this.vertexArray[d]);this.neighbours[d]=[];for(var o=0;o<c.length;o++){this.resetEdges&&this.graph.resetEdge(n[o]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(n[o],!1);var h=mxObjectIdentity.get(c[o]),p=this.indices[h];null!=p?this.neighbours[d][o]=p:this.neighbours[d][o]=d}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(f)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(var q=null,r=null,d=0;d<this.vertexArray.length;d++){var g=this.vertexArray[d];if(this.isVertexMovable(g)){var i=this.getVertexBounds(g);if(null!=i){this.cellLocation[d][0]-=i.width/2,this.cellLocation[d][1]-=i.height/2;var l=this.graph.snap(this.cellLocation[d][0]),m=this.graph.snap(this.cellLocation[d][1]);this.setVertexLocation(g,l,m),q=null==q?l:Math.min(q,l),r=null==r?m:Math.min(r,m)}}}var s=-(q||0)+1,t=-(r||0)+1;null!=e&&(s+=e.x,t+=e.y),this.graph.moveCells(this.vertexArray,s,t)}finally{b.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var a=0;a<this.vertexArray.length;a++)if(this.isMoveable[a]){var b=Math.sqrt(this.dispX[a]*this.dispX[a]+this.dispY[a]*this.dispY[a]);b<.001&&(b=.001);var c=this.dispX[a]/b*Math.min(b,this.temperature),d=this.dispY[a]/b*Math.min(b,this.temperature);this.dispX[a]=0,this.dispY[a]=0,this.cellLocation[a][0]+=c,this.cellLocation[a][1]+=d}},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var a=0;a<this.vertexArray.length;a++)for(var b=0;b<this.neighbours[a].length;b++){var c=this.neighbours[a][b];if(a!=c&&this.isMoveable[a]&&this.isMoveable[c]){var d=this.cellLocation[a][0]-this.cellLocation[c][0],e=this.cellLocation[a][1]-this.cellLocation[c][1],f=d*d+e*e-this.radiusSquared[a]-this.radiusSquared[c];f<this.minDistanceLimitSquared&&(f=this.minDistanceLimitSquared);var g=Math.sqrt(f),h=f/this.forceConstant,i=d/g*h,j=e/g*h;this.dispX[a]-=i,this.dispY[a]-=j,this.dispX[c]+=i,this.dispY[c]+=j}}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var a=this.vertexArray.length,b=0;b<a;b++)for(var c=b;c<a;c++){if(!this.allowedToRun)return;if(c!=b&&this.isMoveable[b]&&this.isMoveable[c]){var d=this.cellLocation[b][0]-this.cellLocation[c][0],e=this.cellLocation[b][1]-this.cellLocation[c][1];0==d&&(d=.01+Math.random()),0==e&&(e=.01+Math.random());var f=Math.sqrt(d*d+e*e),g=f-this.radius[b]-this.radius[c];if(g>this.maxDistanceLimit)continue;g<this.minDistanceLimit&&(g=this.minDistanceLimit);var h=this.forceConstantSquared/g,i=d/f*h,j=e/f*h;this.dispX[b]+=i,this.dispY[b]+=j,this.dispX[c]-=i,this.dispY[c]-=j}}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(a){var b=this.graph.getModel();b.beginUpdate();try{for(var c=0,d=null,e=null,f=[],g=b.getChildCount(a),h=0;h<g;h++){var i=b.getChildAt(a,h);if(this.isVertexIgnored(i))this.isEdgeIgnored(i)||(this.resetEdges&&this.graph.resetEdge(i),this.disableEdgeStyle&&this.setEdgeStyleEnabled(i,!1));else{f.push(i);var j=this.getVertexBounds(i);d=null==d?j.y:Math.min(d,j.y),e=null==e?j.x:Math.min(e,j.x),c=Math.max(c,Math.max(j.width,j.height))}}var k=this.getRadius(f.length,c);this.moveCircle&&(e=this.x0,d=this.y0),this.circle(f,k,e,d)}finally{b.endUpdate()}},mxCircleLayout.prototype.getRadius=function(a,b){return Math.max(a*b/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(a,b,c,d){for(var e=a.length,f=2*Math.PI/e,g=0;g<e;g++)this.isVertexMovable(a[g])&&this.setVertexLocation(a[g],c+b+b*Math.sin(g*f),d+b+b*Math.cos(g*f))},mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.execute=function(a){var b=this.findParallels(a);this.graph.model.beginUpdate();try{for(var c in b){var d=b[c];d.length>1&&this.layout(d)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(a){for(var b=this.graph.getModel(),c=[],d=b.getChildCount(a),e=0;e<d;e++){var f=b.getChildAt(a,e);if(!this.isEdgeIgnored(f)){var g=this.getEdgeId(f);null!=g&&(null==c[g]&&(c[g]=[]),c[g].push(f))}}return c},mxParallelEdgeLayout.prototype.getEdgeId=function(a){var b=this.graph.getView(),c=b.getVisibleTerminal(a,!0),d=b.getVisibleTerminal(a,!1);return null!=c&&null!=d?(c=mxObjectIdentity.get(c),d=mxObjectIdentity.get(d),c>d?d+"-"+c:c+"-"+d):null},mxParallelEdgeLayout.prototype.layout=function(a){var b=a[0],c=this.graph.getView(),d=this.graph.getModel(),e=d.getGeometry(c.getVisibleTerminal(b,!0)),f=d.getGeometry(c.getVisibleTerminal(b,!1));if(e==f)for(var g=e.x+e.width+this.spacing,h=e.y+e.height/2,i=0;i<a.length;i++)this.route(a[i],g,h),g+=this.spacing;else if(null!=e&&null!=f){var j=e.x+e.width/2,k=e.y+e.height/2,l=f.x+f.width/2,m=f.y+f.height/2,n=l-j,o=m-k,p=Math.sqrt(n*n+o*o);if(p>0){var g=j+n/2,h=k+o/2,q=o*this.spacing/p,r=n*this.spacing/p;g+=q*(a.length-1)/2,h-=r*(a.length-1)/2;for(var i=0;i<a.length;i++)this.route(a[i],g,h),g-=q,h+=r}}},mxParallelEdgeLayout.prototype.route=function(a,b,c){this.graph.isCellMovable(a)&&this.setEdgePoints(a,[new mxPoint(b,c)])},mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(a,b,c){null!=this.master?this.master.move.apply(this.master,arguments):this.layouts[0].move.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(a){var b=this.graph.getModel();b.beginUpdate();try{for(var c=0;c<this.layouts.length;c++)this.layouts[c].execute.apply(this.layouts[c],arguments)}finally{b.endUpdate()}},mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(a){for(var b=this.graph.view,c=this.graph.getModel(),d=[],e=[],f=c.getChildCount(a),g=0;g<f;g++){var h=c.getChildAt(a,g),i=b.getState(h);null!=i&&(this.isVertexIgnored(h)?this.isEdgeIgnored(h)||d.push(i):e.push(i))}this.placeLabels(e,d)},mxEdgeLabelLayout.prototype.placeLabels=function(a,b){var c=this.graph.getModel();c.beginUpdate();try{for(var d=0;d<b.length;d++){var e=b[d];if(null!=e&&null!=e.text&&null!=e.text.boundingBox)for(var f=0;f<a.length;f++){var g=a[f];null!=g&&this.avoid(e,g)}}}finally{c.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(a,b){var c=this.graph.getModel(),d=a.text.boundingBox;if(mxUtils.intersects(d,b)){var e=-d.y-d.height+b.y,f=-d.y+b.y+b.height,g=Math.abs(e)<Math.abs(f)?e:f,h=-d.x-d.width+b.x,i=-d.x+b.x+b.width,j=Math.abs(h)<Math.abs(i)?h:i;
  Math.abs(j)<Math.abs(g)?g=0:j=0;var k=c.getGeometry(a.cell);null!=k&&(k=k.clone(),null!=k.offset?(k.offset.x+=j,k.offset.y+=g):k.offset=new mxPoint(j,g),c.setGeometry(a.cell,k))}},mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(a){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(a){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(a){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(a,b){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(a,b){this.isVertex()?this.x[0]=b:this.isEdge()&&(this.x[a-this.minRank-1]=b)},mxGraphAbstractHierarchyCell.prototype.getX=function(a){return this.isVertex()?this.x[0]:this.isEdge()?this.x[a-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(a,b){this.isVertex()?this.y[0]=b:this.isEdge()&&(this.y[a-this.minRank-1]=b)},mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(a){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(a){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var b=0;b<this.connectsAsTarget.length;b++){var c=this.connectsAsTarget[b];c.maxRank==-1||c.maxRank==a+1?this.nextLayerConnectedCells[0].push(c.source):this.nextLayerConnectedCells[0].push(c)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(a){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var b=0;b<this.connectsAsSource.length;b++){var c=this.connectsAsSource[b];c.minRank==-1||c.minRank==a-1?this.previousLayerConnectedCells[0].push(c.target):this.previousLayerConnectedCells[0].push(c)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(a){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(a,b){this.temp[0]=b},mxGraphHierarchyNode.prototype.isAncestor=function(a){if(null!=a&&null!=this.hashCode&&null!=a.hashCode&&this.hashCode.length<a.hashCode.length){if(this.hashCode==a.hashCode)return!0;if(null==this.hashCode||null==this.hashCode)return!1;for(var b=0;b<this.hashCode.length;b++)if(this.hashCode[b]!=a.hashCode[b])return!1;return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(a){var b=this.source;this.source=this.target,this.target=b,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(a){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var b=0;b<this.temp.length;b++)this.nextLayerConnectedCells[b]=[],b==this.temp.length-1?this.nextLayerConnectedCells[b].push(this.source):this.nextLayerConnectedCells[b].push(this)}return this.nextLayerConnectedCells[a-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(a){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var b=0;b<this.temp.length;b++)this.previousLayerConnectedCells[b]=[],0==b?this.previousLayerConnectedCells[b].push(this.target):this.previousLayerConnectedCells[b].push(this)}return this.previousLayerConnectedCells[a-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(a){return this.temp[a-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(a,b){this.temp[a-this.minRank-1]=b},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&this.edges.length>0?this.edges[0]:null},mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(a,b,c){for(var d=a.getGraph(),e=0;e<b.length;e++){c[e]=new mxGraphHierarchyNode(b[e]),this.vertexMapper.put(b[e],c[e]);var f=a.getEdges(b[e]);c[e].connectsAsSource=[];for(var g=0;g<f.length;g++){var h=a.getVisibleTerminal(f[g],!1);if(h!=b[e]&&a.graph.model.isVertex(h)&&!a.isVertexIgnored(h)){var i=a.getEdgesBetween(b[e],h,!1),j=a.getEdgesBetween(b[e],h,!0);if(null!=i&&i.length>0&&null==this.edgeMapper.get(i[0])&&2*j.length>=i.length){for(var k=new mxGraphHierarchyEdge(i),l=0;l<i.length;l++){var m=i[l];this.edgeMapper.put(m,k),d.resetEdge(m),a.disableEdgeStyle&&(a.setEdgeStyleEnabled(m,!1),a.setOrthogonalEdge(m,!0))}k.source=c[e],mxUtils.indexOf(c[e].connectsAsSource,k)<0&&c[e].connectsAsSource.push(k)}}}c[e].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var a=[];if(null!=this.roots)for(var b=0;b<this.roots.length;b++){var c=this.vertexMapper.get(this.roots[b]);null!=c&&a.push(c)}for(var d=this.vertexMapper.getValues(),b=0;b<d.length;b++)d[b].temp[0]=-1;for(var e=a.slice();a.length>0;){var f,g,c=a[0];f=c.connectsAsTarget,g=c.connectsAsSource;for(var h=!0,i=this.SOURCESCANSTARTRANK,b=0;b<f.length;b++){var j=f[b];if(5270620!=j.temp[0]){h=!1;break}var k=j.source;i=Math.min(i,k.temp[0]-1)}if(h){if(c.temp[0]=i,this.maxRank=Math.min(this.maxRank,i),null!=g)for(var b=0;b<g.length;b++){var j=g[b];j.temp[0]=5270620;var k=j.target;k.temp[0]==-1&&(a.push(k),k.temp[0]=-2)}a.shift()}else{var l=a.shift();if(a.push(c),l==c&&1==a.length)break}}for(var b=0;b<d.length;b++)d[b].temp[0]-=this.maxRank;for(var b=0;b<e.length;b++)for(var c=e[b],m=0,f=c.connectsAsSource,n=0;n<f.length;n++){var j=f[n],k=j.target;c.temp[0]=Math.max(m,k.temp[0]+1),m=c.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var a=[];this.ranks=[];for(var b=0;b<this.maxRank+1;b++)a[b]=[],this.ranks[b]=a[b];var c=null;if(null!=this.roots){var d=this.roots;c=[];for(var b=0;b<d.length;b++){var e=d[b],f=this.vertexMapper.get(e);c[b]=f}}this.visit(function(b,c,d,e,f){if(0==f&&c.maxRank<0&&c.minRank<0&&(a[c.temp[0]].push(c),c.maxRank=c.temp[0],c.minRank=c.temp[0],c.temp[0]=a[c.maxRank].length-1),null!=b&&null!=d){var g=b.maxRank-c.maxRank;if(g>1){d.maxRank=b.maxRank,d.minRank=c.maxRank,d.temp=[],d.x=[],d.y=[];for(var h=d.minRank+1;h<d.maxRank;h++)a[h].push(d),d.setGeneralPurposeVariable(h,a[h].length-1)}}},c,!1,null)},mxGraphHierarchyModel.prototype.visit=function(a,b,c,d){if(null!=b){for(var e=0;e<b.length;e++){var f=b[e];null!=f&&(null==d&&(d=new Object),c?(f.hashCode=[],f.hashCode[0]=this.dfsCount,f.hashCode[1]=e,this.extendedDfs(null,f,null,a,d,f.hashCode,e,0)):this.dfs(null,f,null,a,d,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(a,b,c,d,e,f){if(null!=b){var g=b.id;if(null==e[g]){e[g]=b,d(a,b,c,f,0);for(var h=b.connectsAsSource.slice(),i=0;i<h.length;i++){var j=h[i],k=j.target;this.dfs(b,k,j,d,e,f+1)}}else d(a,b,c,f,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(a,b,c,d,e,f,g,h){if(null!=b){if(null!=a&&(null==b.hashCode||b.hashCode[0]!=a.hashCode[0])){var i=a.hashCode.length+1;b.hashCode=a.hashCode.slice(),b.hashCode[i-1]=g}var j=b.id;if(null==e[j]){e[j]=b,d(a,b,c,h,0);for(var k=b.connectsAsSource.slice(),l=0;l<k.length;l++){var m=k[l],n=m.target;this.extendedDfs(b,n,m,d,e,b.hashCode,l,h+1)}}else d(a,b,c,h,1)}},mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(a,b,c){for(var d=a.getGraph(),e=a.swimlanes,f=0;f<b.length;f++){c[f]=new mxGraphHierarchyNode(b[f]),this.vertexMapper.put(b[f],c[f]),c[f].swimlaneIndex=-1;for(var g=0;g<e.length;g++)if(d.model.getParent(b[f])==e[g]){c[f].swimlaneIndex=g;break}var h=a.getEdges(b[f]);c[f].connectsAsSource=[];for(var i=0;i<h.length;i++){var j=a.getVisibleTerminal(h[i],!1);if(j!=b[f]&&a.graph.model.isVertex(j)&&!a.isVertexIgnored(j)){var k=a.getEdgesBetween(b[f],j,!1),l=a.getEdgesBetween(b[f],j,!0);if(null!=k&&k.length>0&&null==this.edgeMapper.get(k[0])&&2*l.length>=k.length){for(var m=new mxGraphHierarchyEdge(k),n=0;n<k.length;n++){var o=k[n];this.edgeMapper.put(o,m),d.resetEdge(o),a.disableEdgeStyle&&(a.setEdgeStyleEnabled(o,!1),a.setOrthogonalEdge(o,!0))}m.source=c[f],mxUtils.indexOf(c[f].connectsAsSource,m)<0&&c[f].connectsAsSource.push(m)}}}c[f].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var a=[],b=new Object;if(null!=this.roots)for(var c=0;c<this.roots.length;c++){var d=this.vertexMapper.get(this.roots[c]);this.maxChainDfs(null,d,null,b,0),null!=d&&a.push(d)}for(var e=[],f=[],c=this.ranksPerGroup.length-1;c>=0;c--)c==this.ranksPerGroup.length-1?e[c]=0:e[c]=f[c+1]+1,f[c]=e[c]+this.ranksPerGroup[c];this.maxRank=f[0];for(var g=this.vertexMapper.getValues(),c=0;c<g.length;c++)g[c].temp[0]=-1;for(a.slice();a.length>0;){var i,j,d=a[0];i=d.connectsAsTarget,j=d.connectsAsSource;for(var k=!0,l=f[0],c=0;c<i.length;c++){var m=i[c];if(5270620!=m.temp[0]){k=!1;break}var n=m.source;l=Math.min(l,n.temp[0]-1)}if(k){if(l>f[d.swimlaneIndex]&&(l=f[d.swimlaneIndex]),d.temp[0]=l,null!=j)for(var c=0;c<j.length;c++){var m=j[c];m.temp[0]=5270620;var n=m.target;n.temp[0]==-1&&(a.push(n),n.temp[0]=-2)}a.shift()}else{var o=a.shift();if(a.push(d),o==d&&1==a.length)break}}},mxSwimlaneModel.prototype.maxChainDfs=function(a,b,c,d,e){if(null!=b){var f=mxCellPath.create(b.cell);if(null==d[f]){d[f]=b;var g=b.swimlaneIndex;(null==this.ranksPerGroup[g]||this.ranksPerGroup[g]<e)&&(this.ranksPerGroup[g]=e);for(var h=b.connectsAsSource.slice(),i=0;i<h.length;i++){var j=h[i],k=j.target;b.swimlaneIndex<k.swimlaneIndex?this.maxChainDfs(b,k,j,mxUtils.clone(d,null,!0),0):b.swimlaneIndex==k.swimlaneIndex&&this.maxChainDfs(b,k,j,mxUtils.clone(d,null,!0),e+1)}}}},mxSwimlaneModel.prototype.fixRanks=function(){var a=[];this.ranks=[];for(var b=0;b<this.maxRank+1;b++)a[b]=[],this.ranks[b]=a[b];var c=null;if(null!=this.roots){var d=this.roots;c=[];for(var b=0;b<d.length;b++){var e=d[b],f=this.vertexMapper.get(e);c[b]=f}}this.visit(function(b,c,d,e,f){if(0==f&&c.maxRank<0&&c.minRank<0&&(a[c.temp[0]].push(c),c.maxRank=c.temp[0],c.minRank=c.temp[0],c.temp[0]=a[c.maxRank].length-1),null!=b&&null!=d){var g=b.maxRank-c.maxRank;if(g>1){d.maxRank=b.maxRank,d.minRank=c.maxRank,d.temp=[],d.x=[],d.y=[];for(var h=d.minRank+1;h<d.maxRank;h++)a[h].push(d),d.setGeneralPurposeVariable(h,a[h].length-1)}}},c,!1,null)},mxSwimlaneModel.prototype.visit=function(a,b,c,d){if(null!=b){for(var e=0;e<b.length;e++){var f=b[e];null!=f&&(null==d&&(d=new Object),c?(f.hashCode=[],f.hashCode[0]=this.dfsCount,f.hashCode[1]=e,this.extendedDfs(null,f,null,a,d,f.hashCode,e,0)):this.dfs(null,f,null,a,d,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(a,b,c,d,e,f){if(null!=b){var g=b.id;if(null==e[g]){e[g]=b,d(a,b,c,f,0);for(var h=b.connectsAsSource.slice(),i=0;i<h.length;i++){var j=h[i],k=j.target;this.dfs(b,k,j,d,e,f+1)}}else d(a,b,c,f,1)}},mxSwimlaneModel.prototype.extendedDfs=function(a,b,c,d,e,f,g,h){if(null!=b){if(null!=a&&(null==b.hashCode||b.hashCode[0]!=a.hashCode[0])){var i=a.hashCode.length+1;b.hashCode=a.hashCode.slice(),b.hashCode[i-1]=g}var j=b.id;if(null==e[j]){e[j]=b,d(a,b,c,h,0);for(var k=b.connectsAsSource.slice(),l=b.connectsAsTarget.slice(),m=0;m<k.length;m++){var n=k[m],o=n.target;b.swimlaneIndex<=o.swimlaneIndex&&this.extendedDfs(b,o,n,d,e,b.hashCode,m,h+1)}for(var m=0;m<l.length;m++){var n=l[m],o=n.source;b.swimlaneIndex<o.swimlaneIndex&&this.extendedDfs(b,o,n,d,e,b.hashCode,m,h+1)}}else d(a,b,c,h,1)}},mxHierarchicalLayoutStage.prototype.execute=function(a){},mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2;mxMedianHybridCrossingReduction.prototype.execute=function(a){var b=this.layout.getModel();this.nestedBestRanks=[];for(var c=0;c<b.ranks.length;c++)this.nestedBestRanks[c]=b.ranks[c].slice();for(var d=0,e=this.calculateCrossings(b),c=0;c<this.maxIterations&&d<this.maxNoImprovementIterations;c++){this.weightedMedian(c,b),this.transpose(c,b);var f=this.calculateCrossings(b);if(f<e){e=f,d=0;for(var g=0;g<this.nestedBestRanks.length;g++)for(var h=b.ranks[g],i=0;i<h.length;i++){var j=h[i];this.nestedBestRanks[g][j.getGeneralPurposeVariable(g)]=j}}else{d++;for(var g=0;g<this.nestedBestRanks.length;g++)for(var h=b.ranks[g],i=0;i<h.length;i++){var j=h[i];j.setGeneralPurposeVariable(g,i)}}if(0==e)break}for(var k=[],l=[],c=0;c<b.maxRank+1;c++)l[c]=[],k[c]=l[c];for(var c=0;c<this.nestedBestRanks.length;c++)for(var g=0;g<this.nestedBestRanks[c].length;g++)l[c].push(this.nestedBestRanks[c][g]);b.ranks=k};mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(a){for(var b=a.ranks.length,c=0,d=1;d<b;d++)c+=this.calculateRankCrossing(d,a);return c},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(a,b){for(var c=0,d=b.ranks[a],e=b.ranks[a-1],f=[],g=0;g<d.length;g++){for(var h=d[g],i=h.getGeneralPurposeVariable(a),j=h.getPreviousLayerConnectedCells(a),k=[],l=0;l<j.length;l++){var m=j[l],n=m.getGeneralPurposeVariable(a-1);k.push(n)}k.sort(function(a,b){return a-b}),f[i]=k}for(var o=[],g=0;g<f.length;g++)o=o.concat(f[g]);for(var p=1;p<e.length;)p<<=1;var q=2*p-1;p-=1;for(var r=[],g=0;g<q;++g)r[g]=0;for(var g=0;g<o.length;g++){var s=o[g],t=s+p;for(++r[t];t>0;)t%2&&(c+=r[t+1]),t=t-1>>1,++r[t]}return c},mxMedianHybridCrossingReduction.prototype.transpose=function(a,b){for(var c=!0,d=0,e=10;c&&d++<e;){var f=a%2==1&&d%2==1;c=!1;for(var g=0;g<b.ranks.length;g++){for(var h=b.ranks[g],i=[],j=0;j<h.length;j++){var k=h[j],l=k.getGeneralPurposeVariable(g);l<0&&(l=j),i[l]=k}for(var m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,j=0;j<h.length-1;j++){if(0==j){u=i[j],m=u.getNextLayerConnectedCells(g),n=u.getPreviousLayerConnectedCells(g),q=[],r=[];for(var w=0;w<m.length;w++)q[w]=m[w].getGeneralPurposeVariable(g+1);for(var w=0;w<n.length;w++)r[w]=n[w].getGeneralPurposeVariable(g-1)}else m=o,n=p,q=s,r=t,u=v;v=i[j+1],o=v.getNextLayerConnectedCells(g),p=v.getPreviousLayerConnectedCells(g),s=[],t=[];for(var w=0;w<o.length;w++)s[w]=o[w].getGeneralPurposeVariable(g+1);for(var w=0;w<p.length;w++)t[w]=p[w].getGeneralPurposeVariable(g-1);for(var x=0,y=0,w=0;w<q.length;w++)for(var z=0;z<s.length;z++)q[w]>s[z]&&x++,q[w]<s[z]&&y++;for(var w=0;w<r.length;w++)for(var z=0;z<t.length;z++)r[w]>t[z]&&x++,r[w]<t[z]&&y++;if(y<x||y==x&&f){var A=u.getGeneralPurposeVariable(g);u.setGeneralPurposeVariable(g,v.getGeneralPurposeVariable(g)),v.setGeneralPurposeVariable(g,A),o=m,p=n,s=q,t=r,v=u,f||(c=!0)}}}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(a,b){var c=a%2==0;if(c)for(var d=b.maxRank-1;d>=0;d--)this.medianRank(d,c);else for(var d=1;d<b.maxRank;d++)this.medianRank(d,c)},mxMedianHybridCrossingReduction.prototype.medianRank=function(a,b){for(var c=this.nestedBestRanks[a].length,d=[],e=[],f=0;f<c;f++){var g=this.nestedBestRanks[a][f],h=new MedianCellSorter;h.cell=g;var i;i=b?g.getNextLayerConnectedCells(a):g.getPreviousLayerConnectedCells(a);var j;j=b?a+1:a-1,null!=i&&0!=i.length?(h.medianValue=this.medianValue(i,j),d.push(h)):e[g.getGeneralPurposeVariable(a)]=!0}d.sort(MedianCellSorter.prototype.compare);for(var f=0;f<c;f++)if(null==e[f]){var g=d.shift().cell;g.setGeneralPurposeVariable(a,f)}},mxMedianHybridCrossingReduction.prototype.medianValue=function(a,b){for(var c=[],d=0,e=0;e<a.length;e++){var f=a[e];c[d++]=f.getGeneralPurposeVariable(b)}if(c.sort(function(a,b){return a-b}),d%2==1)return c[Math.floor(d/2)];if(2==d)return(c[0]+c[1])/2;var g=d/2,h=c[g-1]-c[0],i=c[d-1]-c[g];return(c[g-1]*i+c[g]*h)/(h+i)},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(a,b){return null!=a&&null!=b?b.medianValue>a.medianValue?-1:b.medianValue<a.medianValue?1:0:0},mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(a){for(var b=this.layout.getModel(),c=new Object,d=b.vertexMapper.getValues(),e=new Object,f=0;f<d.length;f++)e[d[f].id]=d[f];var g=null;if(null!=b.roots){var h=b.roots;g=[];for(var f=0;f<h.length;f++)g[f]=b.vertexMapper.get(h[f])}b.visit(function(a,b,d,f,g){b.isAncestor(a)&&(d.invert(),mxUtils.remove(d,a.connectsAsSource),a.connectsAsTarget.push(d),mxUtils.remove(d,b.connectsAsTarget),b.connectsAsSource.push(d)),c[b.id]=b,delete e[b.id]},g,!0,null);var i=mxUtils.clone(c,null,!0);b.visit(function(a,b,d,f,g){b.isAncestor(a)&&(d.invert(),mxUtils.remove(d,a.connectsAsSource),b.connectsAsSource.push(d),a.connectsAsTarget.push(d),mxUtils.remove(d,b.connectsAsTarget)),c[b.id]=b,delete e[b.id]},e,!0,i)},mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var a=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var b=0;b<a.ranks.length;b++){mxLog.write("Rank ",b," : ");for(var c=a.ranks[b],d=0;d<c.length;d++){var e=c[d];mxLog.write(e.getGeneralPurposeVariable(b),"  ")}mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(a){this.jettyPositions=Object();var b=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),b),this.fineTuning&&this.minNode(b);var c=1e8;if(this.fineTuning)for(var d=0;d<this.maxIterations;d++){if(0!=d&&(this.medianPos(d,b),this.minNode(b)),this.currentXDelta<c){for(var e=0;e<b.ranks.length;e++)for(var f=b.ranks[e],g=0;g<f.length;g++){var h=f[g];h.setX(e,h.getGeneralPurposeVariable(e))}c=this.currentXDelta}else for(var e=0;e<b.ranks.length;e++)for(var f=b.ranks[e],g=0;g<f.length;g++){var h=f[g];h.setGeneralPurposeVariable(e,h.getX(e))}this.minPath(this.layout.getGraph(),b),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),b)},mxCoordinateAssignment.prototype.minNode=function(a){for(var b=[],c=new mxDictionary,d=[],e=0;e<=a.maxRank;e++){d[e]=a.ranks[e];for(var f=0;f<d[e].length;f++){var g=d[e][f],h=new WeightedCellSorter(g,e);h.rankIndex=f,h.visited=!0,b.push(h),c.put(g,h)}}for(var i=10*b.length,j=0,k=1;b.length>0&&j<=i;){var l=b.shift(),m=l.cell,n=l.weightedValue,o=parseInt(l.rankIndex),p=m.getNextLayerConnectedCells(n),q=m.getPreviousLayerConnectedCells(n),r=p.length,s=q.length,t=this.medianXValue(p,n+1),u=this.medianXValue(q,n-1),v=r+s,w=m.getGeneralPurposeVariable(n),x=w;v>0&&(x=(t*r+u*s)/v);var y=!1;if(x<w-k)if(0==o)m.setGeneralPurposeVariable(n,x),y=!0;else{var z=d[n][o-1],A=z.getGeneralPurposeVariable(n);A=A+z.width/2+this.intraCellSpacing+m.width/2,A<x?(m.setGeneralPurposeVariable(n,x),y=!0):A<m.getGeneralPurposeVariable(n)-k&&(m.setGeneralPurposeVariable(n,A),y=!0)}else if(x>w+k){var B=d[n].length;if(o==B-1)m.setGeneralPurposeVariable(n,x),y=!0;else{var C=d[n][o+1],D=C.getGeneralPurposeVariable(n);D=D-C.width/2-this.intraCellSpacing-m.width/2,D>x?(m.setGeneralPurposeVariable(n,x),y=!0):D>m.getGeneralPurposeVariable(n)+k&&(m.setGeneralPurposeVariable(n,D),y=!0)}}if(y){for(var e=0;e<p.length;e++){var E=p[e],F=c.get(E);null!=F&&0==F.visited&&(F.visited=!0,b.push(F))}for(var e=0;e<q.length;e++){var E=q[e],F=c.get(E);null!=F&&0==F.visited&&(F.visited=!0,b.push(F))}}l.visited=!1,j++}},mxCoordinateAssignment.prototype.medianPos=function(a,b){var c=a%2==0;if(c)for(var d=b.maxRank;d>0;d--)this.rankMedianPosition(d-1,b,d);else for(var d=0;d<b.maxRank-1;d++)this.rankMedianPosition(d+1,b,d)},mxCoordinateAssignment.prototype.rankMedianPosition=function(a,b,c){for(var d=b.ranks[a],e=[],f=new Object,g=0;g<d.length;g++){var h=d[g];e[g]=new WeightedCellSorter,e[g].cell=h,e[g].rankIndex=g,f[h.id]=e[g];var i=null;i=c<a?h.getPreviousLayerConnectedCells(a):h.getNextLayerConnectedCells(a),e[g].weightedValue=this.calculatedWeightedValue(h,i)}e.sort(WeightedCellSorter.prototype.compare);for(var g=0;g<e.length;g++){var j=0,k=e[g].cell,i=null,l=0;i=c<a?k.getPreviousLayerConnectedCells(a).slice():k.getNextLayerConnectedCells(a).slice(),null!=i&&(j=i.length,l=j>0?this.medianXValue(i,c):k.getGeneralPurposeVariable(a));for(var m=0,n=-1e8,o=e[g].rankIndex-1;o>=0;){var p=f[d[o].id];if(null!=p){var q=p.cell;p.visited?(n=q.getGeneralPurposeVariable(a)+q.width/2+this.intraCellSpacing+m+k.width/2,o=-1):(m+=q.width+this.intraCellSpacing,o--)}}for(var r=0,s=1e8,o=e[g].rankIndex+1;o<e.length;){var p=f[d[o].id];if(null!=p){var t=p.cell;p.visited?(s=t.getGeneralPurposeVariable(a)-t.width/2-this.intraCellSpacing-r-k.width/2,o=e.length):(r+=t.width+this.intraCellSpacing,o++)}}l>=n&&l<=s?k.setGeneralPurposeVariable(a,l):l<n?(k.setGeneralPurposeVariable(a,n),this.currentXDelta+=n-l):l>s&&(k.setGeneralPurposeVariable(a,s),this.currentXDelta+=l-s),e[g].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(a,b){for(var c=0,d=0;d<b.length;d++){var e=b[d];a.isVertex()&&e.isVertex()?c++:c+=a.isEdge()&&e.isEdge()?8:2}return c},mxCoordinateAssignment.prototype.medianXValue=function(a,b){if(0==a.length)return 0;for(var c=[],d=0;d<a.length;d++)c[d]=a[d].getGeneralPurposeVariable(b);if(c.sort(function(a,b){return a-b}),a.length%2==1)return c[Math.floor(a.length/2)];var e=a.length/2,f=c[e-1],g=c[e];return(f+g)/2},mxCoordinateAssignment.prototype.initialCoords=function(a,b){this.calculateWidestRank(a,b);for(var c=this.widestRank;c>=0;c--)c<b.maxRank&&this.rankCoordinates(c,a,b);for(var c=this.widestRank+1;c<=b.maxRank;c++)c>0&&this.rankCoordinates(c,a,b)},mxCoordinateAssignment.prototype.rankCoordinates=function(a,b,c){for(var d=c.ranks[a],e=0,f=this.initialX+(this.widestRankValue-this.rankWidths[a])/2,g=!1,h=0;h<d.length;h++){var i=d[h];if(i.isVertex()){var j=this.layout.getVertexBounds(i.cell);null!=j?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(i.width=j.width,i.height=j.height):(i.width=j.height,i.height=j.width):g=!0,e=Math.max(e,i.height)}else if(i.isEdge()){var k=1;null!=i.edges?k=i.edges.length:mxLog.warn("edge.edges is null"),i.width=(k-1)*this.parallelEdgeSpacing}f+=i.width/2,i.setX(a,f),i.setGeneralPurposeVariable(a,f),f+=i.width/2,f+=this.intraCellSpacing}1==g&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(a,b){var c=-this.interRankCellSpacing,d=0;this.rankWidths=[],this.rankY=[];for(var e=b.maxRank;e>=0;e--){for(var f=0,g=b.ranks[e],h=this.initialX,i=!1,j=0;j<g.length;j++){var k=g[j];if(k.isVertex()){var l=this.layout.getVertexBounds(k.cell);null!=l?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(k.width=l.width,k.height=l.height):(k.width=l.height,k.height=l.width):i=!0,f=Math.max(f,k.height)}else if(k.isEdge()){var m=1;null!=k.edges?m=k.edges.length:mxLog.warn("edge.edges is null"),k.width=(m-1)*this.parallelEdgeSpacing}h+=k.width/2,k.setX(e,h),k.setGeneralPurposeVariable(e,h),h+=k.width/2,h+=this.intraCellSpacing,h>this.widestRankValue&&(this.widestRankValue=h,this.widestRank=e),this.rankWidths[e]=h}1==i&&mxLog.warn("At least one cell has no bounds"),this.rankY[e]=c;var n=f/2+d/2+this.interRankCellSpacing;d=f,this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?c+=n:c-=n;for(var j=0;j<g.length;j++){var o=g[j];o.setY(e,c)}}},mxCoordinateAssignment.prototype.minPath=function(a,b){for(var c=b.edgeMapper.getValues(),d=0;d<c.length;d++){var e=c[d];if(!(e.maxRank-e.minRank-1<1)){for(var f=e.getGeneralPurposeVariable(e.minRank+1),g=!0,h=0,i=e.minRank+2;i<e.maxRank;i++){var j=e.getGeneralPurposeVariable(i);f!=j?(g=!1,f=j):h++}if(!g){for(var k=0,l=0,m=[],n=[],o=e.getGeneralPurposeVariable(e.minRank+1),i=e.minRank+1;i<e.maxRank-1;i++){var p=e.getX(i+1);o==p?(m[i-e.minRank-1]=o,k++):this.repositionValid(b,e,i+1,o)?(m[i-e.minRank-1]=o,k++):(m[i-e.minRank-1]=p,o=p)}o=e.getX(i);for(var i=e.maxRank-1;i>e.minRank+1;i--){var p=e.getX(i-1);o==p?(n[i-e.minRank-2]=o,l++):this.repositionValid(b,e,i-1,o)?(n[i-e.minRank-2]=o,l++):(n[i-e.minRank-2]=e.getX(i-1),o=p)}if(l>h||k>h)if(l>=k)for(var i=e.maxRank-2;i>e.minRank;i--)e.setX(i,n[i-e.minRank-1]);else if(k>l)for(var i=e.minRank+2;i<e.maxRank;i++)e.setX(i,m[i-e.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(a,b,c,d){for(var e=a.ranks[c],f=-1,g=0;g<e.length;g++)if(b==e[g]){f=g;break}if(f<0)return!1;var h=b.getGeneralPurposeVariable(c);if(d<h){if(0==f)return!0;var i=e[f-1],j=i.getGeneralPurposeVariable(c);return j=j+i.width/2+this.intraCellSpacing+b.width/2,j<=d}if(d>h){if(f==e.length-1)return!0;var k=e[f+1],l=k.getGeneralPurposeVariable(c);return l=l-k.width/2-this.intraCellSpacing-b.width/2,l>=d}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(a,b){this.rankTopY=[],this.rankBottomY=[];for(var c=0;c<b.ranks.length;c++)this.rankTopY[c]=Number.MAX_VALUE,this.rankBottomY[c]=-Number.MAX_VALUE;for(var d=b.vertexMapper.getValues(),c=0;c<d.length;c++)this.setVertexLocation(d[c]);this.layout.edgeStyle!=mxHierarchicalEdgeStyle.ORTHOGONAL&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.POLYLINE&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.CURVE||this.localEdgeProcessing(b);for(var e=b.edgeMapper.getValues(),c=0;c<e.length;c++)this.setEdgePosition(e[c])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(a){for(var b=0;b<a.ranks.length;b++)for(var c=a.ranks[b],d=0;d<c.length;d++){var e=c[d];if(e.isVertex())for(var f=e.getPreviousLayerConnectedCells(b),g=b-1,h=0;h<2;h++){if(g>-1&&g<a.ranks.length&&null!=f&&f.length>0){for(var i=[],j=0;j<f.length;j++){var k=new WeightedCellSorter(f[j],f[j].getX(g));i.push(k)}i.sort(WeightedCellSorter.prototype.compare);for(var l=e.x[0]-e.width/2,m=l+e.width,n=0,o=0,p=[],j=0;j<i.length;j++){var r,q=i[j].cell;if(q.isVertex()){r=0==h?e.connectsAsSource:e.connectsAsTarget;for(var s=0;s<r.length;s++)r[s].source!=q&&r[s].target!=q||(n+=r[s].edges.length,o++,p.push(r[s]))}else n+=q.edges.length,o++,p.push(q)}var t=(n+1)*this.prefHozEdgeSep;e.width>t+2*this.prefHozEdgeSep&&(l+=this.prefHozEdgeSep,m-=this.prefHozEdgeSep);for(var u=m-l,v=u/n,w=l+v/2,x=this.minEdgeJetty-this.prefVertEdgeOff,y=0,j=0;j<p.length;j++){var z=p[j].edges.length,A=this.jettyPositions[p[j].ids[0]];null==A&&(A=[],this.jettyPositions[p[j].ids[0]]=A),j<n/2?x+=this.prefVertEdgeOff:j>n/2&&(x-=this.prefVertEdgeOff);for(var B=0;B<z;B++)A[4*B+2*h]=w,w+=v,A[4*B+2*h+1]=x;y=Math.max(y,x)}}f=e.getNextLayerConnectedCells(b),g=b+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(a){var b=0;if(101207!=a.temp[0]){var c=a.maxRank,d=a.minRank;c==d&&(c=a.source.maxRank,d=a.target.minRank);for(var e=0,f=this.jettyPositions[a.ids[0]],g=a.isReversed?a.target.cell:a.source.cell,h=this.layout.graph,i=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,j=0;j<a.edges.length;j++){var k=a.edges[j],l=this.layout.getVisibleTerminal(k,!0),m=[],n=a.isReversed;if(l!=g&&(n=!n),null!=f){var o=n?2:0,p=n?i?this.rankBottomY[d]:this.rankTopY[d]:i?this.rankTopY[c]:this.rankBottomY[c],q=f[4*e+1+o];n!=i&&(q=-q),p+=q;var r=f[4*e+o],s=h.model.getTerminal(k,!0);if(this.layout.isPort(s)&&h.model.getParent(s)==l){var t=h.view.getState(s);r=null!=t?t.x:l.geometry.x+a.source.width*s.geometry.x}this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(m.push(new mxPoint(r,p)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&m.push(new mxPoint(r,p+q))):(m.push(new mxPoint(p,r)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&m.push(new mxPoint(p+q,r)))}var u=a.x.length-1,v=-1,w=-1,x=a.maxRank-1;n&&(u=0,v=a.x.length,w=1,x=a.minRank+1);for(var y=u;a.maxRank!=a.minRank&&y!=v;y+=w){var z=a.x[y]+b,A=(this.rankTopY[x]+this.rankBottomY[x+1])/2,B=(this.rankTopY[x-1]+this.rankBottomY[x])/2;if(n){var C=A;A=B,B=C}this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(m.push(new mxPoint(z,A)),m.push(new mxPoint(z,B))):(m.push(new mxPoint(A,z)),m.push(new mxPoint(B,z))),this.limitX=Math.max(this.limitX,z),x+=w}if(null!=f){var o=n?2:0,D=n?i?this.rankTopY[c]:this.rankBottomY[c]:i?this.rankBottomY[d]:this.rankTopY[d],q=f[4*e+3-o];n!=i&&(q=-q);var p=D-q,r=f[4*e+2-o],E=h.model.getTerminal(k,!1),F=this.layout.getVisibleTerminal(k,!1);if(this.layout.isPort(E)&&h.model.getParent(E)==F){var t=h.view.getState(E);
  r=null!=t?t.x:F.geometry.x+a.target.width*E.geometry.x}this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&m.push(new mxPoint(r,p-q)),m.push(new mxPoint(r,p))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&m.push(new mxPoint(p-q,r)),m.push(new mxPoint(p,r)))}a.isReversed&&this.processReversedEdge(a,k),this.layout.setEdgePoints(k,m),b=0==b?this.parallelEdgeSpacing:b>0?-b:-b+this.parallelEdgeSpacing,e++}a.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(a){var b=a.cell,c=a.x[0]-a.width/2,d=a.y[0]-a.height/2;this.rankTopY[a.minRank]=Math.min(this.rankTopY[a.minRank],d),this.rankBottomY[a.minRank]=Math.max(this.rankBottomY[a.minRank],d+a.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(b,c,d):this.layout.setVertexLocation(b,d,c),this.limitX=Math.max(this.limitX,c+a.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(a,b){},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(a,b){return null!=a&&null!=b?b.weightedValue>a.weightedValue?-1:b.weightedValue<a.weightedValue?1:b.nudge?-1:1:0},mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(a){var b=this.layout.getModel(),c=new Object,d=mxUtils.clone(b.vertexMapper,null,!0),e=null;if(null!=b.roots){var f=b.roots;e=[];for(var g=0;g<f.length;g++){mxCellPath.create(f[g]);e[g]=b.vertexMapper.get(f[g])}}b.visit(function(a,b,e,f,g){var h=null!=a&&a.swimlaneIndex==b.swimlaneIndex&&b.isAncestor(a),i=null!=a&&null!=e&&a.swimlaneIndex<b.swimlaneIndex&&e.source==b;h?(e.invert(),mxUtils.remove(e,a.connectsAsSource),b.connectsAsSource.push(e),a.connectsAsTarget.push(e),mxUtils.remove(e,b.connectsAsTarget)):i&&(e.invert(),mxUtils.remove(e,a.connectsAsTarget),b.connectsAsTarget.push(e),a.connectsAsSource.push(e),mxUtils.remove(e,b.connectsAsSource));var j=mxCellPath.create(b.cell);c[j]=b,delete d[j]},e,!0,null)};var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(a,b){this.parent=a;var c=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null==b||b instanceof Array||(b=[b]),null!=b||null!=a){if(this.parentX=null,this.parentY=null,a!=this.root&&null!=c.isVertex(a)&&this.maintainParentLocation){var d=this.graph.getCellGeometry(a);null!=d&&(this.parentX=d.x,this.parentY=d.y)}if(null!=b){for(var e=[],f=0;f<b.length;f++){var g=null==a||c.isAncestor(a,b[f]);g&&c.isVertex(b[f])&&e.push(b[f])}this.roots=e}c.beginUpdate();try{if(this.run(a),this.resizeParent&&!this.graph.isCellCollapsed(a)&&this.graph.updateGroupBounds([a],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY){var d=this.graph.getCellGeometry(a);null!=d&&(d=d.clone(),d.x=this.parentX,d.y=this.parentY,c.setGeometry(a,d))}}finally{c.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(a,b){var c=[];if(null!=a&&null!=b){var d=this.graph.model,e=null,f=-1e5;for(var g in b){var h=b[g];if(d.isVertex(h)&&this.graph.isCellVisible(h)){for(var i=this.getEdges(h),j=0,k=0,l=0;l<i.length;l++){var m=this.getVisibleTerminal(i[l],!0);m==h?j++:k++}0==k&&j>0&&c.push(h);var n=j-k;n>f&&(f=n,e=h)}}0==c.length&&null!=e&&c.push(e)}return c},mxHierarchicalLayout.prototype.getEdges=function(a){var b=this.edgesCache.get(a);if(null!=b)return b;for(var c=this.graph.model,d=[],e=this.graph.isCellCollapsed(a),f=c.getChildCount(a),g=0;g<f;g++){var h=c.getChildAt(a,g);this.isPort(h)?d=d.concat(c.getEdges(h,!0,!0)):!e&&this.graph.isCellVisible(h)||(d=d.concat(c.getEdges(h,!0,!0)))}d=d.concat(c.getEdges(a,!0,!0));for(var i=[],g=0;g<d.length;g++){var j=this.getVisibleTerminal(d[g],!0),k=this.getVisibleTerminal(d[g],!1);(j==k||j!=k&&(k==a&&(null==this.parent||this.graph.isValidAncestor(j,this.parent,this.traverseAncestors))||j==a&&(null==this.parent||this.graph.isValidAncestor(k,this.parent,this.traverseAncestors))))&&i.push(d[g])}return this.edgesCache.put(a,i),i},mxHierarchicalLayout.prototype.getVisibleTerminal=function(a,b){var c=this.edgesTargetTermCache;b&&(c=this.edgeSourceTermCache);var d=c.get(a);if(null!=d)return d;var e=this.graph.view.getState(a),f=null!=e?e.getVisibleTerminal(b):this.graph.view.getVisibleTerminal(a,b);return null==f&&(f=null!=e?e.getVisibleTerminal(b):this.graph.view.getVisibleTerminal(a,b)),null!=f&&(this.isPort(f)&&(f=this.graph.model.getParent(f)),c.put(a,f)),f},mxHierarchicalLayout.prototype.run=function(a){var b=[],c=[];if(null==this.roots&&null!=a){var d=Object();this.filterDescendants(a,d),this.roots=[];var e=!0;for(var f in d)if(null!=d[f]){e=!1;break}for(;!e;){for(var g=this.findRoots(a,d),h=0;h<g.length;h++){var i=Object();b.push(i),this.traverse(g[h],!0,null,c,i,b,d)}for(var h=0;h<g.length;h++)this.roots.push(g[h]);e=!0;for(var f in d)if(null!=d[f]){e=!1;break}}}else for(var h=0;h<this.roots.length;h++){var i=Object();b.push(i),this.traverse(this.roots[h],!0,null,c,i,b,null)}for(var j=0,h=0;h<b.length;h++){var i=b[h],k=[];for(var f in i)k.push(i[f]);this.model=new mxGraphHierarchyModel(this,k,this.roots,a,this.tightenToSource),this.cycleStage(a),this.layeringStage(),this.crossingStage(a),j=this.placementStage(j,a)}},mxHierarchicalLayout.prototype.filterDescendants=function(a,b){var c=this.graph.model;if(c.isVertex(a)&&a!=this.parent&&this.graph.isCellVisible(a)&&(b[mxObjectIdentity.get(a)]=a),this.traverseAncestors||a==this.parent&&this.graph.isCellVisible(a))for(var d=c.getChildCount(a),e=0;e<d;e++){var f=c.getChildAt(a,e);this.isPort(f)||this.filterDescendants(f,b)}},mxHierarchicalLayout.prototype.isPort=function(a){return!!a.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(a,b,c){c=null!=c&&c;for(var d=this.getEdges(a),e=[],f=0;f<d.length;f++){var g=this.getVisibleTerminal(d[f],!0),h=this.getVisibleTerminal(d[f],!1);(g==a&&h==b||!c&&g==b&&h==a)&&e.push(d[f])}return e},mxHierarchicalLayout.prototype.traverse=function(a,b,c,d,e,f,g){if(null!=a&&null!=d){var h=mxObjectIdentity.get(a);if(null!=d[h]||null!=g&&null==g[h]){if(null==e[h])for(var k=0;k<f.length;k++){var q=f[k];if(null!=q[h]){for(var r in q)e[r]=q[r];return f.splice(k,1),e}}}else{null==e[h]&&(e[h]=a),null==d[h]&&(d[h]=a),null!==g&&delete g[h];for(var i=this.getEdges(a),j=[],k=0;k<i.length;k++)j[k]=this.getVisibleTerminal(i[k],!0)==a;for(var k=0;k<i.length;k++)if(!b||j[k]){for(var l=this.getVisibleTerminal(i[k],!j[k]),m=1,n=0;n<i.length;n++)if(n!=k){var o=j[n],p=this.getVisibleTerminal(i[n],!o);p==l&&(o?m++:m--)}m>=0&&(e=this.traverse(l,b,i[k],d,e,f,g))}}}return e},mxHierarchicalLayout.prototype.cycleStage=function(a){var b=new mxMinimumCycleRemover(this);b.execute(a)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(a){var b=new mxMedianHybridCrossingReduction(this);b.execute(a)},mxHierarchicalLayout.prototype.placementStage=function(a,b){var c=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,a,this.parallelEdgeSpacing);return c.fineTuning=this.fineTuning,c.execute(b),c.limitX+this.interHierarchySpacing},mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertices=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(a,b){this.parent=a;var c=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==b||b.length<1)){if(null==a&&(a=c.getParent(b[0])),this.parentX=null,this.parentY=null,a!=this.root&&null!=c.isVertex(a)&&this.maintainParentLocation){var d=this.graph.getCellGeometry(a);null!=d&&(this.parentX=d.x,this.parentY=d.y)}this.swimlanes=b,this.dummyVertices=[];for(var e=0;e<b.length;e++){var f=this.graph.getChildCells(b[e]);if(null==f||0==f.length){var g=this.graph.insertVertex(b[e],null,null,0,0,this.dummyVertexWidth,0);this.dummyVertices.push(g)}}c.beginUpdate();try{if(this.run(a),this.resizeParent&&!this.graph.isCellCollapsed(a)&&this.graph.updateGroupBounds([a],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY){var d=this.graph.getCellGeometry(a);null!=d&&(d=d.clone(),d.x=this.parentX,d.y=this.parentY,c.setGeometry(a,d))}this.graph.removeCells(this.dummyVertices)}finally{c.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var a=[],b=this.model;for(var c in b.edgeMapper)for(var d=b.edgeMapper[c],e=0;e<d.edges.length;e++)a.push(d.edges[e]);for(var f=this.graph.getBoundingBoxFromGeometry(a,!0),g=[],e=0;e<this.swimlanes.length;e++){var h=this.swimlanes[e],i=this.graph.getCellGeometry(h);if(null!=i){var j=this.graph.getChildCells(h),k=this.graph.isSwimlane(h)?this.graph.getStartSize(h):new mxRectangle,l=this.graph.getBoundingBoxFromGeometry(j);g[e]=l;var m=l.y+i.y-k.height-this.parentBorder,n=l.y+i.y+l.height;if(null==f)f=new mxRectangle(0,m,0,n-m);else{f.y=Math.min(f.y,m);var o=Math.max(f.y+f.height,n);f.height=o-f.y}}}for(var e=0;e<this.swimlanes.length;e++){var h=this.swimlanes[e],i=this.graph.getCellGeometry(h);if(null!=i){var j=this.graph.getChildCells(h),k=this.graph.isSwimlane(h)?this.graph.getStartSize(h):new mxRectangle,p=i.clone(),q=0==e?this.parentBorder:this.interRankCellSpacing/2;p.x+=g[e].x-k.width-q,p.y=p.y+f.y-i.y-this.parentBorder,p.width=g[e].width+k.width+this.interRankCellSpacing/2+q,p.height=f.height+k.height+2*this.parentBorder,this.graph.model.setGeometry(h,p),this.graph.moveCells(j,-g[e].x+k.width+q,i.y-f.y+this.parentBorder)}}},mxSwimlaneLayout.prototype.findRoots=function(a,b){var c=[];if(null!=a&&null!=b){var d=this.graph.model,e=null,f=-1e5;for(var g in b){var h=b[g];if(null!=h&&d.isVertex(h)&&this.graph.isCellVisible(h)&&d.isAncestor(a,h)){for(var i=this.getEdges(h),j=0,k=0,l=0;l<i.length;l++){var m=this.getVisibleTerminal(i[l],!0);if(m==h){var n=this.getVisibleTerminal(i[l],!1);d.isAncestor(a,n)&&j++}else d.isAncestor(a,m)&&k++}0==k&&j>0&&c.push(h);var o=j-k;o>f&&(f=o,e=h)}}0==c.length&&null!=e&&c.push(e)}return c},mxSwimlaneLayout.prototype.getEdges=function(a){var b=this.edgesCache.get(a);if(null!=b)return b;for(var c=this.graph.model,d=[],e=this.graph.isCellCollapsed(a),f=c.getChildCount(a),g=0;g<f;g++){var h=c.getChildAt(a,g);this.isPort(h)?d=d.concat(c.getEdges(h,!0,!0)):!e&&this.graph.isCellVisible(h)||(d=d.concat(c.getEdges(h,!0,!0)))}d=d.concat(c.getEdges(a,!0,!0));for(var i=[],g=0;g<d.length;g++){var j=this.getVisibleTerminal(d[g],!0),k=this.getVisibleTerminal(d[g],!1);(j==k||j!=k&&(k==a&&(null==this.parent||this.graph.isValidAncestor(j,this.parent,this.traverseAncestors))||j==a&&(null==this.parent||this.graph.isValidAncestor(k,this.parent,this.traverseAncestors))))&&i.push(d[g])}return this.edgesCache.put(a,i),i},mxSwimlaneLayout.prototype.getVisibleTerminal=function(a,b){var c=this.edgesTargetTermCache;b&&(c=this.edgeSourceTermCache);var d=c.get(a);if(null!=d)return d;var e=this.graph.view.getState(a),f=null!=e?e.getVisibleTerminal(b):this.graph.view.getVisibleTerminal(a,b);return null==f&&(f=null!=e?e.getVisibleTerminal(b):this.graph.view.getVisibleTerminal(a,b)),null!=f&&(this.isPort(f)&&(f=this.graph.model.getParent(f)),c.put(a,f)),f},mxSwimlaneLayout.prototype.run=function(a){var b=[],c=[];if(null!=this.swimlanes&&this.swimlanes.length>0&&null!=a){for(var d=Object(),e=0;e<this.swimlanes.length;e++)this.filterDescendants(this.swimlanes[e],d);this.roots=[];var f=!0;for(var g in d)if(null!=d[g]){f=!1;break}for(var h=0;!f&&h<this.swimlanes.length;){var i=this.findRoots(this.swimlanes[h],d);if(0!=i.length){for(var e=0;e<i.length;e++){var j=Object();b.push(j),this.traverse(i[e],!0,null,c,j,b,d,h)}for(var e=0;e<i.length;e++)this.roots.push(i[e]);f=!0;for(var g in d)if(null!=d[g]){f=!1;break}}else h++}}else for(var e=0;e<this.roots.length;e++){var j=Object();b.push(j),this.traverse(this.roots[e],!0,null,c,j,b,null)}var k=[];for(var g in c)k.push(c[g]);this.model=new mxSwimlaneModel(this,k,this.roots,a,this.tightenToSource),this.cycleStage(a),this.layeringStage(),this.crossingStage(a),initialX=this.placementStage(0,a)},mxSwimlaneLayout.prototype.filterDescendants=function(a,b){var c=this.graph.model;if(c.isVertex(a)&&a!=this.parent&&c.getParent(a)!=this.parent&&this.graph.isCellVisible(a)&&(b[mxObjectIdentity.get(a)]=a),this.traverseAncestors||a==this.parent&&this.graph.isCellVisible(a))for(var d=c.getChildCount(a),e=0;e<d;e++){var f=c.getChildAt(a,e);this.isPort(f)||this.filterDescendants(f,b)}},mxSwimlaneLayout.prototype.isPort=function(a){return!!a.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(a,b,c){c=null!=c&&c;for(var d=this.getEdges(a),e=[],f=0;f<d.length;f++){var g=this.getVisibleTerminal(d[f],!0),h=this.getVisibleTerminal(d[f],!1);(g==a&&h==b||!c&&g==b&&h==a)&&e.push(d[f])}return e},mxSwimlaneLayout.prototype.traverse=function(a,b,c,d,e,f,g,h){if(null!=a&&null!=d){var i=mxObjectIdentity.get(a);if(null!=d[i]||null!=g&&null==g[i]){if(null==e[i])for(var l=0;l<f.length;l++){var p=f[l];if(null!=p[i]){for(var q in p)e[q]=p[q];return f.splice(l,1),e}}}else{null==e[i]&&(e[i]=a),null==d[i]&&(d[i]=a),null!==g&&delete g[i];for(var j=this.getEdges(a),k=this.graph.model,l=0;l<j.length;l++){var m=this.getVisibleTerminal(j[l],!0),n=m==a;n&&(m=this.getVisibleTerminal(j[l],!1));var o=0;for(o=0;o<this.swimlanes.length&&!k.isAncestor(this.swimlanes[o],m);o++);o>=this.swimlanes.length||(o>h||(!b||n)&&o==h)&&(e=this.traverse(m,b,j[l],d,e,f,g,o))}}}return e},mxSwimlaneLayout.prototype.cycleStage=function(a){var b=new mxSwimlaneOrdering(this);b.execute(a)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(a){var b=new mxMedianHybridCrossingReduction(this);b.execute(a)},mxSwimlaneLayout.prototype.placementStage=function(a,b){var c=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,a,this.parallelEdgeSpacing);return c.fineTuning=this.fineTuning,c.execute(b),c.limitX+this.interHierarchySpacing},mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(a){this.createIds=a},mxGraphModel.prototype.createRoot=function(){var a=new mxCell;return a.insert(new mxCell),a},mxGraphModel.prototype.getCell=function(a){return null!=this.cells?this.cells[a]:null},mxGraphModel.prototype.filterCells=function(a,b){var c=null;if(null!=a){c=[];for(var d=0;d<a.length;d++)b(a[d])&&c.push(a[d])}return c},mxGraphModel.prototype.getDescendants=function(a){return this.filterDescendants(null,a)},mxGraphModel.prototype.filterDescendants=function(a,b){var c=[];b=b||this.getRoot(),(null==a||a(b))&&c.push(b);for(var d=this.getChildCount(b),e=0;e<d;e++){var f=this.getChildAt(b,e);c=c.concat(this.filterDescendants(a,f))}return c},mxGraphModel.prototype.getRoot=function(a){var b=a||this.root;if(null!=a)for(;null!=a;)b=a,a=this.getParent(a);return b},mxGraphModel.prototype.setRoot=function(a){return this.execute(new mxRootChange(this,a)),a},mxGraphModel.prototype.rootChanged=function(a){var b=this.root;return this.root=a,this.nextId=0,this.cells=null,this.cellAdded(a),b},mxGraphModel.prototype.isRoot=function(a){return null!=a&&this.root==a},mxGraphModel.prototype.isLayer=function(a){return this.isRoot(this.getParent(a))},mxGraphModel.prototype.isAncestor=function(a,b){for(;null!=b&&b!=a;)b=this.getParent(b);return b==a},mxGraphModel.prototype.contains=function(a){return this.isAncestor(this.root,a)},mxGraphModel.prototype.getParent=function(a){return null!=a?a.getParent():null},mxGraphModel.prototype.add=function(a,b,c){if(b!=a&&null!=a&&null!=b){null==c&&(c=this.getChildCount(a));var d=a!=this.getParent(b);this.execute(new mxChildChange(this,a,b,c)),this.maintainEdgeParent&&d&&this.updateEdgeParents(b)}return b},mxGraphModel.prototype.cellAdded=function(a){if(null!=a){if(null==a.getId()&&this.createIds&&a.setId(this.createId(a)),null!=a.getId()){var b=this.getCell(a.getId());if(b!=a){for(;null!=b;)a.setId(this.createId(a)),b=this.getCell(a.getId());null==this.cells&&(this.cells=new Object),this.cells[a.getId()]=a}}mxUtils.isNumeric(a.getId())&&(this.nextId=Math.max(this.nextId,a.getId()));for(var c=this.getChildCount(a),d=0;d<c;d++)this.cellAdded(this.getChildAt(a,d))}},mxGraphModel.prototype.createId=function(a){var b=this.nextId;return this.nextId++,this.prefix+b+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(a,b){b=b||this.getRoot(a);for(var c=this.getChildCount(a),d=0;d<c;d++){var e=this.getChildAt(a,d);this.updateEdgeParents(e,b)}for(var f=this.getEdgeCount(a),g=[],d=0;d<f;d++)g.push(this.getEdgeAt(a,d));for(var d=0;d<g.length;d++){var h=g[d];this.isAncestor(b,h)&&this.updateEdgeParent(h,b)}},mxGraphModel.prototype.updateEdgeParent=function(a,b){for(var c=this.getTerminal(a,!0),d=this.getTerminal(a,!1),e=null;null!=c&&!this.isEdge(c)&&null!=c.geometry&&c.geometry.relative;)c=this.getParent(c);for(;null!=d&&this.ignoreRelativeEdgeParent&&!this.isEdge(d)&&null!=d.geometry&&d.geometry.relative;)d=this.getParent(d);if(this.isAncestor(b,c)&&this.isAncestor(b,d)&&(e=c==d?this.getParent(c):this.getNearestCommonAncestor(c,d),null!=e&&(this.getParent(e)!=this.root||this.isAncestor(e,a))&&this.getParent(a)!=e)){var f=this.getGeometry(a);if(null!=f){var g=this.getOrigin(this.getParent(a)),h=this.getOrigin(e),i=h.x-g.x,j=h.y-g.y;f=f.clone(),f.translate(-i,-j),this.setGeometry(a,f)}this.add(e,a,this.getChildCount(e))}},mxGraphModel.prototype.getOrigin=function(a){var b=null;if(null!=a){if(b=this.getOrigin(this.getParent(a)),!this.isEdge(a)){var c=this.getGeometry(a);null!=c&&(b.x+=c.x,b.y+=c.y)}}else b=new mxPoint;return b},mxGraphModel.prototype.getNearestCommonAncestor=function(a,b){if(null!=a&&null!=b){var c=mxCellPath.create(b);if(null!=c&&c.length>0){var d=a,e=mxCellPath.create(d);if(c.length<e.length){d=b;var f=e;e=c,c=f}for(;null!=d;){var g=this.getParent(d);if(0==c.indexOf(e+mxCellPath.PATH_SEPARATOR)&&null!=g)return d;e=mxCellPath.getParentPath(e),d=g}}}return null},mxGraphModel.prototype.remove=function(a){return a==this.root?this.setRoot(null):null!=this.getParent(a)&&this.execute(new mxChildChange(this,null,a)),a},mxGraphModel.prototype.cellRemoved=function(a){if(null!=a&&null!=this.cells){for(var b=this.getChildCount(a),c=b-1;c>=0;c--)this.cellRemoved(this.getChildAt(a,c));null!=this.cells&&null!=a.getId()&&delete this.cells[a.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(a,b,c){var d=this.getParent(a);if(null!=b)b==d&&d.getIndex(a)==c||b.insert(a,c);else if(null!=d){var e=d.getIndex(a);d.remove(e)}return this.contains(d)||null==b?null==b&&this.cellRemoved(a):this.cellAdded(a),d},mxGraphModel.prototype.getChildCount=function(a){return null!=a?a.getChildCount():0},mxGraphModel.prototype.getChildAt=function(a,b){return null!=a?a.getChildAt(b):null},mxGraphModel.prototype.getChildren=function(a){return null!=a?a.children:null},mxGraphModel.prototype.getChildVertices=function(a){return this.getChildCells(a,!0,!1)},mxGraphModel.prototype.getChildEdges=function(a){return this.getChildCells(a,!1,!0)},mxGraphModel.prototype.getChildCells=function(a,b,c){b=null!=b&&b,c=null!=c&&c;for(var d=this.getChildCount(a),e=[],f=0;f<d;f++){var g=this.getChildAt(a,f);(!c&&!b||c&&this.isEdge(g)||b&&this.isVertex(g))&&e.push(g)}return e},mxGraphModel.prototype.getTerminal=function(a,b){return null!=a?a.getTerminal(b):null},mxGraphModel.prototype.setTerminal=function(a,b,c){var d=b!=this.getTerminal(a,c);return this.execute(new mxTerminalChange(this,a,b,c)),this.maintainEdgeParent&&d&&this.updateEdgeParent(a,this.getRoot()),b},mxGraphModel.prototype.setTerminals=function(a,b,c){this.beginUpdate();try{this.setTerminal(a,b,!0),this.setTerminal(a,c,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(a,b,c){var d=this.getTerminal(a,c);return null!=b?b.insertEdge(a,c):null!=d&&d.removeEdge(a,c),d},mxGraphModel.prototype.getEdgeCount=function(a){return null!=a?a.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(a,b){return null!=a?a.getEdgeAt(b):null},mxGraphModel.prototype.getDirectedEdgeCount=function(a,b,c){for(var d=0,e=this.getEdgeCount(a),f=0;f<e;f++){var g=this.getEdgeAt(a,f);g!=c&&this.getTerminal(g,b)==a&&d++}return d},mxGraphModel.prototype.getConnections=function(a){return this.getEdges(a,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(a){return this.getEdges(a,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(a){return this.getEdges(a,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(a,b,c,d){b=null==b||b,c=null==c||c,d=null==d||d;for(var e=this.getEdgeCount(a),f=[],g=0;g<e;g++){var h=this.getEdgeAt(a,g),i=this.getTerminal(h,!0),j=this.getTerminal(h,!1);(d&&i==j||i!=j&&(b&&j==a||c&&i==a))&&f.push(h)}return f},mxGraphModel.prototype.getEdgesBetween=function(a,b,c){c=null!=c&&c;var d=this.getEdgeCount(a),e=this.getEdgeCount(b),f=a,g=d;e<d&&(g=e,f=b);for(var h=[],i=0;i<g;i++){var j=this.getEdgeAt(f,i),k=this.getTerminal(j,!0),l=this.getTerminal(j,!1),m=k==a&&l==b,n=l==a&&k==b;(m||!c&&n)&&h.push(j)}return h},mxGraphModel.prototype.getOpposites=function(a,b,c,d){c=null==c||c,d=null==d||d;var e=[];if(null!=a)for(var f=0;f<a.length;f++){var g=this.getTerminal(a[f],!0),h=this.getTerminal(a[f],!1);g==b&&null!=h&&h!=b&&d?e.push(h):h==b&&null!=g&&g!=b&&c&&e.push(g)}return e},mxGraphModel.prototype.getTopmostCells=function(a){for(var b=new mxDictionary,c=[],d=0;d<a.length;d++)b.put(a[d],!0);for(var d=0;d<a.length;d++){for(var e=a[d],f=!0,g=this.getParent(e);null!=g;){if(b.get(g)){f=!1;break}g=this.getParent(g)}f&&c.push(e)}return c},mxGraphModel.prototype.isVertex=function(a){return null!=a&&a.isVertex()},mxGraphModel.prototype.isEdge=function(a){return null!=a&&a.isEdge()},mxGraphModel.prototype.isConnectable=function(a){return null!=a&&a.isConnectable()},mxGraphModel.prototype.getValue=function(a){return null!=a?a.getValue():null},mxGraphModel.prototype.setValue=function(a,b){return this.execute(new mxValueChange(this,a,b)),b},mxGraphModel.prototype.valueForCellChanged=function(a,b){return a.valueChanged(b)},mxGraphModel.prototype.getGeometry=function(a){return null!=a?a.getGeometry():null},mxGraphModel.prototype.setGeometry=function(a,b){return b!=this.getGeometry(a)&&this.execute(new mxGeometryChange(this,a,b)),b},mxGraphModel.prototype.geometryForCellChanged=function(a,b){var c=this.getGeometry(a);return a.setGeometry(b),c},mxGraphModel.prototype.getStyle=function(a){return null!=a?a.getStyle():null},mxGraphModel.prototype.setStyle=function(a,b){return b!=this.getStyle(a)&&this.execute(new mxStyleChange(this,a,b)),b},mxGraphModel.prototype.styleForCellChanged=function(a,b){var c=this.getStyle(a);return a.setStyle(b),c},mxGraphModel.prototype.isCollapsed=function(a){return null!=a&&a.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(a,b){return b!=this.isCollapsed(a)&&this.execute(new mxCollapseChange(this,a,b)),b},mxGraphModel.prototype.collapsedStateForCellChanged=function(a,b){var c=this.isCollapsed(a);return a.setCollapsed(b),c},mxGraphModel.prototype.isVisible=function(a){return null!=a&&a.isVisible()},mxGraphModel.prototype.setVisible=function(a,b){return b!=this.isVisible(a)&&this.execute(new mxVisibleChange(this,a,b)),b},mxGraphModel.prototype.visibleStateForCellChanged=function(a,b){var c=this.isVisible(a);return a.setVisible(b),c},mxGraphModel.prototype.execute=function(a){a.execute(),this.beginUpdate(),this.currentEdit.add(a),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",a)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",a)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit));var a=this.currentEdit;this.currentEdit=this.createUndoableEdit(),a.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",a))}}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(){var a=new mxUndoableEdit(this,!0);return a.notify=function(){a.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",a,"changes",a.changes)),a.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",a,"changes",a.changes))},a},mxGraphModel.prototype.mergeChildren=function(a,b,c){c=null==c||c,this.beginUpdate();try{var d=new Object;this.mergeChildrenImpl(a,b,c,d);for(var e in d){var f=d[e],g=this.getTerminal(f,!0);null!=g&&(g=d[mxCellPath.create(g)],this.setTerminal(f,g,!0)),g=this.getTerminal(f,!1),null!=g&&(g=d[mxCellPath.create(g)],this.setTerminal(f,g,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(a,b,c,d){this.beginUpdate();try{for(var e=a.getChildCount(),f=0;f<e;f++){var g=a.getChildAt(f);if("function"==typeof g.getId){var h=g.getId(),i=null==h||this.isEdge(g)&&c?null:this.getCell(h);if(null==i){var j=g.clone();j.setId(h),j.setTerminal(g.getTerminal(!0),!0),j.setTerminal(g.getTerminal(!1),!1),i=b.insert(j),this.cellAdded(i)}d[mxCellPath.create(g)]=i,this.mergeChildrenImpl(g,i,c,d)}}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(a){var b=[];if(null!=a)for(var c=new mxDictionary,d=0;d<a.length;d++){var e=this.getParent(a[d]);null==e||c.get(e)||(c.put(e,!0),b.push(e))}return b},mxGraphModel.prototype.cloneCell=function(a){return null!=a?this.cloneCells([a],!0)[0]:null},mxGraphModel.prototype.cloneCells=function(a,b,c){c=null!=c?c:new Object;for(var d=[],e=0;e<a.length;e++)null!=a[e]?d.push(this.cloneCellImpl(a[e],c,b)):d.push(null);for(var e=0;e<d.length;e++)null!=d[e]&&this.restoreClone(d[e],a[e],c);return d},mxGraphModel.prototype.cloneCellImpl=function(a,b,c){var d=this.cellCloned(a);if(b[mxObjectIdentity.get(a)]=d,c)for(var e=this.getChildCount(a),f=0;f<e;f++){var g=this.cloneCellImpl(this.getChildAt(a,f),b,!0);d.insert(g)}return d},mxGraphModel.prototype.cellCloned=function(a){return a.clone()},mxGraphModel.prototype.restoreClone=function(a,b,c){var d=this.getTerminal(b,!0);if(null!=d){var e=c[mxObjectIdentity.get(d)];null!=e&&e.insertEdge(a,!0)}var f=this.getTerminal(b,!1);if(null!=f){var e=c[mxObjectIdentity.get(f)];null!=e&&e.insertEdge(a,!1)}for(var g=this.getChildCount(a),h=0;h<g;h++)this.restoreClone(this.getChildAt(a,h),this.getChildAt(b,h),c)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){var a=this.model.getParent(this.child),b=null!=a?a.getIndex(this.child):0;null==this.previous&&this.connect(this.child,!1),a=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=a,this.index=this.previousIndex,this.previousIndex=b},mxChildChange.prototype.connect=function(a,b){b=null==b||b;var c=a.getTerminal(!0),d=a.getTerminal(!1);null!=c&&(b?this.model.terminalForCellChanged(a,c,!0):this.model.terminalForCellChanged(a,null,!0)),null!=d&&(b?this.model.terminalForCellChanged(a,d,!1):this.model.terminalForCellChanged(a,null,!1)),a.setTerminal(c,!0),a.setTerminal(d,!1);for(var e=this.model.getChildCount(a),f=0;f<e;f++)this.connect(this.model.getChildAt(a,f),b)},mxTerminalChange.prototype.execute=function(){this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source)},mxValueChange.prototype.execute=function(){this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous)},mxStyleChange.prototype.execute=function(){this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous)},mxGeometryChange.prototype.execute=function(){this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous)},mxCollapseChange.prototype.execute=function(){this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous)},mxVisibleChange.prototype.execute=function(){this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous)},mxCellAttributeChange.prototype.execute=function(){var a=this.cell.getAttribute(this.attribute);
  null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=a},mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient=["id","value","parent","source","target","children","edges"],mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(a){this.id=a},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(a){this.value=a},mxCell.prototype.valueChanged=function(a){var b=this.getValue();return this.setValue(a),b},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(a){this.geometry=a},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(a){this.style=a},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(a){this.vertex=a},mxCell.prototype.isEdge=function(){return 0!=this.edge};mxCell.prototype.setEdge=function(a){this.edge=a};mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(a){this.connectable=a},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(a){this.visible=a},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(a){this.collapsed=a},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(a){this.parent=a},mxCell.prototype.getTerminal=function(a){return a?this.source:this.target},mxCell.prototype.setTerminal=function(a,b){return b?this.source=a:this.target=a,a},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(a){return mxUtils.indexOf(this.children,a)},mxCell.prototype.getChildAt=function(a){return null==this.children?null:this.children[a]},mxCell.prototype.insert=function(a,b){return null!=a&&(null==b&&(b=this.getChildCount(),a.getParent()==this&&b--),a.removeFromParent(),a.setParent(this),null==this.children?(this.children=[],this.children.push(a)):this.children.splice(b,0,a)),a},mxCell.prototype.remove=function(a){var b=null;return null!=this.children&&a>=0&&(b=this.getChildAt(a),null!=b&&(this.children.splice(a,1),b.setParent(null))),b},mxCell.prototype.removeFromParent=function(){if(null!=this.parent){var a=this.parent.getIndex(this);this.parent.remove(a)}},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(a){return mxUtils.indexOf(this.edges,a)},mxCell.prototype.getEdgeAt=function(a){return null==this.edges?null:this.edges[a]},mxCell.prototype.insertEdge=function(a,b){return null!=a&&(a.removeFromTerminal(b),a.setTerminal(this,b),(null==this.edges||a.getTerminal(!b)!=this||mxUtils.indexOf(this.edges,a)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(a))),a},mxCell.prototype.removeEdge=function(a,b){if(null!=a){if(a.getTerminal(!b)!=this&&null!=this.edges){var c=this.getEdgeIndex(a);c>=0&&this.edges.splice(c,1)}a.setTerminal(null,b)}return a},mxCell.prototype.removeFromTerminal=function(a){var b=this.getTerminal(a);null!=b&&b.removeEdge(this,a)},mxCell.prototype.hasAttribute=function(a){var b=this.getValue();return null!=b&&b.nodeType==mxConstants.NODETYPE_ELEMENT&&b.hasAttribute?b.hasAttribute(a):null!=b.getAttribute(a)},mxCell.prototype.getAttribute=function(a,b){var c=this.getValue(),d=null!=c&&c.nodeType==mxConstants.NODETYPE_ELEMENT?c.getAttribute(a):null;return d||b},mxCell.prototype.setAttribute=function(a,b){var c=this.getValue();null!=c&&c.nodeType==mxConstants.NODETYPE_ELEMENT&&c.setAttribute(a,b)},mxCell.prototype.clone=function(){var a=mxUtils.clone(this,this.mxTransient);return a.setValue(this.cloneValue()),a},mxCell.prototype.cloneValue=function(){var a=this.getValue();return null!=a&&("function"==typeof a.clone?a=a.clone():isNaN(a.nodeType)||(a=a.cloneNode(!0))),a},mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){if(null!=this.alternateBounds){var a=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=a}},mxGeometry.prototype.getTerminalPoint=function(a){return a?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(a,b){return b?this.sourcePoint=a:this.targetPoint=a,a},mxGeometry.prototype.rotate=function(a,b){var c=mxUtils.toRadians(a),d=Math.cos(c),e=Math.sin(c);if(!this.relative){var f=new mxPoint(this.getCenterX(),this.getCenterY()),g=mxUtils.getRotatedPoint(f,d,e,b);this.x=Math.round(g.x-this.width/2),this.y=Math.round(g.y-this.height/2)}if(null!=this.sourcePoint){var g=mxUtils.getRotatedPoint(this.sourcePoint,d,e,b);this.sourcePoint.x=Math.round(g.x),this.sourcePoint.y=Math.round(g.y)}if(null!=this.targetPoint){var g=mxUtils.getRotatedPoint(this.targetPoint,d,e,b);this.targetPoint.x=Math.round(g.x),this.targetPoint.y=Math.round(g.y)}if(null!=this.points)for(var h=0;h<this.points.length;h++)if(null!=this.points[h]){var g=mxUtils.getRotatedPoint(this.points[h],d,e,b);this.points[h].x=Math.round(g.x),this.points[h].y=Math.round(g.y)}},mxGeometry.prototype.translate=function(a,b){if(a=parseFloat(a),b=parseFloat(b),this.relative||(this.x=parseFloat(this.x)+a,this.y=parseFloat(this.y)+b),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+a,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+b),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+a,this.targetPoint.y=parseFloat(this.targetPoint.y)+b),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var c=0;c<this.points.length;c++)null!=this.points[c]&&(this.points[c].x=parseFloat(this.points[c].x)+a,this.points[c].y=parseFloat(this.points[c].y)+b)},mxGeometry.prototype.scale=function(a,b,c){if(a=parseFloat(a),b=parseFloat(b),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*a,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*b),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*a,this.targetPoint.y=parseFloat(this.targetPoint.y)*b),null!=this.points)for(var d=0;d<this.points.length;d++)null!=this.points[d]&&(this.points[d].x=parseFloat(this.points[d].x)*a,this.points[d].y=parseFloat(this.points[d].y)*b);this.relative||(this.x=parseFloat(this.x)*a,this.y=parseFloat(this.y)*b,c&&(b=a=Math.min(a,b)),this.width=parseFloat(this.width)*a,this.height=parseFloat(this.height)*b)},mxGeometry.prototype.equals=function(a){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==a.relative&&(null==this.sourcePoint&&null==a.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(a.sourcePoint))&&(null==this.targetPoint&&null==a.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(a.targetPoint))&&(null==this.points&&null==a.points||null!=this.points&&mxUtils.equalPoints(this.points,a.points))&&(null==this.alternateBounds&&null==a.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(a.alternateBounds))&&(null==this.offset&&null==a.offset||null!=this.offset&&this.offset.equals(a.offset))};var mxCellPath={PATH_SEPARATOR:".",create:function(a){var b="";if(null!=a)for(var c=a.getParent();null!=c;){var d=c.getIndex(a);b=d+mxCellPath.PATH_SEPARATOR+b,a=c,c=a.getParent()}var e=b.length;return e>1&&(b=b.substring(0,e-1)),b},getParentPath:function(a){if(null!=a){var b=a.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(b>=0)return a.substring(0,b);if(a.length>0)return""}return null},resolve:function(a,b){var c=a;if(null!=b)for(var d=b.split(mxCellPath.PATH_SEPARATOR),e=0;e<d.length;e++)c=c.getChildAt(parseInt(d[e]));return c},compare:function(a,b){for(var c=Math.min(a.length,b.length),d=0,e=0;e<c;e++)if(a[e]!=b[e]){if(0==a[e].length||0==b[e].length)d=a[e]==b[e]?0:a[e]>b[e]?1:-1;else{var f=parseInt(a[e]),g=parseInt(b[e]);d=f==g?0:f>g?1:-1}break}if(0==d){var f=a.length,g=b.length;f!=g&&(d=f>g?1:-1)}return d}},mxPerimeter={RectanglePerimeter:function(a,b,c,d){var e=a.getCenterX(),f=a.getCenterY(),g=c.x-e,h=c.y-f,i=Math.atan2(h,g),j=new mxPoint(0,0),k=Math.PI,l=Math.PI/2,m=l-i,n=Math.atan2(a.height,a.width);return i<-k+n||i>k-n?(j.x=a.x,j.y=f-a.width*Math.tan(i)/2):i<-n?(j.y=a.y,j.x=e-a.height*Math.tan(m)/2):i<n?(j.x=a.x+a.width,j.y=f+a.width*Math.tan(i)/2):(j.y=a.y+a.height,j.x=e+a.height*Math.tan(m)/2),d&&(c.x>=a.x&&c.x<=a.x+a.width?j.x=c.x:c.y>=a.y&&c.y<=a.y+a.height&&(j.y=c.y),c.x<a.x?j.x=a.x:c.x>a.x+a.width&&(j.x=a.x+a.width),c.y<a.y?j.y=a.y:c.y>a.y+a.height&&(j.y=a.y+a.height)),j},EllipsePerimeter:function(a,b,c,d){var e=a.x,f=a.y,g=a.width/2,h=a.height/2,i=e+g,j=f+h,k=c.x,l=c.y,m=parseInt(k-i),n=parseInt(l-j);if(0==m&&0!=n)return new mxPoint(i,j+h*n/Math.abs(n));if(0==m&&0==n)return new mxPoint(k,l);if(d){if(l>=f&&l<=f+a.height){var o=l-j,p=Math.sqrt(g*g*(1-o*o/(h*h)))||0;return k<=e&&(p=-p),new mxPoint(i+p,l)}if(k>=e&&k<=e+a.width){var p=k-i,o=Math.sqrt(h*h*(1-p*p/(g*g)))||0;return l<=f&&(o=-o),new mxPoint(k,j+o)}}var q=n/m,r=j-q*i,s=g*g*q*q+h*h,t=-2*i*s,u=g*g*q*q*i*i+h*h*i*i-g*g*h*h,v=Math.sqrt(t*t-4*s*u),w=(-t+v)/(2*s),x=(-t-v)/(2*s),y=q*w+r,z=q*x+r,A=Math.sqrt(Math.pow(w-k,2)+Math.pow(y-l,2)),B=Math.sqrt(Math.pow(x-k,2)+Math.pow(z-l,2)),C=0,D=0;return A<B?(C=w,D=y):(C=x,D=z),new mxPoint(C,D)},RhombusPerimeter:function(a,b,c,d){var e=a.x,f=a.y,g=a.width,h=a.height,i=e+g/2,j=f+h/2,k=c.x,l=c.y;if(i==k)return j>l?new mxPoint(i,f):new mxPoint(i,f+h);if(j==l)return i>k?new mxPoint(e,j):new mxPoint(e+g,j);var m=i,n=j;return d&&(k>=e&&k<=e+g?m=k:l>=f&&l<=f+h&&(n=l)),k<i?l<j?mxUtils.intersection(k,l,m,n,i,f,e,j):mxUtils.intersection(k,l,m,n,i,f+h,e,j):l<j?mxUtils.intersection(k,l,m,n,i,f,e+g,j):mxUtils.intersection(k,l,m,n,i,f+h,e+g,j)},TrianglePerimeter:function(a,b,c,d){var e=null!=b?b.style[mxConstants.STYLE_DIRECTION]:null,f=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH,g=a.x,h=a.y,i=a.width,j=a.height,k=g+i/2,l=h+j/2,m=new mxPoint(g,h),n=new mxPoint(g+i,l),o=new mxPoint(g,h+j);e==mxConstants.DIRECTION_NORTH?(m=o,n=new mxPoint(k,h),o=new mxPoint(g+i,h+j)):e==mxConstants.DIRECTION_SOUTH?(n=new mxPoint(k,h+j),o=new mxPoint(g+i,h)):e==mxConstants.DIRECTION_WEST&&(m=new mxPoint(g+i,h),n=new mxPoint(g,l),o=new mxPoint(g+i,h+j));var p=c.x-k,q=c.y-l,r=f?Math.atan2(p,q):Math.atan2(q,p),s=f?Math.atan2(i,j):Math.atan2(j,i),t=!1;t=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_WEST?r>-s&&r<s:r<-Math.PI+s||r>Math.PI-s;var u=null;if(t)u=d&&(f&&c.x>=m.x&&c.x<=o.x||!f&&c.y>=m.y&&c.y<=o.y)?f?new mxPoint(c.x,m.y):new mxPoint(m.x,c.y):e==mxConstants.DIRECTION_NORTH?new mxPoint(g+i/2+j*Math.tan(r)/2,h+j):e==mxConstants.DIRECTION_SOUTH?new mxPoint(g+i/2-j*Math.tan(r)/2,h):e==mxConstants.DIRECTION_WEST?new mxPoint(g+i,h+j/2+i*Math.tan(r)/2):new mxPoint(g,h+j/2-i*Math.tan(r)/2);else{if(d){var v=new mxPoint(k,l);c.y>=h&&c.y<=h+j?(v.x=f?k:e==mxConstants.DIRECTION_WEST?g+i:g,v.y=c.y):c.x>=g&&c.x<=g+i&&(v.x=c.x,v.y=f?e==mxConstants.DIRECTION_NORTH?h+j:h:l),p=c.x-v.x,q=c.y-v.y,k=v.x,l=v.y}u=f&&c.x<=g+i/2||!f&&c.y<=h+j/2?mxUtils.intersection(c.x,c.y,k,l,m.x,m.y,n.x,n.y):mxUtils.intersection(c.x,c.y,k,l,n.x,n.y,o.x,o.y)}return null==u&&(u=new mxPoint(k,l)),u},HexagonPerimeter:function(a,b,c,d){var e=a.x,f=a.y,g=a.width,h=a.height,i=a.getCenterX(),j=a.getCenterY(),k=c.x,l=c.y,m=k-i,n=l-j,o=-Math.atan2(n,m),p=Math.PI,q=Math.PI/2,r=new mxPoint(i,j),s=null!=b?mxUtils.getValue(b.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,t=s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH,u=new mxPoint,v=new mxPoint;if((k<e&&l<f||k<e&&l>f+h||k>e+g&&l<f||k>e+g&&l>f+h)&&(d=!1),d){if(t){if(k==i){if(l<=f)return new mxPoint(i,f);if(l>=f+h)return new mxPoint(i,f+h)}else if(k<e){if(l==f+h/4)return new mxPoint(e,f+h/4);if(l==f+3*h/4)return new mxPoint(e,f+3*h/4)}else if(k>e+g){if(l==f+h/4)return new mxPoint(e+g,f+h/4);if(l==f+3*h/4)return new mxPoint(e+g,f+3*h/4)}else if(k==e){if(l<j)return new mxPoint(e,f+h/4);if(l>j)return new mxPoint(e,f+3*h/4)}else if(k==e+g){if(l<j)return new mxPoint(e+g,f+h/4);if(l>j)return new mxPoint(e+g,f+3*h/4)}if(l==f)return new mxPoint(i,f);if(l==f+h)return new mxPoint(i,f+h);k<i?l>f+h/4&&l<f+3*h/4?(u=new mxPoint(e,f),v=new mxPoint(e,f+h)):l<f+h/4?(u=new mxPoint(e-Math.floor(.5*g),f+Math.floor(.5*h)),v=new mxPoint(e+g,f-Math.floor(.25*h))):l>f+3*h/4&&(u=new mxPoint(e-Math.floor(.5*g),f+Math.floor(.5*h)),v=new mxPoint(e+g,f+Math.floor(1.25*h))):k>i&&(l>f+h/4&&l<f+3*h/4?(u=new mxPoint(e+g,f),v=new mxPoint(e+g,f+h)):l<f+h/4?(u=new mxPoint(e,f-Math.floor(.25*h)),v=new mxPoint(e+Math.floor(1.5*g),f+Math.floor(.5*h))):l>f+3*h/4&&(u=new mxPoint(e+Math.floor(1.5*g),f+Math.floor(.5*h)),v=new mxPoint(e,f+Math.floor(1.25*h))))}else{if(l==j){if(k<=e)return new mxPoint(e,f+h/2);if(k>=e+g)return new mxPoint(e+g,f+h/2)}else if(l<f){if(k==e+g/4)return new mxPoint(e+g/4,f);if(k==e+3*g/4)return new mxPoint(e+3*g/4,f)}else if(l>f+h){if(k==e+g/4)return new mxPoint(e+g/4,f+h);if(k==e+3*g/4)return new mxPoint(e+3*g/4,f+h)}else if(l==f){if(k<i)return new mxPoint(e+g/4,f);if(k>i)return new mxPoint(e+3*g/4,f)}else if(l==f+h){if(k<i)return new mxPoint(e+g/4,f+h);if(l>j)return new mxPoint(e+3*g/4,f+h)}if(k==e)return new mxPoint(e,j);if(k==e+g)return new mxPoint(e+g,j);l<j?k>e+g/4&&k<e+3*g/4?(u=new mxPoint(e,f),v=new mxPoint(e+g,f)):k<e+g/4?(u=new mxPoint(e-Math.floor(.25*g),f+h),v=new mxPoint(e+Math.floor(.5*g),f-Math.floor(.5*h))):k>e+3*g/4&&(u=new mxPoint(e+Math.floor(.5*g),f-Math.floor(.5*h)),v=new mxPoint(e+Math.floor(1.25*g),f+h)):l>j&&(k>e+g/4&&k<e+3*g/4?(u=new mxPoint(e,f+h),v=new mxPoint(e+g,f+h)):k<e+g/4?(u=new mxPoint(e-Math.floor(.25*g),f),v=new mxPoint(e+Math.floor(.5*g),f+Math.floor(1.5*h))):k>e+3*g/4&&(u=new mxPoint(e+Math.floor(.5*g),f+Math.floor(1.5*h)),v=new mxPoint(e+Math.floor(1.25*g),f)))}var w=i,x=j;k>=e&&k<=e+g?(w=k,x=l<j?f+h:f):l>=f&&l<=f+h&&(x=l,w=k<i?e+g:e),r=mxUtils.intersection(w,x,c.x,c.y,u.x,u.y,v.x,v.y)}else{if(t){var y=Math.atan2(h/4,g/2);if(o==y)return new mxPoint(e+g,f+Math.floor(.25*h));if(o==q)return new mxPoint(e+Math.floor(.5*g),f);if(o==p-y)return new mxPoint(e,f+Math.floor(.25*h));if(o==-y)return new mxPoint(e+g,f+Math.floor(.75*h));if(o==-q)return new mxPoint(e+Math.floor(.5*g),f+h);if(o==-p+y)return new mxPoint(e,f+Math.floor(.75*h));o<y&&o>-y?(u=new mxPoint(e+g,f),v=new mxPoint(e+g,f+h)):o>y&&o<q?(u=new mxPoint(e,f-Math.floor(.25*h)),v=new mxPoint(e+Math.floor(1.5*g),f+Math.floor(.5*h))):o>q&&o<p-y?(u=new mxPoint(e-Math.floor(.5*g),f+Math.floor(.5*h)),v=new mxPoint(e+g,f-Math.floor(.25*h))):o>p-y&&o<=p||o<-p+y&&o>=-p?(u=new mxPoint(e,f),v=new mxPoint(e,f+h)):o<-y&&o>-q?(u=new mxPoint(e+Math.floor(1.5*g),f+Math.floor(.5*h)),v=new mxPoint(e,f+Math.floor(1.25*h))):o<-q&&o>-p+y&&(u=new mxPoint(e-Math.floor(.5*g),f+Math.floor(.5*h)),v=new mxPoint(e+g,f+Math.floor(1.25*h)))}else{var y=Math.atan2(h/2,g/4);if(o==y)return new mxPoint(e+Math.floor(.75*g),f);if(o==p-y)return new mxPoint(e+Math.floor(.25*g),f);if(o==p||o==-p)return new mxPoint(e,f+Math.floor(.5*h));if(0==o)return new mxPoint(e+g,f+Math.floor(.5*h));if(o==-y)return new mxPoint(e+Math.floor(.75*g),f+h);if(o==-p+y)return new mxPoint(e+Math.floor(.25*g),f+h);o>0&&o<y?(u=new mxPoint(e+Math.floor(.5*g),f-Math.floor(.5*h)),v=new mxPoint(e+Math.floor(1.25*g),f+h)):o>y&&o<p-y?(u=new mxPoint(e,f),v=new mxPoint(e+g,f)):o>p-y&&o<p?(u=new mxPoint(e-Math.floor(.25*g),f+h),v=new mxPoint(e+Math.floor(.5*g),f-Math.floor(.5*h))):o<0&&o>-y?(u=new mxPoint(e+Math.floor(.5*g),f+Math.floor(1.5*h)),v=new mxPoint(e+Math.floor(1.25*g),f)):o<-y&&o>-p+y?(u=new mxPoint(e,f+h),v=new mxPoint(e+g,f+h)):o<-p+y&&o>-p&&(u=new mxPoint(e-Math.floor(.25*g),f),v=new mxPoint(e+Math.floor(.5*g),f+Math.floor(1.5*h)))}r=mxUtils.intersection(i,j,c.x,c.y,u.x,u.y,v.x,v.y)}return null==r?new mxPoint(i,j):r}};mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var a="";return 5==document.documentMode?a='<meta http-equiv="X-UA-Compatible" content="IE=5">':8==document.documentMode?a='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(a='<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->'),a},mxPrintPreview.prototype.appendGraph=function(a,b,c,d,e,f){this.graph=a,this.scale=null!=b?b:1/a.pageScale,this.x0=c,this.y0=d,this.open(null,null,e,f)},mxPrintPreview.prototype.open=function(a,b,c,d){var e=this.graph.cellRenderer.initializeOverlay,f=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(a,b){b.init(a.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(a,b,c,d){b.dialect=a.view.graph.dialect,b.init(a.view.getDrawPane())}),this.wnd=null!=b?b:this.wnd;var g=!1;null==this.wnd&&(g=!0,this.wnd=window.open());var h=this.wnd.document;if(g){var i=this.getDoctype();null!=i&&i.length>0&&h.writeln(i),mxClient.IS_VML?h.writeln('<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">'):("CSS1Compat"===document.compatMode&&h.writeln("<!DOCTYPE html>"),h.writeln("<html>")),h.writeln("<head>"),this.writeHead(h,a),h.writeln("</head>"),h.writeln('<body class="mxPage">')}var j=this.graph.getGraphBounds().clone(),k=this.graph.getView().getScale(),l=k/this.scale,m=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=m.x*this.scale,this.y0-=m.y*this.scale,j.width+=j.x,j.height+=j.y,j.x=0,j.y=0,this.border=0);var n=this.pageFormat.width-2*this.border,o=this.pageFormat.height-2*this.border;this.pageFormat.height+=this.marginTop+this.marginBottom,j.width/=l,j.height/=l;var p=Math.max(1,Math.ceil((j.width+this.x0)/n)),q=Math.max(1,Math.ceil((j.height+this.y0)/o));this.pageCount=p*q;var r=mxUtils.bind(this,function(){if(this.pageSelector&&(q>1||p>1)){var a=this.createPageSelector(q,p);if(h.body.appendChild(a),mxClient.IS_IE&&null==h.documentMode||5==h.documentMode||8==h.documentMode||7==h.documentMode){a.style.position="absolute";var b=function(){a.style.top=(h.body.scrollTop||h.documentElement.scrollTop)+10+"px"};mxEvent.addListener(this.wnd,"scroll",function(a){b()}),mxEvent.addListener(this.wnd,"resize",function(a){b()})}}}),s=mxUtils.bind(this,function(a,b){null!=this.borderColor&&(a.style.borderColor=this.borderColor,a.style.borderStyle="solid",a.style.borderWidth="1px"),a.style.background=this.backgroundColor,(c||b)&&(a.style.pageBreakAfter="always"),mxClient.IS_IE||document.documentMode>=11||mxClient.IS_EDGE?(h.writeln(a.outerHTML),a.parentNode.removeChild(a)):(a.parentNode.removeChild(a),h.body.appendChild(a)),(c||b)&&this.addPageBreak(h)}),t=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=t)for(var u=0;u<t.length;u++)s(t[u],!0);for(var v=this.getAppendices(this.pageFormat.width,this.pageFormat.height),u=0;u<q;u++)for(var w=u*o/this.scale-this.y0/this.scale+(j.y-m.y*k)/k,x=0;x<p;x++){if(null==this.wnd)return null;var y=x*n/this.scale-this.x0/this.scale+(j.x-m.x*k)/k,z=u*p+x+1,A=new mxRectangle(y,w,n,o);f=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(a){this.addGraphFragment(-y,-w,this.scale,z,a,A),this.printBackgroundImage&&this.insertBackgroundImage(a,-y,-w)}),z),f.setAttribute("id","mxPage-"+z),s(f,null!=v||u<q-1||x<p-1)}if(null!=v)for(var u=0;u<v.length;u++)s(v[u],u<v.length-1);g&&!d&&(this.closeDocument(),r()),this.wnd.focus()}catch(a){null!=f&&null!=f.parentNode&&f.parentNode.removeChild(f)}finally{this.graph.cellRenderer.initializeOverlay=e}return this.wnd},mxPrintPreview.prototype.addPageBreak=function(a){var b=a.createElement("hr");b.className="mxPageBreak",a.body.appendChild(b)},mxPrintPreview.prototype.closeDocument=function(){if(null!=this.wnd&&null!=this.wnd.document){var a=this.wnd.document;this.writePostfix(a),a.writeln("</body>"),a.writeln("</html>"),a.close(),mxEvent.release(a.body)}},mxPrintPreview.prototype.writeHead=function(a,b){null!=this.title&&a.writeln("<title>"+this.title+"</title>"),mxClient.IS_VML&&a.writeln('<style type="text/css">v\\:*{behavior:url(#default#VML)}o\\:*{behavior:url(#default#VML)}</style>'),a.writeln('<style type="text/css">'),a.writeln("@media print {"),a.writeln("  table.mxPageSelector { display: none; }"),a.writeln("  hr.mxPageBreak { display: none; }"),a.writeln("}"),a.writeln("@media screen {"),a.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),a.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),a.writeln("  body.mxPage { background: gray; }"),a.writeln("}"),null!=b&&a.writeln(b),a.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(a){},mxPrintPreview.prototype.createPageSelector=function(a,b){var c=this.wnd.document,d=c.createElement("table");d.className="mxPageSelector",d.setAttribute("border","0");for(var e=c.createElement("tbody"),f=0;f<a;f++){for(var g=c.createElement("tr"),h=0;h<b;h++){var i=f*b+h+1,j=c.createElement("td"),k=c.createElement("a");if(k.setAttribute("href","#mxPage-"+i),mxClient.IS_NS&&!mxClient.IS_SF&&!mxClient.IS_GC){var l="var page = document.getElementById('mxPage-"+i+"');page.scrollIntoView(true);event.preventDefault();";k.setAttribute("onclick",l)}mxUtils.write(k,i,c),j.appendChild(k),g.appendChild(j)}e.appendChild(g)}return d.appendChild(e),d},mxPrintPreview.prototype.renderPage=function(a,b,c,d,e,f){var g=this.wnd.document,h=document.createElement("div"),i=null;try{if(0!=c||0!=d){h.style.position="relative",h.style.width=a+"px",h.style.height=b+"px",h.style.pageBreakInside="avoid";var j=document.createElement("div");j.style.position="relative",j.style.top=this.border+"px",j.style.left=this.border+"px",j.style.width=a-2*this.border+"px",j.style.height=b-2*this.border+"px",j.style.overflow="hidden";var k=document.createElement("div");k.style.position="relative",k.style.marginLeft=c+"px",k.style.marginTop=d+"px",8==g.documentMode&&(j.style.position="absolute",k.style.position="absolute"),10==g.documentMode&&(k.style.width="100%",k.style.height="100%"),j.appendChild(k),h.appendChild(j),document.body.appendChild(h),i=k}else{h.style.width=a+"px",h.style.height=b+"px",h.style.overflow="hidden",h.style.pageBreakInside="avoid",8==g.documentMode&&(h.style.position="relative");var j=document.createElement("div");j.style.width=a-2*this.border+"px",j.style.height=b-2*this.border+"px",j.style.overflow="hidden",!mxClient.IS_IE||null!=g.documentMode&&5!=g.documentMode&&8!=g.documentMode&&7!=g.documentMode?(j.style.top=this.border+"px",j.style.left=this.border+"px"):(j.style.marginTop=this.border+"px",j.style.marginLeft=this.border+"px"),this.graph.dialect==mxConstants.DIALECT_VML&&(j.style.position="absolute"),h.appendChild(j),document.body.appendChild(h),i=j}}catch(a){throw h.parentNode.removeChild(h),h=null,a}return e(i),h},mxPrintPreview.prototype.getRoot=function(){var a=this.graph.view.currentRoot;return null==a&&(a=this.graph.getModel().getRoot()),a},mxPrintPreview.prototype.addGraphFragment=function(a,b,c,d,e,f){var g=this.graph.getView(),h=this.graph.container;this.graph.container=e;var i=g.getCanvas(),j=g.getBackgroundPane(),k=g.getDrawPane(),l=g.getOverlayPane();this.graph.dialect==mxConstants.DIALECT_SVG?g.createSvg():this.graph.dialect==mxConstants.DIALECT_VML?g.createVml():g.createHtml();var m=g.isEventsEnabled();g.setEventsEnabled(!1);var n=this.graph.isEnabled();this.graph.setEnabled(!1);var o=g.getTranslate();g.translate=new mxPoint(a,b);var p=this.graph.cellRenderer.redraw,q=g.states,r=g.scale;if(this.clipping){var s=new mxRectangle((f.x+o.x)*r,(f.y+o.y)*r,f.width*r/c,f.height*r/c);this.graph.cellRenderer.redraw=function(a,b,c){if(null!=a){var d=q.get(a.cell);if(null!=d){var e=g.getBoundingBox(d,!1);if(null!=e&&!mxUtils.intersects(s,e))return}}p.apply(this,arguments)}}var t=null;try{var u=[this.getRoot()];t=new mxTemporaryCellStates(g,c,u)}finally{if(mxClient.IS_IE)g.overlayPane.innerHTML="",g.canvas.style.overflow="hidden",g.canvas.style.position="relative",g.canvas.style.top=this.marginTop+"px",g.canvas.style.width=f.width+"px",g.canvas.style.height=f.height+"px";else for(var v=e.firstChild;null!=v;){var w=v.nextSibling,x=v.nodeName.toLowerCase();"svg"==x?(v.style.overflow="hidden",v.style.position="relative",v.style.top=this.marginTop+"px",v.setAttribute("width",f.width),v.setAttribute("height",f.height),v.style.width="",v.style.height=""):"default"!=v.style.cursor&&"div"!=x&&v.parentNode.removeChild(v),v=w}if(this.printBackgroundImage){var y=e.getElementsByTagName("svg");y.length>0&&(y[0].style.position="absolute")}g.overlayPane.parentNode.removeChild(g.overlayPane),this.graph.setEnabled(n),this.graph.container=h,this.graph.cellRenderer.redraw=p,g.canvas=i,g.backgroundPane=j,g.drawPane=k,g.overlayPane=l,g.translate=o,t.destroy(),g.setEventsEnabled(m)}},mxPrintPreview.prototype.insertBackgroundImage=function(a,b,c){var d=this.graph.backgroundImage;if(null!=d){var e=document.createElement("img");e.style.position="absolute",e.style.marginLeft=Math.round(b*this.scale)+"px",e.style.marginTop=Math.round(c*this.scale)+"px",e.setAttribute("width",Math.round(this.scale*d.width)),e.setAttribute("height",Math.round(this.scale*d.height)),e.src=d.src,a.insertBefore(e,a.firstChild)}},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(a){var b=this.open(a);null!=b&&b.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},mxStylesheet.prototype.styles,mxStylesheet.prototype.createDefaultVertexStyle=function(){var a=new Object;return a[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,a[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,a[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",a[mxConstants.STYLE_STROKECOLOR]="#6482B9",a[mxConstants.STYLE_FONTCOLOR]="#774400",a},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var a=new Object;return a[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,a[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,a[mxConstants.STYLE_STROKECOLOR]="#6482B9",a[mxConstants.STYLE_FONTCOLOR]="#446299",a},mxStylesheet.prototype.putDefaultVertexStyle=function(a){this.putCellStyle("defaultVertex",a)},mxStylesheet.prototype.putDefaultEdgeStyle=function(a){this.putCellStyle("defaultEdge",a)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(a,b){this.styles[a]=b},mxStylesheet.prototype.getCellStyle=function(a,b){var c=b;if(null!=a&&a.length>0){var d=a.split(";");c=null!=c&&";"!=a.charAt(0)?mxUtils.clone(c):new Object;for(var e=0;e<d.length;e++){var f=d[e],g=f.indexOf("=");if(g>=0){var h=f.substring(0,g),i=f.substring(g+1);i==mxConstants.NONE?delete c[h]:mxUtils.isNumeric(i)?c[h]=parseFloat(i):c[h]=i}else{var j=this.styles[f];if(null!=j)for(var h in j)c[h]=j[h]}}}return c},mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.getPerimeterBounds=function(a,b){if(a=a||0,b=null!=b?b:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect){var c=this.shape.stencil.computeAspect(this.style,b.x,b.y,b.width,b.height);b.x=c.x,b.y=c.y,b.width=this.shape.stencil.w0*c.width,b.height=this.shape.stencil.h0*c.height}return 0!=a&&b.grow(a),b},mxCellState.prototype.setAbsoluteTerminalPoint=function(a,b){b?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(a):this.absolutePoints[0]=a):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(a)):1==this.absolutePoints.length?this.absolutePoints.push(a):this.absolutePoints[this.absolutePoints.length-1]=a},mxCellState.prototype.setCursor=function(a){null!=this.shape&&this.shape.setCursor(a),null!=this.text&&this.text.setCursor(a)},mxCellState.prototype.getVisibleTerminal=function(a){var b=this.getVisibleTerminalState(a);return null!=b?b.cell:null},mxCellState.prototype.getVisibleTerminalState=function(a){return a?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(a,b){b?this.visibleSourceState=a:this.visibleTargetState=a},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var a=this.view.translate,b=this.view.scale;this.cellBounds=new mxRectangle(this.x/b-a.x,this.y/b-a.y,this.width/b,this.height/b),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(a){this.view=a.view,this.cell=a.cell,this.style=a.style,this.absolutePoints=a.absolutePoints,this.origin=a.origin,this.absoluteOffset=a.absoluteOffset,this.boundingBox=a.boundingBox,this.terminalDistance=a.terminalDistance,this.segments=a.segments,this.length=a.length,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.unscaledWidth=a.unscaledWidth},mxCellState.prototype.clone=function(){var a=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){a.absolutePoints=[];for(var b=0;b<this.absolutePoints.length;b++)a.absolutePoints[b]=this.absolutePoints[b].clone()}return null!=this.origin&&(a.origin=this.origin.clone()),null!=this.absoluteOffset&&(a.absoluteOffset=this.absoluteOffset.clone()),
null!=this.boundingBox&&(a.boundingBox=this.boundingBox.clone()),a.terminalDistance=this.terminalDistance,a.segments=this.segments,a.length=this.length,a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a.unscaledWidth=this.unscaledWidth,a},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(a){this.singleSelection=a},mxGraphSelectionModel.prototype.isSelected=function(a){return null!=a&&mxUtils.indexOf(this.cells,a)>=0},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(a){null!=a&&this.setCells([a])},mxGraphSelectionModel.prototype.setCells=function(a){if(null!=a){this.singleSelection&&(a=[this.getFirstSelectableCell(a)]);for(var b=[],c=0;c<a.length;c++)this.graph.isCellSelectable(a[c])&&b.push(a[c]);this.changeSelection(b,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(a){if(null!=a)for(var b=0;b<a.length;b++)if(this.graph.isCellSelectable(a[b]))return a[b];return null},mxGraphSelectionModel.prototype.addCell=function(a){null!=a&&this.addCells([a])},mxGraphSelectionModel.prototype.addCells=function(a){if(null!=a){var b=null;this.singleSelection&&(b=this.cells,a=[this.getFirstSelectableCell(a)]);for(var c=[],d=0;d<a.length;d++)!this.isSelected(a[d])&&this.graph.isCellSelectable(a[d])&&c.push(a[d]);this.changeSelection(c,b)}},mxGraphSelectionModel.prototype.removeCell=function(a){null!=a&&this.removeCells([a])},mxGraphSelectionModel.prototype.removeCells=function(a){if(null!=a){for(var b=[],c=0;c<a.length;c++)this.isSelected(a[c])&&b.push(a[c]);this.changeSelection(null,b)}},mxGraphSelectionModel.prototype.changeSelection=function(a,b){if(null!=a&&a.length>0&&null!=a[0]||null!=b&&b.length>0&&null!=b[0]){var c=new mxSelectionChange(this,a,b);c.execute();var d=new mxUndoableEdit(this,!1);d.add(c),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",d))}},mxGraphSelectionModel.prototype.cellAdded=function(a){null==a||this.isSelected(a)||this.cells.push(a)},mxGraphSelectionModel.prototype.cellRemoved=function(a){if(null!=a){var b=mxUtils.indexOf(this.cells,a);b>=0&&this.cells.splice(b,1)}},mxSelectionChange.prototype.execute=function(){var a=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var b=0;b<this.removed.length;b++)this.selectionModel.cellRemoved(this.removed[b]);if(null!=this.added)for(var b=0;b<this.added.length;b++)this.selectionModel.cellAdded(this.added[b]);var c=this.added;this.added=this.removed,this.removed=c,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",a),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(a,b){this.graph.labelChanged(a.cell,b,this.trigger)},mxCellEditor.prototype.getInitialValue=function(a,b){var c=mxUtils.htmlEntities(this.graph.getEditingValue(a.cell,b),!1);return mxClient.IS_QUIRKS||8==document.documentMode||9==document.documentMode||10==document.documentMode||(c=mxUtils.replaceTrailingNewlines(c,"<div><br></div>")),c.replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(a){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.installListeners=function(a){mxEvent.addListener(a,"blur",mxUtils.bind(this,function(a){this.blurEnabled&&this.focusLost(a)})),mxEvent.addListener(a,"keydown",mxUtils.bind(this,function(a){mxEvent.isConsumed(a)||(this.isStopEditingEvent(a)?(this.graph.stopEditing(!1),mxEvent.consume(a)):27==a.keyCode&&(this.graph.stopEditing(this.escapeCancelsEditing||mxEvent.isShiftDown(a)),mxEvent.consume(a)))}));var b=mxUtils.bind(this,function(b){null!=this.editingCell&&this.clearOnChange&&a.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=b.keyCode&&46!=b.keyCode)&&(this.clearOnChange=!1,a.innerHTML="")});mxEvent.addListener(a,"keypress",b),mxEvent.addListener(a,"paste",b);var c=mxUtils.bind(this,function(a){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)});mxEvent.addListener(a,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",c),mxEvent.addListener(a,"cut",c),mxEvent.addListener(a,"paste",c);var d=mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input",e=mxUtils.bind(this,function(a){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(a)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(a,d,e),document.documentMode>=9?(mxEvent.addListener(a,"DOMNodeRemoved",e),mxEvent.addListener(a,"DOMNodeInserted",e)):(mxEvent.addListener(a,"cut",e),mxEvent.addListener(a,"paste",e))},mxCellEditor.prototype.isStopEditingEvent=function(a){return 113==a.keyCode||this.graph.isEnterStopsCellEditing()&&13==a.keyCode&&!mxEvent.isControlDown(a)&&!mxEvent.isShiftDown(a)},mxCellEditor.prototype.isEventSource=function(a){return mxEvent.getSource(a)==this.textarea},mxCellEditor.prototype.resize=function(){var a=this.graph.getView().getState(this.editingCell);if(null==a)this.stopEditing(!0);else if(null!=this.textarea){var b=this.graph.getModel().isEdge(a.cell),c=this.graph.getView().scale,d=null;if(this.autoSize&&"fill"!=a.style[mxConstants.STYLE_OVERFLOW]){var e=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_WIDTH,null);if(d=null!=a.text?a.text.margin:null,null==d&&(d=mxUtils.getAlignmentAsPoint(mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),b){if(this.bounds=new mxRectangle(a.absoluteOffset.x,a.absoluteOffset.y,0,0),null!=e){var f=(parseFloat(e)+2)*c;this.bounds.width=f,this.bounds.x+=d.x*f}}else{var g=mxRectangle.fromRectangle(a),h=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),i=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(g=null!=a.shape&&h==mxConstants.ALIGN_CENTER&&i==mxConstants.ALIGN_MIDDLE?a.shape.getLabelBounds(g):g,null!=e&&(g.width=parseFloat(e)*c),!a.view.graph.cellRenderer.legacySpacing||"width"!=a.style[mxConstants.STYLE_OVERFLOW]){var j=parseInt(a.style[mxConstants.STYLE_SPACING]||2)*c,k=(parseInt(a.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*c+j,l=(parseInt(a.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*c+j,m=(parseInt(a.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*c+j,n=(parseInt(a.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*c+j,h=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),i=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);g=new mxRectangle(g.x+n,g.y+k,g.width-(h==mxConstants.ALIGN_CENTER&&null==e?n+l:0),g.height-(i==mxConstants.ALIGN_MIDDLE?k+m:0))}this.bounds=new mxRectangle(g.x+a.absoluteOffset.x,g.y+a.absoluteOffset.y,g.width,g.height)}if(this.graph.isWrapping(a.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()){this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal";var f=Math.round(this.bounds.width/(8==document.documentMode?c:c))+this.wordWrapPadding;this.textarea.style.width=f+"px",this.textarea.scrollWidth>f&&(this.textarea.style.width=this.textarea.scrollWidth+"px")}else this.textarea.style.whiteSpace="nowrap",this.textarea.style.width="";8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto");var o=this.textarea.scrollWidth,p=this.textarea.scrollHeight;8==document.documentMode?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-d.x*(this.bounds.width-(o+1)*c)+o*(c-1)*0+2*(d.x+.5))/c))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-d.y*(this.bounds.height-(p+.5)*c)+p*(c-1)*0+1*Math.abs(d.y+.5))/c))+"px",this.textarea.style.width=Math.round(o*c)+"px",this.textarea.style.height=Math.round(p*c)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-d.x*(this.bounds.width-(o+1)*c)+o*(c-1)*0+2*(d.x+.5)))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-d.y*(this.bounds.height-(p+.5)*c)+p*(c-1)*0+1*Math.abs(d.y+.5)))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-d.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-d.y*(this.bounds.height-4)+(d.y==-1?3:0))+1)+"px")}else this.bounds=this.getEditorBounds(a),this.textarea.style.width=Math.round(this.bounds.width/c)+"px",this.textarea.style.height=Math.round(this.bounds.height/c)+"px",8==document.documentMode||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(a.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=a.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/c)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=a.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""));mxClient.IS_VML?this.textarea.style.zoom=c:(mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+c+","+c+")"+(null==d?"":" translate("+100*d.x+"%,"+100*d.y+"%)")))}},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(a){return null},mxCellEditor.prototype.startEditing=function(a,b){this.stopEditing(!0),null==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var c=this.graph.getView().getState(a);if(null!=c){var e=(this.graph.getView().scale,mxUtils.getValue(c.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)),f=mxUtils.getValue(c.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),g=mxUtils.getValue(c.style,mxConstants.STYLE_FONTCOLOR,"black"),h=mxUtils.getValue(c.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),i=(mxUtils.getValue(c.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,j=(mxUtils.getValue(c.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,k=(mxUtils.getValue(c.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(c),this.textarea.style.textDecoration=k?"underline":"",this.textarea.style.fontWeight=i?"bold":"normal",this.textarea.style.fontStyle=j?"italic":"",this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=f,this.textarea.style.textAlign=h,this.textarea.style.outline="none",this.textarea.style.color=g;var l=this.textDirection=mxUtils.getValue(c.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION);l==mxConstants.TEXT_DIRECTION_AUTO&&(null==c||null==c.text||c.text.dialect==mxConstants.DIALECT_STRICTHTML||mxUtils.isNode(c.text.value)||(l=c.text.getAutoDirection())),l==mxConstants.TEXT_DIRECTION_LTR||l==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",l):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(c,b)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=a,this.trigger=b,this.textNode=null,null!=c.text&&this.isHideLabel(c)&&(this.textNode=c.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(c.cell)||"fill"!=c.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize();try{this.textarea.focus(),this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(a){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.stopEditing=function(a){if(a=a||!1,null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null);var b=a?null:this.graph.view.getState(this.editingCell),c=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,this.textarea.blur(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=b&&this.textarea.innerHTML!=c){this.prepareTextarea();var d=this.getCurrentValue(b);null!=d&&this.applyValue(b,d)}mxEvent.release(this.textarea),this.textarea=null}},mxCellEditor.prototype.prepareTextarea=function(){mxClient.IS_FF&&null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(a){return!0},mxCellEditor.prototype.getMinimumSize=function(a){var b=this.graph.getView().scale;return new mxRectangle(0,0,null==a.text?30:a.text.size*b+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(a){var b=this.graph.getModel().isEdge(a.cell),c=this.graph.getView().scale,d=this.getMinimumSize(a),e=d.width,f=d.height,g=null;if(!b&&a.view.graph.cellRenderer.legacySpacing&&"fill"==a.style[mxConstants.STYLE_OVERFLOW])g=a.shape.getLabelBounds(mxRectangle.fromRectangle(a));else{var h=parseInt(a.style[mxConstants.STYLE_SPACING]||0)*c,i=(parseInt(a.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*c+h,j=(parseInt(a.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*c+h,k=(parseInt(a.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*c+h,l=(parseInt(a.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*c+h;g=new mxRectangle(a.x,a.y,Math.max(e,a.width-l-j),Math.max(f,a.height-i-k));var m=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),n=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(g=null!=a.shape&&m==mxConstants.ALIGN_CENTER&&n==mxConstants.ALIGN_MIDDLE?a.shape.getLabelBounds(g):g,b?(g.x=a.absoluteOffset.x,g.y=a.absoluteOffset.y,null!=a.text&&null!=a.text.boundingBox&&(a.text.boundingBox.x>0&&(g.x=a.text.boundingBox.x),a.text.boundingBox.y>0&&(g.y=a.text.boundingBox.y))):null!=a.text&&null!=a.text.boundingBox&&(g.x=Math.min(g.x,a.text.boundingBox.x),g.y=Math.min(g.y,a.text.boundingBox.y)),g.x+=l,g.y+=i,null!=a.text&&null!=a.text.boundingBox&&(b?(g.width=Math.max(e,a.text.boundingBox.width),g.height=Math.max(f,a.text.boundingBox.height)):(g.width=Math.max(g.width,a.text.boundingBox.width),g.height=Math.max(g.height,a.text.boundingBox.height))),this.graph.getModel().isVertex(a.cell)){var o=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);o==mxConstants.ALIGN_LEFT?g.x-=a.width:o==mxConstants.ALIGN_RIGHT&&(g.x+=a.width);var p=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);p==mxConstants.ALIGN_TOP?g.y-=a.height:p==mxConstants.ALIGN_BOTTOM&&(g.y+=a.height)}}return new mxRectangle(Math.round(g.x),Math.round(g.y),Math.round(g.width),Math.round(g.height))},mxCellEditor.prototype.getEmptyLabelText=function(a){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.defaultShapes=new Object,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(a,b){mxCellRenderer.prototype.defaultShapes[a]=b},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(a){a.shape.dialect=a.view.graph.dialect,this.configureShape(a),a.shape.init(a.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(a){var b=null;if(null!=a.style){var c=mxStencilRegistry.getStencil(a.style[mxConstants.STYLE_SHAPE]);if(null!=c)b=new mxShape(c);else{var d=this.getShapeConstructor(a);b=new d}}return b},mxCellRenderer.prototype.createIndicatorShape=function(a){a.shape.indicatorShape=this.getShape(a.view.graph.getIndicatorShape(a))},mxCellRenderer.prototype.getShape=function(a){return null!=a?mxCellRenderer.prototype.defaultShapes[a]:null},mxCellRenderer.prototype.getShapeConstructor=function(a){var b=this.getShape(a.style[mxConstants.STYLE_SHAPE]);return null==b&&(b=a.view.graph.getModel().isEdge(a.cell)?this.defaultEdgeShape:this.defaultVertexShape),b},mxCellRenderer.prototype.configureShape=function(a){a.shape.apply(a),a.shape.image=a.view.graph.getImage(a),a.shape.indicatorColor=a.view.graph.getIndicatorColor(a),a.shape.indicatorStrokeColor=a.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],a.shape.indicatorGradientColor=a.view.graph.getIndicatorGradientColor(a),a.shape.indicatorDirection=a.style[mxConstants.STYLE_INDICATOR_DIRECTION],a.shape.indicatorImage=a.view.graph.getIndicatorImage(a),this.postConfigureShape(a)},mxCellRenderer.prototype.postConfigureShape=function(a){null!=a.shape&&(this.resolveColor(a,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(a,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(a,"fill",mxConstants.STYLE_FILLCOLOR),this.resolveColor(a,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(a,"gradient",mxConstants.STYLE_GRADIENTCOLOR))},mxCellRenderer.prototype.resolveColor=function(a,b,c){var d=a.shape[b],e=a.view.graph,f=null;if("inherit"==d?f=e.model.getParent(a.cell):"swimlane"==d?(f=null!=e.model.getTerminal(a.cell,!1)?e.model.getTerminal(a.cell,!1):a.cell,f=e.getSwimlane(f),c=e.swimlaneIndicatorColorAttribute):"indicated"==d&&(a.shape[b]=a.shape.indicatorColor),null!=f){var g=e.getView().getState(f);a.shape[b]=null,null!=g&&(null!=g.shape&&"indicatorColor"!=b?a.shape[b]=g.shape[b]:a.shape[b]=g.style[c])}},mxCellRenderer.prototype.getLabelValue=function(a){return a.view.graph.getLabel(a.cell)},mxCellRenderer.prototype.createLabel=function(a,b){var c=a.view.graph;c.getModel().isEdge(a.cell);if(a.style[mxConstants.STYLE_FONTSIZE]>0||null==a.style[mxConstants.STYLE_FONTSIZE]){var e=c.isHtmlLabel(a.cell)||null!=b&&mxUtils.isNode(b);a.text=new this.defaultTextShape(b,new mxRectangle,a.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,c.getVerticalAlign(a),a.style[mxConstants.STYLE_FONTCOLOR],a.style[mxConstants.STYLE_FONTFAMILY],a.style[mxConstants.STYLE_FONTSIZE],a.style[mxConstants.STYLE_FONTSTYLE],a.style[mxConstants.STYLE_SPACING],a.style[mxConstants.STYLE_SPACING_TOP],a.style[mxConstants.STYLE_SPACING_RIGHT],a.style[mxConstants.STYLE_SPACING_BOTTOM],a.style[mxConstants.STYLE_SPACING_LEFT],a.style[mxConstants.STYLE_HORIZONTAL],a.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],a.style[mxConstants.STYLE_LABEL_BORDERCOLOR],c.isWrapping(a.cell)&&c.isHtmlLabel(a.cell),c.isLabelClipped(a.cell),a.style[mxConstants.STYLE_OVERFLOW],a.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(a.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),a.text.opacity=mxUtils.getValue(a.style,mxConstants.STYLE_TEXT_OPACITY,100),a.text.dialect=e?mxConstants.DIALECT_STRICTHTML:a.view.graph.dialect,a.text.style=a.style,a.text.state=a,this.initializeLabel(a,a.text);var f=!1,g=function(b){var d=a;if(mxClient.IS_TOUCH||f){var e=mxEvent.getClientX(b),g=mxEvent.getClientY(b),h=mxUtils.convertPoint(c.container,e,g);d=c.view.getState(c.getCellAt(h.x,h.y))}return d};mxEvent.addGestureListeners(a.text.node,mxUtils.bind(this,function(b){this.isLabelEvent(a,b)&&(c.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(b,a)),f=c.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(b).nodeName)}),mxUtils.bind(this,function(b){this.isLabelEvent(a,b)&&c.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(b,g(b)))}),mxUtils.bind(this,function(b){this.isLabelEvent(a,b)&&(c.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(b,g(b))),f=!1)})),c.nativeDblClickEnabled&&mxEvent.addListener(a.text.node,"dblclick",mxUtils.bind(this,function(b){this.isLabelEvent(a,b)&&(c.dblClick(b,a.cell),mxEvent.consume(b))}))}},mxCellRenderer.prototype.initializeLabel=function(a,b){mxClient.IS_SVG&&mxClient.NO_FO&&b.dialect!=mxConstants.DIALECT_SVG?b.init(a.view.graph.container):b.init(a.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(a){var b=a.view.graph,c=b.getCellOverlays(a.cell),d=null;if(null!=c){d=new mxDictionary;for(var e=0;e<c.length;e++){var f=null!=a.overlays?a.overlays.remove(c[e]):null;if(null==f){var g=new mxImageShape(new mxRectangle,c[e].image.src);g.dialect=a.view.graph.dialect,g.preserveImageAspect=!1,g.overlay=c[e],this.initializeOverlay(a,g),this.installCellOverlayListeners(a,c[e],g),null!=c[e].cursor&&(g.node.style.cursor=c[e].cursor),d.put(c[e],g)}else d.put(c[e],f)}}null!=a.overlays&&a.overlays.visit(function(a,b){b.destroy()}),a.overlays=d},mxCellRenderer.prototype.initializeOverlay=function(a,b){b.init(a.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(a,b,c){var d=a.view.graph;mxEvent.addListener(c.node,"click",function(c){d.isEditing()&&d.stopEditing(!d.isInvokesStopCellEditing()),b.fireEvent(new mxEventObject(mxEvent.CLICK,"event",c,"cell",a.cell))}),mxEvent.addGestureListeners(c.node,function(a){mxEvent.consume(a)},function(b){d.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(b,a))}),mxClient.IS_TOUCH&&mxEvent.addListener(c.node,"touchend",function(c){b.fireEvent(new mxEventObject(mxEvent.CLICK,"event",c,"cell",a.cell))})},mxCellRenderer.prototype.createControl=function(a){var b=a.view.graph,c=b.getFoldingImage(a);if(b.foldingEnabled&&null!=c){if(null==a.control){var d=new mxRectangle(0,0,c.width,c.height);a.control=new mxImageShape(d,c.src),a.control.preserveImageAspect=!1,a.control.dialect=b.dialect,this.initControl(a,a.control,!0,this.createControlClickHandler(a))}}else null!=a.control&&(a.control.destroy(),a.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(a){var b=a.view.graph;return mxUtils.bind(this,function(c){if(this.forceControlClickHandler||b.isEnabled()){var d=!b.isCellCollapsed(a.cell);b.foldCells(d,!1,[a.cell],null,c),mxEvent.consume(c)}})},mxCellRenderer.prototype.initControl=function(a,b,c,d){var e=a.view.graph,f=e.isHtmlLabel(a.cell)&&mxClient.NO_FO&&e.dialect==mxConstants.DIALECT_SVG;f?(b.dialect=mxConstants.DIALECT_PREFERHTML,b.init(e.container),b.node.style.zIndex=1):b.init(a.view.getOverlayPane());var g=b.innerNode||b.node;if(null==d||mxClient.IS_IOS||(e.isEnabled()&&(g.style.cursor="pointer"),mxEvent.addListener(g,"click",d)),c){var h=null;mxEvent.addGestureListeners(g,function(b){h=new mxPoint(mxEvent.getClientX(b),mxEvent.getClientY(b)),e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(b,a)),mxEvent.consume(b)},function(b){e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(b,a))},function(b){e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(b,a)),mxEvent.consume(b)}),null!=d&&mxClient.IS_IOS&&g.addEventListener("touchend",function(a){if(null!=h){var b=e.tolerance;Math.abs(h.x-mxEvent.getClientX(a))<b&&Math.abs(h.y-mxEvent.getClientY(a))<b&&(d.call(d,a),mxEvent.consume(a))}},!0)}return g},mxCellRenderer.prototype.isShapeEvent=function(a,b){return!0},mxCellRenderer.prototype.isLabelEvent=function(a,b){return!0},mxCellRenderer.prototype.installListeners=function(a){var b=a.view.graph,c=function(c){var d=a;if(b.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(c).nodeName||mxClient.IS_TOUCH){var e=mxEvent.getClientX(c),f=mxEvent.getClientY(c),g=mxUtils.convertPoint(b.container,e,f);d=b.view.getState(b.getCellAt(g.x,g.y))}return d};mxEvent.addGestureListeners(a.shape.node,mxUtils.bind(this,function(c){this.isShapeEvent(a,c)&&b.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(c,a))}),mxUtils.bind(this,function(d){this.isShapeEvent(a,d)&&b.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(d,c(d)))}),mxUtils.bind(this,function(d){this.isShapeEvent(a,d)&&b.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(d,c(d)))})),b.nativeDblClickEnabled&&mxEvent.addListener(a.shape.node,"dblclick",mxUtils.bind(this,function(c){this.isShapeEvent(a,c)&&(b.dblClick(c,a.cell),mxEvent.consume(c))}))},mxCellRenderer.prototype.redrawLabel=function(a,b){var c=this.getLabelValue(a);if(null==a.text&&null!=c&&(mxUtils.isNode(c)||c.length>0)?this.createLabel(a,c):null==a.text||null!=c&&0!=c.length||(a.text.destroy(),a.text=null),null!=a.text){var d=a.view.graph;b&&(null!=a.text.lastValue&&this.isTextShapeInvalid(a,a.text)&&(a.text.lastValue=null),a.text.resetStyles(),a.text.apply(a),a.text.valign=d.getVerticalAlign(a));var e=this.getLabelBounds(a),f=d.isWrapping(a.cell),g=d.isLabelClipped(a.cell),h=a.view.graph.isHtmlLabel(a.cell)||null!=c&&mxUtils.isNode(c),i=h?mxConstants.DIALECT_STRICTHTML:a.view.graph.dialect,j=a.style[mxConstants.STYLE_OVERFLOW]||"visible";if(b||a.text.value!=c||a.text.isWrapping!=f||a.text.overflow!=j||a.text.isClipping!=g||a.text.scale!=this.getTextScale(a)||a.text.dialect!=i||!a.text.bounds.equals(e)){a.text.dialect=i,a.text.value=c,a.text.bounds=e,a.text.scale=this.getTextScale(a),a.text.wrap=f,a.text.clipped=g,a.text.overflow=j;var k=a.text.node.style.visibility;this.redrawLabelShape(a.text),a.text.node.style.visibility=k}}},mxCellRenderer.prototype.isTextShapeInvalid=function(a,b){function c(c,d,e){return b[c]!=(a.style[d]||e)}return c("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||c("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||c("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||c("color",mxConstants.STYLE_FONTCOLOR,"black")||c("align",mxConstants.STYLE_ALIGN,"")||c("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||c("spacing",mxConstants.STYLE_SPACING,2)||c("spacingTop",mxConstants.STYLE_SPACING_TOP,2)||c("spacingRight",mxConstants.STYLE_SPACING_RIGHT,2)||c("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,2)||c("spacingLeft",mxConstants.STYLE_SPACING_LEFT,2)||c("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||c("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||c("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||c("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||c("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(a){a.redraw()},mxCellRenderer.prototype.getTextScale=function(a){return a.view.scale},mxCellRenderer.prototype.getLabelBounds=function(a){var b=a.view.graph,c=a.view.scale,d=b.getModel().isEdge(a.cell),e=new mxRectangle(a.absoluteOffset.x,a.absoluteOffset.y);if(d){var f=a.text.getSpacing();e.x+=f.x*c,e.y+=f.y*c;var g=b.getCellGeometry(a.cell);null!=g&&(e.width=Math.max(0,g.width*c),e.height=Math.max(0,g.height*c))}else{if(a.text.isPaintBoundsInverted()){var h=e.x;e.x=e.y,e.y=h}e.x+=a.x,e.y+=a.y,e.width=Math.max(1,a.width),e.height=Math.max(1,a.height);var i=mxUtils.getValue(a.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE);if(i!=mxConstants.NONE&&""!=i){var j=parseFloat(mxUtils.getValue(a.style,mxConstants.STYLE_STROKEWIDTH,1))*c,k=1+Math.floor((j-1)/2),l=Math.floor(j+1);e.x+=k,e.y+=k,e.width-=l,e.height-=l}}if(a.text.isPaintBoundsInverted()){var m=(a.width-a.height)/2;e.x+=m,e.y-=m;var h=e.width;e.width=e.height,e.height=h}if(null!=a.shape){var n=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),o=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);n==mxConstants.ALIGN_CENTER&&o==mxConstants.ALIGN_MIDDLE&&(e=a.shape.getLabelBounds(e))}var p=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_WIDTH,null);
  return null!=p&&(e.width=parseFloat(p)*c),d||this.rotateLabelBounds(a,e),e},mxCellRenderer.prototype.rotateLabelBounds=function(a,b){if(b.y-=a.text.margin.y*b.height,b.x-=a.text.margin.x*b.width,!this.legacySpacing||"fill"!=a.style[mxConstants.STYLE_OVERFLOW]&&"width"!=a.style[mxConstants.STYLE_OVERFLOW]){var c=a.view.scale,d=a.text.getSpacing();b.x+=d.x*c,b.y+=d.y*c;var e=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),f=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),g=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_WIDTH,null);b.width=Math.max(0,b.width-(e==mxConstants.ALIGN_CENTER&&null==g?a.text.spacingLeft*c+a.text.spacingRight*c:0)),b.height=Math.max(0,b.height-(f==mxConstants.ALIGN_MIDDLE?a.text.spacingTop*c+a.text.spacingBottom*c:0))}var h=a.text.getTextRotation();if(0!=h&&null!=a&&a.view.graph.model.isVertex(a.cell)){var i=a.getCenterX(),j=a.getCenterY();if(b.x!=i||b.y!=j){var k=h*(Math.PI/180);pt=mxUtils.getRotatedPoint(new mxPoint(b.x,b.y),Math.cos(k),Math.sin(k),new mxPoint(i,j)),b.x=pt.x,b.y=pt.y}}},mxCellRenderer.prototype.redrawCellOverlays=function(a,b){if(this.createCellOverlays(a),null!=a.overlays){var c=mxUtils.mod(mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0),90),d=mxUtils.toRadians(c),e=Math.cos(d),f=Math.sin(d);a.overlays.visit(function(d,g){var h=g.overlay.getBounds(a);if(!a.view.graph.getModel().isEdge(a.cell)&&null!=a.shape&&0!=c){var i=h.getCenterX(),j=h.getCenterY(),k=mxUtils.getRotatedPoint(new mxPoint(i,j),e,f,new mxPoint(a.getCenterX(),a.getCenterY()));i=k.x,j=k.y,h.x=Math.round(i-h.width/2),h.y=Math.round(j-h.height/2)}!b&&null!=g.bounds&&g.scale==a.view.scale&&g.bounds.equals(h)||(g.bounds=h,g.scale=a.view.scale,g.redraw())})}},mxCellRenderer.prototype.redrawControl=function(a,b){var c=a.view.graph.getFoldingImage(a);if(null!=a.control&&null!=c){var d=this.getControlBounds(a,c.width,c.height),e=this.legacyControlPosition?mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0):a.shape.getTextRotation(),f=a.view.scale;!b&&a.control.scale==f&&a.control.bounds.equals(d)&&a.control.rotation==e||(a.control.rotation=e,a.control.bounds=d,a.control.scale=f,a.control.redraw())}},mxCellRenderer.prototype.getControlBounds=function(a,b,c){if(null!=a.control){var d=a.view.scale,e=a.getCenterX(),f=a.getCenterY();if(!a.view.graph.getModel().isEdge(a.cell)&&(e=a.x+b*d,f=a.y+c*d,null!=a.shape)){var g=a.shape.getShapeRotation();if(this.legacyControlPosition)g=mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0);else if(a.shape.isPaintBoundsInverted()){var h=(a.width-a.height)/2;e+=h,f-=h}if(0!=g){var i=mxUtils.toRadians(g),j=Math.cos(i),k=Math.sin(i),l=mxUtils.getRotatedPoint(new mxPoint(e,f),j,k,new mxPoint(a.getCenterX(),a.getCenterY()));e=l.x,f=l.y}}return a.view.graph.getModel().isEdge(a.cell)?new mxRectangle(Math.round(e-b/2*d),Math.round(f-c/2*d),Math.round(b*d),Math.round(c*d)):new mxRectangle(Math.round(e-b/2*d),Math.round(f-c/2*d),Math.round(b*d),Math.round(c*d))}return null},mxCellRenderer.prototype.insertStateAfter=function(a,b,c){for(var d=this.getShapesForState(a),e=0;e<d.length;e++)if(null!=d[e]&&null!=d[e].node){var f=d[e].node.parentNode!=a.view.getDrawPane()&&d[e].node.parentNode!=a.view.getOverlayPane(),g=f?c:b;if(null!=g&&g.nextSibling!=d[e].node)null==g.nextSibling?g.parentNode.appendChild(d[e].node):g.parentNode.insertBefore(d[e].node,g.nextSibling);else if(null==g)if(d[e].node.parentNode==a.view.graph.container){for(var h=a.view.canvas;null!=h&&h.parentNode!=a.view.graph.container;)h=h.parentNode;null!=h&&null!=h.nextSibling?h.nextSibling!=d[e].node&&d[e].node.parentNode.insertBefore(d[e].node,h.nextSibling):d[e].node.parentNode.appendChild(d[e].node)}else null!=d[e].node.parentNode.firstChild&&d[e].node.parentNode.firstChild!=d[e].node&&d[e].node.parentNode.insertBefore(d[e].node,d[e].node.parentNode.firstChild);f?c=d[e].node:b=d[e].node}return[b,c]},mxCellRenderer.prototype.getShapesForState=function(a){return[a.shape,a.text,a.control]},mxCellRenderer.prototype.redraw=function(a,b,c){var d=this.redrawShape(a,b,c);null==a.shape||null!=c&&!c||(this.redrawLabel(a,d),this.redrawCellOverlays(a,d),this.redrawControl(a,d))},mxCellRenderer.prototype.redrawShape=function(a,b,c){var d=a.view.graph.model,e=!1;return null!=a.shape&&null!=a.shape.style&&null!=a.style&&a.shape.style[mxConstants.STYLE_SHAPE]!=a.style[mxConstants.STYLE_SHAPE]&&(a.shape.destroy(),a.shape=null),null==a.shape&&null!=a.view.graph.container&&a.cell!=a.view.currentRoot&&(d.isVertex(a.cell)||d.isEdge(a.cell))?(a.shape=this.createShape(a),null!=a.shape&&(a.shape.antiAlias=this.antiAlias,this.createIndicatorShape(a),this.initializeShape(a),this.createCellOverlays(a),this.installListeners(a),a.view.graph.selectionCellsHandler.updateHandler(a))):null==a.shape||mxUtils.equalEntries(a.shape.style,a.style)||(a.shape.resetStyles(),this.configureShape(a),a.view.graph.selectionCellsHandler.updateHandler(a),b=!0),null!=a.shape&&(this.createControl(a),(b||null==a.shape.bounds||a.shape.scale!=a.view.scale||null==a.absolutePoints&&!a.shape.bounds.equals(a)||null!=a.absolutePoints&&!mxUtils.equalPoints(a.shape.points,a.absolutePoints))&&(null!=a.absolutePoints?(a.shape.points=a.absolutePoints.slice(),a.shape.bounds=null):(a.shape.points=null,a.shape.bounds=new mxRectangle(a.x,a.y,a.width,a.height)),a.shape.scale=a.view.scale,null==c||c?a.shape.redraw():a.shape.updateBoundingBox(),e=!0)),e},mxCellRenderer.prototype.destroy=function(a){null!=a.shape&&(null!=a.text&&(a.text.destroy(),a.text=null),null!=a.overlays&&(a.overlays.visit(function(a,b){b.destroy()}),a.overlays=null),null!=a.control&&(a.control.destroy(),a.control=null),a.shape.destroy(),a.shape=null)};var mxEdgeStyle={EntityRelation:function(a,b,c,d,e){var f=a.view,g=f.graph,h=mxUtils.getValue(a.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*f.scale,i=a.absolutePoints,j=i[0],k=i[i.length-1],l=!1;if(null!=j)b=new mxCellState,b.x=j.x,b.y=j.y;else{if(null==b)return;var m=mxUtils.getPortConstraints(b,a,!0,mxConstants.DIRECTION_MASK_NONE);if(m!=mxConstants.DIRECTION_MASK_NONE&&m!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST)l=m==mxConstants.DIRECTION_MASK_WEST;else{var n=g.getCellGeometry(b.cell);n.relative?l=n.x<=.5:null!=c&&(l=c.x+c.width<b.x)}}var o=!0;if(null!=k)c=new mxCellState,c.x=k.x,c.y=k.y;else if(null!=c){var m=mxUtils.getPortConstraints(c,a,!1,mxConstants.DIRECTION_MASK_NONE);if(m!=mxConstants.DIRECTION_MASK_NONE&&m!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST)o=m==mxConstants.DIRECTION_MASK_WEST;else{var p=g.getCellGeometry(c.cell);p.relative?o=p.x<=.5:null!=b&&(o=b.x+b.width<c.x)}}if(null!=b&&null!=c){var q=l?b.x:b.x+b.width,r=f.getRoutingCenterY(b),s=o?c.x:c.x+c.width,t=f.getRoutingCenterY(c),u=h,v=l?-u:u,w=new mxPoint(q+v,r);v=o?-u:u;var x=new mxPoint(s+v,t);if(l==o){var y=l?Math.min(q,s)-h:Math.max(q,s)+h;e.push(new mxPoint(y,r)),e.push(new mxPoint(y,t))}else if(w.x<x.x==l){var z=r+(t-r)/2;e.push(w),e.push(new mxPoint(w.x,z)),e.push(new mxPoint(x.x,z)),e.push(x)}else e.push(w),e.push(x)}},Loop:function(a,b,c,d,e){var f=a.absolutePoints,g=f[0],h=f[f.length-1];if(null==g||null==h){if(null!=b){var k=a.view,l=k.graph,j=null!=d&&d.length>0?d[0]:null;null!=j&&(j=k.transformControlPoint(a,j),mxUtils.contains(b,j.x,j.y)&&(j=null));var m=0,n=0,o=0,p=0,q=mxUtils.getValue(a.style,mxConstants.STYLE_SEGMENT,l.gridSize)*k.scale,r=mxUtils.getValue(a.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST);r==mxConstants.DIRECTION_NORTH||r==mxConstants.DIRECTION_SOUTH?(m=k.getRoutingCenterX(b),n=q):(o=k.getRoutingCenterY(b),p=q),null==j||j.x<b.x||j.x>b.x+b.width?null!=j?(m=j.x,p=Math.max(Math.abs(o-j.y),p)):r==mxConstants.DIRECTION_NORTH?o=b.y-2*n:r==mxConstants.DIRECTION_SOUTH?o=b.y+b.height+2*n:m=r==mxConstants.DIRECTION_EAST?b.x-2*p:b.x+b.width+2*p:null!=j&&(m=k.getRoutingCenterX(b),n=Math.max(Math.abs(m-j.x),p),o=j.y,p=0),e.push(new mxPoint(m-n,o-p)),e.push(new mxPoint(m+n,o+p))}}else if(null!=d&&d.length>0)for(var i=0;i<d.length;i++){var j=d[i];j=a.view.transformControlPoint(a,j),e.push(new mxPoint(j.x,j.y))}},ElbowConnector:function(a,b,c,d,e){var f=null!=d&&d.length>0?d[0]:null,g=!1,h=!1;if(null!=b&&null!=c)if(null!=f){var i=Math.min(b.x,c.x),j=Math.max(b.x+b.width,c.x+c.width),k=Math.min(b.y,c.y),l=Math.max(b.y+b.height,c.y+c.height);f=a.view.transformControlPoint(a,f),g=f.y<k||f.y>l,h=f.x<i||f.x>j}else{var i=Math.max(b.x,c.x),j=Math.min(b.x+b.width,c.x+c.width);if(g=i==j,!g){var k=Math.max(b.y,c.y),l=Math.min(b.y+b.height,c.y+c.height);h=k==l}}h||!g&&a.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(a,b,c,d,e):mxEdgeStyle.TopToBottom(a,b,c,d,e)},SideToSide:function(a,b,c,d,e){var f=a.view,g=null!=d&&d.length>0?d[0]:null,h=a.absolutePoints,i=h[0],j=h[h.length-1];if(null!=g&&(g=f.transformControlPoint(a,g)),null!=i&&(b=new mxCellState,b.x=i.x,b.y=i.y),null!=j&&(c=new mxCellState,c.x=j.x,c.y=j.y),null!=b&&null!=c){var k=Math.max(b.x,c.x),l=Math.min(b.x+b.width,c.x+c.width),m=null!=g?g.x:Math.round(l+(k-l)/2),n=f.getRoutingCenterY(b),o=f.getRoutingCenterY(c);if(null!=g&&(g.y>=b.y&&g.y<=b.y+b.height&&(n=g.y),g.y>=c.y&&g.y<=c.y+c.height&&(o=g.y)),mxUtils.contains(c,m,n)||mxUtils.contains(b,m,n)||e.push(new mxPoint(m,n)),mxUtils.contains(c,m,o)||mxUtils.contains(b,m,o)||e.push(new mxPoint(m,o)),1==e.length)if(null!=g)mxUtils.contains(c,m,g.y)||mxUtils.contains(b,m,g.y)||e.push(new mxPoint(m,g.y));else{var p=Math.max(b.y,c.y),q=Math.min(b.y+b.height,c.y+c.height);e.push(new mxPoint(m,p+(q-p)/2))}}},TopToBottom:function(a,b,c,d,e){var f=a.view,g=null!=d&&d.length>0?d[0]:null,h=a.absolutePoints,i=h[0],j=h[h.length-1];if(null!=g&&(g=f.transformControlPoint(a,g)),null!=i&&(b=new mxCellState,b.x=i.x,b.y=i.y),null!=j&&(c=new mxCellState,c.x=j.x,c.y=j.y),null!=b&&null!=c){var k=Math.max(b.y,c.y),l=Math.min(b.y+b.height,c.y+c.height),m=f.getRoutingCenterX(b);null!=g&&g.x>=b.x&&g.x<=b.x+b.width&&(m=g.x);var n=null!=g?g.y:Math.round(l+(k-l)/2);if(mxUtils.contains(c,m,n)||mxUtils.contains(b,m,n)||e.push(new mxPoint(m,n)),m=null!=g&&g.x>=c.x&&g.x<=c.x+c.width?g.x:f.getRoutingCenterX(c),mxUtils.contains(c,m,n)||mxUtils.contains(b,m,n)||e.push(new mxPoint(m,n)),1==e.length)if(null!=g&&1==e.length)mxUtils.contains(c,g.x,n)||mxUtils.contains(b,g.x,n)||e.push(new mxPoint(g.x,n));else{var o=Math.max(b.x,c.x),p=Math.min(b.x+b.width,c.x+c.width);e.push(new mxPoint(o+(p-o)/2,n))}}},SegmentConnector:function(a,b,c,d,e){function k(a){return(null==h||Math.abs(h.x-a.x)>=g||Math.abs(h.y-a.y)>=g)&&(e.push(a),h=a),h}var f=a.absolutePoints,g=Math.max(1,a.view.scale),h=e.length>0?e[0]:null,i=!0,j=null,l=f[0];null==l&&null!=b?l=new mxPoint(a.view.getRoutingCenterX(b),a.view.getRoutingCenterY(b)):null!=l&&(l=l.clone()),l.x=Math.round(l.x),l.y=Math.round(l.y);var m=f.length-1;if(null!=d&&d.length>0){for(var n=[],o=0;o<d.length;o++){var p=a.view.transformControlPoint(a,d[o]);null!=p&&(p.x=Math.round(p.x),p.y=Math.round(p.y),n.push(p))}if(0==n.length)return;d=n,null!=l&&null!=d[0]&&(Math.abs(d[0].x-l.x)<g&&(d[0].x=l.x),Math.abs(d[0].y-l.y)<g&&(d[0].y=l.y));var q=f[m];null!=q&&null!=d[d.length-1]&&(Math.abs(d[d.length-1].x-q.x)<g&&(d[d.length-1].x=q.x),Math.abs(d[d.length-1].y-q.y)<g&&(d[d.length-1].y=q.y)),j=d[0];var r=b,s=f[0],t=!1,u=!1,v=j;null!=s&&(s.x=Math.round(s.x),s.y=Math.round(s.y),r=null);for(var o=0;o<2;o++){var w=null!=s&&s.x==v.x,x=null!=s&&s.y==v.y,y=null!=r&&v.y>=r.y&&v.y<=r.y+r.height,z=null!=r&&v.x>=r.x&&v.x<=r.x+r.width;if(t=x||null==s&&y,u=w||null==s&&z,0==o&&(t&&u||w&&x));else{if(null!=s&&!x&&!w&&(y||z)){i=!y;break}if(u||t){i=t,1==o&&(i=d.length%2==0?t:u);break}}r=c,s=f[m],null!=s&&(s.x=Math.round(s.x),s.y=Math.round(s.y),r=null),v=d[d.length-1],w&&x&&(d=d.slice(1))}i&&(null!=f[0]&&f[0].y!=j.y||null==f[0]&&null!=b&&(j.y<b.y||j.y>b.y+b.height))?k(new mxPoint(l.x,j.y)):!i&&(null!=f[0]&&f[0].x!=j.x||null==f[0]&&null!=b&&(j.x<b.x||j.x>b.x+b.width))&&k(new mxPoint(j.x,l.y)),i?l.y=j.y:l.x=j.x;for(var o=0;o<d.length;o++)i=!i,j=d[o],i?l.y=j.y:l.x=j.x,k(l.clone())}else j=l,i=!0;if(l=f[m],null==l&&null!=c&&(l=new mxPoint(a.view.getRoutingCenterX(c),a.view.getRoutingCenterY(c))),null!=l&&(l.x=Math.round(l.x),l.y=Math.round(l.y),null!=j&&(i&&(null!=f[m]&&f[m].y!=j.y||null==f[m]&&null!=c&&(j.y<c.y||j.y>c.y+c.height))?k(new mxPoint(l.x,j.y)):!i&&(null!=f[m]&&f[m].x!=j.x||null==f[m]&&null!=c&&(j.x<c.x||j.x>c.x+c.width))&&k(new mxPoint(j.x,l.y)))),null==f[0]&&null!=b)for(;e.length>1&&null!=e[1]&&mxUtils.contains(b,e[1].x,e[1].y);)e.splice(1,1);if(null==f[m]&&null!=c)for(;e.length>1&&null!=e[e.length-1]&&mxUtils.contains(c,e[e.length-1].x,e[e.length-1].y);)e.splice(e.length-1,1);null!=q&&null!=e[e.length-1]&&Math.abs(q.x-e[e.length-1].x)<g&&Math.abs(q.y-e[e.length-1].y)<g&&(e.splice(e.length-1,1),null!=e[e.length-1]&&(Math.abs(e[e.length-1].x-q.x)<g&&(e[e.length-1].x=q.x),Math.abs(e[e.length-1].y-q.y)<g&&(e[e.length-1].y=q.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(a,b,c,d,e){var f=mxUtils.getValue(a.style,e?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(a.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));if("auto"==f){var g=mxUtils.getValue(a.style,e?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE);if(g!=mxConstants.NONE){var h=mxUtils.getNumber(a.style,e?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);f=Math.max(2,Math.ceil((h+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer}else f=2*mxEdgeStyle.orthBuffer}return f},OrthConnector:function(a,b,c,d,e){var f=a.view.graph,g=null!=b&&f.getModel().isEdge(b.cell),h=null!=c&&f.getModel().isEdge(c.cell),i=a.absolutePoints,j=i[0],k=i[i.length-1],l=null!=b?b.x:j.x,m=null!=b?b.y:j.y,n=null!=b?b.width:0,o=null!=b?b.height:0,p=null!=c?c.x:k.x,q=null!=c?c.y:k.y,r=null!=c?c.width:0,s=null!=c?c.height:0,t=a.view.scale*mxEdgeStyle.getJettySize(a,b,c,d,!0),u=a.view.scale*mxEdgeStyle.getJettySize(a,b,c,d,!1);null!=b&&c==b&&(u=Math.max(t,u),t=u);var v=u+t,w=!1;if(null!=j&&null!=k){var x=k.x-j.x,y=k.y-j.y;w=x*x+y*y<v*v}if(w||mxEdgeStyle.orthPointsFallback&&null!=d&&d.length>0||g||h)return void mxEdgeStyle.SegmentConnector(a,b,c,d,e);var z=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],A=0;if(null!=b&&(z[0]=mxUtils.getPortConstraints(b,a,!0,mxConstants.DIRECTION_MASK_ALL),A=mxUtils.getValue(b.style,mxConstants.STYLE_ROTATION,0),0!=A)){var B=mxUtils.getBoundingBox(new mxRectangle(l,m,n,o),A);l=B.x,m=B.y,n=B.width,o=B.height}if(null!=c&&(z[1]=mxUtils.getPortConstraints(c,a,!1,mxConstants.DIRECTION_MASK_ALL),A=mxUtils.getValue(c.style,mxConstants.STYLE_ROTATION,0),0!=A)){var B=mxUtils.getBoundingBox(new mxRectangle(p,q,r,s),A);p=B.x,q=B.y,r=B.width,s=B.height}l=Math.round(10*l)/10,m=Math.round(10*m)/10,n=Math.round(10*n)/10,o=Math.round(10*o)/10,p=Math.round(10*p)/10,q=Math.round(10*q)/10,r=Math.round(10*r)/10,s=Math.round(10*s)/10;for(var C=[0,0],D=[[l,m,n,o],[p,q,r,s]],E=[t,u],F=0;F<2;F++)mxEdgeStyle.limits[F][1]=D[F][0]-E[F],mxEdgeStyle.limits[F][2]=D[F][1]-E[F],mxEdgeStyle.limits[F][4]=D[F][0]+D[F][2]+E[F],mxEdgeStyle.limits[F][8]=D[F][1]+D[F][3]+E[F];var G=D[0][0]+D[0][2]/2,H=D[0][1]+D[0][3]/2,I=D[1][0]+D[1][2]/2,J=D[1][1]+D[1][3]/2,x=G-I,y=H-J,K=0;x<0?K=y<0?2:1:y<=0&&(K=3,0==x&&(K=2));var L=null;null!=b&&(L=j);for(var M=[[.5,.5],[.5,.5]],F=0;F<2;F++)null!=L&&(M[F][0]=(L.x-D[F][0])/D[F][2],Math.abs(L.x-D[F][0])<=1?C[F]=mxConstants.DIRECTION_MASK_WEST:Math.abs(L.x-D[F][0]-D[F][2])<=1&&(C[F]=mxConstants.DIRECTION_MASK_EAST),M[F][1]=(L.y-D[F][1])/D[F][3],Math.abs(L.y-D[F][1])<=1?C[F]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(L.y-D[F][1]-D[F][3])<=1&&(C[F]=mxConstants.DIRECTION_MASK_SOUTH)),L=null,null!=c&&(L=k);var N=D[0][1]-(D[1][1]+D[1][3]),O=D[0][0]-(D[1][0]+D[1][2]),P=D[1][1]-(D[0][1]+D[0][3]),Q=D[1][0]-(D[0][0]+D[0][2]);mxEdgeStyle.vertexSeperations[1]=Math.max(O-v,0),mxEdgeStyle.vertexSeperations[2]=Math.max(N-v,0),mxEdgeStyle.vertexSeperations[4]=Math.max(P-v,0),mxEdgeStyle.vertexSeperations[3]=Math.max(Q-v,0);var R=[],S=[],T=[];S[0]=O>=Q?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,T[0]=N>=P?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,S[1]=mxUtils.reversePortConstraints(S[0]),T[1]=mxUtils.reversePortConstraints(T[0]);for(var U=O>=Q?O:Q,V=N>=P?N:P,W=[[0,0],[0,0]],X=!1,F=0;F<2;F++)0==C[F]&&(0==(S[F]&z[F])&&(S[F]=mxUtils.reversePortConstraints(S[F])),0==(T[F]&z[F])&&(T[F]=mxUtils.reversePortConstraints(T[F])),W[F][0]=T[F],W[F][1]=S[F]);V>0&&U>0&&((S[0]&z[0])>0&&(T[1]&z[1])>0?(W[0][0]=S[0],W[0][1]=T[0],W[1][0]=T[1],W[1][1]=S[1],X=!0):(T[0]&z[0])>0&&(S[1]&z[1])>0&&(W[0][0]=T[0],W[0][1]=S[0],W[1][0]=S[1],W[1][1]=T[1],X=!0)),V>0&&!X&&(W[0][0]=T[0],W[0][1]=S[0],W[1][0]=T[1],W[1][1]=S[1],X=!0),U>0&&!X&&(W[0][0]=S[0],W[0][1]=T[0],W[1][0]=S[1],W[1][1]=T[1],X=!0);for(var F=0;F<2;F++)0==C[F]&&(0==(W[F][0]&z[F])&&(W[F][0]=W[F][1]),R[F]=W[F][0]&z[F],R[F]|=(W[F][1]&z[F])<<8,R[F]|=(W[1-F][F]&z[F])<<16,R[F]|=(W[1-F][1-F]&z[F])<<24,0==(15&R[F])&&(R[F]=R[F]<<8),0==(3840&R[F])&&(R[F]=15&R[F]|R[F]>>8),0==(983040&R[F])&&(R[F]=65535&R[F]|(251658240&R[F])>>8),C[F]=15&R[F],z[F]!=mxConstants.DIRECTION_MASK_WEST&&z[F]!=mxConstants.DIRECTION_MASK_NORTH&&z[F]!=mxConstants.DIRECTION_MASK_EAST&&z[F]!=mxConstants.DIRECTION_MASK_SOUTH||(C[F]=z[F]));var Y=C[0]==mxConstants.DIRECTION_MASK_EAST?3:C[0],Z=C[1]==mxConstants.DIRECTION_MASK_EAST?3:C[1];Y-=K,Z-=K,Y<1&&(Y+=4),Z<1&&(Z+=4);var $=mxEdgeStyle.routePatterns[Y-1][Z-1];switch(mxEdgeStyle.wayPoints1[0][0]=D[0][0],mxEdgeStyle.wayPoints1[0][1]=D[0][1],C[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=t,mxEdgeStyle.wayPoints1[0][1]+=M[0][1]*D[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=M[0][0]*D[0][2],mxEdgeStyle.wayPoints1[0][1]+=D[0][3]+t;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=D[0][2]+t,mxEdgeStyle.wayPoints1[0][1]+=M[0][1]*D[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=M[0][0]*D[0][2],mxEdgeStyle.wayPoints1[0][1]-=t}for(var _=0,aa=(C[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1,ba=aa,ca=0,F=0;F<$.length;F++){var da=15&$[F],ea=da==mxConstants.DIRECTION_MASK_EAST?3:da;ea+=K,ea>4&&(ea-=4);var fa=mxEdgeStyle.dirVectors[ea-1];ca=ea%2>0?0:1,ca!=aa&&(_++,mxEdgeStyle.wayPoints1[_][0]=mxEdgeStyle.wayPoints1[_-1][0],mxEdgeStyle.wayPoints1[_][1]=mxEdgeStyle.wayPoints1[_-1][1]);var ga=($[F]&mxEdgeStyle.TARGET_MASK)>0,ha=($[F]&mxEdgeStyle.SOURCE_MASK)>0,ia=($[F]&mxEdgeStyle.SIDE_MASK)>>5;ia<<=K,ia>15&&(ia>>=4);var ja=($[F]&mxEdgeStyle.CENTER_MASK)>0;if((ha||ga)&&ia<9){var ka=0,la=ha?0:1;if(ka=ja&&0==ca?D[la][0]+M[la][0]*D[la][2]:ja?D[la][1]+M[la][1]*D[la][3]:mxEdgeStyle.limits[la][ia],0==ca){var ma=mxEdgeStyle.wayPoints1[_][0],na=(ka-ma)*fa[0];na>0&&(mxEdgeStyle.wayPoints1[_][0]+=fa[0]*na)}else{var oa=mxEdgeStyle.wayPoints1[_][1],pa=(ka-oa)*fa[1];pa>0&&(mxEdgeStyle.wayPoints1[_][1]+=fa[1]*pa)}}else ja&&(mxEdgeStyle.wayPoints1[_][0]+=fa[0]*Math.abs(mxEdgeStyle.vertexSeperations[ea]/2),mxEdgeStyle.wayPoints1[_][1]+=fa[1]*Math.abs(mxEdgeStyle.vertexSeperations[ea]/2));_>0&&mxEdgeStyle.wayPoints1[_][ca]==mxEdgeStyle.wayPoints1[_-1][ca]?_--:aa=ca}for(var F=0;F<=_;F++){if(F==_){var qa=(C[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1,ra=qa==ba?0:1;if(ra!=(_+1)%2)break}e.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[F][0]),Math.round(mxEdgeStyle.wayPoints1[F][1])))}for(var sa=1;sa<e.length;)null==e[sa-1]||null==e[sa]||e[sa-1].x!=e[sa].x||e[sa-1].y!=e[sa].y?sa++:e.splice(sa,1)},getRoutePattern:function(a,b,c,d){var e=a[0]==mxConstants.DIRECTION_MASK_EAST?3:a[0],f=a[1]==mxConstants.DIRECTION_MASK_EAST?3:a[1];e-=b,f-=b,e<1&&(e+=4),f<1&&(f+=4);var g=routePatterns[e-1][f-1];return 0!=c&&0!=d||null!=inlineRoutePatterns[e-1][f-1]&&(g=inlineRoutePatterns[e-1][f-1]),g}},mxStyleRegistry={values:[],putValue:function(a,b){mxStyleRegistry.values[a]=b},getValue:function(a){return mxStyleRegistry.values[a]},getName:function(a){for(var b in mxStyleRegistry.values)if(mxStyleRegistry.values[b]==a)return b;return null}};mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.optimizeVmlReflows=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(a){this.graphBounds=a},mxGraphView.prototype.getBounds=function(a){var b=null;if(null!=a&&a.length>0)for(var c=this.graph.getModel(),d=0;d<a.length;d++)if(c.isVertex(a[d])||c.isEdge(a[d])){var e=this.getState(a[d]);null!=e&&(null==b?b=mxRectangle.fromRectangle(e):b.add(e))}return b},mxGraphView.prototype.setCurrentRoot=function(a){if(this.currentRoot!=a){var b=new mxCurrentRootChange(this,a);b.execute();var c=new mxUndoableEdit(this,!1);c.add(b),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",c)),this.graph.sizeDidChange()}return a},mxGraphView.prototype.scaleAndTranslate=function(a,b,c){var d=this.scale,e=new mxPoint(this.translate.x,this.translate.y);this.scale==a&&this.translate.x==b&&this.translate.y==c||(this.scale=a,this.translate.x=b,this.translate.y=c,this.isEventsEnabled()&&(this.revalidate(),this.graph.sizeDidChange())),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",a,"previousScale",d,"translate",this.translate,"previousTranslate",e))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(a){var b=this.scale;this.scale!=a&&(this.scale=a,this.isEventsEnabled()&&(this.revalidate(),this.graph.sizeDidChange())),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",a,"previousScale",b))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(a,b){var c=new mxPoint(this.translate.x,this.translate.y);this.translate.x==a&&this.translate.y==b||(this.translate.x=a,this.translate.y=b,this.isEventsEnabled()&&(this.revalidate(),this.graph.sizeDidChange())),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",c))},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(a,b,c){var d=this.graph.getModel();if(a=a||d.getRoot(),b=null!=b&&b,c=null==c||c,this.removeState(a),c&&(b||a!=this.currentRoot))for(var e=d.getChildCount(a),f=0;f<e;f++)this.clear(d.getChildAt(a,f),b);else this.invalidate(a)},mxGraphView.prototype.invalidate=function(a,b,c){var d=this.graph.getModel();a=a||d.getRoot(),b=null==b||b,c=null==c||c;var e=this.getState(a);if(null!=e&&(e.invalid=!0),!a.invalidating){if(a.invalidating=!0,b)for(var f=d.getChildCount(a),g=0;g<f;g++){var h=d.getChildAt(a,g);this.invalidate(h,b,c)}if(c)for(var i=d.getEdgeCount(a),g=0;g<i;g++)this.invalidate(d.getEdgeAt(a,g),b,c);delete a.invalidating}},mxGraphView.prototype.validate=function(a){var b=mxLog.enter("mxGraphView.validate");window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var c=null;this.optimizeVmlReflows&&null!=this.canvas&&null==this.textDiv&&(8==document.documentMode&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),c=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var d=this.getBoundingBox(this.validateCellState(this.validateCell(a||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot()))));this.setGraphBounds(null!=d?d:this.getEmptyBounds()),this.validateBackground(),null!=c&&(this.canvas.style.display=c,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",b)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(a,b){b=null==b||b;var c=null;if(null!=a&&(null!=a.shape&&null!=a.shape.boundingBox&&(c=a.shape.boundingBox.clone()),null!=a.text&&null!=a.text.boundingBox&&(null!=c?c.add(a.text.boundingBox):c=a.text.boundingBox.clone()),b))for(var d=this.graph.getModel(),e=d.getChildCount(a.cell),f=0;f<e;f++){var g=this.getBoundingBox(this.getState(d.getChildAt(a.cell,f)));null!=g&&(null==c?c=g:c.add(g))}return c},mxGraphView.prototype.createBackgroundPageShape=function(a){return new mxRectangleShape(a,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var a=this.graph.getBackgroundImage();if(null!=a){if(null==this.backgroundImage||this.backgroundImage.image!=a.src){null!=this.backgroundImage&&this.backgroundImage.destroy();var b=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(b,a.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8!=document.documentMode||mxClient.IS_EM||mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(a){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a))}),mxUtils.bind(this,function(a){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a))}),mxUtils.bind(this,function(a){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a))}))}this.redrawBackgroundImage(this.backgroundImage,a)}else null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){if(this.graph.pageVisible){var a=this.getBackgroundPageBounds();null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(a),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(a){this.graph.dblClick(a)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(a){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a))}),mxUtils.bind(this,function(a){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(a)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a))}),mxUtils.bind(this,function(a){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=a,this.backgroundPageShape.redraw())}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var a=this.graph.pageFormat,b=this.scale*this.graph.pageScale,c=new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,a.width*b,a.height*b);return c},mxGraphView.prototype.redrawBackgroundImage=function(a,b){a.scale=this.scale,a.bounds.x=this.scale*this.translate.x,a.bounds.y=this.scale*this.translate.y,a.bounds.width=this.scale*b.width,a.bounds.height=this.scale*b.height,a.redraw()},mxGraphView.prototype.validateCell=function(a,b){if(b=null==b||b,null!=a){b=b&&this.graph.isCellVisible(a);var c=this.getState(a,b);if(null==c||b)for(var d=this.graph.getModel(),e=d.getChildCount(a),f=0;f<e;f++)this.validateCell(d.getChildAt(a,f),b&&(!this.isCellCollapsed(a)||a==this.currentRoot));else this.removeState(a)}return a},mxGraphView.prototype.validateCellState=function(a,b){b=null==b||b;var c=null;if(null!=a&&(c=this.getState(a),null!=c)){var d=this.graph.getModel();if(c.invalid&&(c.invalid=!1,null==c.style&&(c.style=this.graph.getCellStyle(c.cell)),a!=this.currentRoot&&this.validateCellState(d.getParent(a),!1),c.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(a,!0),!1),!0),c.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(a,!1),!1),!1),this.updateCellState(c),a==this.currentRoot||c.invalid||this.graph.cellRenderer.redraw(c,!1,this.isRendering())),b&&!c.invalid){null!=c.shape&&this.stateValidated(c);for(var e=d.getChildCount(a),f=0;f<e;f++)this.validateCellState(d.getChildAt(a,f))}}return c},mxGraphView.prototype.updateCellState=function(a){if(a.absoluteOffset.x=0,
    a.absoluteOffset.y=0,a.origin.x=0,a.origin.y=0,a.length=0,a.cell!=this.currentRoot){var b=this.graph.getModel(),c=this.getState(b.getParent(a.cell));null!=c&&c.cell!=this.currentRoot&&(a.origin.x+=c.origin.x,a.origin.y+=c.origin.y);var d=this.graph.getChildOffsetForCell(a.cell);null!=d&&(a.origin.x+=d.x,a.origin.y+=d.y);var e=this.graph.getCellGeometry(a.cell);if(null!=e){if(!b.isEdge(a.cell))if(d=e.offset||this.EMPTY_POINT,e.relative&&null!=c)if(b.isEdge(c.cell)){var f=this.getPoint(c,e);null!=f&&(a.origin.x+=f.x/this.scale-c.origin.x-this.translate.x,a.origin.y+=f.y/this.scale-c.origin.y-this.translate.y)}else a.origin.x+=e.x*c.width/this.scale+d.x,a.origin.y+=e.y*c.height/this.scale+d.y;else a.absoluteOffset.x=this.scale*d.x,a.absoluteOffset.y=this.scale*d.y,a.origin.x+=e.x,a.origin.y+=e.y;a.x=this.scale*(this.translate.x+a.origin.x),a.y=this.scale*(this.translate.y+a.origin.y),a.width=this.scale*e.width,a.unscaledWidth=e.width,a.height=this.scale*e.height,b.isVertex(a.cell)&&this.updateVertexState(a,e),b.isEdge(a.cell)&&this.updateEdgeState(a,e)}}a.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(a){return this.graph.isCellCollapsed(a)},mxGraphView.prototype.updateVertexState=function(a,b){var c=this.graph.getModel(),d=this.getState(c.getParent(a.cell));if(b.relative&&null!=d&&!c.isEdge(d.cell)){var e=mxUtils.toRadians(d.style[mxConstants.STYLE_ROTATION]||"0");if(0!=e){var f=Math.cos(e),g=Math.sin(e),h=new mxPoint(a.getCenterX(),a.getCenterY()),i=new mxPoint(d.getCenterX(),d.getCenterY()),j=mxUtils.getRotatedPoint(h,f,g,i);a.x=j.x-a.width/2,a.y=j.y-a.height/2}}this.updateVertexLabelOffset(a)},mxGraphView.prototype.updateEdgeState=function(a,b){var c=a.getVisibleTerminalState(!0),d=a.getVisibleTerminalState(!1);if(null!=this.graph.model.getTerminal(a.cell,!0)&&null==c||null==c&&null==b.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(a.cell,!1)&&null==d||null==d&&null==b.getTerminalPoint(!1))this.clear(a.cell,!0);else{this.updateFixedTerminalPoints(a,c,d),this.updatePoints(a,b.points,c,d),this.updateFloatingTerminalPoints(a,c,d);var e=a.absolutePoints;a.cell!=this.currentRoot&&(null==e||e.length<2||null==e[0]||null==e[e.length-1])?this.clear(a.cell,!0):(this.updateEdgeBounds(a),this.updateEdgeLabelOffset(a))}},mxGraphView.prototype.updateVertexLabelOffset=function(a){var b=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);if(b==mxConstants.ALIGN_LEFT){var c=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_WIDTH,null);null!=c?c*=this.scale:c=a.width,a.absoluteOffset.x-=c}else if(b==mxConstants.ALIGN_RIGHT)a.absoluteOffset.x+=a.width;else if(b==mxConstants.ALIGN_CENTER){var c=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_WIDTH,null);if(null!=c){var d=mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),e=0;d==mxConstants.ALIGN_CENTER?e=.5:d==mxConstants.ALIGN_RIGHT&&(e=1),0!=e&&(a.absoluteOffset.x-=(c*this.scale-a.width)*e)}}var f=mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);f==mxConstants.ALIGN_TOP?a.absoluteOffset.y-=a.height:f==mxConstants.ALIGN_BOTTOM&&(a.absoluteOffset.y+=a.height)},mxGraphView.prototype.resetValidationState=function(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null},mxGraphView.prototype.stateValidated=function(a){var b=this.graph.getModel().isEdge(a.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(a.cell)&&this.graph.keepEdgesInBackground,c=b?this.lastForegroundHtmlNode||this.lastHtmlNode:this.lastHtmlNode,d=b?this.lastForegroundNode||this.lastNode:this.lastNode,e=this.graph.cellRenderer.insertStateAfter(a,d,c);b?(this.lastForegroundHtmlNode=e[1],this.lastForegroundNode=e[0]):(this.lastHtmlNode=e[1],this.lastNode=e[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(a,b,c){this.updateFixedTerminalPoint(a,b,!0,this.graph.getConnectionConstraint(a,b,!0)),this.updateFixedTerminalPoint(a,c,!1,this.graph.getConnectionConstraint(a,c,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(a,b,c,d){a.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(a,b,c,d),c)},mxGraphView.prototype.getFixedTerminalPoint=function(a,b,c,d){var e=null;if(null!=d&&(e=this.graph.getConnectionPoint(b,d)),null==e&&null==b){var f=this.scale,g=this.translate,h=a.origin,i=this.graph.getCellGeometry(a.cell);e=i.getTerminalPoint(c),null!=e&&(e=new mxPoint(f*(g.x+e.x+h.x),f*(g.y+e.y+h.y)))}return e},mxGraphView.prototype.updateBoundsFromStencil=function(a){var b=null;if(null!=a&&null!=a.shape&&null!=a.shape.stencil&&"fixed"==a.shape.stencil.aspect){b=mxRectangle.fromRectangle(a);var c=a.shape.stencil.computeAspect(a.style,a.x,a.y,a.width,a.height);a.setRect(c.x,c.y,a.shape.stencil.w0*c.width,a.shape.stencil.h0*c.height)}return b},mxGraphView.prototype.updatePoints=function(a,b,c,d){if(null!=a){var e=[];e.push(a.absolutePoints[0]);var f=this.getEdgeStyle(a,b,c,d);if(null!=f){var g=this.getTerminalPort(a,c,!0),h=this.getTerminalPort(a,d,!1),i=this.updateBoundsFromStencil(g),j=this.updateBoundsFromStencil(h);f(a,g,h,b,e),null!=i&&g.setRect(i.x,i.y,i.width,i.height),null!=j&&h.setRect(j.x,j.y,j.width,j.height)}else if(null!=b)for(var k=0;k<b.length;k++)if(null!=b[k]){var l=mxUtils.clone(b[k]);e.push(this.transformControlPoint(a,l))}var m=a.absolutePoints;e.push(m[m.length-1]),a.absolutePoints=e}},mxGraphView.prototype.transformControlPoint=function(a,b){if(null!=a&&null!=b){var c=a.origin;return new mxPoint(this.scale*(b.x+this.translate.x+c.x),this.scale*(b.y+this.translate.y+c.y))}return null},mxGraphView.prototype.isLoopStyleEnabled=function(a,b,c,d){var e=this.graph.getConnectionConstraint(a,c,!0),f=this.graph.getConnectionConstraint(a,d,!1);return(!mxUtils.getValue(a.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)||!(null!=e&&null!=e.point||null!=f&&null!=f.point))&&(null!=c&&c==d)},mxGraphView.prototype.getEdgeStyle=function(a,b,c,d){var e=this.isLoopStyleEnabled(a,b,c,d)?mxUtils.getValue(a.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(a.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:a.style[mxConstants.STYLE_EDGE];if("string"==typeof e){var f=mxStyleRegistry.getValue(e);null==f&&this.isAllowEval()&&(f=mxUtils.eval(e)),e=f}return"function"==typeof e?e:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(a,b,c){var d=a.absolutePoints,e=d[0],f=d[d.length-1];null==f&&null!=c&&this.updateFloatingTerminalPoint(a,c,b,!1),null==e&&null!=b&&this.updateFloatingTerminalPoint(a,b,c,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(a,b,c,d){a.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(a,b,c,d),d)},mxGraphView.prototype.getFloatingTerminalPoint=function(a,b,c,d){b=this.getTerminalPort(a,b,d);var e=this.getNextPoint(a,c,d),f=this.graph.isOrthogonal(a),g=mxUtils.toRadians(Number(b.style[mxConstants.STYLE_ROTATION]||"0")),h=new mxPoint(b.getCenterX(),b.getCenterY());if(0!=g){var i=Math.cos(-g),j=Math.sin(-g);e=mxUtils.getRotatedPoint(e,i,j,h)}var k=parseFloat(a.style[mxConstants.STYLE_PERIMETER_SPACING]||0);k+=parseFloat(a.style[d?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var l=this.getPerimeterPoint(b,e,0==g&&f,k);if(0!=g){var i=Math.cos(g),j=Math.sin(g);l=mxUtils.getRotatedPoint(l,i,j,h)}return l},mxGraphView.prototype.getTerminalPort=function(a,b,c){var d=c?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,e=mxUtils.getValue(a.style,d);if(null!=e){var f=this.getState(this.graph.getModel().getCell(e));null!=f&&(b=f)}return b},mxGraphView.prototype.getPerimeterPoint=function(a,b,c,d){var e=null;if(null!=a){var f=this.getPerimeterFunction(a);if(null!=f&&null!=b){var g=this.getPerimeterBounds(a,d);(g.width>0||g.height>0)&&(e=f(g,a,b,c))}null==e&&(e=this.getPoint(a))}return e},mxGraphView.prototype.getRoutingCenterX=function(a){var b=null!=a.style?parseFloat(a.style[mxConstants.STYLE_ROUTING_CENTER_X])||0:0;return a.getCenterX()+b*a.width},mxGraphView.prototype.getRoutingCenterY=function(a){var b=null!=a.style?parseFloat(a.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0:0;return a.getCenterY()+b*a.height},mxGraphView.prototype.getPerimeterBounds=function(a,b){return b=null!=b?b:0,null!=a&&(b+=parseFloat(a.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),a.getPerimeterBounds(b*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(a){var b=a.style[mxConstants.STYLE_PERIMETER];if("string"==typeof b){var c=mxStyleRegistry.getValue(b);null==c&&this.isAllowEval()&&(c=mxUtils.eval(b)),b=c}return"function"==typeof b?b:null},mxGraphView.prototype.getNextPoint=function(a,b,c){var d=a.absolutePoints,e=null;if(null!=d&&d.length>=2){var f=d.length;e=d[c?Math.min(1,f-1):Math.max(0,f-2)]}return null==e&&null!=b&&(e=new mxPoint(b.getCenterX(),b.getCenterY())),e},mxGraphView.prototype.getVisibleTerminal=function(a,b){for(var c=this.graph.getModel(),d=c.getTerminal(a,b),e=d;null!=d&&d!=this.currentRoot;)this.graph.isCellVisible(e)&&!this.isCellCollapsed(d)||(e=d),d=c.getParent(d);return c.getParent(e)==c.getRoot()&&(e=null),e},mxGraphView.prototype.updateEdgeBounds=function(a){var b=a.absolutePoints,c=b[0],d=b[b.length-1];if(c.x!=d.x||c.y!=d.y){var e=d.x-c.x,f=d.y-c.y;a.terminalDistance=Math.sqrt(e*e+f*f)}else a.terminalDistance=0;var g=0,h=[],i=c;if(null!=i){for(var j=i.x,k=i.y,l=j,m=k,n=1;n<b.length;n++){var o=b[n];if(null!=o){var e=i.x-o.x,f=i.y-o.y,p=Math.sqrt(e*e+f*f);h.push(p),g+=p,i=o,j=Math.min(i.x,j),k=Math.min(i.y,k),l=Math.max(i.x,l),m=Math.max(i.y,m)}}a.length=g,a.segments=h;var q=1;a.x=j,a.y=k,a.width=Math.max(q,l-j),a.height=Math.max(q,m-k)}},mxGraphView.prototype.getPoint=function(a,b){var c=a.getCenterX(),d=a.getCenterY();if(null==a.segments||null!=b&&!b.relative){if(null!=b){var q=b.offset;null!=q&&(c+=q.x,d+=q.y)}}else{for(var e=null!=b?b.x/2:0,f=a.absolutePoints.length,g=Math.round((e+.5)*a.length),h=a.segments[0],i=0,j=1;g>=Math.round(i+h)&&j<f-1;)i+=h,h=a.segments[j++];var k=0==h?0:(g-i)/h,l=a.absolutePoints[j-1],m=a.absolutePoints[j];if(null!=l&&null!=m){var n=0,o=0,p=0;if(null!=b){n=b.y;var q=b.offset;null!=q&&(o=q.x,p=q.y)}var r=m.x-l.x,s=m.y-l.y,t=0==h?0:s/h,u=0==h?0:r/h;c=l.x+r*k+(t*n+o)*this.scale,d=l.y+s*k-(u*n-p)*this.scale}}return new mxPoint(c,d)},mxGraphView.prototype.getRelativePoint=function(a,b,c){var d=this.graph.getModel(),e=d.getGeometry(a.cell);if(null!=e){var f=a.absolutePoints.length;if(e.relative&&f>1){for(var g=a.length,h=a.segments,i=a.absolutePoints[0],j=a.absolutePoints[1],k=mxUtils.ptSegDistSq(i.x,i.y,j.x,j.y,b,c),l=0,m=0,n=0,o=2;o<f;o++){m+=h[o-2],j=a.absolutePoints[o];var p=mxUtils.ptSegDistSq(i.x,i.y,j.x,j.y,b,c);p<=k&&(k=p,l=o-1,n=m),i=j}var q=h[l];i=a.absolutePoints[l],j=a.absolutePoints[l+1];var r=i.x,s=i.y,t=j.x,u=j.y,v=b,w=c,x=r-t,y=s-u;v-=t,w-=u;var z=0;v=x-v,w=y-w;var A=v*x+w*y;z=A<=0?0:A*A/(x*x+y*y);var B=Math.sqrt(z);B>q&&(B=q);var C=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,j.x,j.y,b,c)),D=mxUtils.relativeCcw(i.x,i.y,j.x,j.y,b,c);return D==-1&&(C=-C),new mxPoint((g/2-n-B)/g*-2,C/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(a){var b=a.absolutePoints;if(a.absoluteOffset.x=a.getCenterX(),a.absoluteOffset.y=a.getCenterY(),null!=b&&b.length>0&&null!=a.segments){var c=this.graph.getCellGeometry(a.cell);if(c.relative){var d=this.getPoint(a,c);null!=d&&(a.absoluteOffset=d)}else{var e=b[0],f=b[b.length-1];if(null!=e&&null!=f){var g=f.x-e.x,h=f.y-e.y,i=0,j=0,k=c.offset;null!=k&&(i=k.x,j=k.y);var l=e.x+g/2+i*this.scale,m=e.y+h/2+j*this.scale;a.absoluteOffset.x=l,a.absoluteOffset.y=m}}}},mxGraphView.prototype.getState=function(a,b){b=b||!1;var c=null;return null!=a&&(c=this.states.get(a),b&&(null==c||this.updateStyle)&&this.graph.isCellVisible(a)&&(null==c?(c=this.createState(a),this.states.put(a,c)):c.style=this.graph.getCellStyle(a))),c},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(a){this.rendering=a},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(a){this.allowEval=a},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(a){this.states=a},mxGraphView.prototype.getCellStates=function(a){if(null==a)return this.states;for(var b=[],c=0;c<a.length;c++){var d=this.getState(a[c]);null!=d&&b.push(d)}return b},mxGraphView.prototype.removeState=function(a){var b=null;return null!=a&&(b=this.states.remove(a),null!=b&&(this.graph.cellRenderer.destroy(b),b.invalid=!0,b.destroy())),b},mxGraphView.prototype.createState=function(a){return new mxCellState(this,a,this.graph.getCellStyle(a))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(a){var b=mxEvent.getSource(a);return b==this.graph.container||b.parentNode==this.backgroundPane||null!=b.parentNode&&b.parentNode.parentNode==this.backgroundPane||b==this.canvas.parentNode||b==this.canvas||b==this.backgroundPane||b==this.drawPane||b==this.overlayPane||b==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(a){var b=mxUtils.getOffset(this.graph.container),c=new mxPoint(a.clientX-b.x,a.clientY-b.y),d=this.graph.container.offsetWidth,e=this.graph.container.clientWidth;if(d>e&&c.x>e+2&&c.x<=d)return!0;var f=this.graph.container.offsetHeight,g=this.graph.container.clientHeight;return f>g&&c.y>g+2&&c.y<=f},mxGraphView.prototype.init=function(){this.installListeners();var a=this.graph;a.dialect==mxConstants.DIALECT_SVG?this.createSvg():a.dialect==mxConstants.DIALECT_VML?this.createVml():this.createHtml()},mxGraphView.prototype.installListeners=function(){var a=this.graph,b=a.container;if(null!=b){mxClient.IS_TOUCH&&(mxEvent.addListener(b,"gesturestart",mxUtils.bind(this,function(b){a.fireGestureEvent(b),mxEvent.consume(b)})),mxEvent.addListener(b,"gesturechange",mxUtils.bind(this,function(b){a.fireGestureEvent(b),mxEvent.consume(b)})),mxEvent.addListener(b,"gestureend",mxUtils.bind(this,function(b){a.fireGestureEvent(b),mxEvent.consume(b)}))),mxEvent.addGestureListeners(b,mxUtils.bind(this,function(b){!this.isContainerEvent(b)||(mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_GC||mxClient.IS_OP||mxClient.IS_SF)&&this.isScrollEvent(b)||a.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(b))}),mxUtils.bind(this,function(b){this.isContainerEvent(b)&&a.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(b))}),mxUtils.bind(this,function(b){this.isContainerEvent(b)&&a.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(b))})),mxEvent.addListener(b,"dblclick",mxUtils.bind(this,function(b){this.isContainerEvent(b)&&a.dblClick(b)}));var c=function(c){var d=null;if(mxClient.IS_TOUCH){var e=mxEvent.getClientX(c),f=mxEvent.getClientY(c),g=mxUtils.convertPoint(b,e,f);d=a.view.getState(a.getCellAt(g.x,g.y))}return d};a.addMouseListener({mouseDown:function(b,c){a.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(b){null!=a.tooltipHandler&&a.tooltipHandler.isHideOnHover()&&a.tooltipHandler.hide(),this.captureDocumentGesture&&a.isMouseDown&&null!=a.container&&!this.isContainerEvent(b)&&"none"!=a.container.style.display&&"hidden"!=a.container.style.visibility&&!mxEvent.isConsumed(b)&&a.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(b,c(b)))}),this.endHandler=mxUtils.bind(this,function(b){this.captureDocumentGesture&&a.isMouseDown&&null!=a.container&&!this.isContainerEvent(b)&&"none"!=a.container.style.display&&"hidden"!=a.container.style.visibility&&a.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(b))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler)}},mxGraphView.prototype.createHtml=function(){var a=this.graph.container;if(null!=a&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),a.appendChild(this.canvas),this.updateContainerStyle(a),mxClient.IS_QUIRKS)){var b=mxUtils.bind(this,function(a){var b=this.getGraphBounds(),c=b.x+b.width+this.graph.border,d=b.y+b.height+this.graph.border;this.updateHtmlCanvasSize(c,d)});mxEvent.addListener(window,"resize",b)}},mxGraphView.prototype.updateHtmlCanvasSize=function(a,b){if(null!=this.graph.container){var c=this.graph.container.offsetWidth,d=this.graph.container.offsetHeight;c<a?this.canvas.style.width=a+"px":this.canvas.style.width="100%",d<b?this.canvas.style.height=b+"px":this.canvas.style.height="100%"}},mxGraphView.prototype.createHtmlPane=function(a,b){var c=document.createElement("DIV");return null!=a&&null!=b?(c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.width=a,c.style.height=b):c.style.position="relative",c},mxGraphView.prototype.createVml=function(){var a=this.graph.container;if(null!=a){var b=a.offsetWidth,c=a.offsetHeight;this.canvas=this.createVmlPane(b,c),this.canvas.style.overflow="hidden",this.backgroundPane=this.createVmlPane(b,c),this.drawPane=this.createVmlPane(b,c),this.overlayPane=this.createVmlPane(b,c),this.decoratorPane=this.createVmlPane(b,c),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),a.appendChild(this.canvas)}},mxGraphView.prototype.createVmlPane=function(a,b){var c=document.createElement(mxClient.VML_PREFIX+":group");return c.style.position="absolute",c.style.left="0px",c.style.top="0px",c.style.width=a+"px",c.style.height=b+"px",c.setAttribute("coordsize",a+","+b),c.setAttribute("coordorigin","0,0"),c},mxGraphView.prototype.createSvg=function(){var a=this.graph.container;this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var b=document.createElementNS(mxConstants.NS_SVG,"svg");b.style.width="100%",b.style.height="100%",b.style.display="block",b.appendChild(this.canvas),(mxClient.IS_IE||mxClient.IS_IE11)&&(b.style.overflow="hidden"),null!=a&&(a.appendChild(b),this.updateContainerStyle(a))},mxGraphView.prototype.updateContainerStyle=function(a){var b=mxUtils.getCurrentStyle(a);null!=b&&"static"==b.position&&(a.style.position="relative"),mxClient.IS_POINTER&&(a.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var a=null!=this.canvas?this.canvas.ownerSVGElement:null;null==a&&(a=this.canvas),null!=a&&null!=a.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),a.parentNode.removeChild(a),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)},mxCurrentRootChange.prototype.execute=function(){var a=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=a;var b=this.view.graph.getTranslateForRoot(this.view.currentRoot);null!=b&&(this.view.translate=new mxPoint(-b.x,-b.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh();var c=this.isUp?mxEvent.UP:mxEvent.DOWN;this.view.fireEvent(new mxEventObject(c,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},mxLoadResources&&mxResources.add(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.EMPTY_ARRAY=[],mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0;mxGraph.prototype.extendParentsOnMove=!1;mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(a){this.container=a,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(a,"mouseleave",mxUtils.bind(this,function(){null!=this.tooltipHandler&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(a,"selectstart",mxUtils.bind(this,function(a){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(a)}))),8==document.documentMode&&a.insertAdjacentHTML("beforeend","<"+mxClient.VML_PREFIX+':group style="DISPLAY: none;"></'+mxClient.VML_PREFIX+":group>")},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(a){this.stylesheet=a},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(a){this.selectionModel=a},mxGraph.prototype.getSelectionCellsForChanges=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d.constructor!=mxRootChange){var e=null;d instanceof mxChildChange&&null==d.previous?e=d.child:null!=d.cell&&d.cell instanceof mxCell&&(e=d.cell),null!=e&&mxUtils.indexOf(b,e)<0&&b.push(e)}}return this.getModel().getTopmostCells(b)},mxGraph.prototype.graphModelChanged=function(a){for(var b=0;b<a.length;b++)this.processChange(a[b]);this.removeSelectionCells(this.getRemovedCellsForChanges(a)),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.getRemovedCellsForChanges=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d instanceof mxRootChange)break;d instanceof mxChildChange?null!=d.previous&&null==d.parent&&(b=b.concat(this.model.getDescendants(d.child))):d instanceof mxVisibleChange&&(b=b.concat(this.model.getDescendants(d.cell)))}return b},mxGraph.prototype.processChange=function(a){if(a instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(a.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT));else if(a instanceof mxChildChange){var b=this.model.getParent(a.child);this.view.invalidate(a.child,!0,!0),(null==b||this.isCellCollapsed(b))&&(this.view.invalidate(a.child,!0,!0),this.removeStateForCell(a.child),this.view.currentRoot==a.child&&this.home()),b!=a.previous&&(null!=b&&this.view.invalidate(b,!1,!1),null!=a.previous&&this.view.invalidate(a.previous,!1,!1))}else if(a instanceof mxTerminalChange||a instanceof mxGeometryChange)(a instanceof mxTerminalChange||null==a.previous&&null!=a.geometry||null!=a.previous&&!a.previous.equals(a.geometry))&&this.view.invalidate(a.cell);else if(a instanceof mxValueChange)this.view.invalidate(a.cell,!1,!1);else if(a instanceof mxStyleChange){this.view.invalidate(a.cell,!0,!0);var c=this.view.getState(a.cell);null!=c&&(c.style=null)}else null!=a.cell&&a.cell instanceof mxCell&&this.removeStateForCell(a.cell)},mxGraph.prototype.removeStateForCell=function(a){for(var b=this.model.getChildCount(a),c=0;c<b;c++)this.removeStateForCell(this.model.getChildAt(a,c));this.view.invalidate(a,!1,!0),this.view.removeState(a)},mxGraph.prototype.addCellOverlay=function(a,b){null==a.overlays&&(a.overlays=[]),a.overlays.push(b);var c=this.view.getState(a);return null!=c&&this.cellRenderer.redraw(c),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",a,"overlay",b)),b},mxGraph.prototype.getCellOverlays=function(a){return a.overlays},mxGraph.prototype.removeCellOverlay=function(a,b){if(null==b)this.removeCellOverlays(a);else{var c=mxUtils.indexOf(a.overlays,b);if(c>=0){a.overlays.splice(c,1),0==a.overlays.length&&(a.overlays=null);var d=this.view.getState(a);null!=d&&this.cellRenderer.redraw(d),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",a,"overlay",b))}else b=null}return b},mxGraph.prototype.removeCellOverlays=function(a){var b=a.overlays;if(null!=b){a.overlays=null;var c=this.view.getState(a);null!=c&&this.cellRenderer.redraw(c);for(var d=0;d<b.length;d++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",a,"overlay",b[d]))}return b},mxGraph.prototype.clearCellOverlays=function(a){a=null!=a?a:this.model.getRoot(),this.removeCellOverlays(a);for(var b=this.model.getChildCount(a),c=0;c<b;c++){var d=this.model.getChildAt(a,c);this.clearCellOverlays(d)}},mxGraph.prototype.setCellWarning=function(a,b,c,d){if(null!=b&&b.length>0){c=null!=c?c:this.warningImage;var e=new mxCellOverlay(c,"<font color=red>"+b+"</font>");return d&&e.addListener(mxEvent.CLICK,mxUtils.bind(this,function(b,c){this.isEnabled()&&this.setSelectionCell(a)})),this.addCellOverlay(a,e)}return this.removeCellOverlays(a),null},mxGraph.prototype.startEditing=function(a){this.startEditingAtCell(null,a)},mxGraph.prototype.startEditingAtCell=function(a,b){null!=b&&mxEvent.isMultiTouchEvent(b)||(null==a&&(a=this.getSelectionCell(),null==a||this.isCellEditable(a)||(a=null)),null!=a&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",a,"event",b)),this.cellEditor.startEditing(a,b),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",a,"event",b))))},mxGraph.prototype.getEditingValue=function(a,b){return this.convertValueToString(a)},mxGraph.prototype.stopEditing=function(a){this.cellEditor.stopEditing(a),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",a))},mxGraph.prototype.labelChanged=function(a,b,c){
  this.model.beginUpdate();try{var d=a.value;this.cellLabelChanged(a,b,this.isAutoSizeCell(a)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",a,"value",b,"old",d,"event",c))}finally{this.model.endUpdate()}return a},mxGraph.prototype.cellLabelChanged=function(a,b,c){this.model.beginUpdate();try{this.model.setValue(a,b),c&&this.cellSizeUpdated(a,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(a){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",a))},mxGraph.prototype.click=function(a){var b=a.getEvent(),c=a.getCell(),d=new mxEventObject(mxEvent.CLICK,"event",b,"cell",c);if(a.isConsumed()&&d.consume(),this.fireEvent(d),this.isEnabled()&&!mxEvent.isConsumed(b)&&!d.isConsumed())if(null!=c)this.selectCellForEvent(c,b);else{var e=null;this.isSwimlaneSelectionEnabled()&&(e=this.getSwimlaneAt(a.getGraphX(),a.getGraphY())),null!=e?this.selectCellForEvent(e,b):this.isToggleEvent(b)||this.clearSelection()}},mxGraph.prototype.dblClick=function(a,b){var c=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",a,"cell",b);this.fireEvent(c),!this.isEnabled()||mxEvent.isConsumed(a)||c.isConsumed()||null==b||!this.isCellEditable(b)||this.isEditing(b)||(this.startEditingAtCell(b,a),mxEvent.consume(a))},mxGraph.prototype.tapAndHold=function(a){var b=a.getEvent(),c=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",b,"cell",a.getCell());if(this.fireEvent(c),c.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(b)&&!c.isConsumed()&&this.connectionHandler.isEnabled()){var d=this.view.getState(this.connectionHandler.marker.getCell(a));null!=d&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=d,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(a.getGraphX(),a.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(a),this.connectionHandler.previous=d,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))}},mxGraph.prototype.scrollPointToVisible=function(a,b,c,d){if(this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container))this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(a+this.panDx,b+this.panDy));else{var e=this.container;if(d=null!=d?d:20,a>=e.scrollLeft&&b>=e.scrollTop&&a<=e.scrollLeft+e.clientWidth&&b<=e.scrollTop+e.clientHeight){var f=e.scrollLeft+e.clientWidth-a;if(f<d){var g=e.scrollLeft;if(e.scrollLeft+=d-f,c&&g==e.scrollLeft){if(this.dialect==mxConstants.DIALECT_SVG){var h=this.view.getDrawPane().ownerSVGElement,i=this.container.scrollWidth+d-f;h.style.width=i+"px"}else{var i=Math.max(e.clientWidth,e.scrollWidth)+d-f,j=this.view.getCanvas();j.style.width=i+"px"}e.scrollLeft+=d-f}}else f=a-e.scrollLeft,f<d&&(e.scrollLeft-=d-f);var k=e.scrollTop+e.clientHeight-b;if(k<d){var g=e.scrollTop;if(e.scrollTop+=d-k,g==e.scrollTop&&c){if(this.dialect==mxConstants.DIALECT_SVG){var h=this.view.getDrawPane().ownerSVGElement,l=this.container.scrollHeight+d-k;h.style.height=l+"px"}else{var l=Math.max(e.clientHeight,e.scrollHeight)+d-k,j=this.view.getCanvas();j.style.height=l+"px"}e.scrollTop+=d-k}}else k=b-e.scrollTop,k<d&&(e.scrollTop-=d-k)}}},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var a=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(a.paddingLeft)+("none"!=a.borderLeftStyle?mxUtils.parseCssNumber(a.borderLeftWidth):0),mxUtils.parseCssNumber(a.paddingTop)+("none"!=a.borderTopStyle?mxUtils.parseCssNumber(a.borderTopWidth):0),mxUtils.parseCssNumber(a.paddingRight)+("none"!=a.borderRightStyle?mxUtils.parseCssNumber(a.borderRightWidth):0),mxUtils.parseCssNumber(a.paddingBottom)+("none"!=a.borderBottomStyle?mxUtils.parseCssNumber(a.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(a,b,c){var e=(this.view.scale,this.view.translate),f=this.pageFormat,g=this.pageScale,h=new mxRectangle(0,0,Math.ceil(f.width*g),Math.ceil(f.height*g)),i=this.pageBreaksVisible?Math.ceil(b/h.width):1,j=this.pageBreaksVisible?Math.ceil(c/h.height):1;return new mxRectangle(0,0,i*h.width+2+e.x,j*h.height+2+e.y)},mxGraph.prototype.fit=function(a,b,c,d,e,f){if(null!=this.container){a=null!=a?a:this.getBorder(),b=null!=b&&b,c=null!=c?c:0,d=null==d||d,e=null!=e&&e,f=null!=f&&f;var g=this.getBorderSizes(),h=this.container.offsetWidth-g.x-g.width-1,i=this.container.offsetHeight-g.y-g.height-1,j=this.view.getGraphBounds();if(j.width>0&&j.height>0){b&&null!=j.x&&null!=j.y&&(j=j.clone(),j.width+=j.x,j.height+=j.y,j.x=0,j.y=0);var k=this.view.scale,l=j.width/k,m=j.height/k;null!=this.backgroundImage&&(l=Math.max(l,this.backgroundImage.width-j.x/k),m=Math.max(m,this.backgroundImage.height-j.y/k));var n=(b?a:2*a)+c;h-=n,i-=n;var o=e?i/m:f?h/l:Math.min(h/l,i/m);if(null!=this.minFitScale&&(o=Math.max(o,this.minFitScale)),null!=this.maxFitScale&&(o=Math.min(o,this.maxFitScale)),!d)return o;if(b)this.view.scale!=o&&this.view.setScale(o);else if(mxUtils.hasScrollbars(this.container)){this.view.setScale(o);var r=this.getGraphBounds();null!=r.x&&(this.container.scrollLeft=r.x),null!=r.y&&(this.container.scrollTop=r.y)}else{var p=null!=j.x?Math.floor(this.view.translate.x-j.x/k+a/o+c/2):a,q=null!=j.y?Math.floor(this.view.translate.y-j.y/k+a/o+c/2):a;this.view.scaleAndTranslate(o,p,q)}}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var a=this.getGraphBounds();if(null!=this.container){var b=this.getBorder(),c=Math.max(0,a.x+a.width+b),d=Math.max(0,a.y+a.height+b);if(null!=this.minimumContainerSize&&(c=Math.max(c,this.minimumContainerSize.width),d=Math.max(d,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(c,d),this.preferPageSize||!mxClient.IS_IE&&this.pageVisible){var e=this.getPreferredPageSize(a,Math.max(1,c),Math.max(1,d));null!=e&&(c=e.width*this.view.scale,d=e.height*this.view.scale)}if(null!=this.minimumGraphSize&&(c=Math.max(c,this.minimumGraphSize.width*this.view.scale),d=Math.max(d,this.minimumGraphSize.height*this.view.scale)),c=Math.ceil(c),d=Math.ceil(d),this.dialect==mxConstants.DIALECT_SVG){var f=this.view.getDrawPane().ownerSVGElement;f.style.minWidth=Math.max(1,c)+"px",f.style.minHeight=Math.max(1,d)+"px",f.style.width="100%",f.style.height="100%"}else mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,c),Math.max(1,d)):(this.view.canvas.style.minWidth=Math.max(1,c)+"px",this.view.canvas.style.minHeight=Math.max(1,d)+"px");this.updatePageBreaks(this.pageBreaksVisible,c,d)}this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",a))},mxGraph.prototype.doResizeContainer=function(a,b){null!=this.maximumContainerSize&&(a=Math.min(this.maximumContainerSize.width,a),b=Math.min(this.maximumContainerSize.height,b)),this.container.style.width=Math.ceil(a)+"px",this.container.style.height=Math.ceil(b)+"px"},mxGraph.prototype.updatePageBreaks=function(a,b,c){var d=this.view.scale,e=this.view.translate,f=this.pageFormat,g=d*this.pageScale,h=new mxRectangle(0,0,f.width*g,f.height*g),i=mxRectangle.fromRectangle(this.getGraphBounds());i.width=Math.max(1,i.width),i.height=Math.max(1,i.height),h.x=Math.floor((i.x-e.x*d)/h.width)*h.width+e.x*d,h.y=Math.floor((i.y-e.y*d)/h.height)*h.height+e.y*d,i.width=Math.ceil((i.width+(i.x-h.x))/h.width)*h.width,i.height=Math.ceil((i.height+(i.y-h.y))/h.height)*h.height,a=a&&Math.min(h.width,h.height)>this.minPageBreakDist;var j=a?Math.ceil(i.height/h.height)+1:0,k=a?Math.ceil(i.width/h.width)+1:0,l=(k-1)*h.width,m=(j-1)*h.height;null==this.horizontalPageBreaks&&j>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&k>0&&(this.verticalPageBreaks=[]);var n=mxUtils.bind(this,function(a){if(null!=a){for(var b=a==this.horizontalPageBreaks?j:k,c=0;c<=b;c++){var d=a==this.horizontalPageBreaks?[new mxPoint(Math.round(h.x),Math.round(h.y+c*h.height)),new mxPoint(Math.round(h.x+l),Math.round(h.y+c*h.height))]:[new mxPoint(Math.round(h.x+c*h.width),Math.round(h.y)),new mxPoint(Math.round(h.x+c*h.width),Math.round(h.y+m))];if(null!=a[c])a[c].points=d,a[c].redraw();else{var e=new mxPolyline(d,this.pageBreakColor);e.dialect=this.dialect,e.pointerEvents=!1,e.isDashed=this.pageBreakDashed,e.init(this.view.backgroundPane),e.redraw(),a[c]=e}}for(var c=b;c<a.length;c++)a[c].destroy();a.splice(b,a.length-b)}});n(this.horizontalPageBreaks),n(this.verticalPageBreaks)},mxGraph.prototype.getCellStyle=function(a){var b=this.model.getStyle(a),c=null;return c=this.model.isEdge(a)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),null!=b&&(c=this.postProcessCellStyle(this.stylesheet.getCellStyle(b,c))),null==c&&(c=mxGraph.prototype.EMPTY_ARRAY),c},mxGraph.prototype.postProcessCellStyle=function(a){if(null!=a){var b=a[mxConstants.STYLE_IMAGE],c=this.getImageFromBundles(b);if(null!=c?a[mxConstants.STYLE_IMAGE]=c:c=b,null!=c&&"data:image/"==c.substring(0,11)){if("data:image/svg+xml,<"==c.substring(0,20))c=c.substring(0,19)+encodeURIComponent(c.substring(19));else if("data:image/svg+xml,%3C"!=c.substring(0,22)){var d=c.indexOf(",");d>0&&";base64,"!=c.substring(d-7,d+1)&&(c=c.substring(0,d)+";base64,"+c.substring(d+1))}a[mxConstants.STYLE_IMAGE]=c}}return a},mxGraph.prototype.setCellStyle=function(a,b){if(b=b||this.getSelectionCells(),null!=b){this.model.beginUpdate();try{for(var c=0;c<b.length;c++)this.model.setStyle(b[c],a)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(a,b,c){return c=c||this.getSelectionCell(),this.toggleCellStyles(a,b,[c])},mxGraph.prototype.toggleCellStyles=function(a,b,c){b=null!=b&&b,c=c||this.getSelectionCells();var d=null;if(null!=c&&c.length>0){var e=this.view.getState(c[0]),f=null!=e?e.style:this.getCellStyle(c[0]);null!=f&&(d=mxUtils.getValue(f,a,b)?0:1,this.setCellStyles(a,d,c))}return d},mxGraph.prototype.setCellStyles=function(a,b,c){c=c||this.getSelectionCells(),mxUtils.setCellStyles(this.model,c,a,b)},mxGraph.prototype.toggleCellStyleFlags=function(a,b,c){this.setCellStyleFlags(a,b,null,c)},mxGraph.prototype.setCellStyleFlags=function(a,b,c,d){if(d=d||this.getSelectionCells(),null!=d&&d.length>0){if(null==c){var e=this.view.getState(d[0]),f=null!=e?e.style:this.getCellStyle(d[0]);if(null!=f){var g=parseInt(f[a]||0);c=!((g&b)==b)}}mxUtils.setCellStyleFlags(this.model,d,a,b,c)}},mxGraph.prototype.alignCells=function(a,b,c){if(null==b&&(b=this.getSelectionCells()),null!=b&&b.length>1){if(null==c)for(var d=0;d<b.length;d++){var e=this.view.getState(b[d]);if(null!=e&&!this.model.isEdge(b[d]))if(null==c){if(a==mxConstants.ALIGN_CENTER){c=e.x+e.width/2;break}if(a==mxConstants.ALIGN_RIGHT)c=e.x+e.width;else if(a==mxConstants.ALIGN_TOP)c=e.y;else{if(a==mxConstants.ALIGN_MIDDLE){c=e.y+e.height/2;break}c=a==mxConstants.ALIGN_BOTTOM?e.y+e.height:e.x}}else c=a==mxConstants.ALIGN_RIGHT?Math.max(c,e.x+e.width):a==mxConstants.ALIGN_TOP?Math.min(c,e.y):a==mxConstants.ALIGN_BOTTOM?Math.max(c,e.y+e.height):Math.min(c,e.x)}if(null!=c){var f=this.view.scale;this.model.beginUpdate();try{for(var d=0;d<b.length;d++){var e=this.view.getState(b[d]);if(null!=e){var g=this.getCellGeometry(b[d]);null==g||this.model.isEdge(b[d])||(g=g.clone(),a==mxConstants.ALIGN_CENTER?g.x+=(c-e.x-e.width/2)/f:a==mxConstants.ALIGN_RIGHT?g.x+=(c-e.x-e.width)/f:a==mxConstants.ALIGN_TOP?g.y+=(c-e.y)/f:a==mxConstants.ALIGN_MIDDLE?g.y+=(c-e.y-e.height/2)/f:a==mxConstants.ALIGN_BOTTOM?g.y+=(c-e.y-e.height)/f:g.x+=(c-e.x)/f,this.resizeCell(b[d],g))}}this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",a,"cells",b))}finally{this.model.endUpdate()}}}return b},mxGraph.prototype.flipEdge=function(a){if(null!=a&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var b=this.model.getStyle(a);null==b||0==b.length?this.model.setStyle(a,this.alternateEdgeStyle):this.model.setStyle(a,null),this.resetEdge(a),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",a))}finally{this.model.endUpdate()}}return a},mxGraph.prototype.addImageBundle=function(a){this.imageBundles.push(a)},mxGraph.prototype.removeImageBundle=function(a){for(var b=[],c=0;c<this.imageBundles.length;c++)this.imageBundles[c]!=a&&b.push(this.imageBundles[c]);this.imageBundles=b},mxGraph.prototype.getImageFromBundles=function(a){if(null!=a)for(var b=0;b<this.imageBundles.length;b++){var c=this.imageBundles[b].getImage(a);if(null!=c)return c}return null},mxGraph.prototype.orderCells=function(a,b){null==b&&(b=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(b,a),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",a,"cells",b))}finally{this.model.endUpdate()}return b},mxGraph.prototype.cellsOrdered=function(a,b){if(null!=a){this.model.beginUpdate();try{for(var c=0;c<a.length;c++){var d=this.model.getParent(a[c]);b?this.model.add(d,a[c],c):this.model.add(d,a[c],this.model.getChildCount(d)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",b,"cells",a))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(a,b,c){null==c&&(c=mxUtils.sortCells(this.getSelectionCells(),!0)),c=this.getCellsForGroup(c),null==a&&(a=this.createGroupCell(c));var d=this.getBoundsForGroup(a,c,b);if(c.length>0&&null!=d){var e=this.model.getParent(a);null==e&&(e=this.model.getParent(c[0])),this.model.beginUpdate();try{null==this.getCellGeometry(a)&&this.model.setGeometry(a,new mxGeometry);var f=this.model.getChildCount(e);this.cellsAdded([a],e,f,null,null,!1,!1,!1),f=this.model.getChildCount(a),this.cellsAdded(c,a,f,null,null,!1,!1,!1),this.cellsMoved(c,-d.x,-d.y,!1,!1,!1),this.cellsResized([a],[d],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",a,"border",b,"cells",c))}finally{this.model.endUpdate()}}return a},mxGraph.prototype.getCellsForGroup=function(a){var b=[];if(null!=a&&a.length>0){var c=this.model.getParent(a[0]);b.push(a[0]);for(var d=1;d<a.length;d++)this.model.getParent(a[d])==c&&b.push(a[d])}return b},mxGraph.prototype.getBoundsForGroup=function(a,b,c){var d=this.getBoundingBoxFromGeometry(b,!0);if(null!=d){if(this.isSwimlane(a)){var e=this.getStartSize(a);d.x-=e.width,d.y-=e.height,d.width+=e.width,d.height+=e.height}null!=c&&(d.x-=c,d.y-=c,d.width+=2*c,d.height+=2*c)}return d},mxGraph.prototype.createGroupCell=function(a){var b=new mxCell("");return b.setVertex(!0),b.setConnectable(!1),b},mxGraph.prototype.ungroupCells=function(a){var b=[];if(null==a){a=this.getSelectionCells();for(var c=[],d=0;d<a.length;d++)this.model.getChildCount(a[d])>0&&c.push(a[d]);a=c}if(null!=a&&a.length>0){this.model.beginUpdate();try{for(var d=0;d<a.length;d++){var e=this.model.getChildren(a[d]);if(null!=e&&e.length>0){e=e.slice();var f=this.model.getParent(a[d]),g=this.model.getChildCount(f);this.cellsAdded(e,f,g,null,null,!0),b=b.concat(e)}}this.removeCellsAfterUngroup(a),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",a))}finally{this.model.endUpdate()}}return b},mxGraph.prototype.removeCellsAfterUngroup=function(a){this.cellsRemoved(this.addAllEdges(a))},mxGraph.prototype.removeCellsFromParent=function(a){null==a&&(a=this.getSelectionCells()),this.model.beginUpdate();try{var b=this.getDefaultParent(),c=this.model.getChildCount(b);this.cellsAdded(a,b,c,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",a))}finally{this.model.endUpdate()}return a},mxGraph.prototype.updateGroupBounds=function(a,b,c,d,e,f,g){null==a&&(a=this.getSelectionCells()),b=null!=b?b:0,c=null!=c&&c,d=null!=d?d:0,e=null!=e?e:0,f=null!=f?f:0,g=null!=g?g:0,this.model.beginUpdate();try{for(var h=a.length-1;h>=0;h--){var i=this.getCellGeometry(a[h]);if(null!=i){var j=this.getChildCells(a[h]);if(null!=j&&j.length>0){var k=this.getBoundingBoxFromGeometry(j,!0);if(null!=k&&k.width>0&&k.height>0){var l=0,m=0;if(this.isSwimlane(a[h])){var n=this.getStartSize(a[h]);l=n.width,m=n.height}i=i.clone(),c&&(i.x=Math.round(i.x+k.x-b-l-g),i.y=Math.round(i.y+k.y-b-m-d)),i.width=Math.round(k.width+2*b+l+g+e),i.height=Math.round(k.height+2*b+m+d+f),this.model.setGeometry(a[h],i),this.moveCells(j,b+l-k.x+g,b+m-k.y+d)}}}}}finally{this.model.endUpdate()}return a},mxGraph.prototype.getBoundingBox=function(a){var b=null;if(null!=a&&a.length>0)for(var c=0;c<a.length;c++)if(this.model.isVertex(a[c])||this.model.isEdge(a[c])){var d=this.view.getBoundingBox(this.view.getState(a[c]),!0);null!=d&&(null==b?b=mxRectangle.fromRectangle(d):b.add(d))}return b},mxGraph.prototype.cloneCells=function(a,b,c){b=null==b||b;var d=null;if(null!=a){for(var e=new mxDictionary,f=[],g=0;g<a.length;g++)e.put(a[g],!0),f.push(a[g]);if(f.length>0){var h=this.view.scale,i=this.view.translate;d=this.model.cloneCells(a,!0,c);for(var g=0;g<a.length;g++)if(!b&&this.model.isEdge(d[g])&&null!=this.getEdgeValidationError(d[g],this.model.getTerminal(d[g],!0),this.model.getTerminal(d[g],!1)))d[g]=null;else{var j=this.model.getGeometry(d[g]);if(null!=j){var k=this.view.getState(a[g]),l=this.view.getState(this.model.getParent(a[g]));if(null!=k&&null!=l){var m=l.origin.x,n=l.origin.y;if(this.model.isEdge(d[g])){for(var o=k.absolutePoints,p=this.model.getTerminal(a[g],!0);null!=p&&!e.get(p);)p=this.model.getParent(p);null==p&&j.setTerminalPoint(new mxPoint(o[0].x/h-i.x,o[0].y/h-i.y),!0);for(var q=this.model.getTerminal(a[g],!1);null!=q&&!e.get(q);)q=this.model.getParent(q);if(null==q){var r=o.length-1;j.setTerminalPoint(new mxPoint(o[r].x/h-i.x,o[r].y/h-i.y),!1)}var s=j.points;if(null!=s)for(var t=0;t<s.length;t++)s[t].x+=m,s[t].y+=n}else j.translate(m,n)}}}}else d=[]}return d},mxGraph.prototype.insertVertex=function(a,b,c,d,e,f,g,h,i){var j=this.createVertex(a,b,c,d,e,f,g,h,i);return this.addCell(j,a)},mxGraph.prototype.createVertex=function(a,b,c,d,e,f,g,h,i){var j=new mxGeometry(d,e,f,g);j.relative=null!=i&&i;var k=new mxCell(c,j,h);return k.setId(b),k.setVertex(!0),k.setConnectable(!0),k},mxGraph.prototype.insertEdge=function(a,b,c,d,e,f){var g=this.createEdge(a,b,c,d,e,f);return this.addEdge(g,a,d,e)},mxGraph.prototype.createEdge=function(a,b,c,d,e,f){var g=new mxCell(c,new mxGeometry,f);return g.setId(b),g.setEdge(!0),g.geometry.relative=!0,g},mxGraph.prototype.addEdge=function(a,b,c,d,e){return this.addCell(a,b,e,c,d)},mxGraph.prototype.addCell=function(a,b,c,d,e){return this.addCells([a],b,c,d,e)[0]},mxGraph.prototype.addCells=function(a,b,c,d,e){null==b&&(b=this.getDefaultParent()),null==c&&(c=this.model.getChildCount(b)),this.model.beginUpdate();try{this.cellsAdded(a,b,c,d,e,!1,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",a,"parent",b,"index",c,"source",d,"target",e))}finally{this.model.endUpdate()}return a},mxGraph.prototype.cellsAdded=function(a,b,c,d,e,f,g,h){if(null!=a&&null!=b&&null!=c){this.model.beginUpdate();try{for(var i=f?this.view.getState(b):null,j=null!=i?i.origin:null,k=new mxPoint(0,0),l=0;l<a.length;l++)if(null==a[l])c--;else{var m=this.model.getParent(a[l]);if(null!=j&&a[l]!=b&&b!=m){var n=this.view.getState(m),o=null!=n?n.origin:k,p=this.model.getGeometry(a[l]);if(null!=p){var q=o.x-j.x,r=o.y-j.y;p=p.clone(),p.translate(q,r),p.relative||!this.model.isVertex(a[l])||this.isAllowNegativeCoordinates()||(p.x=Math.max(0,p.x),p.y=Math.max(0,p.y)),this.model.setGeometry(a[l],p)}}b==m&&c+l>this.model.getChildCount(b)&&c--,this.model.add(b,a[l],c+l),this.autoSizeCellsOnAdd&&this.autoSizeCell(a[l],!0),(null==h||h)&&this.isExtendParentsOnAdd(a[l])&&this.isExtendParent(a[l])&&this.extendParent(a[l]),(null==g||g)&&this.constrainChild(a[l]),null!=d&&this.cellConnected(a[l],d,!0),null!=e&&this.cellConnected(a[l],e,!1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",a,"parent",b,"index",c,"source",d,"target",e,"absolute",f))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(a,b){if(b=null==b||b)for(var c=this.model.getChildCount(a),d=0;d<c;d++)this.autoSizeCell(this.model.getChildAt(a,d));this.getModel().isVertex(a)&&this.isAutoSizeCell(a)&&this.updateCellSize(a)},mxGraph.prototype.removeCells=function(a,b){b=null==b||b,null==a&&(a=this.getDeletableCells(this.getSelectionCells())),b&&(a=this.getDeletableCells(this.addAllEdges(a))),this.model.beginUpdate();try{this.cellsRemoved(a),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",a,"includeEdges",b))}finally{this.model.endUpdate()}return a},mxGraph.prototype.cellsRemoved=function(a){if(null!=a&&a.length>0){var b=this.view.scale,c=this.view.translate;this.model.beginUpdate();try{for(var d=new mxDictionary,e=0;e<a.length;e++)d.put(a[e],!0);for(var e=0;e<a.length;e++){for(var f=this.getAllEdges([a[e]]),g=mxUtils.bind(this,function(d,g){var i=this.model.getGeometry(d);if(null!=i){var j=this.view.getState(d);if(null!=j){for(var k=j.getVisibleTerminal(g),l=!1;null!=k;){if(a[e]==k){l=!0;break}k=this.model.getParent(k)}if(l){var m=c.x,n=c.y,o=this.view.getState(this.model.getParent(d));null!=o&&this.model.isVertex(o.cell)&&(m=o.x/b,n=o.y/b),i=i.clone();var p=j.absolutePoints,q=g?0:p.length-1;i.setTerminalPoint(new mxPoint(p[q].x/b-m,p[q].y/b-n),g),this.model.setTerminal(f[h],null,g),this.model.setGeometry(f[h],i)}}}}),h=0;h<f.length;h++)d.get(f[h])||(g(f[h],!0),g(f[h],!1));this.model.remove(a[e])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",a))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(a,b,c,d,e){d=d||0,e=e||0;var f=this.model.getParent(a),g=this.model.getTerminal(a,!0);this.model.beginUpdate();try{if(null==c){c=this.cloneCells([a])[0];var h=this.view.getState(a),i=this.getCellGeometry(c);if(null!=i&&null!=i.points&&null!=h){var j=this.view.translate,k=this.view.scale,l=mxUtils.findNearestSegment(h,(d+j.x)*k,(e+j.y)*k);i.points=i.points.slice(0,l),i=this.getCellGeometry(a),null!=i&&null!=i.points&&(i=i.clone(),i.points=i.points.slice(l),this.model.setGeometry(a,i))}}this.cellsMoved(b,d,e,!1,!1),this.cellsAdded(b,f,this.model.getChildCount(f),null,null,!0),this.cellsAdded([c],f,this.model.getChildCount(f),g,b[0],!1),this.cellConnected(a,b[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",a,"cells",b,"newEdge",c,"dx",d,"dy",e))}finally{this.model.endUpdate()}return c},mxGraph.prototype.toggleCells=function(a,b,c){null==b&&(b=this.getSelectionCells()),c&&(b=this.addAllEdges(b)),this.model.beginUpdate();try{this.cellsToggled(b,a),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",a,"cells",b,"includeEdges",c))}finally{this.model.endUpdate()}return b},mxGraph.prototype.cellsToggled=function(a,b){if(null!=a&&a.length>0){this.model.beginUpdate();try{for(var c=0;c<a.length;c++)this.model.setVisible(a[c],b)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(a,b,c,d,e){b=null!=b&&b,null==c&&(c=this.getFoldableCells(this.getSelectionCells(),a)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(c,a,b,d),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",a,"recurse",b,"cells",c))}finally{this.model.endUpdate()}return c},mxGraph.prototype.cellsFolded=function(a,b,c,d){if(null!=a&&a.length>0){this.model.beginUpdate();try{for(var e=0;e<a.length;e++)if((!d||this.isCellFoldable(a[e],b))&&b!=this.isCellCollapsed(a[e])){if(this.model.setCollapsed(a[e],b),this.swapBounds(a[e],b),this.isExtendParent(a[e])&&this.extendParent(a[e]),c){var f=this.model.getChildren(a[e]);this.foldCells(f,b,c)}this.constrainChild(a[e])}this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",a,"collapse",b,"recurse",c))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(a,b){if(null!=a){var c=this.model.getGeometry(a);null!=c&&(c=c.clone(),this.updateAlternateBounds(a,c,b),c.swap(),this.model.setGeometry(a,c))}},mxGraph.prototype.updateAlternateBounds=function(a,b,c){if(null!=a&&null!=b){var d=this.view.getState(a),e=null!=d?d.style:this.getCellStyle(a);if(null==b.alternateBounds){var f=b;if(this.collapseToPreferredSize){var g=this.getPreferredSizeForCell(a);if(null!=g){f=g;var h=mxUtils.getValue(e,mxConstants.STYLE_STARTSIZE);h>0&&(f.height=Math.max(f.height,h))}}b.alternateBounds=new mxRectangle(0,0,f.width,f.height)}if(null!=b.alternateBounds){b.alternateBounds.x=b.x,b.alternateBounds.y=b.y;var i=mxUtils.toRadians(e[mxConstants.STYLE_ROTATION]||0);if(0!=i){var j=b.alternateBounds.getCenterX()-b.getCenterX(),k=b.alternateBounds.getCenterY()-b.getCenterY(),l=Math.cos(i),m=Math.sin(i),n=l*j-m*k,o=m*j+l*k;b.alternateBounds.x+=n-j,b.alternateBounds.y+=o-k}}}},mxGraph.prototype.addAllEdges=function(a){var b=a.slice();return mxUtils.removeDuplicates(b.concat(this.getAllEdges(a)))},mxGraph.prototype.getAllEdges=function(a){var b=[];if(null!=a)for(var c=0;c<a.length;c++){for(var d=this.model.getEdgeCount(a[c]),e=0;e<d;e++)b.push(this.model.getEdgeAt(a[c],e));var f=this.model.getChildren(a[c]);b=b.concat(this.getAllEdges(f))}return b},mxGraph.prototype.updateCellSize=function(a,b){b=null!=b&&b,this.model.beginUpdate();try{this.cellSizeUpdated(a,b),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",a,"ignoreChildren",b))}finally{this.model.endUpdate()}return a},mxGraph.prototype.cellSizeUpdated=function(a,b){if(null!=a){this.model.beginUpdate();try{var c=this.getPreferredSizeForCell(a),d=this.model.getGeometry(a);if(null!=c&&null!=d){var e=this.isCellCollapsed(a);if(d=d.clone(),this.isSwimlane(a)){var f=this.view.getState(a),g=null!=f?f.style:this.getCellStyle(a),h=this.model.getStyle(a);null==h&&(h=""),mxUtils.getValue(g,mxConstants.STYLE_HORIZONTAL,!0)?(h=mxUtils.setStyle(h,mxConstants.STYLE_STARTSIZE,c.height+8),e&&(d.height=c.height+8),d.width=c.width):(h=mxUtils.setStyle(h,mxConstants.STYLE_STARTSIZE,c.width+8),e&&(d.width=c.width+8),d.height=c.height),this.model.setStyle(a,h)}else d.width=c.width,d.height=c.height;if(!b&&!e){var i=this.view.getBounds(this.model.getChildren(a));if(null!=i){var j=this.view.translate,k=this.view.scale,l=(i.x+i.width)/k-d.x-j.x,m=(i.y+i.height)/k-d.y-j.y;d.width=Math.max(d.width,l),d.height=Math.max(d.height,m)}}this.cellsResized([a],[d],!1)}}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(a){var b=null;if(null!=a){var c=this.view.getState(a)||this.view.createState(a),d=c.style;if(!this.model.isEdge(a)){var e=d[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,f=0,g=0;null==this.getImage(c)&&null==d[mxConstants.STYLE_IMAGE]||d[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_LABEL&&(d[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(f+=parseFloat(d[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),d[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(g+=parseFloat(d[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),f+=2*(d[mxConstants.STYLE_SPACING]||0),f+=d[mxConstants.STYLE_SPACING_LEFT]||0,f+=d[mxConstants.STYLE_SPACING_RIGHT]||0,g+=2*(d[mxConstants.STYLE_SPACING]||0),g+=d[mxConstants.STYLE_SPACING_TOP]||0,g+=d[mxConstants.STYLE_SPACING_BOTTOM]||0;var h=this.getFoldingImage(c);null!=h&&(f+=h.width+8);var i=this.cellRenderer.getLabelValue(c);if(null!=i&&i.length>0){this.isHtmlLabel(c.cell)||(i=mxUtils.htmlEntities(i)),i=i.replace(/\n/g,"<br>");var j=mxUtils.getSizeForString(i,e,d[mxConstants.STYLE_FONTFAMILY]),k=j.width+f,l=j.height+g;if(!mxUtils.getValue(d,mxConstants.STYLE_HORIZONTAL,!0)){var m=l;l=k,k=m}this.gridEnabled&&(k=this.snap(k+this.gridSize/2),l=this.snap(l+this.gridSize/2)),b=new mxRectangle(0,0,k,l)}else{var n=4*this.gridSize;b=new mxRectangle(0,0,n,n)}}}return b},mxGraph.prototype.resizeCell=function(a,b,c){return this.resizeCells([a],[b],c)[0]},mxGraph.prototype.resizeCells=function(a,b,c){c=null!=c?c:this.isRecursiveResize(),this.model.beginUpdate();try{this.cellsResized(a,b,c),this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",a,"bounds",b))}finally{this.model.endUpdate()}return a},mxGraph.prototype.cellsResized=function(a,b,c){if(c=null!=c&&c,null!=a&&null!=b&&a.length==b.length){this.model.beginUpdate();try{for(var d=0;d<a.length;d++)this.cellResized(a[d],b[d],!1,c),this.isExtendParent(a[d])&&this.extendParent(a[d]),this.constrainChild(a[d]);this.resetEdgesOnResize&&this.resetEdges(a),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",a,"bounds",b))}finally{this.model.endUpdate()}}},mxGraph.prototype.cellResized=function(a,b,c,d){var e=this.model.getGeometry(a);if(null!=e&&(e.x!=b.x||e.y!=b.y||e.width!=b.width||e.height!=b.height)){if(e=e.clone(),!c&&e.relative){var f=e.offset;null!=f&&(f.x+=b.x-e.x,f.y+=b.y-e.y)}else e.x=b.x,e.y=b.y;e.width=b.width,e.height=b.height,e.relative||!this.model.isVertex(a)||this.isAllowNegativeCoordinates()||(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)),this.model.beginUpdate();try{d&&this.resizeChildCells(a,e),this.model.setGeometry(a,e),this.constrainChildCells(a)}finally{this.model.endUpdate()}}},mxGraph.prototype.resizeChildCells=function(a,b){for(var c=this.model.getGeometry(a),d=b.width/c.width,e=b.height/c.height,f=this.model.getChildCount(a),g=0;g<f;g++)this.scaleCell(this.model.getChildAt(a,g),d,e,!0)},mxGraph.prototype.constrainChildCells=function(a){for(var b=this.model.getChildCount(a),c=0;c<b;c++)this.constrainChild(this.model.getChildAt(a,c))},mxGraph.prototype.scaleCell=function(a,b,c,d){var e=this.model.getGeometry(a);if(null!=e){var f=this.view.getState(a),g=null!=f?f.style:this.getCellStyle(a);e=e.clone();var h=e.x,i=e.y,j=e.width,k=e.height;e.scale(b,c,"fixed"==g[mxConstants.STYLE_ASPECT]),"1"==g[mxConstants.STYLE_RESIZE_WIDTH]?e.width=j*b:"0"==g[mxConstants.STYLE_RESIZE_WIDTH]&&(e.width=j),"1"==g[mxConstants.STYLE_RESIZE_HEIGHT]?e.height=k*c:"0"==g[mxConstants.STYLE_RESIZE_HEIGHT]&&(e.height=k),this.isCellMovable(a)||(e.x=h,e.y=i),this.isCellResizable(a)||(e.width=j,e.height=k),this.model.isVertex(a)?this.cellResized(a,e,!0,d):this.model.setGeometry(a,e)}},mxGraph.prototype.extendParent=function(a){if(null!=a){var b=this.model.getParent(a),c=this.getCellGeometry(b);if(null!=b&&null!=c&&!this.isCellCollapsed(b)){var d=this.getCellGeometry(a);null!=d&&!d.relative&&(c.width<d.x+d.width||c.height<d.y+d.height)&&(c=c.clone(),c.width=Math.max(c.width,d.x+d.width),c.height=Math.max(c.height,d.y+d.height),this.cellsResized([b],[c],!1))}}},mxGraph.prototype.importCells=function(a,b,c,d,e,f){return this.moveCells(a,b,c,!0,d,e,f)},mxGraph.prototype.moveCells=function(a,b,c,d,e,f,g){if(b=null!=b?b:0,c=null!=c?c:0,d=null!=d&&d,null!=a&&(0!=b||0!=c||d||null!=e)){a=this.model.getTopmostCells(a),this.model.beginUpdate();try{for(var h=new mxDictionary,i=0;i<a.length;i++)h.put(a[i],!0);for(var j=mxUtils.bind(this,function(a){for(;null!=a;){if(h.get(a))return!0;a=this.model.getParent(a)}return!1}),k=[],i=0;i<a.length;i++){var l=this.getCellGeometry(a[i]),m=this.model.getParent(a[i]);null!=l&&l.relative&&this.model.isEdge(m)&&(j(this.model.getTerminal(m,!0))||j(this.model.getTerminal(m,!1)))||k.push(a[i])}a=k,d&&(a=this.cloneCells(a,this.isCloneInvalidEdges(),g),null==e&&(e=this.getDefaultParent()));var n=this.isAllowNegativeCoordinates();if(null!=e&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(a,b,c,!d&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==e,this.isExtendParentsOnMove()&&null==e),this.setAllowNegativeCoordinates(n),null!=e){var o=this.model.getChildCount(e);this.cellsAdded(a,e,o,null,null,!0)}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",a,"dx",b,"dy",c,"clone",d,"target",e,"event",f))}finally{this.model.endUpdate()}}return a},mxGraph.prototype.cellsMoved=function(a,b,c,d,e,f){if(null!=a&&(0!=b||0!=c)){f=null!=f&&f,this.model.beginUpdate();try{d&&this.disconnectGraph(a);for(var g=0;g<a.length;g++)this.translateCell(a[g],b,c),f&&this.isExtendParent(a[g])?this.extendParent(a[g]):e&&this.constrainChild(a[g]);this.resetEdgesOnMove&&this.resetEdges(a),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",a,"dx",b,"dy",c,"disconnect",d))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(a,b,c){var d=this.model.getGeometry(a);if(null!=d){if(b=parseFloat(b),
    c=parseFloat(c),d=d.clone(),d.translate(b,c),d.relative||!this.model.isVertex(a)||this.isAllowNegativeCoordinates()||(d.x=Math.max(0,parseFloat(d.x)),d.y=Math.max(0,parseFloat(d.y))),d.relative&&!this.model.isEdge(a)){var e=this.model.getParent(a),f=0;if(this.model.isVertex(e)){var g=this.view.getState(e),h=null!=g?g.style:this.getCellStyle(e);f=mxUtils.getValue(h,mxConstants.STYLE_ROTATION,0)}if(0!=f){var i=mxUtils.toRadians(-f),j=Math.cos(i),k=Math.sin(i),l=mxUtils.getRotatedPoint(new mxPoint(b,c),j,k,new mxPoint(0,0));b=l.x,c=l.y}null==d.offset?d.offset=new mxPoint(b,c):(d.offset.x=parseFloat(d.offset.x)+b,d.offset.y=parseFloat(d.offset.y)+c)}this.model.setGeometry(a,d)}},mxGraph.prototype.getCellContainmentArea=function(a){if(null!=a&&!this.model.isEdge(a)){var b=this.model.getParent(a);if(null!=b&&b!=this.getDefaultParent()){var c=this.model.getGeometry(b);if(null!=c){var d=0,e=0,f=c.width,g=c.height;if(this.isSwimlane(b)){var h=this.getStartSize(b),i=this.view.getState(b),j=null!=i?i.style:this.getCellStyle(b),k=mxUtils.getValue(j,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),l=1==mxUtils.getValue(j,mxConstants.STYLE_FLIPH,0),m=1==mxUtils.getValue(j,mxConstants.STYLE_FLIPV,0);if(k==mxConstants.DIRECTION_SOUTH||k==mxConstants.DIRECTION_NORTH){var n=h.width;h.width=h.height,h.height=n}(k==mxConstants.DIRECTION_EAST&&!m||k==mxConstants.DIRECTION_NORTH&&!l||k==mxConstants.DIRECTION_WEST&&m||k==mxConstants.DIRECTION_SOUTH&&l)&&(d=h.width,e=h.height),f-=h.width,g-=h.height}return new mxRectangle(d,e,f,g)}}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(a,b){if(b=null==b||b,null!=a){var c=this.getCellGeometry(a);if(null!=c&&(this.isConstrainRelativeChildren()||!c.relative)){var d=this.model.getParent(a),f=(this.getCellGeometry(d),this.getMaximumGraphBounds());if(null!=f){var g=this.getBoundingBoxFromGeometry([d],!1);null!=g&&(f=mxRectangle.fromRectangle(f),f.x-=g.x,f.y-=g.y)}if(this.isConstrainChild(a)){var h=this.getCellContainmentArea(a);if(null!=h){var i=this.getOverlap(a);i>0&&(h=mxRectangle.fromRectangle(h),h.x-=h.width*i,h.y-=h.height*i,h.width+=2*h.width*i,h.height+=2*h.height*i),null==f?f=h:(f=mxRectangle.fromRectangle(f),f.intersect(h))}}if(null!=f){var j=[a];if(!this.isCellCollapsed(a))for(var k=this.model.getDescendants(a),l=0;l<k.length;l++)this.isCellVisible(k[l])&&j.push(k[l]);var m=this.getBoundingBoxFromGeometry(j,!1);if(null!=m){c=c.clone();var n=0;c.width>f.width&&(n=c.width-f.width,c.width-=n),m.x+m.width>f.x+f.width&&(n-=m.x+m.width-f.x-f.width-n);var o=0;c.height>f.height&&(o=c.height-f.height,c.height-=o),m.y+m.height>f.y+f.height&&(o-=m.y+m.height-f.y-f.height-o),m.x<f.x&&(n-=m.x-f.x),m.y<f.y&&(o-=m.y-f.y),0==n&&0==o||(c.relative?(null==c.offset&&(c.offset=new mxPoint),c.offset.x+=n,c.offset.y+=o):(c.x+=n,c.y+=o)),this.model.setGeometry(a,c)}}}}},mxGraph.prototype.resetEdges=function(a){if(null!=a){for(var b=new mxDictionary,c=0;c<a.length;c++)b.put(a[c],!0);this.model.beginUpdate();try{for(var c=0;c<a.length;c++){var d=this.model.getEdges(a[c]);if(null!=d)for(var e=0;e<d.length;e++){var f=this.view.getState(d[e]),g=null!=f?f.getVisibleTerminal(!0):this.view.getVisibleTerminal(d[e],!0),h=null!=f?f.getVisibleTerminal(!1):this.view.getVisibleTerminal(d[e],!1);b.get(g)&&b.get(h)||this.resetEdge(d[e])}this.resetEdges(this.model.getChildren(a[c]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(a){var b=this.model.getGeometry(a);return null!=b&&null!=b.points&&b.points.length>0&&(b=b.clone(),b.points=[],this.model.setGeometry(a,b)),a},mxGraph.prototype.getOutlineConstraint=function(a,b,c){if(null!=b.shape){var d=this.view.getPerimeterBounds(b),e=b.style[mxConstants.STYLE_DIRECTION];if(e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH){d.x+=d.width/2-d.height/2,d.y+=d.height/2-d.width/2;var f=d.width;d.width=d.height,d.height=f}var g=mxUtils.toRadians(b.shape.getShapeRotation());if(0!=g){var h=Math.cos(-g),i=Math.sin(-g),j=new mxPoint(d.getCenterX(),d.getCenterY());a=mxUtils.getRotatedPoint(a,h,i,j)}var k=1,l=1,m=0,n=0;if(this.getModel().isVertex(b.cell)){var o=b.style[mxConstants.STYLE_FLIPH],p=b.style[mxConstants.STYLE_FLIPV];if(null!=b.shape&&null!=b.shape.stencil&&(o=1==mxUtils.getValue(b.style,"stencilFlipH",0)||o,p=1==mxUtils.getValue(b.style,"stencilFlipV",0)||p),e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH){var f=o;o=p,p=f}o&&(k=-1,m=-d.width),p&&(l=-1,n=-d.height)}a=new mxPoint((a.x-d.x)*k-m+d.x,(a.y-d.y)*l-n+d.y);var q=Math.round(1e3*(a.x-d.x)/d.width)/1e3,r=Math.round(1e3*(a.y-d.y)/d.height)/1e3;return new mxConnectionConstraint(new mxPoint(q,r),!1)}return null},mxGraph.prototype.getAllConnectionConstraints=function(a,b){return null!=a&&null!=a.shape&&null!=a.shape.stencil?a.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(a,b,c){var d=null,e=a.style[c?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X];if(null!=e){var f=a.style[c?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y];null!=f&&(d=new mxPoint(parseFloat(e),parseFloat(f)))}var g=!1;return null!=d&&(g=mxUtils.getValue(a.style,c?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0)),new mxConnectionConstraint(d,g)},mxGraph.prototype.setConnectionConstraint=function(a,b,c,d){if(null!=d){this.model.beginUpdate();try{null==d||null==d.point?(this.setCellStyles(c?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[a]),this.setCellStyles(c?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[a]),this.setCellStyles(c?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[a])):null!=d.point&&(this.setCellStyles(c?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,d.point.x,[a]),this.setCellStyles(c?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,d.point.y,[a]),d.perimeter?this.setCellStyles(c?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[a]):this.setCellStyles(c?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,"0",[a]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(a,b){var c=null;if(null!=a&&null!=b.point){var d=this.view.getPerimeterBounds(a),e=new mxPoint(d.getCenterX(),d.getCenterY()),f=a.style[mxConstants.STYLE_DIRECTION],g=0;if(null!=f&&(f==mxConstants.DIRECTION_NORTH?g+=270:f==mxConstants.DIRECTION_WEST?g+=180:f==mxConstants.DIRECTION_SOUTH&&(g+=90),f!=mxConstants.DIRECTION_NORTH&&f!=mxConstants.DIRECTION_SOUTH||d.rotate90()),null!=b.point){var h=1,i=1,j=0,k=0;if(this.getModel().isVertex(a.cell)){var l=a.style[mxConstants.STYLE_FLIPH],m=a.style[mxConstants.STYLE_FLIPV];if(null!=a.shape&&null!=a.shape.stencil&&(l=1==mxUtils.getValue(a.style,"stencilFlipH",0)||l,m=1==mxUtils.getValue(a.style,"stencilFlipV",0)||m),f==mxConstants.DIRECTION_NORTH||f==mxConstants.DIRECTION_SOUTH){var n=l;l=m,m=n}l&&(h=-1,j=-d.width),m&&(i=-1,k=-d.height)}c=new mxPoint(d.x+b.point.x*d.width*h-j,d.y+b.point.y*d.height*i-k)}var o=a.style[mxConstants.STYLE_ROTATION]||0;if(b.perimeter){if(0!=g&&null!=c){var p=0,q=0;90==g?q=1:180==g?p=-1:270==g&&(q=-1),c=mxUtils.getRotatedPoint(c,p,q,e)}null!=c&&b.perimeter&&(c=this.view.getPerimeterPoint(a,c,!1))}else o+=g;if(0!=o&&null!=c){var r=mxUtils.toRadians(o),p=Math.cos(r),q=Math.sin(r);c=mxUtils.getRotatedPoint(c,p,q,e)}}return null!=c&&(c.x=Math.round(c.x),c.y=Math.round(c.y)),c},mxGraph.prototype.connectCell=function(a,b,c,d){this.model.beginUpdate();try{var e=this.model.getTerminal(a,c);this.cellConnected(a,b,c,d),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",a,"terminal",b,"source",c,"previous",e))}finally{this.model.endUpdate()}return a},mxGraph.prototype.cellConnected=function(a,b,c,d){if(null!=a){this.model.beginUpdate();try{var e=this.model.getTerminal(a,c);if(this.setConnectionConstraint(a,b,c,d),this.isPortsEnabled()){var f=null;this.isPort(b)&&(f=b.getId(),b=this.getTerminalForPort(b,c));var g=c?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT;this.setCellStyles(g,f,[a])}this.model.setTerminal(a,b,c),this.resetEdgesOnConnect&&this.resetEdge(a),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",a,"terminal",b,"source",c,"previous",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(a){if(null!=a){this.model.beginUpdate();try{for(var b=this.view.scale,c=this.view.translate,d=new mxDictionary,e=0;e<a.length;e++)d.put(a[e],!0);for(var e=0;e<a.length;e++)if(this.model.isEdge(a[e])){var f=this.model.getGeometry(a[e]);if(null!=f){var g=this.view.getState(a[e]),h=this.view.getState(this.model.getParent(a[e]));if(null!=g&&null!=h){f=f.clone();var i=-h.origin.x,j=-h.origin.y,k=g.absolutePoints,l=this.model.getTerminal(a[e],!0);if(null!=l&&this.isCellDisconnectable(a[e],l,!0)){for(;null!=l&&!d.get(l);)l=this.model.getParent(l);null==l&&(f.setTerminalPoint(new mxPoint(k[0].x/b-c.x+i,k[0].y/b-c.y+j),!0),this.model.setTerminal(a[e],null,!0))}var m=this.model.getTerminal(a[e],!1);if(null!=m&&this.isCellDisconnectable(a[e],m,!1)){for(;null!=m&&!d.get(m);)m=this.model.getParent(m);if(null==m){var n=k.length-1;f.setTerminalPoint(new mxPoint(k[n].x/b-c.x+i,k[n].y/b-c.y+j),!1),this.model.setTerminal(a[e],null,!1)}}this.model.setGeometry(a[e],f)}}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(a){return null},mxGraph.prototype.isPort=function(a){return!1},mxGraph.prototype.getTerminalForPort=function(a,b){return this.model.getParent(a)},mxGraph.prototype.getChildOffsetForCell=function(a){return null},mxGraph.prototype.enterGroup=function(a){a=a||this.getSelectionCell(),null!=a&&this.isValidRoot(a)&&(this.view.setCurrentRoot(a),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var a=this.model.getRoot(),b=this.getCurrentRoot();if(null!=b){for(var c=this.model.getParent(b);c!=a&&!this.isValidRoot(c)&&this.model.getParent(c)!=a;)c=this.model.getParent(c);c==a||this.model.getParent(c)==a?this.view.setCurrentRoot(null):this.view.setCurrentRoot(c);var d=this.view.getState(b);null!=d&&this.setSelectionCell(b)}},mxGraph.prototype.home=function(){var a=this.getCurrentRoot();if(null!=a){this.view.setCurrentRoot(null);var b=this.view.getState(a);null!=b&&this.setSelectionCell(a)}},mxGraph.prototype.isValidRoot=function(a){return null!=a},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(a,b,c){var d=[a];b&&(d=d.concat(this.model.getEdges(a)));var e=this.view.getBounds(d);if(c)for(var f=this.model.getChildCount(a),g=0;g<f;g++){var h=this.getCellBounds(this.model.getChildAt(a,g),b,!0);null!=e?e.add(h):e=h}return e},mxGraph.prototype.getBoundingBoxFromGeometry=function(a,b){b=null!=b&&b;var c=null;if(null!=a)for(var d=0;d<a.length;d++)if(b||this.model.isVertex(a[d])){var e=this.getCellGeometry(a[d]);if(null!=e){var f=null;if(this.model.isEdge(a[d])){var g=function(a){null!=a&&(null==i?i=new mxRectangle(a.x,a.y,0,0):i.add(new mxRectangle(a.x,a.y,0,0)))};null==this.model.getTerminal(a[d],!0)&&g(e.getTerminalPoint(!0)),null==this.model.getTerminal(a[d],!1)&&g(e.getTerminalPoint(!1));var h=e.points;if(null!=h&&h.length>0)for(var i=new mxRectangle(h[0].x,h[0].y,0,0),j=1;j<h.length;j++)g(h[j]);f=i}else{var k=this.model.getParent(a[d]);if(e.relative){if(this.model.isVertex(k)&&k!=this.view.currentRoot){var i=this.getBoundingBoxFromGeometry([k],!1);null!=i&&(f=new mxRectangle(e.x*i.width,e.y*i.height,e.width,e.height),mxUtils.indexOf(a,k)>=0&&(f.x+=i.x,f.y+=i.y))}}else if(f=mxRectangle.fromRectangle(e),this.model.isVertex(k)&&mxUtils.indexOf(a,k)>=0){var i=this.getBoundingBoxFromGeometry([k],!1);null!=i&&(f.x+=i.x,f.y+=i.y)}null!=f&&null!=e.offset&&(f.x+=e.offset.x,f.y+=e.offset.y)}null!=f&&(null==c?c=mxRectangle.fromRectangle(f):c.add(f))}}return c},mxGraph.prototype.refresh=function(a){this.view.clear(a,null==a),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(a){return this.gridEnabled&&(a=Math.round(a/this.gridSize)*this.gridSize),a},mxGraph.prototype.panGraph=function(a,b){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-a,this.container.scrollTop=-b;else{var c=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==a&&0==b){if(mxClient.IS_IE?c.setAttribute("transform","translate("+a+","+b+")"):c.removeAttribute("transform"),null!=this.shiftPreview1){for(var d=this.shiftPreview1.firstChild;null!=d;){var e=d.nextSibling;this.container.appendChild(d),d=e}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(c.parentNode),d=this.shiftPreview2.firstChild;null!=d;){var e=d.nextSibling;this.container.appendChild(d),d=e}null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(c.setAttribute("transform","translate("+a+","+b+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var f=this.shiftPreview1,d=this.container.firstChild;null!=d;){var e=d.nextSibling;d!=c.parentNode?f.appendChild(d):f=this.shiftPreview2,d=e}null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,c.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=a+"px",this.shiftPreview1.style.top=b+"px",this.shiftPreview2.style.left=a+"px",this.shiftPreview2.style.top=b+"px"}else c.style.left=a+"px",c.style.top=b+"px";this.panDx=a,this.panDy=b,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(a,b){this.zoom(a/this.view.scale,b)},mxGraph.prototype.center=function(a,b,c,d){a=null==a||a,b=null==b||b,c=null!=c?c:.5,d=null!=d?d:.5;var e=mxUtils.hasScrollbars(this.container),f=this.container.clientWidth,g=this.container.clientHeight,h=this.getGraphBounds(),i=this.view.translate,j=this.view.scale,k=a?f-h.width:0,l=b?g-h.height:0;if(e){h.x-=i.x,h.y-=i.y;var m=this.container.scrollWidth,n=this.container.scrollHeight;m>f&&(k=0),n>g&&(l=0),this.view.setTranslate(Math.floor(k/2-h.x),Math.floor(l/2-h.y)),this.container.scrollLeft=(m-f)/2,this.container.scrollTop=(n-g)/2}else this.view.setTranslate(a?Math.floor(i.x-h.x*j+k*c/j):i.x,b?Math.floor(i.y-h.y*j+l*d/j):i.y)},mxGraph.prototype.zoom=function(a,b){b=null!=b?b:this.centerZoom;var c=Math.round(this.view.scale*a*100)/100,d=this.view.getState(this.getSelectionCell());if(a=c/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=d){var e=new mxRectangle(d.x*a,d.y*a,d.width*a,d.height*a);this.view.scale=c,this.scrollRectToVisible(e)||(this.view.revalidate(),this.view.setScale(c))}else{var f=mxUtils.hasScrollbars(this.container);if(b&&!f){var g=this.container.offsetWidth,h=this.container.offsetHeight;if(a>1){var i=(a-1)/(2*c);g*=-i,h*=-i}else{var i=(1/a-1)/(2*this.view.scale);g*=i,h*=i}this.view.scaleAndTranslate(c,this.view.translate.x+g,this.view.translate.y+h)}else{var j=this.view.translate.x,k=this.view.translate.y,l=this.container.scrollLeft,m=this.container.scrollTop;if(this.view.setScale(c),f){var g=0,h=0;b&&(g=this.container.offsetWidth*(a-1)/2,h=this.container.offsetHeight*(a-1)/2),this.container.scrollLeft=(this.view.translate.x-j)*this.view.scale+Math.round(l*a+g),this.container.scrollTop=(this.view.translate.y-k)*this.view.scale+Math.round(m*a+h)}}}},mxGraph.prototype.zoomToRect=function(a){var b=this.container.clientWidth/a.width,c=this.container.clientHeight/a.height,d=b/c;a.x=Math.max(0,a.x),a.y=Math.max(0,a.y);var e=Math.min(this.container.scrollWidth,a.x+a.width),f=Math.min(this.container.scrollHeight,a.y+a.height);if(a.width=e-a.x,a.height=f-a.y,d<1){var g=a.height/d,h=(g-a.height)/2;a.height=g;var i=Math.min(a.y,h);a.y=a.y-i,f=Math.min(this.container.scrollHeight,a.y+a.height),a.height=f-a.y}else{var j=a.width*d,k=(j-a.width)/2;a.width=j;var l=Math.min(a.x,k);a.x=a.x-l,e=Math.min(this.container.scrollWidth,a.x+a.width),a.width=e-a.x}var m=this.container.clientWidth/a.width,n=this.view.scale*m;mxUtils.hasScrollbars(this.container)?(this.view.setScale(n),this.container.scrollLeft=Math.round(a.x*m),this.container.scrollTop=Math.round(a.y*m)):this.view.scaleAndTranslate(n,this.view.translate.x-a.x/this.view.scale,this.view.translate.y-a.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(a,b){var c=-this.view.translate.x,d=-this.view.translate.y,e=this.view.getState(a);if(null!=e){var f=new mxRectangle(c+e.x,d+e.y,e.width,e.height);if(b&&null!=this.container){var g=this.container.clientWidth,h=this.container.clientHeight;f.x=f.getCenterX()-g/2,f.width=g,f.y=f.getCenterY()-h/2,f.height=h}var i=new mxPoint(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(f)){var j=new mxPoint(this.view.translate.x,this.view.translate.y);this.view.translate.x=i.x,this.view.translate.y=i.y,this.view.setTranslate(j.x,j.y)}}},mxGraph.prototype.scrollRectToVisible=function(a){var b=!1;if(null!=a){var c=this.container.offsetWidth,d=this.container.offsetHeight,e=Math.min(c,a.width),f=Math.min(d,a.height);if(mxUtils.hasScrollbars(this.container)){var g=this.container;a.x+=this.view.translate.x,a.y+=this.view.translate.y;var h=g.scrollLeft-a.x,i=Math.max(h-g.scrollLeft,0);h>0?g.scrollLeft-=h+2:(h=a.x+e-g.scrollLeft-g.clientWidth,h>0&&(g.scrollLeft+=h+2));var j=g.scrollTop-a.y,k=Math.max(0,j-g.scrollTop);j>0?g.scrollTop-=j+2:(j=a.y+f-g.scrollTop-g.clientHeight,j>0&&(g.scrollTop+=j+2)),this.useScrollbarsForPanning||0==i&&0==k||this.view.setTranslate(i,k)}else{var l=-this.view.translate.x,m=-this.view.translate.y,n=this.view.scale;a.x+e>l+c&&(this.view.translate.x-=(a.x+e-c-l)/n,b=!0),a.y+f>m+d&&(this.view.translate.y-=(a.y+f-d-m)/n,b=!0),a.x<l&&(this.view.translate.x+=(l-a.x)/n,b=!0),a.y<m&&(this.view.translate.y+=(m-a.y)/n,b=!0),b&&(this.view.refresh(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.refresh())}}return b},mxGraph.prototype.getCellGeometry=function(a){return this.model.getGeometry(a)},mxGraph.prototype.isCellVisible=function(a){return this.model.isVisible(a)},mxGraph.prototype.isCellCollapsed=function(a){return this.model.isCollapsed(a)},mxGraph.prototype.isCellConnectable=function(a){return this.model.isConnectable(a)},mxGraph.prototype.isOrthogonal=function(a){var b=a.style[mxConstants.STYLE_ORTHOGONAL];if(null!=b)return b;var c=this.view.getEdgeStyle(a);return c==mxEdgeStyle.SegmentConnector||c==mxEdgeStyle.ElbowConnector||c==mxEdgeStyle.SideToSide||c==mxEdgeStyle.TopToBottom||c==mxEdgeStyle.EntityRelation||c==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(a){var b=a.getVisibleTerminalState(!0),c=a.getVisibleTerminalState(!1);return null!=b&&b==c},mxGraph.prototype.isCloneEvent=function(a){return mxEvent.isControlDown(a)},mxGraph.prototype.isToggleEvent=function(a){return mxClient.IS_MAC?mxEvent.isMetaDown(a):mxEvent.isControlDown(a)},mxGraph.prototype.isGridEnabledEvent=function(a){return null!=a&&!mxEvent.isAltDown(a)},mxGraph.prototype.isConstrainedEvent=function(a){return mxEvent.isShiftDown(a)},mxGraph.prototype.isIgnoreTerminalEvent=function(a){return!1},mxGraph.prototype.validationAlert=function(a){mxUtils.alert(a)},mxGraph.prototype.isEdgeValid=function(a,b,c){return null==this.getEdgeValidationError(a,b,c)},mxGraph.prototype.getEdgeValidationError=function(a,b,c){if(null!=a&&!this.isAllowDanglingEdges()&&(null==b||null==c))return"";if(null!=a&&null==this.model.getTerminal(a,!0)&&null==this.model.getTerminal(a,!1))return null;if(!this.allowLoops&&b==c&&null!=b)return"";if(!this.isValidConnection(b,c))return"";if(null!=b&&null!=c){var d="";if(!this.multigraph){var e=this.model.getEdgesBetween(b,c,!0);(e.length>1||1==e.length&&e[0]!=a)&&(d+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n")}var f=this.model.getDirectedEdgeCount(b,!0,a),g=this.model.getDirectedEdgeCount(c,!1,a);if(null!=this.multiplicities)for(var h=0;h<this.multiplicities.length;h++){var i=this.multiplicities[h].check(this,a,b,c,f,g);null!=i&&(d+=i)}var i=this.validateEdge(a,b,c);return null!=i&&(d+=i),d.length>0?d:null}return this.allowDanglingEdges?null:""},mxGraph.prototype.validateEdge=function(a,b,c){return null},mxGraph.prototype.validateGraph=function(a,b){a=null!=a?a:this.model.getRoot(),b=null!=b?b:new Object;for(var c=!0,d=this.model.getChildCount(a),e=0;e<d;e++){var f=this.model.getChildAt(a,e),g=b;this.isValidRoot(f)&&(g=new Object);var h=this.validateGraph(f,g);null!=h?this.setCellWarning(f,h.replace(/\n/g,"<br>")):this.setCellWarning(f,null),c=c&&null==h}var i="";this.isCellCollapsed(a)&&!c&&(i+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),i+=this.model.isEdge(a)?this.getEdgeValidationError(a,this.model.getTerminal(a,!0),this.model.getTerminal(a,!1))||"":this.getCellValidationError(a)||"";var j=this.validateCell(a,b);return null!=j&&(i+=j),null==this.model.getParent(a)&&this.view.validate(),i.length>0||!c?i:null},mxGraph.prototype.getCellValidationError=function(a){var b=this.model.getDirectedEdgeCount(a,!0),c=this.model.getDirectedEdgeCount(a,!1),d=this.model.getValue(a),e="";if(null!=this.multiplicities)for(var f=0;f<this.multiplicities.length;f++){var g=this.multiplicities[f];g.source&&mxUtils.isNode(d,g.type,g.attr,g.value)&&(b>g.max||b<g.min)?e+=g.countError+"\n":!g.source&&mxUtils.isNode(d,g.type,g.attr,g.value)&&(c>g.max||c<g.min)&&(e+=g.countError+"\n")}return e.length>0?e:null},mxGraph.prototype.validateCell=function(a,b){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(a){this.backgroundImage=a},mxGraph.prototype.getFoldingImage=function(a){if(null!=a&&this.foldingEnabled&&!this.getModel().isEdge(a.cell)){var b=this.isCellCollapsed(a.cell);if(this.isCellFoldable(a.cell,!b))return b?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(a){var b=this.model.getValue(a);if(null!=b){if(mxUtils.isNode(b))return b.nodeName;if("function"==typeof b.toString)return b.toString()}return""},mxGraph.prototype.getLabel=function(a){var b="";if(this.labelsVisible&&null!=a){var c=this.view.getState(a),d=null!=c?c.style:this.getCellStyle(a);mxUtils.getValue(d,mxConstants.STYLE_NOLABEL,!1)||(b=this.convertValueToString(a))}return b};mxGraph.prototype.isHtmlLabel=function(a){return this.isHtmlLabels()};mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(a){this.htmlLabels=a},mxGraph.prototype.isWrapping=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return null!=c&&"wrap"==c[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return null!=c&&"hidden"==c[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(a,b,c,d){var e=null;if(null!=a){if(null==a.control||b!=a.control.node&&b.parentNode!=a.control.node||(e=this.collapseExpandResource,e=mxUtils.htmlEntities(mxResources.get(e)||e).replace(/\\n/g,"<br>")),null==e&&null!=a.overlays&&a.overlays.visit(function(a,c){null!=e||b!=c.node&&b.parentNode!=c.node||(e=c.overlay.toString())}),null==e){var f=this.selectionCellsHandler.getHandler(a.cell);null!=f&&"function"==typeof f.getTooltipForNode&&(e=f.getTooltipForNode(b))}null==e&&(e=this.getTooltipForCell(a.cell))}return e},mxGraph.prototype.getTooltipForCell=function(a){var b=null;return b=null!=a&&null!=a.getTooltip?a.getTooltip():this.convertValueToString(a)},mxGraph.prototype.getCursorForMouseEvent=function(a){return this.getCursorForCell(a.getCell())},mxGraph.prototype.getCursorForCell=function(a){return null},mxGraph.prototype.getStartSize=function(a){var b=new mxRectangle,c=this.view.getState(a),d=null!=c?c.style:this.getCellStyle(a);if(null!=d){var e=parseInt(mxUtils.getValue(d,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));mxUtils.getValue(d,mxConstants.STYLE_HORIZONTAL,!0)?b.height=e:b.width=e}return b},mxGraph.prototype.getImage=function(a){return null!=a&&null!=a.style?a.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.getVerticalAlign=function(a){return null!=a&&null!=a.style?a.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(a){return null!=a&&null!=a.style?a.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(a){return null!=a&&null!=a.style?a.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(a){return null!=a&&null!=a.style?a.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(a){return null!=a&&null!=a.style?a.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(a){this.border=a},mxGraph.prototype.isSwimlane=function(a){if(null!=a&&this.model.getParent(a)!=this.model.getRoot()){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);if(null!=c&&!this.model.isEdge(a))return c[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE}return!1},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(a){this.resizeContainer=a},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(a){this.enabled=a},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(a){this.escapeEnabled=a},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(a){this.invokesStopCellEditing=a},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(a){this.enterStopsCellEditing=a},mxGraph.prototype.isCellLocked=function(a){var b=this.model.getGeometry(a);return this.isCellsLocked()||null!=b&&this.model.isVertex(a)&&b.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(a){this.cellsLocked=a},mxGraph.prototype.getCloneableCells=function(a){return this.model.filterCells(a,mxUtils.bind(this,function(a){return this.isCellCloneable(a)}))},mxGraph.prototype.isCellCloneable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isCellsCloneable()&&0!=c[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(a){this.cellsCloneable=a},mxGraph.prototype.getExportableCells=function(a){return this.model.filterCells(a,mxUtils.bind(this,function(a){return this.canExportCell(a)}))},mxGraph.prototype.canExportCell=function(a){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(a){return this.model.filterCells(a,mxUtils.bind(this,function(a){return this.canImportCell(a)}))},mxGraph.prototype.canImportCell=function(a){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(a){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(a){this.cellsSelectable=a},mxGraph.prototype.getDeletableCells=function(a){return this.model.filterCells(a,mxUtils.bind(this,function(a){return this.isCellDeletable(a)}))},mxGraph.prototype.isCellDeletable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isCellsDeletable()&&0!=c[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(a){this.cellsDeletable=a},mxGraph.prototype.isLabelMovable=function(a){return!this.isCellLocked(a)&&(this.model.isEdge(a)&&this.edgeLabelsMovable||this.model.isVertex(a)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return 0!=c[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(a){return this.model.filterCells(a,mxUtils.bind(this,function(a){return this.isCellMovable(a)}))},mxGraph.prototype.isCellMovable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isCellsMovable()&&!this.isCellLocked(a)&&0!=c[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(a){this.cellsMovable=a},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(a){this.gridEnabled=a},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(a){this.portsEnabled=a},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(a){this.gridSize=a},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(a){this.tolerance=a},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(a){this.vertexLabelsMovable=a},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(a){this.edgeLabelsMovable=a},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(a){this.swimlaneNesting=a},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(a){this.swimlaneSelectionEnabled=a},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(a){this.multigraph=a},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(a){this.allowDanglingEdges=a},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(a){this.connectableEdges=a},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(a){this.cloneInvalidEdges=a},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(a){this.allowLoops=a},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(a){this.disconnectOnMove=a},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(a){this.dropEnabled=a},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(a){this.splitEnabled=a},mxGraph.prototype.isCellResizable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isCellsResizable()&&!this.isCellLocked(a)&&"0"!=mxUtils.getValue(c,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(a){
  this.cellsResizable=a},mxGraph.prototype.isTerminalPointMovable=function(a,b){return!0},mxGraph.prototype.isCellBendable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isCellsBendable()&&!this.isCellLocked(a)&&0!=c[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(a){this.cellsBendable=a},mxGraph.prototype.isCellEditable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isCellsEditable()&&!this.isCellLocked(a)&&0!=c[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(a){this.cellsEditable=a},mxGraph.prototype.isCellDisconnectable=function(a,b,c){return this.isCellsDisconnectable()&&!this.isCellLocked(a)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(a){this.cellsDisconnectable=a},mxGraph.prototype.isValidSource=function(a){return null==a&&this.allowDanglingEdges||null!=a&&(!this.model.isEdge(a)||this.connectableEdges)&&this.isCellConnectable(a)},mxGraph.prototype.isValidTarget=function(a){return this.isValidSource(a)},mxGraph.prototype.isValidConnection=function(a,b){return this.isValidSource(a)&&this.isValidTarget(b)},mxGraph.prototype.setConnectable=function(a){this.connectionHandler.setEnabled(a)},mxGraph.prototype.isConnectable=function(a){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(a){this.tooltipHandler.setEnabled(a)},mxGraph.prototype.setPanning=function(a){this.panningHandler.panningEnabled=a},mxGraph.prototype.isEditing=function(a){if(null!=this.cellEditor){var b=this.cellEditor.getEditingCell();return null==a?null!=b:a==b}return!1},mxGraph.prototype.isAutoSizeCell=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isAutoSizeCells()||1==c[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(a){this.autoSizeCells=a},mxGraph.prototype.isExtendParent=function(a){return!this.getModel().isEdge(a)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(a){this.extendParents=a},mxGraph.prototype.isExtendParentsOnAdd=function(a){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(a){this.extendParentsOnAdd=a},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(a){this.extendParentsOnMove=a},mxGraph.prototype.isRecursiveResize=function(a){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(a){this.recursiveResize=a},mxGraph.prototype.isConstrainChild=function(a){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(a))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(a){this.constrainChildren=a},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(a){this.constrainRelativeChildren=a},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(a){this.allowNegativeCoordinates=a},mxGraph.prototype.getOverlap=function(a){return this.isAllowOverlapParent(a)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(a){return!1},mxGraph.prototype.getFoldableCells=function(a,b){return this.model.filterCells(a,mxUtils.bind(this,function(a){return this.isCellFoldable(a,b)}))},mxGraph.prototype.isCellFoldable=function(a,b){var c=this.view.getState(a),d=null!=c?c.style:this.getCellStyle(a);return this.model.getChildCount(a)>0&&0!=d[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(a,b,c){return null!=a&&(this.isSplitEnabled()&&this.isSplitTarget(a,b,c)||!this.model.isEdge(a)&&(this.isSwimlane(a)||this.model.getChildCount(a)>0&&!this.isCellCollapsed(a)))},mxGraph.prototype.isSplitTarget=function(a,b,c){if(this.model.isEdge(a)&&null!=b&&1==b.length&&this.isCellConnectable(b[0])&&null==this.getEdgeValidationError(a,this.model.getTerminal(a,!0),b[0])){var d=this.model.getTerminal(a,!0),e=this.model.getTerminal(a,!1);return!this.model.isAncestor(b[0],d)&&!this.model.isAncestor(b[0],e)}return!1},mxGraph.prototype.getDropTarget=function(a,b,c,d){if(!this.isSwimlaneNesting())for(var e=0;e<a.length;e++)if(this.isSwimlane(a[e]))return null;var f=mxUtils.convertPoint(this.container,mxEvent.getClientX(b),mxEvent.getClientY(b));f.x-=this.panDx,f.y-=this.panDy;var g=this.getSwimlaneAt(f.x,f.y);if(null==c)c=g;else if(null!=g){for(var h=this.model.getParent(g);null!=h&&this.isSwimlane(h)&&h!=c;)h=this.model.getParent(h);h==c&&(c=g)}for(;null!=c&&!this.isValidDropTarget(c,a,b)&&!this.model.isLayer(c);)c=this.model.getParent(c);if(null==d||!d)for(var i=c;null!=i&&mxUtils.indexOf(a,i)<0;)i=this.model.getParent(i);return this.model.isLayer(c)||null!=i?null:c},mxGraph.prototype.getDefaultParent=function(){var a=this.getCurrentRoot();if(null==a&&(a=this.defaultParent,null==a)){var b=this.model.getRoot();a=this.model.getChildAt(b,0)}return a},mxGraph.prototype.setDefaultParent=function(a){this.defaultParent=a},mxGraph.prototype.getSwimlane=function(a){for(;null!=a&&!this.isSwimlane(a);)a=this.model.getParent(a);return a},mxGraph.prototype.getSwimlaneAt=function(a,b,c){if(c=c||this.getDefaultParent(),null!=c)for(var d=this.model.getChildCount(c),e=0;e<d;e++){var f=this.model.getChildAt(c,e),g=this.getSwimlaneAt(a,b,f);if(null!=g)return g;if(this.isSwimlane(f)){var h=this.view.getState(f);if(this.intersects(h,a,b))return f}}return null},mxGraph.prototype.getCellAt=function(a,b,c,d,e,f){if(d=null==d||d,e=null==e||e,null==c&&(c=this.getCurrentRoot(),null==c&&(c=this.getModel().getRoot())),null!=c)for(var g=this.model.getChildCount(c),h=g-1;h>=0;h--){var i=this.model.getChildAt(c,h),j=this.getCellAt(a,b,i,d,e,f);if(null!=j)return j;if(this.isCellVisible(i)&&(e&&this.model.isEdge(i)||d&&this.model.isVertex(i))){var k=this.view.getState(i);if(null!=k&&(null==f||!f(k,a,b))&&this.intersects(k,a,b))return i}}return null},mxGraph.prototype.intersects=function(a,b,c){if(null!=a){var d=a.absolutePoints;if(null!=d)for(var e=this.tolerance*this.tolerance,f=d[0],g=1;g<d.length;g++){var h=d[g],i=mxUtils.ptSegDistSq(f.x,f.y,h.x,h.y,b,c);if(i<=e)return!0;f=h}else{var j=mxUtils.toRadians(mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION)||0);if(0!=j){var k=Math.cos(-j),l=Math.sin(-j),m=new mxPoint(a.getCenterX(),a.getCenterY()),f=mxUtils.getRotatedPoint(new mxPoint(b,c),k,l,m);b=f.x,c=f.y}if(mxUtils.contains(a,b,c))return!0}}return!1},mxGraph.prototype.hitsSwimlaneContent=function(a,b,c){var d=this.getView().getState(a),e=this.getStartSize(a);if(null!=d){var f=this.getView().getScale();if(b-=d.x,c-=d.y,e.width>0&&b>0&&b>e.width*f)return!0;if(e.height>0&&c>0&&c>e.height*f)return!0}return!1},mxGraph.prototype.getChildVertices=function(a){return this.getChildCells(a,!0,!1)},mxGraph.prototype.getChildEdges=function(a){return this.getChildCells(a,!1,!0)},mxGraph.prototype.getChildCells=function(a,b,c){a=null!=a?a:this.getDefaultParent(),b=null!=b&&b,c=null!=c&&c;for(var d=this.model.getChildCells(a,b,c),e=[],f=0;f<d.length;f++)this.isCellVisible(d[f])&&e.push(d[f]);return e},mxGraph.prototype.getConnections=function(a,b){return this.getEdges(a,b,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(a,b){return this.getEdges(a,b,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(a,b){return this.getEdges(a,b,!1,!0,!1)},mxGraph.prototype.getEdges=function(a,b,c,d,e,f){c=null==c||c,d=null==d||d,e=null==e||e,f=null!=f&&f;for(var g=[],h=this.isCellCollapsed(a),i=this.model.getChildCount(a),j=0;j<i;j++){var k=this.model.getChildAt(a,j);!h&&this.isCellVisible(k)||(g=g.concat(this.model.getEdges(k,c,d)))}g=g.concat(this.model.getEdges(a,c,d));for(var l=[],j=0;j<g.length;j++){var m=this.view.getState(g[j]),n=null!=m?m.getVisibleTerminal(!0):this.view.getVisibleTerminal(g[j],!0),o=null!=m?m.getVisibleTerminal(!1):this.view.getVisibleTerminal(g[j],!1);(e&&n==o||n!=o&&(c&&o==a&&(null==b||this.isValidAncestor(n,b,f))||d&&n==a&&(null==b||this.isValidAncestor(o,b,f))))&&l.push(g[j])}return l},mxGraph.prototype.isValidAncestor=function(a,b,c){return c?this.model.isAncestor(b,a):this.model.getParent(a)==b},mxGraph.prototype.getOpposites=function(a,b,c,d){c=null==c||c,d=null==d||d;var e=[],f=new mxDictionary;if(null!=a)for(var g=0;g<a.length;g++){var h=this.view.getState(a[g]),i=null!=h?h.getVisibleTerminal(!0):this.view.getVisibleTerminal(a[g],!0),j=null!=h?h.getVisibleTerminal(!1):this.view.getVisibleTerminal(a[g],!1);i==b&&null!=j&&j!=b&&d?f.get(j)||(f.put(j,!0),e.push(j)):j==b&&null!=i&&i!=b&&c&&(f.get(i)||(f.put(i,!0),e.push(i)))}return e},mxGraph.prototype.getEdgesBetween=function(a,b,c){c=null!=c&&c;for(var d=this.getEdges(a),e=[],f=0;f<d.length;f++){var g=this.view.getState(d[f]),h=null!=g?g.getVisibleTerminal(!0):this.view.getVisibleTerminal(d[f],!0),i=null!=g?g.getVisibleTerminal(!1):this.view.getVisibleTerminal(d[f],!1);(h==a&&i==b||!c&&h==b&&i==a)&&e.push(d[f])}return e},mxGraph.prototype.getPointForEvent=function(a,b){var c=mxUtils.convertPoint(this.container,mxEvent.getClientX(a),mxEvent.getClientY(a)),d=this.view.scale,e=this.view.translate,f=0!=b?this.gridSize/2:0;return c.x=this.snap(c.x/d-e.x-f),c.y=this.snap(c.y/d-e.y-f),c},mxGraph.prototype.getCells=function(a,b,c,d,e,f){if(f=null!=f?f:[],c>0||d>0){var g=this.getModel(),h=a+c,i=b+d;if(null==e&&(e=this.getCurrentRoot(),null==e&&(e=g.getRoot())),null!=e)for(var j=g.getChildCount(e),k=0;k<j;k++){var l=g.getChildAt(e,k),m=this.view.getState(l);if(null!=m&&this.isCellVisible(l)){var n=mxUtils.getValue(m.style,mxConstants.STYLE_ROTATION)||0,o=m;0!=n&&(o=mxUtils.getBoundingBox(o,n)),(g.isEdge(l)||g.isVertex(l))&&o.x>=a&&o.y+o.height<=i&&o.y>=b&&o.x+o.width<=h?f.push(l):this.getCells(a,b,c,d,l,f)}}}return f},mxGraph.prototype.getCellsBeyond=function(a,b,c,d,e){var f=[];if((d||e)&&(null==c&&(c=this.getDefaultParent()),null!=c))for(var g=this.model.getChildCount(c),h=0;h<g;h++){var i=this.model.getChildAt(c,h),j=this.view.getState(i);this.isCellVisible(i)&&null!=j&&(!d||j.x>=a)&&(!e||j.y>=b)&&f.push(i)}return f},mxGraph.prototype.findTreeRoots=function(a,b,c){b=null!=b&&b,c=null!=c&&c;var d=[];if(null!=a){for(var e=this.getModel(),f=e.getChildCount(a),g=null,h=0,i=0;i<f;i++){var j=e.getChildAt(a,i);if(this.model.isVertex(j)&&this.isCellVisible(j)){for(var k=this.getConnections(j,b?a:null),l=0,m=0,n=0;n<k.length;n++){var o=this.view.getVisibleTerminal(k[n],!0);o==j?l++:m++}(c&&0==l&&m>0||!c&&0==m&&l>0)&&d.push(j);var p=c?m-l:l-m;p>h&&(h=p,g=j)}}0==d.length&&null!=g&&d.push(g)}return d},mxGraph.prototype.traverse=function(a,b,c,d,e){if(null!=c&&null!=a&&(b=null==b||b,e=e||new mxDictionary,!e.get(a))){e.put(a,!0);var f=c(a,d);if(null==f||f){var g=this.model.getEdgeCount(a);if(g>0)for(var h=0;h<g;h++){var i=this.model.getEdgeAt(a,h),j=this.model.getTerminal(i,!0)==a;if(!b||j){var k=this.model.getTerminal(i,!j);this.traverse(k,b,c,i,e)}}}}},mxGraph.prototype.isCellSelected=function(a){return this.getSelectionModel().isSelected(a)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(a){this.getSelectionModel().setCell(a)},mxGraph.prototype.setSelectionCells=function(a){this.getSelectionModel().setCells(a)},mxGraph.prototype.addSelectionCell=function(a){this.getSelectionModel().addCell(a)},mxGraph.prototype.addSelectionCells=function(a){this.getSelectionModel().addCells(a)},mxGraph.prototype.removeSelectionCell=function(a){this.getSelectionModel().removeCell(a)},mxGraph.prototype.removeSelectionCells=function(a){this.getSelectionModel().removeCells(a)},mxGraph.prototype.selectRegion=function(a,b){var c=this.getCells(a.x,a.y,a.width,a.height);return this.selectCellsForEvent(c,b),c},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(a,b,c){var d=this.selectionModel,e=d.cells.length>0?d.cells[0]:null;d.cells.length>1&&d.clear();var f=null!=e?this.model.getParent(e):this.getDefaultParent(),g=this.model.getChildCount(f);if(null==e&&g>0){var h=this.model.getChildAt(f,0);this.setSelectionCell(h)}else if(null!=e&&!b||null==this.view.getState(f)||null==this.model.getGeometry(f)){if(null!=e&&c){var i=this.model.getChildCount(e);if(i>0){var h=this.model.getChildAt(e,0);this.setSelectionCell(h)}}else if(g>0){var j=f.getIndex(e);if(a){j++;var h=this.model.getChildAt(f,j%g);this.setSelectionCell(h)}else{j--;var k=j<0?g-1:j,h=this.model.getChildAt(f,k);this.setSelectionCell(h)}}}else this.getCurrentRoot()!=f&&this.setSelectionCell(f)},mxGraph.prototype.selectAll=function(a,b){a=a||this.getDefaultParent();var c=b?this.model.filterDescendants(function(b){return b!=a},a):this.model.getChildren(a);null!=c&&this.setSelectionCells(c)},mxGraph.prototype.selectVertices=function(a){this.selectCells(!0,!1,a)},mxGraph.prototype.selectEdges=function(a){this.selectCells(!1,!0,a)},mxGraph.prototype.selectCells=function(a,b,c){c=c||this.getDefaultParent();var d=mxUtils.bind(this,function(c){return null!=this.view.getState(c)&&(0==this.model.getChildCount(c)&&this.model.isVertex(c)&&a&&!this.model.isEdge(this.model.getParent(c))||this.model.isEdge(c)&&b)}),e=this.model.filterDescendants(d,c);this.setSelectionCells(e)},mxGraph.prototype.selectCellForEvent=function(a,b){var c=this.isCellSelected(a);this.isToggleEvent(b)?c?this.removeSelectionCell(a):this.addSelectionCell(a):c&&1==this.getSelectionCount()||this.setSelectionCell(a)},mxGraph.prototype.selectCellsForEvent=function(a,b){this.isToggleEvent(b)?this.addSelectionCells(a):this.setSelectionCells(a)},mxGraph.prototype.createHandler=function(a){var b=null;if(null!=a)if(this.model.isEdge(a.cell)){var c=a.getVisibleTerminalState(!0),d=a.getVisibleTerminalState(!1),e=this.getCellGeometry(a.cell),f=this.view.getEdgeStyle(a,null!=e?e.points:null,c,d);b=this.createEdgeHandler(a,f)}else b=this.createVertexHandler(a);return b},mxGraph.prototype.createVertexHandler=function(a){return new mxVertexHandler(a)},mxGraph.prototype.createEdgeHandler=function(a,b){var c=null;return c=b==mxEdgeStyle.Loop||b==mxEdgeStyle.ElbowConnector||b==mxEdgeStyle.SideToSide||b==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(a):b==mxEdgeStyle.SegmentConnector||b==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(a):new mxEdgeHandler(a)},mxGraph.prototype.createEdgeSegmentHandler=function(a){return new mxEdgeSegmentHandler(a)},mxGraph.prototype.createElbowEdgeHandler=function(a){return new mxElbowEdgeHandler(a)},mxGraph.prototype.addMouseListener=function(a){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(a)},mxGraph.prototype.removeMouseListener=function(a){if(null!=this.mouseListeners)for(var b=0;b<this.mouseListeners.length;b++)if(this.mouseListeners[b]==a){this.mouseListeners.splice(b,1);break}},mxGraph.prototype.updateMouseEvent=function(a,b){if(null==a.graphX||null==a.graphY){var c=mxUtils.convertPoint(this.container,a.getX(),a.getY());a.graphX=c.x-this.panDx,a.graphY=c.y-this.panDy,null==a.getCell()&&this.isMouseDown&&b==mxEvent.MOUSE_MOVE&&(a.state=this.view.getState(this.getCellAt(c.x,c.y,null,null,null,function(a){return null==a.shape||a.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(a.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=a.shape.fill&&a.shape.fill!=mxConstants.NONE})))}return a},mxGraph.prototype.getStateForTouchEvent=function(a){var b=mxEvent.getClientX(a),c=mxEvent.getClientY(a),d=mxUtils.convertPoint(this.container,b,c);return this.view.getState(this.getCellAt(d.x,d.y))},mxGraph.prototype.isEventIgnored=function(a,b,c){var d=mxEvent.isMouseEvent(b.getEvent()),e=!1;return b.getEvent()==this.lastEvent?e=!0:this.lastEvent=b.getEvent(),null!=this.eventSource&&a!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):null!=this.eventSource&&b.getSource()!=this.eventSource?e=!0:mxClient.IS_TOUCH&&a==mxEvent.MOUSE_DOWN&&!d&&(this.eventSource=b.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(a){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a,this.getStateForTouchEvent(a)))}),this.mouseUpRedirect=mxUtils.bind(this,function(a){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a,this.getStateForTouchEvent(a)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)),this.isSyntheticEventIgnored(a,b,c)&&(e=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&a!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(a==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:a!=mxEvent.MOUSE_DOWN||this.isMouseDown?!e&&((!mxClient.IS_FF||a!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=d||a==mxEvent.MOUSE_DOWN&&this.isMouseDown||a==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(e=!0):(this.isMouseDown=!0,this.isMouseTrigger=d),e||a!=mxEvent.MOUSE_DOWN||(this.lastMouseX=b.getX(),this.lastMouseY=b.getY()),e)},mxGraph.prototype.isSyntheticEventIgnored=function(a,b,c){var d=!1,e=mxEvent.isMouseEvent(b.getEvent());return this.ignoreMouseEvents&&e&&a!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=a!=mxEvent.MOUSE_UP,d=!0):mxClient.IS_FF&&!e&&a==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),d},mxGraph.prototype.isEventSourceIgnored=function(a,b){var c=b.getSource(),d=null!=c.nodeName?c.nodeName.toLowerCase():"",e=!mxEvent.isMouseEvent(b.getEvent())||mxEvent.isLeftMouseButton(b.getEvent());return a==mxEvent.MOUSE_DOWN&&e&&("select"==d||"option"==d||"input"==d&&"checkbox"!=c.type&&"radio"!=c.type&&"button"!=c.type&&"submit"!=c.type&&"file"!=c.type)},mxGraph.prototype.getEventState=function(a){return a},mxGraph.prototype.fireMouseEvent=function(a,b,c){if(this.isEventSourceIgnored(a,b))return void(null!=this.tooltipHandler&&this.tooltipHandler.hide());if(null==c&&(c=this),b=this.updateMouseEvent(b,a),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(b.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&mxEvent.isTouchEvent(b.getEvent())){var d=(new Date).getTime();if(!mxClient.IS_QUIRKS&&a==mxEvent.MOUSE_DOWN||mxClient.IS_QUIRKS&&a==mxEvent.MOUSE_UP&&!this.fireDoubleClick)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=b.getEvent()&&d-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-b.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-b.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var e=!1;if(a==mxEvent.MOUSE_UP){if(b.getCell()==this.lastTouchCell&&null!=this.lastTouchCell){this.lastTouchTime=0;var f=this.lastTouchCell;this.lastTouchCell=null,mxClient.IS_QUIRKS&&b.getSource().fireEvent("ondblclick"),this.dblClick(b.getEvent(),f),e=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(!mxClient.IS_QUIRKS||e)return void mxEvent.consume(b.getEvent())}else null!=this.lastTouchEvent&&this.lastTouchEvent==b.getEvent()||(this.lastTouchCell=b.getCell(),this.lastTouchX=b.getX(),this.lastTouchY=b.getY(),this.lastTouchTime=d,this.lastTouchEvent=b.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||a==mxEvent.MOUSE_UP)&&this.fireDoubleClick){this.fireDoubleClick=!1;var f=this.lastTouchCell;this.lastTouchCell=null,this.isMouseDown=!1;var g=null!=f||mxEvent.isTouchEvent(b.getEvent())&&(mxClient.IS_GC||mxClient.IS_SF);return void(g&&Math.abs(this.lastTouchX-b.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-b.getY())<this.doubleTapTolerance?this.dblClick(b.getEvent(),f):mxEvent.consume(b.getEvent()))}}if(!this.isEventIgnored(a,b,c)){if(b.state=this.getEventState(b.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",a,"event",b)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||b.getEvent().target!=this.container){if(a==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(b.getEvent))this.scrollPointToVisible(b.getGraphX(),b.getGraphY(),this.autoExtend);else if(a==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)){var h=this.view.scale,i=this.view.translate;this.view.setTranslate(i.x-this.container.scrollLeft/h,i.y-this.container.scrollTop/h),this.container.scrollLeft=0,this.container.scrollTop=0}if(null!=this.mouseListeners){var j=[c,b];b.getEvent().preventDefault||(b.getEvent().returnValue=!0);for(var k=0;k<this.mouseListeners.length;k++){var l=this.mouseListeners[k];a==mxEvent.MOUSE_DOWN?l.mouseDown.apply(l,j):a==mxEvent.MOUSE_MOVE?l.mouseMove.apply(l,j):a==mxEvent.MOUSE_UP&&l.mouseUp.apply(l,j)}}a==mxEvent.MOUSE_UP&&this.click(b)}if(mxEvent.isTouchEvent(b.getEvent())&&a==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress){this.tapAndHoldInProgress=!0,this.initialTouchX=b.getGraphX(),this.initialTouchY=b.getGraphY();var m=function(){this.tapAndHoldValid&&this.tapAndHold(b),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1};this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,m),this.tapAndHoldDelay),this.tapAndHoldValid=!0}else a==mxEvent.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-b.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-b.getGraphY())<this.tolerance);a==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(b.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(a,b,c)}},mxGraph.prototype.consumeMouseEvent=function(a,b,c){a==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(b.getEvent())&&b.consume(!1)},mxGraph.prototype.fireGestureEvent=function(a,b){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",a,"cell",b))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM;mxCellOverlay.prototype.offset=null;mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(a){var b=a.view.graph.getModel().isEdge(a.cell),c=a.view.scale,d=null,e=this.image.width,f=this.image.height;if(b){var g=a.absolutePoints;if(g.length%2==1)d=g[Math.floor(g.length/2)];else{var h=g.length/2,i=g[h-1],j=g[h];d=new mxPoint(i.x+(j.x-i.x)/2,i.y+(j.y-i.y)/2)}}else d=new mxPoint,this.align==mxConstants.ALIGN_LEFT?d.x=a.x:this.align==mxConstants.ALIGN_CENTER?d.x=a.x+a.width/2:d.x=a.x+a.width,this.verticalAlign==mxConstants.ALIGN_TOP?d.y=a.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?d.y=a.y+a.height/2:d.y=a.y+a.height;return new mxRectangle(Math.round(d.x-(e*this.defaultOverlap-this.offset.x)*c),Math.round(d.y-(f*this.defaultOverlap-this.offset.y)*c),e*c,f*c)},mxCellOverlay.prototype.toString=function(){return this.tooltip},mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.forceVmlHandles=8==document.documentMode,mxOutline.prototype.createGraph=function(a){var b=new mxGraph(a,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet());return b.foldingEnabled=!1,b.autoScroll=!1,b},mxOutline.prototype.init=function(a){this.outline=this.createGraph(a);var b=this.outline.graphModelChanged;if(this.outline.graphModelChanged=mxUtils.bind(this,function(a){this.suspended||null==this.outline||b.apply(this.outline,arguments)}),mxClient.IS_SVG){var c=this.outline.getView().getCanvas().parentNode;c.setAttribute("shape-rendering","optimizeSpeed"),c.setAttribute("image-rendering","optimizeSpeed")}this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(a,b){this.suspended||this.active||this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this);var d=this.source.getView();d.addListener(mxEvent.SCALE,this.updateHandler),d.addListener(mxEvent.TRANSLATE,this.updateHandler),d.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),d.addListener(mxEvent.DOWN,this.updateHandler),d.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(a){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(a){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane());var e=mxUtils.bind(this,function(a){var b=mxEvent.getSource(a),c=mxUtils.bind(this,function(a){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a))}),d=mxUtils.bind(this,function(a){mxEvent.removeGestureListeners(b,null,c,d),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a))});mxEvent.addGestureListeners(b,null,c,d),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a))});mxEvent.addGestureListeners(this.selectionBorder.node,e),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,e),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(a){this.enabled=a},mxOutline.prototype.setZoomEnabled=function(a){this.sizer.node.style.visibility=a?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){if(null!=this.sizerImage){var a=new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src);return a.dialect=this.outline.dialect,a}var a=new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR);return a.dialect=this.outline.dialect,a},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(a){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(a){if(null!=this.source&&null!=this.outline){var b=this.source.view.scale,c=this.getSourceGraphBounds(),d=new mxRectangle(c.x/b+this.source.panDx,c.y/b+this.source.panDy,c.width/b,c.height/b),e=new mxRectangle(0,0,this.source.container.clientWidth/b,this.source.container.clientHeight/b),f=d.clone();f.add(e);var g=this.getSourceContainerSize(),h=Math.max(g.width/b,f.width),i=Math.max(g.height/b,f.height),j=Math.max(0,this.outline.container.clientWidth-this.border),k=Math.max(0,this.outline.container.clientHeight-this.border),l=Math.min(j/h,k/i),m=isNaN(l)?this.minScale:Math.max(this.minScale,l);if(m>0){this.outline.getView().scale!=m&&(this.outline.getView().scale=m,a=!0);var n=this.outline.getView();n.currentRoot!=this.source.getView().currentRoot&&n.setCurrentRoot(this.source.getView().currentRoot);var o=this.source.view.translate,p=o.x+this.source.panDx,q=o.y+this.source.panDy,r=this.getOutlineOffset(m);null!=r&&(p+=r.x,q+=r.y),d.x<0&&(p-=d.x),d.y<0&&(q-=d.y),n.translate.x==p&&n.translate.y==q||(n.translate.x=p,n.translate.y=q,a=!0);var s=n.translate;m=this.source.getView().scale;var t=m/n.scale,u=1/n.scale,v=this.source.container;this.bounds=new mxRectangle((s.x-o.x-this.source.panDx)/u,(s.y-o.y-this.source.panDy)/u,v.clientWidth/t,v.clientHeight/t),this.bounds.x+=this.source.container.scrollLeft*n.scale/m,this.bounds.y+=this.source.container.scrollTop*n.scale/m;var w=this.selectionBorder.bounds;w.x==this.bounds.x&&w.y==this.bounds.y&&w.width==this.bounds.width&&w.height==this.bounds.height||(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw());var w=this.sizer.bounds,x=new mxRectangle(this.bounds.x+this.bounds.width-w.width/2,this.bounds.y+this.bounds.height-w.height/2,w.width,w.height);w.x==x.x&&w.y==x.y&&w.width==x.width&&w.height==x.height||(this.sizer.bounds=x,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw()),a&&this.outline.view.revalidate()}}},mxOutline.prototype.mouseDown=function(a,b){if(this.enabled&&this.showViewport){var c=mxEvent.isMouseEvent(b.getEvent())?0:this.source.tolerance,d=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||c>0)?new mxRectangle(b.getGraphX()-c,b.getGraphY()-c,2*c,2*c):null;this.zoom=b.isSource(this.sizer)||null!=d&&mxUtils.intersects(shape.bounds,d),this.startX=b.getX(),this.startY=b.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):(this.dx0=0,this.dy0=0)}b.consume()},mxOutline.prototype.mouseMove=function(a,b){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var c=this.getTranslateForEvent(b),d=c.x,e=c.y,f=null;if(this.zoom){var h=this.source.container,i=h.clientWidth/h.clientHeight;
  e=d/i,f=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+d),Math.max(1,this.bounds.height+e)),this.selectionBorder.bounds=f,this.selectionBorder.redraw()}else{var g=this.outline.getView().scale;f=new mxRectangle(this.bounds.x+d,this.bounds.y+e,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=f,this.selectionBorder.redraw(),d/=g,d*=this.source.getView().scale,e/=g,e*=this.source.getView().scale,this.source.panGraph(-d-this.dx0,-e-this.dy0)}var j=this.sizer.bounds;this.sizer.bounds=new mxRectangle(f.x+f.width-j.width/2,f.y+f.height-j.height/2,j.width,j.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),b.consume()}},mxOutline.prototype.getTranslateForEvent=function(a){return new mxPoint(a.getX()-this.startX,a.getY()-this.startY)},mxOutline.prototype.mouseUp=function(a,b){if(this.active){var c=this.getTranslateForEvent(b),d=c.x,e=c.y;if(Math.abs(d)>0||Math.abs(e)>0){if(this.zoom){var g=this.selectionBorder.bounds.width,h=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,h-d*h/g),!1)}else if(!this.source.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.source.container)){this.source.panGraph(0,0),d/=this.outline.getView().scale,e/=this.outline.getView().scale;var f=this.source.getView().translate;this.source.getView().setTranslate(f.x-d,f.y-e)}this.update(),b.consume()}this.index=null,this.active=!1}},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(a,b,c,d,e,f){var g="";if((this.source&&this.checkTerminal(a,c,b)||!this.source&&this.checkTerminal(a,d,b))&&(null!=this.countError&&(this.source&&(0==this.max||e>=this.max)||!this.source&&(0==this.max||f>=this.max))&&(g+=this.countError+"\n"),null!=this.validNeighbors&&null!=this.typeError&&this.validNeighbors.length>0)){var h=this.checkNeighbors(a,b,c,d);h||(g+=this.typeError+"\n")}return g.length>0?g:null},mxMultiplicity.prototype.checkNeighbors=function(a,b,c,d){for(var e=a.model.getValue(c),f=a.model.getValue(d),g=!this.validNeighborsAllowed,h=this.validNeighbors,i=0;i<h.length;i++){if(this.source&&this.checkType(a,f,h[i])){g=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(a,e,h[i])){g=this.validNeighborsAllowed;break}}return g},mxMultiplicity.prototype.checkTerminal=function(a,b,c){var d=a.model.getValue(b);return this.checkType(a,d,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(a,b,c,d,e){return null!=b&&(isNaN(b.nodeType)?b==c:mxUtils.isNode(b,c,d,e))},mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.updateHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(a){this.enabled=a},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(a){this.bubbling=a},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(a){if(null!=this.graph){var b=this.graph.getModel();b.removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler)}if(this.graph=a,null!=this.graph){var b=this.graph.getModel();b.addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler)}},mxLayoutManager.prototype.getLayout=function(a){return null},mxLayoutManager.prototype.beforeUndo=function(a){for(var b=this.getCellsForChanges(a.changes),c=this.getGraph().getModel(),d=[],e=0;e<b.length;e++)d=d.concat(c.getDescendants(b[e]));if(b=d,this.isBubbling())for(d=c.getParents(b);d.length>0;)b=b.concat(d),d=c.getParents(d);this.executeLayoutForCells(b)},mxLayoutManager.prototype.executeLayoutForCells=function(a){var b=mxUtils.sortCells(a,!0);b=b.concat(b.slice().reverse()),this.layoutCells(b)},mxLayoutManager.prototype.cellsMoved=function(a,b){if(null!=a&&null!=b)for(var c=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(b),mxEvent.getClientY(b)),d=this.getGraph().getModel(),e=0;e<a.length;e++){var f=d.getParent(a[e]);if(mxUtils.indexOf(a,f)<0){var g=this.getLayout(f);null!=g&&g.moveCell(a[e],c.x,c.y)}}},mxLayoutManager.prototype.getCellsForChanges=function(a){for(var b=new mxDictionary,c=[],d=0;d<a.length;d++){var e=a[d];if(e instanceof mxRootChange)return[];for(var f=this.getCellsForChange(e),g=0;g<f.length;g++)null==f[g]||b.get(f[g])||(b.put(f[g],!0),c.push(f[g]))}return c},mxLayoutManager.prototype.getCellsForChange=function(a){var b=this.getGraph().getModel();return a instanceof mxChildChange?[a.child,a.previous,b.getParent(a.child)]:a instanceof mxTerminalChange||a instanceof mxGeometryChange?[a.cell,b.getParent(a.cell)]:a instanceof mxVisibleChange||a instanceof mxStyleChange?[a.cell]:[]},mxLayoutManager.prototype.layoutCells=function(a){if(a.length>0){var b=this.getGraph().getModel();b.beginUpdate();try{for(var c=null,d=0;d<a.length;d++)a[d]!=b.getRoot()&&a[d]!=c&&this.executeLayout(this.getLayout(a[d]),a[d])&&(c=a[d]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",a))}finally{b.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(a,b){var c=!1;return null!=a&&null!=b&&(a.execute(b),c=!0),c},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(a){this.enabled=a},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(a){this.horizontal=a},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(a){this.addEnabled=a},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(a){this.resizeEnabled=a},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(a){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=a,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(a){return!this.getGraph().isSwimlane(a)},mxSwimlaneManager.prototype.isCellHorizontal=function(a){if(this.graph.isSwimlane(a)){var b=this.graph.getCellStyle(a);return 1==mxUtils.getValue(b,mxConstants.STYLE_HORIZONTAL,1)}return!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(a){if(null!=a){var b=this.getGraph().getModel();b.beginUpdate();try{for(var c=0;c<a.length;c++)this.isSwimlaneIgnored(a[c])||this.swimlaneAdded(a[c])}finally{b.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(a){for(var b=this.getGraph().getModel(),c=b.getParent(a),d=b.getChildCount(c),e=null,f=0;f<d;f++){var g=b.getChildAt(c,f);if(g!=a&&!this.isSwimlaneIgnored(g)&&(e=b.getGeometry(g),null!=e))break}if(null!=e){var h=null!=c?this.isCellHorizontal(c):this.horizontal;this.resizeSwimlane(a,e.width,e.height,h)}},mxSwimlaneManager.prototype.cellsResized=function(a){if(null!=a){var b=this.getGraph().getModel();b.beginUpdate();try{for(var c=0;c<a.length;c++)if(!this.isSwimlaneIgnored(a[c])){var d=b.getGeometry(a[c]);if(null!=d){for(var e=new mxRectangle(0,0,d.width,d.height),f=a[c],g=f;null!=g;){f=g,g=b.getParent(g);var h=this.graph.isSwimlane(g)?this.graph.getStartSize(g):new mxRectangle;e.width+=h.width,e.height+=h.height}var i=null!=g?this.isCellHorizontal(g):this.horizontal;this.resizeSwimlane(f,e.width,e.height,i)}}}finally{b.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(a,b,c,d){var e=this.getGraph().getModel();e.beginUpdate();try{var f=this.isCellHorizontal(a);if(!this.isSwimlaneIgnored(a)){var g=e.getGeometry(a);null!=g&&(d&&g.height!=c||!d&&g.width!=b)&&(g=g.clone(),d?g.height=c:g.width=b,e.setGeometry(a,g))}var h=this.graph.isSwimlane(a)?this.graph.getStartSize(a):new mxRectangle;b-=h.width,c-=h.height;for(var i=e.getChildCount(a),j=0;j<i;j++){var k=e.getChildAt(a,j);this.resizeSwimlane(k,b,c,f)}}finally{e.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState},mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(a,b,c,d,e){d=null==d||d,e=null==e||e;var f=this.deltas.get(a.cell);return null==f?(f={point:new mxPoint(b,c),state:a},this.deltas.put(a.cell,f),this.count++):d?(f.point.x+=b,f.point.y+=c):(f.point.x=b,f.point.y=c),e&&this.addEdges(a),f.point},mxCellStatePreview.prototype.show=function(a){this.deltas.visit(mxUtils.bind(this,function(a,b){this.translateState(b.state,b.point.x,b.point.y)})),this.deltas.visit(mxUtils.bind(this,function(b,c){this.revalidateState(c.state,c.point.x,c.point.y,a)}))},mxCellStatePreview.prototype.translateState=function(a,b,c){if(null!=a){var d=this.graph.getModel();if(d.isVertex(a.cell)){a.view.updateCellState(a);var e=d.getGeometry(a.cell);0==b&&0==c||null==e||e.relative&&null==this.deltas.get(a.cell)||(a.x+=b,a.y+=c)}for(var f=d.getChildCount(a.cell),g=0;g<f;g++)this.translateState(a.view.getState(d.getChildAt(a.cell,g)),b,c)}},mxCellStatePreview.prototype.revalidateState=function(a,b,c,d){if(null!=a){var e=this.graph.getModel();e.isEdge(a.cell)&&a.view.updateCellState(a);var f=this.graph.getCellGeometry(a.cell),g=a.view.getState(e.getParent(a.cell));0==b&&0==c||null==f||!f.relative||!e.isVertex(a.cell)||null!=g&&!e.isVertex(g.cell)&&null==this.deltas.get(a.cell)||(a.x+=b,a.y+=c),this.graph.cellRenderer.redraw(a),null!=d&&d(a);for(var h=e.getChildCount(a.cell),i=0;i<h;i++)this.revalidateState(this.graph.view.getState(e.getChildAt(a.cell,i)),b,c,d)}},mxCellStatePreview.prototype.addEdges=function(a){for(var b=this.graph.getModel(),c=b.getEdgeCount(a.cell),d=0;d<c;d++){var e=a.view.getState(b.getEdgeAt(a.cell,d));null!=e&&this.moveState(e,0,0)}},mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(a){this.enabled=a},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(a){this.cloneEnabled=a},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(a){this.moveEnabled=a},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(a){this.selectEnabled=a},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(a){this.removeCellsFromParent=a},mxGraphHandler.prototype.getInitialCellForEvent=function(a){return a.getCell()},mxGraphHandler.prototype.isDelayedSelection=function(a,b){return this.graph.isCellSelected(a)},mxGraphHandler.prototype.consumeMouseEvent=function(a,b){b.consume()},mxGraphHandler.prototype.mouseDown=function(a,b){if(!b.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=b.getState()&&!mxEvent.isMultiTouchEvent(b.getEvent())){var c=this.getInitialCellForEvent(b);if(this.delayedSelection=this.isDelayedSelection(c,b),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(c,b.getEvent()),this.isMoveEnabled()){var d=this.graph.model,e=d.getGeometry(c);this.graph.isCellMovable(c)&&(!d.isEdge(c)||this.graph.getSelectionCount()>1||null!=e.points&&e.points.length>0||null==d.getTerminal(c,!0)||null==d.getTerminal(c,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(b.getEvent())&&this.graph.isCellsCloneable())?this.start(c,b.getX(),b.getY()):this.delayedSelection&&(this.cell=c),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,b)}}},mxGraphHandler.prototype.getGuideStates=function(){var a=this.graph.getDefaultParent(),b=this.graph.getModel(),c=mxUtils.bind(this,function(a){return null!=this.graph.view.getState(a)&&b.isVertex(a)&&null!=b.getGeometry(a)&&!b.getGeometry(a).relative});return this.graph.view.getCellStates(b.filterDescendants(c,a))},mxGraphHandler.prototype.getCells=function(a){return!this.delayedSelection&&this.graph.isCellMovable(a)?[a]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(a){var b=this.getBoundingBox(a);if(null!=b){if(b.width=Math.max(0,b.width-1),b.height=Math.max(0,b.height-1),b.width<this.minimumSize){var c=this.minimumSize-b.width;b.x-=c/2,b.width=this.minimumSize}else b.x=Math.round(b.x),b.width=Math.ceil(b.width);this.graph.view.translate,this.graph.view.scale;if(b.height<this.minimumSize){var f=this.minimumSize-b.height;b.y-=f/2,b.height=this.minimumSize}else b.y=Math.round(b.y),b.height=Math.ceil(b.height)}return b},mxGraphHandler.prototype.getBoundingBox=function(a){var b=null;if(null!=a&&a.length>0)for(var c=this.graph.getModel(),d=0;d<a.length;d++)if(c.isVertex(a[d])||c.isEdge(a[d])){var e=this.graph.view.getState(a[d]);if(null!=e){var f=e;c.isVertex(a[d])&&null!=e.shape&&null!=e.shape.boundingBox&&(f=e.shape.boundingBox),null==b?b=mxRectangle.fromRectangle(f):b.add(f)}}return b},mxGraphHandler.prototype.createPreviewShape=function(a){var b=new mxRectangleShape(a,null,this.previewColor);return b.isDashed=!0,this.htmlPreview?(b.dialect=mxConstants.DIALECT_STRICTHTML,b.init(this.graph.container)):(b.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,b.init(this.graph.getView().getOverlayPane()),b.pointerEvents=!1,mxClient.IS_IOS&&(b.getSvgScreenOffset=function(){return 0})),b},mxGraphHandler.prototype.start=function(a,b,c){this.cell=a,this.first=mxUtils.convertPoint(this.graph.container,b,c),this.cells=this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.guidesEnabled&&(this.guide=new mxGuide(this.graph,this.getGuideStates()))},mxGraphHandler.prototype.useGuidesForEvent=function(a){return null==this.guide||this.guide.isEnabledForEvent(a.getEvent())},mxGraphHandler.prototype.snap=function(a){var b=this.scaleGrid?this.graph.view.scale:1;return a.x=this.graph.snap(a.x/b)*b,a.y=this.graph.snap(a.y/b)*b,a},mxGraphHandler.prototype.getDelta=function(a){var b=mxUtils.convertPoint(this.graph.container,a.getX(),a.getY()),c=this.graph.view.scale;return new mxPoint(this.roundLength((b.x-this.first.x)/c)*c,this.roundLength((b.y-this.first.y)/c)*c)},mxGraphHandler.prototype.updateHint=function(a){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(a){return Math.round(a)},mxGraphHandler.prototype.mouseMove=function(a,b){var c=this.graph;if(!b.isConsumed()&&c.isMouseDown&&null!=this.cell&&null!=this.first&&null!=this.bounds){if(mxEvent.isMultiTouchEvent(b.getEvent()))return void this.reset();var d=this.getDelta(b),e=d.x,f=d.y,g=c.tolerance;if(null!=this.shape||Math.abs(e)>g||Math.abs(f)>g){null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3)),null==this.shape&&(this.shape=this.createPreviewShape(this.bounds));var h=c.isGridEnabledEvent(b.getEvent()),i=!0;if(null!=this.guide&&this.useGuidesForEvent(b))d=this.guide.move(this.bounds,new mxPoint(e,f),h),i=!1,e=d.x,f=d.y;else if(h){var j=c.getView().translate,k=c.getView().scale,l=this.bounds.x-(c.snap(this.bounds.x/k-j.x)+j.x)*k,m=this.bounds.y-(c.snap(this.bounds.y/k-j.y)+j.y)*k,n=this.snap(new mxPoint(e,f));e=n.x-l,f=n.y-m}null!=this.guide&&i&&this.guide.hide(),c.isConstrainedEvent(b.getEvent())&&(Math.abs(e)>Math.abs(f)?f=0:e=0),this.currentDx=e,this.currentDy=f,this.updatePreviewShape();var o=null,p=b.getCell(),q=c.isCloneEvent(b.getEvent())&&c.isCellsCloneable()&&this.isCloneEnabled();c.isDropEnabled()&&this.highlightEnabled&&(o=c.getDropTarget(this.cells,b.getEvent(),p,q));var r=c.getView().getState(o),s=!1;if(null==r||c.model.getParent(this.cell)==o&&!q){if(this.target=null,this.connectOnDrop&&null!=p&&1==this.cells.length&&c.getModel().isVertex(p)&&c.isCellConnectable(p)&&(r=c.getView().getState(p),null!=r)){var t=c.getEdgeValidationError(null,this.cell,p),u=null==t?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR;this.setHighlightColor(u),s=!0}}else this.target!=o&&(this.target=o,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),s=!0;null!=r&&s?this.highlight.highlight(r):this.highlight.hide()}this.updateHint(b),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,b),mxEvent.consume(b.getEvent())}else if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!b.isConsumed()&&null!=b.getState()&&!c.isMouseDown){var v=c.getCursorForMouseEvent(b);null==v&&c.isEnabled()&&c.isCellMovable(b.getCell())&&(v=c.getModel().isEdge(b.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX),null!=b.sourceState&&b.sourceState.setCursor(v)}},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx-this.graph.panDx),Math.round(this.pBounds.y+this.currentDy-this.graph.panDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.setHighlightColor=function(a){null!=this.highlight&&this.highlight.setHighlightColor(a)},mxGraphHandler.prototype.mouseUp=function(a,b){if(!b.isConsumed()){var c=this.graph;if(null!=this.cell&&null!=this.first&&null!=this.shape&&null!=this.currentDx&&null!=this.currentDy){var d=b.getCell();if(this.connectOnDrop&&null==this.target&&null!=d&&c.getModel().isVertex(d)&&c.isCellConnectable(d)&&c.isEdgeValid(null,this.cell,d))c.connectionHandler.connect(this.cell,d,b.getEvent());else{var e=c.isCloneEvent(b.getEvent())&&c.isCellsCloneable()&&this.isCloneEnabled(),f=c.getView().scale,g=this.roundLength(this.currentDx/f),h=this.roundLength(this.currentDy/f),i=this.target;c.isSplitEnabled()&&c.isSplitTarget(i,this.cells,b.getEvent())?c.splitEdge(i,this.cells,null,g,h):this.moveCells(this.cells,g,h,e,this.target,b.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(b)}this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,b),this.reset()},mxGraphHandler.prototype.selectDelayed=function(a){this.graph.isCellSelected(this.cell)&&this.graph.popupMenuHandler.isPopupTrigger(a)||this.graph.selectCellForEvent(this.cell,a.getEvent())},mxGraphHandler.prototype.reset=function(){this.destroyShapes(),this.removeHint(),this.cellWasClicked=!1,this.delayedSelection=!1,this.currentDx=null,this.currentDy=null,this.guides=null,this.first=null,this.cell=null,this.target=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(a,b,c){if(this.graph.getModel().isVertex(a)){var d=this.graph.getView().getState(a);if(null!=d){var e=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(c),mxEvent.getClientY(c)),f=mxUtils.toRadians(mxUtils.getValue(d.style,mxConstants.STYLE_ROTATION)||0);if(0!=f){var g=Math.cos(-f),h=Math.sin(-f),i=new mxPoint(d.getCenterX(),d.getCenterY());e=mxUtils.getRotatedPoint(e,g,h,i)}return!mxUtils.contains(d,e.x,e.y)}}return!1},mxGraphHandler.prototype.moveCells=function(a,b,c,d,e,f){d&&(a=this.graph.getCloneableCells(a)),null==e&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(this.graph.getModel().getParent(this.cell),a,f)&&(e=this.graph.getDefaultParent()),a=this.graph.moveCells(a,b-this.graph.panDx/this.graph.view.scale,c-this.graph.panDy/this.graph.view.scale,d,e,f),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(a[0]),d&&this.graph.setSelectionCells(a)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.destroyShapes(),this.removeHint()},mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(a){this.panningEnabled=a},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(a){this.pinchEnabled=a},mxPanningHandler.prototype.isPanningTrigger=function(a){var b=a.getEvent();return this.useLeftButtonForPanning&&null==a.getState()&&mxEvent.isLeftMouseButton(b)||mxEvent.isControlDown(b)&&mxEvent.isShiftDown(b)||this.usePopupTrigger&&mxEvent.isPopupTrigger(b)},mxPanningHandler.prototype.isForcePanningEvent=function(a){return this.ignoreCell||mxEvent.isMultiTouchEvent(a.getEvent())},mxPanningHandler.prototype.mouseDown=function(a,b){this.mouseDownEvent=b,!b.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(b)&&(this.start(b),this.consumePanningTrigger(b))},mxPanningHandler.prototype.start=function(a){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=a.getX(),this.startY=a.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(a){a.consume()},mxPanningHandler.prototype.mouseMove=function(a,b){if(this.dx=b.getX()-this.startX,this.dy=b.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",b));else if(this.panningTrigger){var c=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!c&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",b))}(this.active||this.panningTrigger)&&b.consume()},mxPanningHandler.prototype.mouseUp=function(a,b){if(this.active){if(null!=this.dx&&null!=this.dy){if(!this.graph.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.graph.container)){var c=this.graph.getView().scale,d=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(d.x+this.dx/c,d.y+this.dy/c)}b.consume()}this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",b))}this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null},mxPanningHandler.prototype.panGraph=function(a,b){this.graph.getView().setTranslate(a,b)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler)},mxPopupMenuHandler.prototype=new mxPopupMenu;mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler;mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(a){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(a){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(a,b){this.isEnabled()&&!mxEvent.isMultiTouchEvent(b.getEvent())&&(this.hideMenu(),this.triggerX=b.getGraphX(),this.triggerY=b.getGraphY(),this.screenX=mxEvent.getMainEvent(b.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(b.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(b),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(a,b){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(b.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(b.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(a,b){if(this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY){var c=this.getCellForPopupEvent(b);this.graph.isEnabled()&&this.isSelectOnPopup(b)&&null!=c&&!this.graph.isCellSelected(c)?this.graph.setSelectionCell(c):this.clearSelectionOnBackground&&null==c&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var d=mxUtils.getScrollOrigin();this.popup(b.getX()+d.x+1,b.getY()+d.y+1,c,b.getEvent()),b.consume()}this.popupTrigger=!1,this.inTolerance=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(a){return a.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(a){this.enabled=a},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(a){this.hotspot=a},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(a){this.hotspotEnabled=a},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){this.validState=null,null!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(a){var b=null;return this.isEnabled()&&(b=this.getState(a),this.setCurrentState(b,a)),b},mxCellMarker.prototype.setCurrentState=function(a,b,c){var d=null!=a&&this.isValidState(a);c=null!=c?c:this.getMarkerColor(b.getEvent(),a,d),d?this.validState=a:this.validState=null,a==this.markedState&&c==this.currentColor||(this.currentColor=c,null!=a&&null!=this.currentColor?(this.markedState=a,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(a,b){var c=this.graph.getView().getState(a);null!=c&&(this.currentColor=null!=b?b:this.validColor,this.markedState=c,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(a){return!0},mxCellMarker.prototype.getMarkerColor=function(a,b,c){return c?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(a){var b=this.graph.getView();cell=this.getCell(a);var c=this.getStateToMark(b.getState(cell));return null!=c&&this.intersects(c,a)?c:null},mxCellMarker.prototype.getCell=function(a){return a.getCell()},mxCellMarker.prototype.getStateToMark=function(a){return a},mxCellMarker.prototype.intersects=function(a,b){return!this.hotspotEnabled||mxUtils.intersectsHotspot(a,b.getGraphX(),b.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(a){
  this.enabled=a},mxSelectionCellsHandler.prototype.getHandler=function(a){return this.handlers.get(a)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(a,b){b.reset.apply(b)})},mxSelectionCellsHandler.prototype.refresh=function(){var a=this.handlers;this.handlers=new mxDictionary;for(var b=this.graph.getSelectionCells(),c=0;c<b.length;c++){var d=this.graph.view.getState(b[c]);if(null!=d){var e=a.remove(b[c]);null!=e&&(e.state!=d?(e.destroy(),e=null):(null!=e.refresh&&e.refresh(),e.redraw())),null==e&&(e=this.graph.createHandler(d),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",d))),null!=e&&this.handlers.put(b[c],e)}}a.visit(mxUtils.bind(this,function(a,b){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",b.state)),b.destroy()}))},mxSelectionCellsHandler.prototype.updateHandler=function(a){var b=this.handlers.remove(a.cell);null!=b&&(b.destroy(),b=this.graph.createHandler(a),null!=b&&this.handlers.put(a.cell,b))},mxSelectionCellsHandler.prototype.mouseDown=function(a,b){if(this.graph.isEnabled()&&this.isEnabled()){var c=[a,b];this.handlers.visit(function(a,b){b.mouseDown.apply(b,c)})}},mxSelectionCellsHandler.prototype.mouseMove=function(a,b){if(this.graph.isEnabled()&&this.isEnabled()){var c=[a,b];this.handlers.visit(function(a,b){b.mouseMove.apply(b,c)})}},mxSelectionCellsHandler.prototype.mouseUp=function(a,b){if(this.graph.isEnabled()&&this.isEnabled()){var c=[a,b];this.handlers.visit(function(a,b){b.mouseUp.apply(b,c)})}},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=mxClient.IS_VML,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(a){this.enabled=a},mxConnectionHandler.prototype.isInsertBefore=function(a,b,c,d,e){return this.insertBeforeSource&&b!=c},mxConnectionHandler.prototype.isCreateTarget=function(a){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(a){this.createTarget=a},mxConnectionHandler.prototype.createShape=function(){var a=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return a.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,a.scale=this.graph.view.scale,a.pointerEvents=!1,a.isDashed=!0,a.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(a.node,this.graph,null),a},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(a){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(a){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(a){return!0},mxConnectionHandler.prototype.createMarker=function(){var a=new mxCellMarker(this.graph);return a.hotspotEnabled=!0,a.getCell=mxUtils.bind(this,function(b){var c=mxCellMarker.prototype.getCell.apply(a,arguments);if(this.error=null,null==c&&null!=this.currentPoint&&(c=this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y)),null!=c&&!this.graph.isCellConnectable(c)){var d=this.graph.getModel().getParent(c);this.graph.getModel().isVertex(d)&&this.graph.isCellConnectable(d)&&(c=d)}return(this.graph.isSwimlane(c)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(c,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(c))&&(c=null),null!=c?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,c),null!=this.error&&0==this.error.length&&(c=null,this.isCreateTarget(b.getEvent())&&(this.error=null))):this.isValidSource(c,b)||(c=null):!this.isConnecting()||this.isCreateTarget(b.getEvent())||this.graph.allowDanglingEdges||(this.error=""),c}),a.isValidState=mxUtils.bind(this,function(b){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(a,arguments)}),a.getMarkerColor=mxUtils.bind(this,function(b,c,d){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(a,arguments):null}),a.intersects=mxUtils.bind(this,function(b,c){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(a,arguments)}),a},mxConnectionHandler.prototype.start=function(a,b,c,d){this.previous=a,this.first=new mxPoint(b,c),this.edgeState=null!=d?d:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=a,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(a,b){return this.graph.isValidSource(a)},mxConnectionHandler.prototype.isValidTarget=function(a){return!0},mxConnectionHandler.prototype.validateConnection=function(a,b){return this.isValidTarget(b)?this.graph.getEdgeValidationError(null,a,b):""},mxConnectionHandler.prototype.getConnectImage=function(a){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(a){return null!=a.text&&a.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(a){var b=this.getConnectImage(a);if(null!=b&&null!=a){this.iconState=a;var c=[],d=new mxRectangle(0,0,b.width,b.height),e=new mxImageShape(d,b.src,null,null,0);e.preserveImageAspect=!1,this.isMoveIconToFrontForState(a)?(e.dialect=mxConstants.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,e.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=e.node.previousSibling&&e.node.parentNode.insertBefore(e.node,e.node.parentNode.firstChild)),e.node.style.cursor=mxConstants.CURSOR_CONNECT;var f=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:a}),g=mxUtils.bind(this,function(a){mxEvent.isConsumed(a)||(this.icon=e,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a,f())))});return mxEvent.redirectMouseEvents(e.node,this.graph,f,g),c.push(e),this.redrawIcons(c,this.iconState),c}return null},mxConnectionHandler.prototype.redrawIcons=function(a,b){if(null!=a&&null!=a[0]&&null!=b){var c=this.getIconPosition(a[0],b);a[0].bounds.x=c.x,a[0].bounds.y=c.y,a[0].redraw()}},mxConnectionHandler.prototype.getIconPosition=function(a,b){var c=this.graph.getView().scale,d=b.getCenterX(),e=b.getCenterY();if(this.graph.isSwimlane(b.cell)){var f=this.graph.getStartSize(b.cell);d=0!=f.width?b.x+f.width*c/2:d,e=0!=f.height?b.y+f.height*c/2:e;var g=mxUtils.toRadians(mxUtils.getValue(b.style,mxConstants.STYLE_ROTATION)||0);if(0!=g){var h=Math.cos(g),i=Math.sin(g),j=new mxPoint(b.getCenterX(),b.getCenterY()),k=mxUtils.getRotatedPoint(new mxPoint(d,e),h,i,j);d=k.x,e=k.y}}return new mxPoint(d-a.bounds.width/2,e-a.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var a=0;a<this.icons.length;a++)this.icons[a].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}},mxConnectionHandler.prototype.isStartEvent=function(a){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(a,b){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!b.isConsumed()&&!this.isConnecting()&&this.isStartEvent(b)){if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(b.getGraphX(),b.getGraphY()),this.edgeState=this.createEdgeState(b),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState)),null==this.previous&&null!=this.edgeState){var c=this.graph.getPointForEvent(b.getEvent());this.edgeState.cell.geometry.setTerminalPoint(c,!0)}this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),b.consume()}this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(a){return!this.graph.isCellMovable(a.cell)},mxConnectionHandler.prototype.createEdgeState=function(a){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(a){var b=mxUtils.getOffset(this.graph.container),c=a.getEvent(),d=mxEvent.getClientX(c),e=mxEvent.getClientY(c),f=document.documentElement,g=(window.pageXOffset||f.scrollLeft)-(f.clientLeft||0),h=(window.pageYOffset||f.scrollTop)-(f.clientTop||0),i=this.currentPoint.x-this.graph.container.scrollLeft+b.x-g,j=this.currentPoint.y-this.graph.container.scrollTop+b.y-h;return this.outlineConnect&&!mxEvent.isShiftDown(a.getEvent())&&(a.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(a.getEvent())&&null!=a.getState()||this.marker.highlight.isHighlightAt(d,e)||(i!=d||j!=e)&&null==a.getState()&&this.marker.highlight.isHighlightAt(i,j))},mxConnectionHandler.prototype.updateCurrentState=function(a,b){if(this.constraintHandler.update(a,null==this.first,!1,null==this.first||a.isSource(this.marker.highlight.shape)?null:b),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint)null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error?this.currentState=this.constraintHandler.currentFocus:this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(a.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(a),this.currentState=this.marker.getValidState());var c=this.isOutlineConnectEvent(a);if(null!=this.currentState&&c){a.isSource(this.marker.highlight.shape)&&(b=new mxPoint(a.getGraphX(),a.getGraphY()));var d=this.graph.getOutlineConstraint(b,this.currentState,a);this.constraintHandler.setFocus(a,this.currentState,!1),this.constraintHandler.currentConstraint=d,this.constraintHandler.currentPoint=b}if(this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var e=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/e/e,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.getValidState()!=a.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/e/e,this.marker.highlight.repaint())}}},mxConnectionHandler.prototype.convertWaypoint=function(a){var b=this.graph.getView().getScale(),c=this.graph.getView().getTranslate();a.x=a.x/b-c.x,a.y=a.y/b-c.y},mxConnectionHandler.prototype.snapToPreview=function(a,b){if(!mxEvent.isAltDown(a.getEvent())&&null!=this.previous){var c=this.graph.gridSize*this.graph.view.scale/2,d=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(d.x-a.getGraphX())<c&&(b.x=d.x),Math.abs(d.y-a.getGraphY())<c&&(b.y=d.y)}},mxConnectionHandler.prototype.mouseMove=function(a,b){if(b.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{this.isEnabled()||null==this.currentState||(this.destroyIcons(),this.currentState=null);var c=this.graph.getView(),d=c.scale,e=c.translate,f=new mxPoint(b.getGraphX(),b.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(b.getEvent())&&(f=new mxPoint((this.graph.snap(f.x/d-e.x)+e.x)*d,(this.graph.snap(f.y/d-e.y)+e.y)*d)),this.snapToPreview(b,f),this.currentPoint=f,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&this.updateCurrentState(b,f),null!=this.first){var g=null,h=f;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(g=this.constraintHandler.currentConstraint,h=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(b.getEvent())&&mxEvent.isShiftDown(b.getEvent())&&(Math.abs(this.previous.getCenterX()-f.x)<Math.abs(this.previous.getCenterY()-f.y)?f.x=this.previous.getCenterX():f.y=this.previous.getCenterY());var i=this.first;if(null!=this.selectedIcon){var j=this.selectedIcon.bounds.width,k=this.selectedIcon.bounds.height;if(null!=this.currentState&&this.targetConnectImage){var l=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=l.x,this.selectedIcon.bounds.y=l.y}else{var m=new mxRectangle(b.getGraphX()+this.connectIconOffset.x,b.getGraphY()+this.connectIconOffset.y,j,k);this.selectedIcon.bounds=m}this.selectedIcon.redraw()}if(null!=this.edgeState)this.updateEdgeState(h,g),h=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],i=this.edgeState.absolutePoints[0];else{if(null!=this.currentState&&null==this.constraintHandler.currentConstraint){var n=this.getTargetPerimeterPoint(this.currentState,b);null!=n&&(h=n)}if(null==this.sourceConstraint&&null!=this.previous){var o=null!=this.waypoints&&this.waypoints.length>0?this.waypoints[0]:h,n=this.getSourcePerimeterPoint(this.previous,o,b);null!=n&&(i=n)}}if(null==this.currentState&&this.movePreviewAway){var n=i;if(null!=this.edgeState&&this.edgeState.absolutePoints.length>=2){var p=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];null!=p&&(n=p)}var q=h.x-n.x,r=h.y-n.y,s=Math.sqrt(q*q+r*r);if(0==s)return;this.originalPoint=h.clone(),h.x-=4*q/s,h.y-=4*r/s}else this.originalPoint=null;if(null==this.shape){var q=Math.abs(f.x-this.first.x),r=Math.abs(f.y-this.first.y);(q>this.graph.tolerance||r>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(b,f))}if(null!=this.shape){if(null!=this.edgeState)this.shape.points=this.edgeState.absolutePoints;else{var t=[i];null!=this.waypoints&&(t=t.concat(this.waypoints)),t.push(h),this.shape.points=t}this.drawPreview()}null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(b.getEvent()),b.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),b.consume())),this.previous=this.currentState):this.previous!=this.currentState||null==this.currentState||null!=this.icons||this.graph.isMouseDown||b.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(var u=!1,v=b.getSource(),w=0;w<this.icons.length&&!u;w++)u=v==this.icons[w].node||v.parentNode==this.icons[w].node;u||this.updateIcons(this.currentState,this.icons,b)}}},mxConnectionHandler.prototype.updateEdgeState=function(a,b){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=b&&null!=b.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=b.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=b.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:a],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==b&&(b=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,b));var c=null;if(null!=this.waypoints){c=[];for(var d=0;d<this.waypoints.length;d++){var e=this.waypoints[d].clone();this.convertWaypoint(e),c[d]=e}}this.graph.view.updatePoints(this.edgeState,c,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(a,b){var c=null,d=a.view,e=d.getPerimeterFunction(a);if(null!=e){var f=null!=this.waypoints&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),g=e(d.getPerimeterBounds(a),this.edgeState,f,!1);null!=g&&(c=g)}else c=new mxPoint(a.getCenterX(),a.getCenterY());return c},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(a,b,c){var d=null,e=a.view,f=e.getPerimeterFunction(a),g=new mxPoint(a.getCenterX(),a.getCenterY());if(null!=f){var h=mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0),i=-h*(Math.PI/180);0!=h&&(b=mxUtils.getRotatedPoint(new mxPoint(b.x,b.y),Math.cos(i),Math.sin(i),g));var j=f(e.getPerimeterBounds(a),a,b,!1);null!=j&&(0!=h&&(j=mxUtils.getRotatedPoint(new mxPoint(j.x,j.y),Math.cos(-i),Math.sin(-i),g)),d=j)}else d=g;return d},mxConnectionHandler.prototype.updateIcons=function(a,b,c){},mxConnectionHandler.prototype.isStopEvent=function(a){return null!=a.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(a){var b=mxUtils.convertPoint(this.graph.container,a.getX(),a.getY()),c=Math.abs(b.x-this.first.x),d=Math.abs(b.y-this.first.y),e=null!=this.waypoints||this.mouseDownCounter>1&&(c>this.graph.tolerance||d>this.graph.tolerance);if(e){null==this.waypoints&&(this.waypoints=[]);var f=this.graph.view.scale,b=new mxPoint(this.graph.snap(a.getGraphX()/f)*f,this.graph.snap(a.getGraphY()/f)*f);this.waypoints.push(b)}},mxConnectionHandler.prototype.mouseUp=function(a,b){if(!b.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(b))return this.addWaypointForEvent(b),void b.consume();if(null==this.error){var c=null!=this.previous?this.previous.cell:null,d=null;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(d=this.constraintHandler.currentFocus.cell),null==d&&null!=this.currentState&&(d=this.currentState.cell),this.connect(c,d,b.getEvent(),b.getCell())}else null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,evt),this.error.length>0&&this.graph.validationAlert(this.error);this.destroyIcons(),b.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(a){this.shape.strokewidth=this.getEdgeWidth(a),this.shape.stroke=this.getEdgeColor(a)},mxConnectionHandler.prototype.getEdgeColor=function(a){return a?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(a){return a?3:1},mxConnectionHandler.prototype.connect=function(a,b,c,d){if(null!=b||this.isCreateTarget(c)||this.graph.allowDanglingEdges){var e=this.graph.getModel(),f=!1,g=null;e.beginUpdate();try{if(null!=a&&null==b&&!this.graph.isIgnoreTerminalEvent(c)&&this.isCreateTarget(c)&&(b=this.createTargetVertex(c,a),null!=b)){if(d=this.graph.getDropTarget([b],c,d),f=!0,null!=d&&this.graph.getModel().isEdge(d))d=this.graph.getDefaultParent();else{var h=this.graph.getView().getState(d);if(null!=h){var i=e.getGeometry(b);i.x-=h.origin.x,i.y-=h.origin.y}}this.graph.addCell(b,d)}var j=this.graph.getDefaultParent();null!=a&&null!=b&&e.getParent(a)==e.getParent(b)&&e.getParent(e.getParent(a))!=e.getRoot()&&(j=e.getParent(a),null!=a.geometry&&a.geometry.relative&&null!=b.geometry&&b.geometry.relative&&(j=e.getParent(j)));var k=null,l=null;if(null!=this.edgeState&&(k=this.edgeState.cell.value,l=this.edgeState.cell.style),g=this.insertEdge(j,null,k,a,b,l),null!=g){this.graph.setConnectionConstraint(g,a,!0,this.sourceConstraint),this.graph.setConnectionConstraint(g,b,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&e.setGeometry(g,this.edgeState.cell.geometry);var j=e.getParent(a);if(this.isInsertBefore(g,a,b,c,d)){for(var m=null,i=a;null!=i.parent&&null!=i.geometry&&i.geometry.relative&&i.parent!=g.parent;)i=this.graph.model.getParent(i);if(null!=i&&null!=i.parent&&i.parent==g.parent){var m=i.parent.getIndex(i);i.parent.insert(g,m)}}var n=e.getGeometry(g);if(null==n&&(n=new mxGeometry,n.relative=!0,e.setGeometry(g,n)),null!=this.waypoints&&this.waypoints.length>0){var o=this.graph.view.scale,p=this.graph.view.translate;n.points=[];for(var q=0;q<this.waypoints.length;q++){var r=this.waypoints[q];n.points.push(new mxPoint(r.x/o-p.x,r.y/o-p.y))}}if(null==b){var s=this.graph.view.translate,o=this.graph.view.scale,r=null!=this.originalPoint?new mxPoint(this.originalPoint.x/o-s.x,this.originalPoint.y/o-s.y):new mxPoint(this.currentPoint.x/o-s.x,this.currentPoint.y/o-s.y);r.x-=this.graph.panDx/this.graph.view.scale,r.y-=this.graph.panDy/this.graph.view.scale,n.setTerminalPoint(r,!1)}this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",g,"terminal",b,"event",c,"target",d,"terminalInserted",f))}}catch(a){mxLog.show(),mxLog.debug(a.message)}finally{e.endUpdate()}this.select&&this.selectCells(g,f?b:null)}},mxConnectionHandler.prototype.selectCells=function(a,b){this.graph.setSelectionCell(a)},mxConnectionHandler.prototype.insertEdge=function(a,b,c,d,e,f){if(null==this.factoryMethod)return this.graph.insertEdge(a,b,c,d,e,f);var g=this.createEdge(c,d,e,f);return g=this.graph.addEdge(g,a,d,e)},mxConnectionHandler.prototype.createTargetVertex=function(a,b){for(var c=this.graph.getCellGeometry(b);null!=c&&c.relative;)b=this.graph.getModel().getParent(b),c=this.graph.getCellGeometry(b);var d=this.graph.cloneCells([b])[0],c=this.graph.getModel().getGeometry(d);if(null!=c){var e=this.graph.view.translate,f=this.graph.view.scale,g=new mxPoint(this.currentPoint.x/f-e.x,this.currentPoint.y/f-e.y);c.x=Math.round(g.x-c.width/2-this.graph.panDx/f),c.y=Math.round(g.y-c.height/2-this.graph.panDy/f);var h=this.getAlignmentTolerance();if(h>0){var i=this.graph.view.getState(b);if(null!=i){var j=i.x/f-e.x,k=i.y/f-e.y;Math.abs(j-c.x)<=h&&(c.x=Math.round(j)),Math.abs(k-c.y)<=h&&(c.y=Math.round(k))}}}return d},mxConnectionHandler.prototype.getAlignmentTolerance=function(a){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(a,b,c,d){var e=null;if(null!=this.factoryMethod&&(e=this.factoryMethod(b,c,d)),null==e){e=new mxCell(a||""),e.setEdge(!0),e.setStyle(d);var f=new mxGeometry;f.relative=!0,e.setGeometry(f)}return e},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(a){this.enabled=a},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var a=0;a<this.focusIcons.length;a++)this.focusIcons[a].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null},mxConstraintHandler.prototype.getTolerance=function(a){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(a,b,c){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(a,b){return!1},mxConstraintHandler.prototype.isStateIgnored=function(a,b){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var a=0;a<this.focusIcons.length;a++)this.focusIcons[a].destroy();this.focusIcons=null,this.focusPoints=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(a){return mxEvent.isShiftDown(a.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(a,b){var c=a.getCell();if(null!=c||null==b||a.getGraphX()==b.x&&a.getGraphY()==b.y||(c=this.graph.getCellAt(b.x,b.y)),null!=c&&!this.graph.isCellConnectable(c)){var d=this.graph.getModel().getParent(c);this.graph.getModel().isVertex(d)&&this.graph.isCellConnectable(d)&&(c=d)}return c},mxConstraintHandler.prototype.update=function(a,b,c,d){if(this.isEnabled()&&!this.isEventIgnored(a)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var e=this.getTolerance(a),f=null!=d?d.x:a.getGraphX(),g=null!=d?d.y:a.getGraphY(),h=new mxRectangle(f-e,g-e,2*e,2*e),i=new mxRectangle(a.getGraphX()-e,a.getGraphY()-e,2*e,2*e),j=this.graph.view.getState(this.getCellForEvent(a,d));this.isKeepFocusEvent(a)||null!=this.currentFocusArea&&null!=this.currentFocus&&null==j&&this.graph.getModel().isVertex(this.currentFocus.cell)&&mxUtils.intersects(this.currentFocusArea,i)||j==this.currentFocus||(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(a,j,b)),this.currentConstraint=null,this.currentPoint=null;var k=null;if(null!=this.focusIcons&&null!=this.constraints&&(null==j||this.currentFocus==j))for(var l=i.getCenterX(),m=i.getCenterY(),n=0;n<this.focusIcons.length;n++){var o=l-this.focusIcons[n].bounds.getCenterX(),p=m-this.focusIcons[n].bounds.getCenterY(),q=o*o+p*p;if((this.intersects(this.focusIcons[n],i,b,c)||null!=d&&this.intersects(this.focusIcons[n],h,b,c))&&(null==k||q<k)){this.currentConstraint=this.constraints[n],this.currentPoint=this.focusPoints[n],k=q;var q=this.focusIcons[n].bounds.clone();if(q.grow(mxConstants.HIGHLIGHT_SIZE),mxClient.IS_IE&&(q.grow(1),q.width-=1,q.height-=1),null==this.focusHighlight){var r=this.createHighlightShape();r.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,r.pointerEvents=!1,r.init(this.graph.getView().getOverlayPane()),this.focusHighlight=r;var s=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:j});mxEvent.redirectMouseEvents(r.node,this.graph,s)}this.focusHighlight.bounds=q,this.focusHighlight.redraw()}}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var a=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=a,this.currentFocusArea=new mxRectangle(a.x,a.y,a.width,a.height);for(var b=0;b<this.constraints.length;b++){var c=this.graph.getConnectionPoint(a,this.constraints[b]),d=this.getImageForConstraint(a,this.constraints[b],c),e=new mxRectangle(Math.round(c.x-d.width/2),Math.round(c.y-d.height/2),d.width,d.height);this.focusIcons[b].bounds=e,this.focusIcons[b].redraw(),this.currentFocusArea.add(this.focusIcons[b].bounds),this.focusPoints[b]=c}}},mxConstraintHandler.prototype.setFocus=function(a,b,c){if(this.constraints=null!=b&&!this.isStateIgnored(b,c)&&this.graph.isCellConnectable(b.cell)?this.isEnabled()?this.graph.getAllConnectionConstraints(b,c)||[]:[]:null,null!=this.constraints){if(this.currentFocus=b,this.currentFocusArea=new mxRectangle(b.x,b.y,b.width,b.height),null!=this.focusIcons){for(var d=0;d<this.focusIcons.length;d++)this.focusIcons[d].destroy();this.focusIcons=null,this.focusPoints=null}this.focusPoints=[],this.focusIcons=[];for(var d=0;d<this.constraints.length;d++){
  var e=this.graph.getConnectionPoint(b,this.constraints[d]),f=this.getImageForConstraint(b,this.constraints[d],e),g=f.src,h=new mxRectangle(Math.round(e.x-f.width/2),Math.round(e.y-f.height/2),f.width,f.height),i=new mxImageShape(h,g);i.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,i.preserveImageAspect=!1,i.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(i.node,"dragstart",function(a){return mxEvent.consume(a),!1}),null!=i.node.previousSibling&&i.node.parentNode.insertBefore(i.node,i.node.parentNode.firstChild);var j=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:b});i.redraw(),mxEvent.redirectMouseEvents(i.node,this.graph,j),this.currentFocusArea.add(i.bounds),this.focusIcons.push(i),this.focusPoints.push(e)}this.currentFocusArea.grow(this.getTolerance(a))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var a=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return a.opacity=mxConstants.HIGHLIGHT_OPACITY,a},mxConstraintHandler.prototype.intersects=function(a,b,c,d){return mxUtils.intersects(a.bounds,b)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(a){this.enabled=a},mxRubberband.prototype.isForceRubberbandEvent=function(a){return mxEvent.isAltDown(a.getEvent())},mxRubberband.prototype.mouseDown=function(a,b){if(!b.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==b.getState()&&!mxEvent.isMultiTouchEvent(b.getEvent())){var c=mxUtils.getOffset(this.graph.container),d=mxUtils.getScrollOrigin(this.graph.container);d.x-=c.x,d.y-=c.y,this.start(b.getX()+d.x,b.getY()+d.y),b.consume(!1)}},mxRubberband.prototype.start=function(a,b){function d(a){var b=new mxMouseEvent(a),d=mxUtils.convertPoint(c,b.getX(),b.getY());return b.graphX=d.x,b.graphY=d.y,b}this.first=new mxPoint(a,b);var c=this.graph.container;this.dragHandler=mxUtils.bind(this,function(a){this.mouseMove(this.graph,d(a))}),this.dropHandler=mxUtils.bind(this,function(a){this.mouseUp(this.graph,d(a))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(a,b){if(!b.isConsumed()&&null!=this.first){var c=mxUtils.getScrollOrigin(this.graph.container),d=mxUtils.getOffset(this.graph.container);c.x-=d.x,c.y-=d.y;var e=b.getX()+c.x,f=b.getY()+c.y,g=this.first.x-e,h=this.first.y-f,i=this.graph.tolerance;(null!=this.div||Math.abs(g)>i||Math.abs(h)>i)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(e,f),b.consume())}},mxRubberband.prototype.createShape=function(){return null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv),this.sharedDiv},mxRubberband.prototype.isActive=function(a,b){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(a,b){var c=this.isActive();this.reset(),c&&(this.execute(b.getEvent()),b.consume())},mxRubberband.prototype.execute=function(a){var b=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(b,a)},mxRubberband.prototype.reset=function(){null!=this.div&&this.div.parentNode.removeChild(this.div),mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null},mxRubberband.prototype.update=function(a,b){this.currentX=a,this.currentY=b,this.repaint()},mxRubberband.prototype.repaint=function(){if(null!=this.div){var a=this.currentX-this.graph.panDx,b=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,a),this.y=Math.min(this.first.y,b),this.width=Math.max(this.first.x,a)-this.x,this.height=Math.max(this.first.y,b)-this.y;var c=mxClient.IS_VML?this.graph.panDx:0,d=mxClient.IS_VML?this.graph.panDy:0;this.div.style.left=this.x+c+"px",this.div.style.top=this.y+d+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(a){},mxHandle.prototype.setPosition=function(a,b,c){},mxHandle.prototype.execute=function(){},mxHandle.prototype.copyStyle=function(a){this.graph.setCellStyles(a,this.state.style[a],[this.state.cell])},mxHandle.prototype.processEvent=function(a){var b=this.graph.view.scale,c=this.graph.view.translate,d=new mxPoint(a.getGraphX()/b-c.x,a.getGraphY()/b-c.y);null!=this.shape&&null!=this.shape.bounds&&(d.x-=this.shape.bounds.width/b/4,d.y-=this.shape.bounds.height/b/4);var e=-mxUtils.toRadians(this.getRotation()),f=-mxUtils.toRadians(this.getTotalRotation())-e;d=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(d,e),this.ignoreGrid||!this.graph.isGridEnabledEvent(a.getEvent())),f)),this.setPosition(this.state.getPaintBounds(),d,a),this.positionChanged(),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var a=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):this.shape=this.createShape(a),this.initShape(a)},mxHandle.prototype.createShape=function(a){var b=new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE);return new mxRectangleShape(b,mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(a){a&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){if(null!=this.shape&&null!=this.state.shape){var a=this.getPosition(this.state.getPaintBounds());if(null!=a){var b=mxUtils.toRadians(this.getTotalRotation());a=this.rotatePoint(this.flipPoint(a),b);var c=this.graph.view.scale,d=this.graph.view.translate;this.shape.bounds.x=Math.floor((a.x+d.x)*c-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((a.y+d.y)*c-this.shape.bounds.height/2),this.state.unscaledWidth=null,this.shape.redraw()}}},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(a,b){var c=this.state.getCellBounds(),d=new mxPoint(c.getCenterX(),c.getCenterY()),e=Math.cos(b),f=Math.sin(b);return mxUtils.getRotatedPoint(a,e,f,d)},mxHandle.prototype.flipPoint=function(a){if(null!=this.state.shape){var b=this.state.getCellBounds();this.state.shape.flipH&&(a.x=2*b.x+b.width-a.x),this.state.shape.flipV&&(a.y=2*b.y+b.height-a.y)}return a},mxHandle.prototype.snapPoint=function(a,b){return b||(a.x=this.graph.snap(a.x),a.y=this.graph.snap(a.y)),a},mxHandle.prototype.setVisible=function(a){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=a?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxVertexHandler.prototype.graph=null;mxVertexHandler.prototype.state=null;mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells){var a=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],a||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var b=0;a&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",b++)),this.sizers.push(this.createSizer("n-resize",b++)),this.sizers.push(this.createSizer("ne-resize",b++)),this.sizers.push(this.createSizer("w-resize",b++)),this.sizers.push(this.createSizer("e-resize",b++)),this.sizers.push(this.createSizer("sw-resize",b++)),this.sizers.push(this.createSizer("s-resize",b++))),this.sizers.push(this.createSizer("se-resize",b++)));var c=this.graph.model.getGeometry(this.state.cell);null==c||c.relative||this.graph.isSwimlane(this.state.cell)||!this.graph.isLabelMovable(this.state.cell)||(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)&&this.state.width>=2&&this.state.height>=2},mxVertexHandler.prototype.isConstrainedEvent=function(a){return mxEvent.isShiftDown(a.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(a,b){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var a=this.graph.getChildCells(this.state.cell);if(a.length>0&&(this.minBounds=this.graph.view.getBounds(a),null!=this.minBounds)){var b=this.state.view.scale,c=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=b,this.minBounds.y/=b,this.minBounds.width/=b,this.minBounds.height/=b,this.x0=this.state.x/b-c.x,this.y0=this.state.y/b-c.y}},mxVertexHandler.prototype.getSelectionBounds=function(a){return new mxRectangle(Math.round(a.x),Math.round(a.y),Math.round(a.width),Math.round(a.height))},mxVertexHandler.prototype.createParentHighlightShape=function(a){return this.createSelectionShape(a)},mxVertexHandler.prototype.createSelectionShape=function(a){var b=new mxRectangleShape(a,null,this.getSelectionColor());return b.strokewidth=this.getSelectionStrokeWidth(),b.isDashed=this.isSelectionDashed(),b},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(a,b,c,d){c=c||mxConstants.HANDLE_SIZE;var e=new mxRectangle(0,0,c,c),f=this.createSizerShape(e,b,d);return f.isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(f.bounds.height-=1,f.bounds.width-=1,f.dialect=mxConstants.DIALECT_STRICTHTML,f.init(this.graph.container)):(f.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,f.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(f.node,this.graph,this.state),this.graph.isEnabled()&&f.setCursor(a),this.isSizerVisible(b)||(f.visible=!1),f},mxVertexHandler.prototype.isSizerVisible=function(a){return!0},mxVertexHandler.prototype.createSizerShape=function(a,b,c){if(null!=this.handleImage){a=new mxRectangle(a.x,a.y,this.handleImage.width,this.handleImage.height);var d=new mxImageShape(a,this.handleImage.src);return d.preserveImageAspect=!1,d}return b==mxEvent.ROTATION_HANDLE?new mxEllipse(a,c||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR):new mxRectangleShape(a,c||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(a,b,c){null!=a&&(a.bounds.x=Math.floor(b-a.bounds.width/2),a.bounds.y=Math.floor(c-a.bounds.height/2),null!=a.node&&"none"!=a.node.style.display&&a.redraw())},mxVertexHandler.prototype.getHandleForEvent=function(a){function d(b){return null!=b&&(a.isSource(b)||null!=c&&mxUtils.intersects(b.bounds,c)&&"none"!=b.node.style.display&&"hidden"!=b.node.style.visibility)}var b=mxEvent.isMouseEvent(a.getEvent())?1:this.tolerance,c=this.allowHandleBoundsCheck&&(mxClient.IS_IE||b>0)?new mxRectangle(a.getGraphX()-b,a.getGraphY()-b,2*b,2*b):null;if(null!=this.customHandles&&this.isCustomHandleEvent(a))for(var e=this.customHandles.length-1;e>=0;e--)if(d(this.customHandles[e].shape))return mxEvent.CUSTOM_HANDLE-e;if(d(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(d(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(var e=0;e<this.sizers.length;e++)if(d(this.sizers[e]))return e;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(a){return!0},mxVertexHandler.prototype.mouseDown=function(a,b){var c=mxEvent.isMouseEvent(b.getEvent())?0:this.tolerance;if(!b.isConsumed()&&this.graph.isEnabled()&&(c>0||b.getState()==this.state)){var d=this.getHandleForEvent(b);null!=d&&(this.start(b.getGraphX(),b.getGraphY(),d),b.consume())}},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(a,b,c){this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=c,this.startX=a,this.startY=b;var d=this.state.view.graph.model,e=d.getParent(this.state.cell);if(this.state.view.currentRoot!=e&&(d.isVertex(e)||d.isEdge(e))&&(this.parentState=this.state.view.graph.view.getState(e)),this.selectionBorder.node.style.display=c==mxEvent.ROTATION_HANDLE?"inline":"none",this.livePreview&&!this.isLivePreviewBorder()||(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),this.livePreview){this.hideSizers(),c==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":c==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[c]?this.sizers[c].node.style.display="":c<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-c].setVisible(!0);var f=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var g=0;g<f.length;g++){var h=this.graph.selectionCellsHandler.getHandler(f[g]);null!=h&&this.edgeHandlers.push(h)}}},mxVertexHandler.prototype.setHandlesVisible=function(a){if(null!=this.sizers)for(var b=0;b<this.sizers.length;b++)this.sizers[b].node.style.display=a?"":"none";if(null!=this.customHandles)for(var b=0;b<this.customHandles.length;b++)this.customHandles[b].setVisible(a)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(a){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(a.getEvent())||Math.abs(a.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(a.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(a){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(a){return Math.round(10*a)/10},mxVertexHandler.prototype.roundLength=function(a){return Math.round(a)},mxVertexHandler.prototype.mouseMove=function(a,b){b.isConsumed()||null==this.index?this.graph.isMouseDown||null==this.getHandleForEvent(b)||b.consume(!1):(this.checkTolerance(b),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(b):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(b):this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(b):this.resizeVertex(b),this.updateHint(b)),b.consume())},mxVertexHandler.prototype.moveLabel=function(a){var b=new mxPoint(a.getGraphX(),a.getGraphY()),c=this.graph.view.translate,d=this.graph.view.scale;this.graph.isGridEnabledEvent(a.getEvent())&&(b.x=(this.graph.snap(b.x/d-c.x)+c.x)*d,b.y=(this.graph.snap(b.y/d-c.y)+c.y)*d);var e=null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1;this.moveSizerTo(this.sizers[e],b.x,b.y)},mxVertexHandler.prototype.rotateVertex=function(a){var b=new mxPoint(a.getGraphX(),a.getGraphY()),c=this.state.x+this.state.width/2-b.x,d=this.state.y+this.state.height/2-b.y;if(this.currentAlpha=0!=c?180*Math.atan(d/c)/Math.PI+90:d<0?180:0,c>0&&(this.currentAlpha-=180),this.rotationRaster&&this.graph.isGridEnabledEvent(a.getEvent())){var c=b.x-this.state.getCenterX(),d=b.y-this.state.getCenterY(),e=3*Math.abs(Math.sqrt(c*c+d*d)-20),f=Math.max(1,5*Math.min(3,Math.max(0,Math.round(80/Math.abs(e)))));this.currentAlpha=Math.round(this.currentAlpha/f)*f}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreview&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(a){var b=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),c=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),d=new mxPoint(a.getGraphX(),a.getGraphY()),e=this.graph.view.translate,f=this.graph.view.scale,g=Math.cos(-c),h=Math.sin(-c),i=d.x-this.startX,j=d.y-this.startY,k=g*i-h*j,l=h*i+g*j;i=k,j=l;var m=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(m,i/f,j/f,this.index,this.graph.isGridEnabledEvent(a.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(a),this.isCenteredEvent(this.state,a)),!m.relative){var n=this.graph.getMaximumGraphBounds();if(null!=n&&null!=this.parentState&&(n=mxRectangle.fromRectangle(n),n.x-=(this.parentState.x-e.x*f)/f,n.y-=(this.parentState.y-e.y*f)/f),this.graph.isConstrainChild(this.state.cell)){var o=this.graph.getCellContainmentArea(this.state.cell);if(null!=o){var p=this.graph.getOverlap(this.state.cell);p>0&&(o=mxRectangle.fromRectangle(o),o.x-=o.width*p,o.y-=o.height*p,o.width+=2*o.width*p,o.height+=2*o.height*p),null==n?n=o:(n=mxRectangle.fromRectangle(n),n.intersect(o))}}null!=n&&(this.unscaledBounds.x<n.x&&(this.unscaledBounds.width-=n.x-this.unscaledBounds.x,this.unscaledBounds.x=n.x),this.unscaledBounds.y<n.y&&(this.unscaledBounds.height-=n.y-this.unscaledBounds.y,this.unscaledBounds.y=n.y),this.unscaledBounds.x+this.unscaledBounds.width>n.x+n.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-n.x-n.width),this.unscaledBounds.y+this.unscaledBounds.height>n.y+n.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-n.y-n.height))}this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:e.x*f)+this.unscaledBounds.x*f,(null!=this.parentState?this.parentState.y:e.y*f)+this.unscaledBounds.y*f,this.unscaledBounds.width*f,this.unscaledBounds.height*f),m.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),g=Math.cos(c),h=Math.sin(c);var q=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),i=q.x-b.x,j=q.y-b.y,r=g*i-h*j,s=h*i+g*j,t=r-i,u=s-j,v=this.bounds.x-this.state.x,w=this.bounds.y-this.state.y,x=g*v-h*w,y=h*v+g*w;this.bounds.x+=t,this.bounds.y+=u,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+t/f),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+u/f),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==t&&0==u?(this.childOffsetX=0,this.childOffsetY=0):(this.childOffsetX=this.state.x-this.bounds.x+x,this.childOffsetY=this.state.y-this.bounds.y+y),this.livePreview&&this.updateLivePreview(a),null!=this.preview&&this.drawPreview()},mxVertexHandler.prototype.updateLivePreview=function(a){var b=this.graph.view.scale,c=this.graph.view.translate,d=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/b-c.x,this.state.y/b-c.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height,this.state.unscaledWidth=null;var e=this.state.absoluteOffset;e=new mxPoint(e.x,e.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var f=this.graph.getCellGeometry(this.state.cell);if(null!=f){var g=f.offset||this.EMPTY_POINT;null==g||f.relative||(this.state.absoluteOffset.x=this.state.view.scale*g.x,this.state.absoluteOffset.y=this.state.view.scale*g.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.state.setState(d)},mxVertexHandler.prototype.mouseUp=function(a,b){if(null!=this.index&&null!=this.state){var c=new mxPoint(b.getGraphX(),b.getGraphY());this.graph.getModel().beginUpdate();try{if(this.index<=mxEvent.CUSTOM_HANDLE)null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].execute();else if(this.index==mxEvent.ROTATION_HANDLE)if(null!=this.currentAlpha){var d=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0);0!=d&&this.rotateCell(this.state.cell,d)}else this.rotateClick();else{var e=this.graph.isGridEnabledEvent(b.getEvent()),f=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),g=Math.cos(-f),h=Math.sin(-f),i=c.x-this.startX,j=c.y-this.startY,k=g*i-h*j,l=h*i+g*j;i=k,j=l;var m=this.graph.view.scale,n=this.isRecursiveResize(this.state,b);this.resizeCell(this.state.cell,this.roundLength(i/m),this.roundLength(j/m),this.index,e,this.isConstrainedEvent(b),n)}}finally{this.graph.getModel().endUpdate()}b.consume(),this.reset()}},mxVertexHandler.prototype.isRecursiveResize=function(a,b){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(a,b,c){if(0!=b){var d=this.graph.getModel();if(d.isVertex(a)||d.isEdge(a)){if(!d.isEdge(a)){var e=this.graph.view.getState(a),f=null!=e?e.style:this.graph.getCellStyle(a);if(null!=f){var g=(f[mxConstants.STYLE_ROTATION]||0)+b;this.graph.setCellStyles(mxConstants.STYLE_ROTATION,g,[a])}}var h=this.graph.getCellGeometry(a);if(null!=h){var i=this.graph.getCellGeometry(c);if(null==i||d.isEdge(c)||(h=h.clone(),h.rotate(b,new mxPoint(i.width/2,i.height/2)),d.setGeometry(a,h)),d.isVertex(a)&&!h.relative||d.isEdge(a))for(var j=d.getChildCount(a),k=0;k<j;k++)this.rotateCell(d.getChildAt(a,k),b,a)}}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,null!=this.preview&&(this.preview.destroy(),this.preview=null),this.livePreview&&null!=this.sizers)for(var a=0;a<this.sizers.length;a++)null!=this.sizers[a]&&(this.sizers[a].node.style.display="");if(null!=this.customHandles)for(var a=0;a<this.customHandles.length;a++)this.customHandles[a].reset();null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.unscaledBounds=null},mxVertexHandler.prototype.resizeCell=function(a,b,c,d,e,f,g){var h=this.graph.model.getGeometry(a);if(null!=h)if(d==mxEvent.LABEL_HANDLE){var i=this.graph.view.scale;b=Math.round((this.labelShape.bounds.getCenterX()-this.startX)/i),c=Math.round((this.labelShape.bounds.getCenterY()-this.startY)/i),h=h.clone(),null==h.offset?h.offset=new mxPoint(b,c):(h.offset.x+=b,h.offset.y+=c),this.graph.model.setGeometry(a,h)}else if(null!=this.unscaledBounds){var i=this.graph.view.scale;0==this.childOffsetX&&0==this.childOffsetY||this.moveChildren(a,Math.round(this.childOffsetX/i),Math.round(this.childOffsetY/i)),this.graph.resizeCell(a,this.unscaledBounds,g)}},mxVertexHandler.prototype.moveChildren=function(a,b,c){for(var d=this.graph.getModel(),e=d.getChildCount(a),f=0;f<e;f++){var g=d.getChildAt(a,f),h=this.graph.getCellGeometry(g);null!=h&&(h=h.clone(),h.translate(b,c),d.setGeometry(g,h))}},mxVertexHandler.prototype.union=function(a,b,c,d,e,f,g,h,i){if(this.singleSizer){var j=a.x+a.width+b,k=a.y+a.height+c;e&&(j=this.graph.snap(j/f)*f,k=this.graph.snap(k/f)*f);var l=new mxRectangle(a.x,a.y,0,0);return l.add(new mxRectangle(j,k,0,0)),l}var m=a.width,n=a.height,o=a.x-g.x*f,p=o+m,q=a.y-g.y*f,r=q+n,s=o+m/2,t=q+n/2;d>4?(r+=c,e&&(r=this.graph.snap(r/f)*f)):d<3&&(q+=c,e&&(q=this.graph.snap(q/f)*f)),0==d||3==d||5==d?(o+=b,e&&(o=this.graph.snap(o/f)*f)):2!=d&&4!=d&&7!=d||(p+=b,e&&(p=this.graph.snap(p/f)*f));var u=p-o,v=r-q;if(h){var w=this.graph.getCellGeometry(this.state.cell);if(null!=w){var x=w.width/w.height;1==d||2==d||7==d||6==d?u=v*x:v=u/x,0==d&&(o=p-u,q=r-v)}}if(i){u+=u-m,v+=v-n;var y=s-(o+u/2),z=t-(q+v/2);o+=y,q+=z,p+=y,r+=z}u<0&&(o+=u,u=Math.abs(u)),v<0&&(q+=v,v=Math.abs(v));var A=new mxRectangle(o+g.x*f,q+g.y*f,u,v);return null!=this.minBounds&&(A.width=Math.max(A.width,this.minBounds.x*f+this.minBounds.width*f+Math.max(0,this.x0*f-A.x)),A.height=Math.max(A.height,this.minBounds.y*f+this.minBounds.height*f+Math.max(0,this.y0*f-A.y))),A},mxVertexHandler.prototype.redraw=function(){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.redrawHandles(),this.drawPreview()},mxVertexHandler.prototype.getHandlePadding=function(){var a=new mxPoint(0,0),b=this.tolerance;return null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*b||this.bounds.height<2*this.sizers[0].bounds.height+2*b)&&(b/=2,a.x=this.sizers[0].bounds.width+b,a.y=this.sizers[0].bounds.height+b),a},mxVertexHandler.prototype.redrawHandles=function(){var a=this.tolerance;this.horizontalOffset=0,this.verticalOffset=0;var b=this.bounds;if(null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]){if(null==this.index&&this.manageSizers&&this.sizers.length>=8){var c=this.getHandlePadding();this.horizontalOffset=c.x,this.verticalOffset=c.y,0==this.horizontalOffset&&0==this.verticalOffset||(b=new mxRectangle(b.x,b.y,b.width,b.height),b.x-=this.horizontalOffset/2,b.width+=this.horizontalOffset,b.y-=this.verticalOffset/2,b.height+=this.verticalOffset),this.sizers.length>=8&&(b.width<2*this.sizers[0].bounds.width+2*a||b.height<2*this.sizers[0].bounds.height+2*a?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var d=b.x+b.width,e=b.y+b.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],d,e);else{var f=b.x+b.width/2,g=b.y+b.height/2;if(this.sizers.length>=8){var h=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],i=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),j=Math.cos(i),k=Math.sin(i),l=Math.round(4*i/Math.PI),m=new mxPoint(b.getCenterX(),b.getCenterY()),n=mxUtils.getRotatedPoint(new mxPoint(b.x,b.y),j,k,m);this.moveSizerTo(this.sizers[0],n.x,n.y),this.sizers[0].setCursor(h[mxUtils.mod(0+l,h.length)]),n.x=f,n.y=b.y,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[1],n.x,n.y),this.sizers[1].setCursor(h[mxUtils.mod(1+l,h.length)]),n.x=d,n.y=b.y,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[2],n.x,n.y),this.sizers[2].setCursor(h[mxUtils.mod(2+l,h.length)]),n.x=b.x,n.y=g,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[3],n.x,n.y),this.sizers[3].setCursor(h[mxUtils.mod(7+l,h.length)]),n.x=d,n.y=g,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[4],n.x,n.y),this.sizers[4].setCursor(h[mxUtils.mod(3+l,h.length)]),n.x=b.x,n.y=e,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[5],n.x,n.y),
  this.sizers[5].setCursor(h[mxUtils.mod(6+l,h.length)]),n.x=f,n.y=e,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[6],n.x,n.y),this.sizers[6].setCursor(h[mxUtils.mod(5+l,h.length)]),n.x=d,n.y=e,n=mxUtils.getRotatedPoint(n,j,k,m),this.moveSizerTo(this.sizers[7],n.x,n.y),this.sizers[7].setCursor(h[mxUtils.mod(4+l,h.length)]),this.moveSizerTo(this.sizers[8],f+this.state.absoluteOffset.x,g+this.state.absoluteOffset.y)}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],f+this.state.absoluteOffset.x,g+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}if(null!=this.rotationShape){var i=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),j=Math.cos(i),k=Math.sin(i),m=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),n=mxUtils.getRotatedPoint(new mxPoint(b.x+b.width/2,b.y+this.rotationHandleVSpacing),j,k,m);null!=this.rotationShape.node&&this.moveSizerTo(this.rotationShape,n.x,n.y)}if(null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(var o=0;o<this.edgeHandlers.length;o++)this.edgeHandlers[o].redraw();if(null!=this.customHandles)for(var o=0;o<this.customHandles.length;o++)this.customHandles[o].redraw();this.updateParentHighlight()},mxVertexHandler.prototype.updateParentHighlight=function(){if(null!=this.selectionBorder)if(null!=this.parentHighlight){var a=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(a)){var b=this.graph.view.getState(a),c=this.parentHighlight.bounds;null==b||c.x==b.x&&c.y==b.y&&c.width==b.width&&c.height==b.height||(this.parentHighlight.bounds=b,this.parentHighlight.redraw())}else this.parentHighlight.destroy(),this.parentHighlight=null}else if(this.parentHighlightEnabled){var a=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(a)){var b=this.graph.view.getState(a);null!=b&&(this.parentHighlight=this.createParentHighlightShape(b),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(b.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))}}},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw(),null!=this.parentHighlight&&this.parentHighlight.redraw()},mxVertexHandler.prototype.destroy=function(){if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight&&(this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),null!=this.sizers){for(var a=0;a<this.sizers.length;a++)this.sizers[a].destroy();this.sizers=null}if(null!=this.customHandles){for(var a=0;a<this.customHandles.length;a++)this.customHandles[a].destroy();this.customHandles=null}},mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var a=this.state.getVisibleTerminalState(!0);if(null!=a&&(this.preferHtml=null!=a.text&&a.text.node.parentNode==this.graph.container),!this.preferHtml){var b=this.state.getVisibleTerminalState(!1);null!=b&&(this.preferHtml=null!=b.text&&b.text.node.parentNode==this.graph.container)}}if(this.parentHighlightEnabled){var c=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(c)){var d=this.graph.view.getState(c);null!=d&&(this.parentHighlight=this.createParentHighlightShape(d),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(d.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))}}(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||mxGraphHandler.prototype.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.redraw()},mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(a){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isAddPointEvent=function(a){return mxEvent.isShiftDown(a)},mxEdgeHandler.prototype.isRemovePointEvent=function(a){return mxEvent.isShiftDown(a)},mxEdgeHandler.prototype.getSelectionPoints=function(a){return a.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(a){var b=new mxRectangleShape(a,null,this.getSelectionColor());return b.strokewidth=this.getSelectionStrokeWidth(),b.isDashed=this.isSelectionDashed(),b},mxEdgeHandler.prototype.createSelectionShape=function(a){var b=new this.state.shape.constructor;return b.outline=!0,b.apply(this.state),b.isDashed=this.isSelectionDashed(),b.stroke=this.getSelectionColor(),b.isShadow=!1,b},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(a){return!0},mxEdgeHandler.prototype.getCellAt=function(a,b){return this.outlineConnect?null:this.graph.getCellAt(a,b)},mxEdgeHandler.prototype.createMarker=function(){var a=new mxCellMarker(this.graph),b=this;return a.getCell=function(a){var c=mxCellMarker.prototype.getCell.apply(this,arguments);if(c!=b.state.cell&&null!=c||null==b.currentPoint||(c=b.graph.getCellAt(b.currentPoint.x,b.currentPoint.y)),null!=c&&!this.graph.isCellConnectable(c)){var d=this.graph.getModel().getParent(c);this.graph.getModel().isVertex(d)&&this.graph.isCellConnectable(d)&&(c=d)}var e=b.graph.getModel();return(this.graph.isSwimlane(c)&&null!=b.currentPoint&&this.graph.hitsSwimlaneContent(c,b.currentPoint.x,b.currentPoint.y)||!b.isConnectableCell(c)||c==b.state.cell||null!=c&&!b.graph.connectableEdges&&e.isEdge(c)||e.isAncestor(b.state.cell,c))&&(c=null),this.graph.isCellConnectable(c)||(c=null),c},a.isValidState=function(a){var c=b.graph.getModel(),d=b.graph.view.getTerminalPort(a,b.graph.view.getState(c.getTerminal(b.state.cell,!b.isSource)),!b.isSource),e=null!=d?d.cell:null,f=b.isSource?a.cell:e,g=b.isSource?e:a.cell;return b.error=b.validateConnection(f,g),null==b.error},a},mxEdgeHandler.prototype.validateConnection=function(a,b){return this.graph.getEdgeValidationError(this.state.cell,a,b)},mxEdgeHandler.prototype.createBends=function(){for(var a=this.state.cell,b=[],c=0;c<this.abspoints.length;c++)if(this.isHandleVisible(c)){var d=0==c,e=c==this.abspoints.length-1,f=d||e;(f||this.graph.isCellBendable(a))&&mxUtils.bind(this,function(a){var d=this.createHandleShape(a);this.initBend(d,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,a)}))),this.isHandleEnabled(c)&&d.setCursor(f?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),b.push(d),f||(this.points.push(new mxPoint(0,0)),d.node.style.visibility="hidden")})(c)}return b},mxEdgeHandler.prototype.createVirtualBends=function(){var a=this.state.cell,c=(this.abspoints[0],[]);if(this.graph.isCellBendable(a))for(var d=1;d<this.abspoints.length;d++)mxUtils.bind(this,function(a){this.initBend(a),a.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),c.push(a)})(this.createHandleShape());return c},mxEdgeHandler.prototype.isHandleEnabled=function(a){return!0},mxEdgeHandler.prototype.isHandleVisible=function(a){var b=this.state.getVisibleTerminalState(!0),c=this.state.getVisibleTerminalState(!1),d=this.graph.getCellGeometry(this.state.cell),e=null!=d?this.graph.view.getEdgeStyle(this.state,d.points,b,c):null;return e!=mxEdgeStyle.EntityRelation||0==a||a==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(a){if(null!=this.handleImage){var b=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return b.preserveImageAspect=!1,b}var c=mxConstants.HANDLE_SIZE;return this.preferHtml&&(c-=1),new mxRectangleShape(new mxRectangle(0,0,c,c),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.createLabelHandleShape=function(){if(null!=this.labelHandleImage){var a=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return a.preserveImageAspect=!1,a}var b=mxConstants.LABEL_HANDLE_SIZE;return new mxRectangleShape(new mxRectangle(0,0,b,b),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(a,b){this.preferHtml?(a.dialect=mxConstants.DIALECT_STRICTHTML,a.init(this.graph.container)):(a.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,a.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(a.node,this.graph,this.state,null,null,null,b),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(a.node,"dragstart",function(a){return mxEvent.consume(a),!1}),mxClient.IS_TOUCH&&a.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(a){function f(b){if(null!=b&&"none"!=b.node.style.display&&"hidden"!=b.node.style.visibility&&(a.isSource(b)||null!=c&&mxUtils.intersects(b.bounds,c))){var e=a.getGraphX()-b.bounds.getCenterX(),f=a.getGraphY()-b.bounds.getCenterY(),g=e*e+f*f;if(null==d||g<=d)return d=g,!0}return!1}var b=mxEvent.isMouseEvent(a.getEvent())?1:this.tolerance,c=this.allowHandleBoundsCheck&&(mxClient.IS_IE||b>0)?new mxRectangle(a.getGraphX()-b,a.getGraphY()-b,2*b,2*b):null,d=null,e=null;if(null!=this.customHandles&&this.isCustomHandleEvent(a))for(var g=this.customHandles.length-1;g>=0;g--)if(f(this.customHandles[g].shape))return mxEvent.CUSTOM_HANDLE-g;if((a.isSource(this.state.text)||f(this.labelShape))&&(e=mxEvent.LABEL_HANDLE),null!=this.bends)for(var g=0;g<this.bends.length;g++)f(this.bends[g])&&(e=g);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(a))for(var g=0;g<this.virtualBends.length;g++)f(this.virtualBends[g])&&(e=mxEvent.VIRTUAL_HANDLE-g);return e},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(a){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(a){return!0},mxEdgeHandler.prototype.mouseDown=function(a,b){var c=this.getHandleForEvent(b);if(null!=this.bends&&null!=this.bends[c]){var d=this.bends[c].bounds;this.snapPoint=new mxPoint(d.getCenterX(),d.getCenterY())}this.addEnabled&&null==c&&this.isAddPointEvent(b.getEvent())?(this.addPoint(this.state,b.getEvent()),b.consume()):null!=c&&!b.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(b.getEvent())?this.removePoint(this.state,c):(c!=mxEvent.LABEL_HANDLE||this.graph.isLabelMovable(b.getCell()))&&(c<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-c].node,100),this.start(b.getX(),b.getY(),c)),b.consume())},mxEdgeHandler.prototype.start=function(a,b,c){if(this.startX=a,this.startY=b,this.isSource=null!=this.bends&&0==c,this.isTarget=null!=this.bends&&c==this.bends.length-1,this.isLabel=c==mxEvent.LABEL_HANDLE,this.isSource||this.isTarget){var d=this.state.cell,e=this.graph.model.getTerminal(d,this.isSource);(null==e&&this.graph.isTerminalPointMovable(d,this.isSource)||null!=e&&this.graph.isCellDisconnectable(d,e,this.isSource))&&(this.index=c)}else this.index=c;if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(var f=0;f<this.customHandles.length;f++)f!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[f].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(a,b){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(a,b){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(a){return Math.round(a)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(a){return this.snapToTerminals&&!mxEvent.isAltDown(a.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(a){function h(a){if(null!=a){var b=a.x;Math.abs(d.x-b)<e&&(d.x=b,f=!0);var c=a.y;Math.abs(d.y-c)<e&&(d.y=c,g=!0)}}function i(a){null!=a&&h.call(this,new mxPoint(b.getRoutingCenterX(a),b.getRoutingCenterY(a)))}var b=this.graph.getView(),c=b.scale,d=new mxPoint(this.roundLength(a.getGraphX()/c)*c,this.roundLength(a.getGraphY()/c)*c),e=this.getSnapToTerminalTolerance(),f=!1,g=!1;if(e>0&&this.isSnapToTerminalsEvent(a)&&(i.call(this,this.state.getVisibleTerminalState(!0)),i.call(this,this.state.getVisibleTerminalState(!1)),null!=this.state.absolutePoints))for(var j=0;j<this.state.absolutePoints.length;j++)h.call(this,this.state.absolutePoints[j]);if(this.graph.isGridEnabledEvent(a.getEvent())){var k=b.translate;f||(d.x=(this.graph.snap(d.x/c-k.x)+k.x)*c),g||(d.y=(this.graph.snap(d.y/c-k.y)+k.y)*c)}return d},mxEdgeHandler.prototype.getPreviewTerminalState=function(a){if(this.constraintHandler.update(a,this.isSource,!0,a.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint){null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");var b=this.graph.getModel(),c=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(b.getTerminal(this.state.cell,!this.isSource)),!this.isSource),d=null!=c?c.cell:null,e=this.isSource?this.constraintHandler.currentFocus.cell:d,f=this.isSource?d:this.constraintHandler.currentFocus.cell;this.error=this.validateConnection(e,f);var g=null;return null==this.error?g=this.constraintHandler.currentFocus:this.constraintHandler.reset(),g}return this.graph.isIgnoreTerminalEvent(a.getEvent())?(this.marker.reset(),null):(this.marker.process(a),this.marker.getValidState())},mxEdgeHandler.prototype.getPreviewPoints=function(a,b){function n(a,b){a>0&&a<j.length-1&&mxUtils.ptSegDistSq(j[a-1].x,j[a-1].y,j[a+1].x,j[a+1].y,b.x,b.y)<i&&(d.splice(a-1,1),f=d)}var c=this.graph.getCellGeometry(this.state.cell),d=null!=c.points?c.points.slice():null,e=new mxPoint(a.x,a.y),f=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(d=null);else if(this.convertPoint(e,!1),null==d)d=[e];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&d.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,e),!this.isSource&&!this.isTarget){for(var g=0;g<this.bends.length;g++)if(g!=this.index){var h=this.bends[g];null!=h&&mxUtils.contains(h.bounds,a.x,a.y)&&(this.index<=mxEvent.VIRTUAL_HANDLE?d.splice(mxEvent.VIRTUAL_HANDLE-this.index,1):d.splice(this.index-1,1),f=d)}if(null==f&&this.straightRemoveEnabled&&(null==b||!mxEvent.isAltDown(b.getEvent()))){var i=this.graph.tolerance*this.graph.tolerance,j=this.state.absolutePoints.slice();j[this.index]=a;var k=this.state.getVisibleTerminalState(!0);if(null!=k){var l=this.graph.getConnectionConstraint(this.state,k,!0);null!=l&&null!=this.graph.getConnectionPoint(k,l)||(j[0]=new mxPoint(k.view.getRoutingCenterX(k),k.view.getRoutingCenterY(k)))}var m=this.state.getVisibleTerminalState(!1);if(null!=m){var l=this.graph.getConnectionConstraint(this.state,m,!1);null!=l&&null!=this.graph.getConnectionPoint(m,l)||(j[j.length-1]=new mxPoint(m.view.getRoutingCenterX(m),m.view.getRoutingCenterY(m)))}n(this.index,a)}}null==f&&this.index>mxEvent.VIRTUAL_HANDLE&&(d[this.index-1]=e)}return null!=f?f:d},mxEdgeHandler.prototype.isOutlineConnectEvent=function(a){var b=mxUtils.getOffset(this.graph.container),c=a.getEvent(),d=mxEvent.getClientX(c),e=mxEvent.getClientY(c),f=document.documentElement,g=(window.pageXOffset||f.scrollLeft)-(f.clientLeft||0),h=(window.pageYOffset||f.scrollTop)-(f.clientTop||0),i=this.currentPoint.x-this.graph.container.scrollLeft+b.x-g,j=this.currentPoint.y-this.graph.container.scrollTop+b.y-h;return this.outlineConnect&&!mxEvent.isShiftDown(a.getEvent())&&(a.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(a.getEvent())&&null!=a.getState()||this.marker.highlight.isHighlightAt(d,e)||(i!=d||j!=e)&&null==a.getState()&&this.marker.highlight.isHighlightAt(i,j))},mxEdgeHandler.prototype.updatePreviewState=function(a,b,c,d,e){var f=this.isSource?c:this.state.getVisibleTerminalState(!0),g=this.isTarget?c:this.state.getVisibleTerminalState(!1),h=this.graph.getConnectionConstraint(a,f,!0),i=this.graph.getConnectionConstraint(a,g,!1),j=this.constraintHandler.currentConstraint;if(null==j&&e&&(null!=c?(d.isSource(this.marker.highlight.shape)&&(b=new mxPoint(d.getGraphX(),d.getGraphY())),j=this.graph.getOutlineConstraint(b,c,d),this.constraintHandler.setFocus(d,c,this.isSource),this.constraintHandler.currentConstraint=j,this.constraintHandler.currentPoint=b):j=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var k=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=e?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/k/k,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.marker.getValidState()==d.getState()?mxConstants.DEFAULT_VALID_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/k/k,this.marker.highlight.repaint())}this.isSource?h=j:this.isTarget&&(i=j),(this.isSource||this.isTarget)&&(null!=j&&null!=j.point?(a.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=j.point.x,a.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=j.point.y):(delete a.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete a.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),a.setVisibleTerminalState(f,!0),a.setVisibleTerminalState(g,!1),this.isSource&&null==f||a.view.updateFixedTerminalPoint(a,f,!0,h),this.isTarget&&null==g||a.view.updateFixedTerminalPoint(a,g,!1,i),(this.isSource||this.isTarget)&&null==c&&(a.setAbsoluteTerminalPoint(b,this.isSource),null==this.marker.getMarkedState()&&(this.error=this.graph.allowDanglingEdges?null:"")),a.view.updatePoints(a,this.points,f,g),a.view.updateFloatingTerminalPoints(a,f,g)},mxEdgeHandler.prototype.mouseMove=function(a,b){if(null!=this.index&&null!=this.marker){if(this.currentPoint=this.getPointForEvent(b),this.error=null,!this.graph.isIgnoreTerminalEvent(b.getEvent())&&mxEvent.isShiftDown(b.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE)null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(b);else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,b);var c=this.isSource||this.isTarget?this.getPreviewTerminalState(b):null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var d=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(b);d?c=this.marker.highlight.state:null!=c&&c!=b.getState()&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),c=null)}var e=this.clonePreviewState(this.currentPoint,null!=c?c.cell:null);this.updatePreviewState(e,this.currentPoint,c,b,d);var f=null==this.error?this.marker.validColor:this.marker.invalidColor;this.setPreviewColor(f),this.abspoints=e.absolutePoints,this.active=!0}this.updateHint(b,this.currentPoint),this.drawPreview(),mxEvent.consume(b.getEvent()),b.consume()}else mxClient.IS_IE&&null!=this.getHandleForEvent(b)&&b.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(a,b){if(null!=this.index&&null!=this.marker){var c=this.state.cell;if(b.getX()!=this.startX||b.getY()!=this.startY){var d=!this.graph.isIgnoreTerminalEvent(b.getEvent())&&this.graph.isCloneEvent(b.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)this.error.length>0&&this.graph.validationAlert(this.error);else if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){var e=this.graph.getModel();e.beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].execute()}finally{e.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var f=null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(f=this.constraintHandler.currentFocus.cell),null==f&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke&&(f=this.marker.validState.cell),null!=f)c=this.connect(c,f,this.isSource,d,b);else if(this.graph.isAllowDanglingEdges()){var g=this.abspoints[this.isSource?0:this.abspoints.length-1];g.x=this.roundLength(g.x/this.graph.view.scale-this.graph.view.translate.x),g.y=this.roundLength(g.y/this.graph.view.scale-this.graph.view.translate.y);var h=this.graph.getView().getState(this.graph.getModel().getParent(c));null!=h&&(g.x-=h.origin.x,g.y-=h.origin.y),g.x-=this.graph.panDx/this.graph.view.scale,g.y-=this.graph.panDy/this.graph.view.scale,c=this.changeTerminalPoint(c,g,this.isSource,d)}}else this.active?c=this.changePoints(c,this.points,d):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}null!=this.marker&&(this.reset(),c!=this.state.cell&&this.graph.setSelectionCell(c)),b.consume()}},mxEdgeHandler.prototype.reset=function(){if(this.error=null,this.index=null,this.label=null,this.points=null,this.snapPoint=null,this.active=!1,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.livePreview&&null!=this.sizers)for(var a=0;a<this.sizers.length;a++)null!=this.sizers[a]&&(this.sizers[a].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(var a=0;a<this.customHandles.length;a++)this.customHandles[a].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(a){null!=this.shape&&(this.shape.stroke=a)},mxEdgeHandler.prototype.convertPoint=function(a,b){var c=this.graph.getView().getScale(),d=this.graph.getView().getTranslate();b&&(a.x=this.graph.snap(a.x),a.y=this.graph.snap(a.y)),a.x=Math.round(a.x/c-d.x),a.y=Math.round(a.y/c-d.y);var e=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return null!=e&&(a.x-=e.origin.x,a.y-=e.origin.y),a},mxEdgeHandler.prototype.moveLabel=function(a,b,c){var d=this.graph.getModel(),e=d.getGeometry(a.cell);if(null!=e){var f=this.graph.getView().scale;if(e=e.clone(),e.relative){var g=this.graph.getView().getRelativePoint(a,b,c);e.x=Math.round(1e4*g.x)/1e4,e.y=Math.round(g.y),e.offset=new mxPoint(0,0);var g=this.graph.view.getPoint(a,e);e.offset=new mxPoint(Math.round((b-g.x)/f),Math.round((c-g.y)/f))}else{var h=a.absolutePoints,i=h[0],j=h[h.length-1];if(null!=i&&null!=j){var k=i.x+(j.x-i.x)/2,l=i.y+(j.y-i.y)/2;e.offset=new mxPoint(Math.round((b-k)/f),Math.round((c-l)/f)),e.x=0,e.y=0}}d.setGeometry(a.cell,e)}},mxEdgeHandler.prototype.connect=function(a,b,c,d,e){var f=this.graph.getModel(),g=f.getParent(a);f.beginUpdate();try{if(d){var h=this.graph.cloneCells([a])[0];f.add(g,h,f.getChildCount(g));var i=f.getTerminal(a,!c);this.graph.connectCell(h,i,!c),a=h}var j=this.constraintHandler.currentConstraint;null==j&&(j=new mxConnectionConstraint),this.graph.connectCell(a,b,c,j)}finally{f.endUpdate()}return a},mxEdgeHandler.prototype.changeTerminalPoint=function(a,b,c,d){var e=this.graph.getModel();e.beginUpdate();try{if(d){var f=e.getParent(a),g=e.getTerminal(a,!c);a=this.graph.cloneCells([a])[0],e.add(f,a,e.getChildCount(f)),e.setTerminal(a,g,!c)}var h=e.getGeometry(a);null!=h&&(h=h.clone(),h.setTerminalPoint(b,c),e.setGeometry(a,h),this.graph.connectCell(a,null,c,new mxConnectionConstraint))}finally{e.endUpdate()}return a},mxEdgeHandler.prototype.changePoints=function(a,b,c){var d=this.graph.getModel();d.beginUpdate();try{if(c){var e=d.getParent(a),f=d.getTerminal(a,!0),g=d.getTerminal(a,!1);a=this.graph.cloneCells([a])[0],d.add(e,a,d.getChildCount(e)),d.setTerminal(a,f,!0),d.setTerminal(a,g,!1)}var h=d.getGeometry(a);null!=h&&(h=h.clone(),h.points=b,d.setGeometry(a,h))}finally{d.endUpdate()}return a},mxEdgeHandler.prototype.addPoint=function(a,b){var c=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(b),mxEvent.getClientY(b)),d=this.graph.isGridEnabledEvent(b);this.convertPoint(c,d),this.addPointAt(a,c.x,c.y),mxEvent.consume(b)},mxEdgeHandler.prototype.addPointAt=function(a,b,c){var d=this.graph.getCellGeometry(a.cell),e=new mxPoint(b,c);if(null!=d){d=d.clone();var f=this.graph.view.translate,g=this.graph.view.scale,h=new mxPoint(f.x*g,f.y*g),i=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(i)){var j=this.graph.view.getState(i);h=new mxPoint(j.x,j.y)}var k=mxUtils.findNearestSegment(a,e.x*g+h.x,e.y*g+h.y);null==d.points?d.points=[e]:d.points.splice(k,0,e),this.graph.getModel().setGeometry(a.cell,d),this.refresh(),this.redraw()}},mxEdgeHandler.prototype.removePoint=function(a,b){if(b>0&&b<this.abspoints.length-1){var c=this.graph.getCellGeometry(this.state.cell);null!=c&&null!=c.points&&(c=c.clone(),c.points.splice(b-1,1),this.graph.getModel().setGeometry(a.cell,c),this.refresh(),this.redraw())}},mxEdgeHandler.prototype.getHandleFillColor=function(a){var b=0==a,c=this.state.cell,d=this.graph.getModel().getTerminal(c,b),e=mxConstants.HANDLE_FILLCOLOR;return null!=d&&!this.graph.isCellDisconnectable(c,d,b)||null==d&&!this.graph.isTerminalPointMovable(c,b)?e=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=d&&this.graph.isCellDisconnectable(c,d,b)&&(e=mxConstants.CONNECT_HANDLE_FILLCOLOR),e},mxEdgeHandler.prototype.redraw=function(){this.abspoints=this.state.absolutePoints.slice(),this.redrawHandles();var a=this.graph.getModel().getGeometry(this.state.cell),b=a.points;if(null!=this.bends&&this.bends.length>0&&null!=b){null==this.points&&(this.points=[]);for(var c=1;c<this.bends.length-1;c++)null!=this.bends[c]&&null!=this.abspoints[c]&&(this.points[c-1]=b[c-1])}this.drawPreview()},mxEdgeHandler.prototype.redrawHandles=function(){var a=this.state.cell,b=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-b.width/2),Math.round(this.label.y-b.height/2),b.width,b.height);var c=this.graph.getLabel(a);if(this.labelShape.visible=null!=c&&c.length>0&&this.graph.isLabelMovable(a),null!=this.bends&&this.bends.length>0){var d=this.abspoints.length-1,e=this.abspoints[0],f=e.x,g=e.y;b=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(f-b.width/2),Math.floor(g-b.height/2),b.width,b.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var h=this.abspoints[d],i=h.x,j=h.y,k=this.bends.length-1;b=this.bends[k].bounds,this.bends[k].bounds=new mxRectangle(Math.floor(i-b.width/2),Math.floor(j-b.height/2),b.width,b.height),this.bends[k].fill=this.getHandleFillColor(k),this.bends[k].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[k].bounds),this.redrawInnerBends(e,h)}if(null!=this.abspoints&&null!=this.virtualBends&&this.virtualBends.length>0)for(var l=this.abspoints[0],m=0;m<this.virtualBends.length;m++)if(null!=this.virtualBends[m]&&null!=this.abspoints[m+1]){var n=this.abspoints[m+1],b=this.virtualBends[m],o=l.x+(n.x-l.x)/2,p=l.y+(n.y-l.y)/2;b.bounds=new mxRectangle(Math.floor(o-b.bounds.width/2),Math.floor(p-b.bounds.height/2),b.bounds.width,b.bounds.height),b.redraw(),mxUtils.setOpacity(b.node,this.virtualBendOpacity),l=n,this.manageLabelHandle&&this.checkLabelHandle(b.bounds)}if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(var m=0;m<this.customHandles.length;m++)this.customHandles[m].redraw()},mxEdgeHandler.prototype.setHandlesVisible=function(a){if(null!=this.bends)for(var b=0;b<this.bends.length;b++)this.bends[b].node.style.display=a?"":"none";if(null!=this.virtualBends)for(var b=0;b<this.virtualBends.length;b++)this.virtualBends[b].node.style.display=a?"":"none";if(null!=this.labelShape&&(this.labelShape.node.style.display=a?"":"none"),
  null!=this.customHandles)for(var b=0;b<this.customHandles.length;b++)this.customHandles[b].setVisible(a)},mxEdgeHandler.prototype.redrawInnerBends=function(a,b){for(var c=1;c<this.bends.length-1;c++)if(null!=this.bends[c])if(null!=this.abspoints[c]){var d=this.abspoints[c].x,e=this.abspoints[c].y,f=this.bends[c].bounds;this.bends[c].node.style.visibility="visible",this.bends[c].bounds=new mxRectangle(Math.round(d-f.width/2),Math.round(e-f.height/2),f.width,f.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[c].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[c].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[c].bounds=new mxRectangle(Math.round(d-w/2),Math.round(e-h/2),w,h)),this.bends[c].redraw()}else this.bends[c].destroy(),this.bends[c]=null},mxEdgeHandler.prototype.checkLabelHandle=function(a){if(null!=this.labelShape){var b=this.labelShape.bounds;mxUtils.intersects(a,b)&&(a.getCenterY()<b.getCenterY()?b.y=a.y+a.height:b.y=a.y-b.height)}},mxEdgeHandler.prototype.drawPreview=function(){if(this.isLabel){var a=this.labelShape.bounds,b=new mxRectangle(Math.round(this.label.x-a.width/2),Math.round(this.label.y-a.height/2),a.width,a.height);this.labelShape.bounds=b,this.labelShape.redraw()}else null!=this.shape&&(this.shape.apply(this.state),this.shape.points=this.abspoints,this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.arrowStrokewidth=this.getSelectionStrokeWidth(),this.shape.isShadow=!1,this.shape.redraw());null!=this.parentHighlight&&this.parentHighlight.redraw()},mxEdgeHandler.prototype.refresh=function(){this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.shape&&(this.shape.points=this.abspoints),null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)},mxEdgeHandler.prototype.destroyBends=function(a){if(null!=a)for(var b=0;b<a.length;b++)null!=a[b]&&a[b].destroy()},mxEdgeHandler.prototype.destroy=function(){null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight&&(this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var a=[],b=this.createHandleShape(0);return this.initBend(b),b.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),a.push(b),a.push(this.createVirtualBend(mxUtils.bind(this,function(a){!mxEvent.isConsumed(a)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,a),mxEvent.consume(a))}))),this.points.push(new mxPoint(0,0)),b=this.createHandleShape(2),this.initBend(b),b.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),a.push(b),a},mxElbowEdgeHandler.prototype.createVirtualBend=function(a){var b=this.createHandleShape();return this.initBend(b,a),b.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(b.node.style.display="none"),b},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(a){var b=null;return null==this.bends||null==this.bends[1]||a!=this.bends[1].node&&a.parentNode!=this.bends[1].node||(b=this.doubleClickOrientationResource,b=mxResources.get(b)||b),b},mxElbowEdgeHandler.prototype.convertPoint=function(a,b){var c=this.graph.getView().getScale(),d=this.graph.getView().getTranslate(),e=this.state.origin;return b&&(a.x=this.graph.snap(a.x),a.y=this.graph.snap(a.y)),a.x=Math.round(a.x/c-d.x-e.x),a.y=Math.round(a.y/c-d.y-e.y),a},mxElbowEdgeHandler.prototype.redrawInnerBends=function(a,b){var c=this.graph.getModel().getGeometry(this.state.cell),d=this.state.absolutePoints,e=null;d.length>1?(a=d[1],b=d[d.length-2]):null!=c.points&&c.points.length>0&&(e=d[0]),e=null==e?new mxPoint(a.x+(b.x-a.x)/2,a.y+(b.y-a.y)/2):new mxPoint(this.graph.getView().scale*(e.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(e.y+this.graph.getView().translate.y+this.state.origin.y));var f=this.bends[1].bounds,g=f.width,h=f.height,i=new mxRectangle(Math.round(e.x-g/2),Math.round(e.y-h/2),g,h);this.manageLabelHandle?this.checkLabelHandle(i):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(i,this.labelShape.bounds)&&(g=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,i=new mxRectangle(Math.floor(e.x-g/2),Math.floor(e.y-h/2),g,h)),this.bends[1].bounds=i,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var a=this.state.absolutePoints;if(null!=a&&(2==a.length||3==a.length&&(a[0].x==a[1].x&&a[1].x==a[2].x||a[0].y==a[1].y&&a[1].y==a[2].y))){var b=a[0].x+(a[a.length-1].x-a[0].x)/2,c=a[0].y+(a[a.length-1].y-a[0].y)/2;a=[a[0],new mxPoint(b,c),new mxPoint(b,c),a[a.length-1]]}return a},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(a){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var b=this.getCurrentPoints(),c=this.convertPoint(b[0].clone(),!1);a=this.convertPoint(a.clone(),!1);for(var d=[],e=1;e<b.length;e++){var f=this.convertPoint(b[e].clone(),!1);e==this.index&&(0==Math.round(c.x-f.x)&&(c.x=a.x,f.x=a.x),0==Math.round(c.y-f.y)&&(c.y=a.y,f.y=a.y)),e<b.length-1&&d.push(f),c=f}if(1==d.length){var g=this.state.getVisibleTerminalState(!0),h=this.state.getVisibleTerminalState(!1),i=this.state.view.getScale(),j=this.state.view.getTranslate(),k=d[0].x*i+j.x,l=d[0].y*i+j.y;(null!=g&&mxUtils.contains(g,k,l)||null!=h&&mxUtils.contains(h,k,l))&&(d=[a,a])}return d},mxEdgeSegmentHandler.prototype.updatePreviewState=function(a,b,c,d){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){b=this.convertPoint(b.clone(),!1);for(var e=a.absolutePoints,f=e[0],g=e[1],h=[],i=2;i<e.length;i++){var j=e[i];0==Math.round(f.x-g.x)&&0==Math.round(g.x-j.x)||0==Math.round(f.y-g.y)&&0==Math.round(g.y-j.y)||h.push(this.convertPoint(g.clone(),!1)),f=g,g=j}var k=this.state.getVisibleTerminalState(!0),l=this.state.getVisibleTerminalState(!1),m=this.state.absolutePoints;if(0!=h.length||0!=Math.round(e[0].x-e[e.length-1].x)&&0!=Math.round(e[0].y-e[e.length-1].y)){if(5==e.length&&2==h.length&&null!=k&&null!=l&&null!=m&&0==Math.round(m[0].x-m[m.length-1].x)){var n=this.graph.getView(),o=n.getScale(),p=n.getTranslate(),q=n.getRoutingCenterY(k)/o-p.y,r=this.graph.getConnectionConstraint(a,k,!0);if(null!=r){var s=this.graph.getConnectionPoint(k,r);null!=s&&(this.convertPoint(s,!1),q=s.y)}var t=n.getRoutingCenterY(l)/o-p.y,u=this.graph.getConnectionConstraint(a,l,!1);if(u){var s=this.graph.getConnectionPoint(l,u);null!=s&&(this.convertPoint(s,!1),t=s.y)}h=[new mxPoint(b.x,q),new mxPoint(b.x,t)]}}else h=[b,b];this.points=h,a.view.updateFixedTerminalPoints(a,k,l),a.view.updatePoints(a,this.points,k,l),a.view.updateFloatingTerminalPoints(a,k,l)}},mxEdgeSegmentHandler.prototype.connect=function(a,b,c,d,e){for(var f=this.abspoints,g=f[0],h=f[1],i=[],j=2;j<f.length;j++){var k=f[j];0==Math.round(g.x-h.x)&&0==Math.round(h.x-k.x)||0==Math.round(g.y-h.y)&&0==Math.round(h.y-k.y)||i.push(this.convertPoint(h.clone(),!1)),g=h,h=k}var l=this.graph.getModel();l.beginUpdate();try{var m=l.getGeometry(a);null!=m&&(m=m.clone(),m.points=i,l.setGeometry(a,m)),a=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{l.endUpdate()}return a},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(a){return null},mxEdgeSegmentHandler.prototype.start=function(a,b,c){mxEdgeHandler.prototype.start.apply(this,arguments),null==this.bends[c]||this.isSource||this.isTarget||mxUtils.setOpacity(this.bends[c].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var a=[],b=this.createHandleShape(0);this.initBend(b),b.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),a.push(b);var c=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var d=0;d<c.length-1;d++){b=this.createVirtualBend(),a.push(b);var e=0==Math.round(c[d].x-c[d+1].x);0==Math.round(c[d].y-c[d+1].y)&&d<c.length-2&&(e=0==Math.round(c[d].x-c[d+2].x)),b.setCursor(e?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}var b=this.createHandleShape(c.length);return this.initBend(b),b.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),a.push(b),a},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(a,b){if(this.graph.isCellBendable(this.state.cell)){var c=this.getCurrentPoints();if(null!=c&&c.length>1){var d=!1;if(4==c.length&&0==Math.round(c[1].x-c[2].x)&&0==Math.round(c[1].y-c[2].y))if(d=!0,0==Math.round(c[0].y-c[c.length-1].y)){var e=c[0].x+(c[c.length-1].x-c[0].x)/2;c[1]=new mxPoint(e,c[1].y),c[2]=new mxPoint(e,c[2].y)}else{var f=c[0].y+(c[c.length-1].y-c[0].y)/2;c[1]=new mxPoint(c[1].x,f),c[2]=new mxPoint(c[2].x,f)}for(var g=0;g<c.length-1;g++)if(null!=this.bends[g+1]){var a=c[g],b=c[g+1],h=new mxPoint(a.x+(b.x-a.x)/2,a.y+(b.y-a.y)/2),i=this.bends[g+1].bounds;this.bends[g+1].bounds=new mxRectangle(Math.floor(h.x-i.width/2),Math.floor(h.y-i.height/2),i.width,i.height),this.bends[g+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[g+1].bounds)}d&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(a){this.enabled=a},mxKeyHandler.prototype.bindKey=function(a,b){this.normalKeys[a]=b},mxKeyHandler.prototype.bindShiftKey=function(a,b){this.shiftKeys[a]=b},mxKeyHandler.prototype.bindControlKey=function(a,b){this.controlKeys[a]=b},mxKeyHandler.prototype.bindControlShiftKey=function(a,b){this.controlShiftKeys[a]=b},mxKeyHandler.prototype.isControlDown=function(a){return mxEvent.isControlDown(a)},mxKeyHandler.prototype.getFunction=function(a){return null==a||mxEvent.isAltDown(a)?null:this.isControlDown(a)?mxEvent.isShiftDown(a)?this.controlShiftKeys[a.keyCode]:this.controlKeys[a.keyCode]:mxEvent.isShiftDown(a)?this.shiftKeys[a.keyCode]:this.normalKeys[a.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(a){var b=mxEvent.getSource(a);return!!(b==this.target||b.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(a))||mxUtils.isAncestorNode(this.graph.container,b)},mxKeyHandler.prototype.keyDown=function(a){if(this.isEnabledForEvent(a))if(27==a.keyCode)this.escape(a);else if(!this.isEventIgnored(a)){var b=this.getFunction(a);null!=b&&(b(a),mxEvent.consume(a))}},mxKeyHandler.prototype.isEnabledForEvent=function(a){return this.graph.isEnabled()&&!mxEvent.isConsumed(a)&&this.isGraphEvent(a)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(a){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(a){this.graph.isEscapeEnabled()&&this.graph.escape(a)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(a){this.enabled=a},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(a){this.hideOnHover=a},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(a){this.hideTooltip()})))},mxTooltipHandler.prototype.mouseDown=function(a,b){this.reset(b,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(a,b){b.getX()==this.lastX&&b.getY()==this.lastY||(this.reset(b,!0),(this.isHideOnHover()||b.getState()!=this.state||b.getSource()!=this.node&&(!this.stateSource||null!=b.getState()&&this.stateSource==(b.isSource(b.getState().shape)||!b.isSource(b.getState().text))))&&this.hideTooltip()),this.lastX=b.getX(),this.lastY=b.getY()};mxTooltipHandler.prototype.mouseUp=function(a,b){this.reset(b,!0),this.hideTooltip()};mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(a,b){if((!this.ignoreTouchEvents||mxEvent.isMouseEvent(a.getEvent()))&&(this.resetTimer(),b&&this.isEnabled()&&null!=a.getState()&&(null==this.div||"hidden"==this.div.style.visibility))){var c=a.getState(),d=a.getSource(),e=a.getX(),f=a.getY(),g=a.isSource(c.shape)||a.isSource(c.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var a=this.graph.getTooltip(c,d,e,f);this.show(a,e,f),this.state=c,this.node=d,this.stateSource=g}}),this.delay)}},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden")},mxTooltipHandler.prototype.show=function(a,b,c){if(!this.destroyed&&null!=a&&a.length>0){null==this.div&&this.init();var d=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=b+d.x+"px",this.div.style.top=c+mxConstants.TOOLTIP_VERTICAL_OFFSET+d.y+"px",mxUtils.isNode(a)?(this.div.innerHTML="",this.div.appendChild(a)):this.div.innerHTML=a.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div)}},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(a,b){},mxCellTracker.prototype.mouseMove=function(a,b){this.isEnabled()&&this.process(b)},mxCellTracker.prototype.mouseUp=function(a,b){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=!0,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(a){this.highlightColor=a,null!=this.shape&&(this.shape.stroke=a)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),this.keepOnTop||this.shape.node.parentNode.firstChild==this.shape.node||this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var a=this.graph.cellRenderer.createShape(this.state);return a.svgStrokeTolerance=this.graph.tolerance,a.scale=this.state.view.scale,a.outline=!0,a.points=this.state.absolutePoints,a.apply(this.state),a.strokewidth=this.strokeWidth/this.state.view.scale/this.state.view.scale,a.arrowStrokewidth=this.strokeWidth,a.stroke=this.highlightColor,a.opacity=this.opacity,a.isDashed=this.dashed,a.isShadow=!1,a.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,a.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(a.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?a.pointerEvents=!1:a.svgPointerEvents="stroke",a},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.graph.model.isEdge(this.state.cell)?this.shape.points=this.state.absolutePoints:(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),(mxClient.IS_QUIRKS||8==document.documentMode)&&("transparent"==this.shape.stroke?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(a){this.state!=a&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=a,null!=this.state&&this.drawHighlight())},mxCellHighlight.prototype.isHighlightAt=function(a,b){var c=!1;if(null!=this.shape&&null!=document.elementFromPoint&&!mxClient.IS_QUIRKS)for(var d=document.elementFromPoint(a,b);null!=d;){if(d==this.shape.node){c=!0;break}d=d.parentNode}return c},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxDefaultKeyHandler.prototype.editor=null,mxDefaultKeyHandler.prototype.handler=null,mxDefaultKeyHandler.prototype.bindAction=function(a,b,c){var d=mxUtils.bind(this,function(){this.editor.execute(b)});c?this.handler.bindControlKey(a,d):this.handler.bindKey(a,d)},mxDefaultKeyHandler.prototype.destroy=function(){this.handler.destroy(),this.handler=null},mxDefaultPopupMenu.prototype.imageBasePath=null,mxDefaultPopupMenu.prototype.config=null,mxDefaultPopupMenu.prototype.createMenu=function(a,b,c,d){if(null!=this.config){var e=this.createConditions(a,c,d),f=this.config.firstChild;this.addItems(a,b,c,d,e,f,null)}},mxDefaultPopupMenu.prototype.addItems=function(a,b,c,d,e,f,g){for(var h=!1;null!=f;){if("add"==f.nodeName){var i=f.getAttribute("if");if(null==i||e[i]){var j=f.getAttribute("as");j=mxResources.get(j)||j;var k=mxUtils.eval(mxUtils.getTextContent(f)),l=f.getAttribute("action"),m=f.getAttribute("icon"),n=f.getAttribute("iconCls"),o=f.getAttribute("enabled-if"),p=null==o||e[o];h&&(b.addSeparator(g),h=!1),null!=m&&this.imageBasePath&&(m=this.imageBasePath+m);var q=this.addAction(b,a,j,m,k,l,c,g,n,p);this.addItems(a,b,c,d,e,f.firstChild,q)}}else"separator"==f.nodeName&&(h=!0);f=f.nextSibling}},mxDefaultPopupMenu.prototype.addAction=function(a,b,c,d,e,f,g,h,i,j){var k=function(a){"function"==typeof e&&e.call(b,b,g,a),null!=f&&b.execute(f,g,a)};return a.addItem(c,d,k,h,i,j)},mxDefaultPopupMenu.prototype.createConditions=function(a,b,c){var d=a.graph.getModel(),e=d.getChildCount(b),f=[];f.nocell=null==b,f.ncells=a.graph.getSelectionCount()>1,f.notRoot=d.getRoot()!=d.getParent(a.graph.getDefaultParent()),f.cell=null!=b;var g=null!=b&&1==a.graph.getSelectionCount();f.nonEmpty=g&&e>0,f.expandable=g&&a.graph.isCellFoldable(b,!1),f.collapsable=g&&a.graph.isCellFoldable(b,!0),f.validRoot=g&&a.graph.isValidRoot(b),f.emptyValidRoot=f.validRoot&&0==e,f.swimlane=g&&a.graph.isSwimlane(b);for(var h=this.config.getElementsByTagName("condition"),i=0;i<h.length;i++){var j=mxUtils.eval(mxUtils.getTextContent(h[i])),k=h[i].getAttribute("name");null!=k&&"function"==typeof j&&(f[k]=j(a,b,c))}return f},mxDefaultToolbar.prototype.editor=null,mxDefaultToolbar.prototype.toolbar=null,mxDefaultToolbar.prototype.resetHandler=null,mxDefaultToolbar.prototype.spacing=4,mxDefaultToolbar.prototype.connectOnDrop=!1,mxDefaultToolbar.prototype.init=function(a){null!=a&&(this.toolbar=new mxToolbar(a),this.toolbar.addListener(mxEvent.SELECT,mxUtils.bind(this,function(a,b){var c=b.getProperty("function");null!=c?this.editor.insertFunction=mxUtils.bind(this,function(){c.apply(this,arguments),this.toolbar.resetMode()}):this.editor.insertFunction=null})),this.resetHandler=mxUtils.bind(this,function(){null!=this.toolbar&&this.toolbar.resetMode(!0)}),this.editor.graph.addListener(mxEvent.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent.ESCAPE,this.resetHandler))},mxDefaultToolbar.prototype.addItem=function(a,b,c,d){var e=mxUtils.bind(this,function(){null!=c&&c.length>0&&this.editor.execute(c)});return this.toolbar.addItem(a,b,e,d)},mxDefaultToolbar.prototype.addSeparator=function(a){a=a||mxClient.imageBasePath+"/separator.gif",this.toolbar.addSeparator(a)},mxDefaultToolbar.prototype.addCombo=function(){return this.toolbar.addCombo()},mxDefaultToolbar.prototype.addActionCombo=function(a){return this.toolbar.addActionCombo(a)},mxDefaultToolbar.prototype.addActionOption=function(a,b,c){var d=mxUtils.bind(this,function(){this.editor.execute(c)});this.addOption(a,b,d)},mxDefaultToolbar.prototype.addOption=function(a,b,c){return this.toolbar.addOption(a,b,c)},mxDefaultToolbar.prototype.addMode=function(a,b,c,d,e){var f=mxUtils.bind(this,function(){this.editor.setMode(c),null!=e&&e(this.editor)});return this.toolbar.addSwitchMode(a,b,f,d)},mxDefaultToolbar.prototype.addPrototype=function(a,b,c,d,e,f){var g=mxUtils.bind(this,function(){return"function"==typeof c?c():null!=c?this.editor.graph.cloneCells([c])[0]:null}),h=mxUtils.bind(this,function(a,b){"function"==typeof e?e(this.editor,g(),a,b):this.drop(g(),a,b),this.toolbar.resetMode(),mxEvent.consume(a)}),i=this.toolbar.addMode(a,b,h,d,null,f),j=function(a,b,c){h(b,c)};return this.installDropHandler(i,j),i},mxDefaultToolbar.prototype.drop=function(a,b,c){var d=this.editor.graph,e=d.getModel();if(null!=c&&!e.isEdge(c)&&this.connectOnDrop&&d.isCellConnectable(c))this.connect(a,b,c);else{for(;null!=c&&!d.isValidDropTarget(c,[a],b);)c=e.getParent(c);this.insert(a,b,c)}},mxDefaultToolbar.prototype.insert=function(a,b,c){var d=this.editor.graph;if(d.canImportCell(a)){var e=mxEvent.getClientX(b),f=mxEvent.getClientY(b),g=mxUtils.convertPoint(d.container,e,f);return d.isSplitEnabled()&&d.isSplitTarget(c,[a],b)?d.splitEdge(c,[a],null,g.x,g.y):this.editor.addVertex(c,a,g.x,g.y)}return null},mxDefaultToolbar.prototype.connect=function(a,b,c){var d=this.editor.graph,e=d.getModel();if(null!=c&&d.isCellConnectable(a)&&d.isEdgeValid(null,c,a)){var f=null;e.beginUpdate();try{var g=e.getGeometry(c),h=e.getGeometry(a).clone();h.x=g.x+(g.width-h.width)/2,h.y=g.y+(g.height-h.height)/2;var i=this.spacing*d.gridSize,j=20*e.getDirectedEdgeCount(c,!0);this.editor.horizontalFlow?h.x+=(h.width+g.width)/2+i+j:h.y+=(h.height+g.height)/2+i+j,a.setGeometry(h);var k=e.getParent(c);if(d.addCell(a,k),d.constrainChild(a),f=this.editor.createEdge(c,a),null==e.getGeometry(f)){var l=new mxGeometry;l.relative=!0,e.setGeometry(f,l)}d.addEdge(f,k,c,a)}finally{e.endUpdate()}d.setSelectionCells([a,f]),d.scrollCellToVisible(a)}},mxDefaultToolbar.prototype.installDropHandler=function(a,b){var c=document.createElement("img");c.setAttribute("src",a.getAttribute("src"));var d=mxUtils.bind(this,function(e){c.style.width=2*a.offsetWidth+"px",c.style.height=2*a.offsetHeight+"px",mxUtils.makeDraggable(a,this.editor.graph,b,c),mxEvent.removeListener(c,"load",d)});mxClient.IS_IE?d():mxEvent.addListener(c,"load",d)},mxDefaultToolbar.prototype.destroy=function(){null!=this.resetHandler&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null)},mxLoadResources&&mxResources.add(mxClient.basePath+"/resources/editor"),mxEditor.prototype=new mxEventSource,mxEditor.prototype.constructor=mxEditor,mxEditor.prototype.askZoomResource="none"!=mxClient.language?"askZoom":"",mxEditor.prototype.lastSavedResource="none"!=mxClient.language?"lastSaved":"",mxEditor.prototype.currentFileResource="none"!=mxClient.language?"currentFile":"",mxEditor.prototype.propertiesResource="none"!=mxClient.language?"properties":"",mxEditor.prototype.tasksResource="none"!=mxClient.language?"tasks":"",mxEditor.prototype.helpResource="none"!=mxClient.language?"help":"",mxEditor.prototype.outlineResource="none"!=mxClient.language?"outline":"",mxEditor.prototype.outline=null,mxEditor.prototype.graph=null,mxEditor.prototype.graphRenderHint=null,mxEditor.prototype.toolbar=null,mxEditor.prototype.status=null,mxEditor.prototype.popupHandler=null,mxEditor.prototype.undoManager=null,mxEditor.prototype.keyHandler=null,mxEditor.prototype.actions=null,mxEditor.prototype.dblClickAction="edit",mxEditor.prototype.swimlaneRequired=!1,mxEditor.prototype.disableContextMenu=!0,mxEditor.prototype.insertFunction=null,mxEditor.prototype.forcedInserting=!1,mxEditor.prototype.templates=null,mxEditor.prototype.defaultEdge=null,mxEditor.prototype.defaultEdgeStyle=null,mxEditor.prototype.defaultGroup=null,mxEditor.prototype.groupBorderSize=null,mxEditor.prototype.filename=null,mxEditor.prototype.linefeed="&#xa;",mxEditor.prototype.postParameterName="xml",mxEditor.prototype.escapePostData=!0,mxEditor.prototype.urlPost=null,mxEditor.prototype.urlImage=null,mxEditor.prototype.horizontalFlow=!1,mxEditor.prototype.layoutDiagram=!1,mxEditor.prototype.swimlaneSpacing=0,mxEditor.prototype.maintainSwimlanes=!1,mxEditor.prototype.layoutSwimlanes=!1,mxEditor.prototype.cycleAttributeValues=null,mxEditor.prototype.cycleAttributeIndex=0,mxEditor.prototype.cycleAttributeName="fillColor",mxEditor.prototype.tasks=null,mxEditor.prototype.tasksWindowImage=null,mxEditor.prototype.tasksTop=20,mxEditor.prototype.help=null,mxEditor.prototype.helpWindowImage=null,mxEditor.prototype.urlHelp=null,mxEditor.prototype.helpWidth=300,mxEditor.prototype.helpHeight=260,mxEditor.prototype.propertiesWidth=240,mxEditor.prototype.propertiesHeight=null,mxEditor.prototype.movePropertiesDialog=!1,mxEditor.prototype.validating=!1,mxEditor.prototype.modified=!1,mxEditor.prototype.isModified=function(){return this.modified},mxEditor.prototype.setModified=function(a){this.modified=a},mxEditor.prototype.addActions=function(){this.addAction("save",function(a){a.save()}),this.addAction("print",function(a){var b=new mxPrintPreview(a.graph,1);b.open()}),this.addAction("show",function(a){mxUtils.show(a.graph,null,10,10)}),this.addAction("exportImage",function(a){var b=a.getUrlImage();if(null==b||mxClient.IS_LOCAL)a.execute("show");else{var c=mxUtils.getViewXml(a.graph,1),d=mxUtils.getXml(c,"\n");mxUtils.submit(b,a.postParameterName+"="+encodeURIComponent(d),document,"_blank")}}),this.addAction("refresh",function(a){a.graph.refresh()}),this.addAction("cut",function(a){a.graph.isEnabled()&&mxClipboard.cut(a.graph)}),this.addAction("copy",function(a){a.graph.isEnabled()&&mxClipboard.copy(a.graph)}),this.addAction("paste",function(a){a.graph.isEnabled()&&mxClipboard.paste(a.graph)}),this.addAction("delete",function(a){a.graph.isEnabled()&&a.graph.removeCells()}),this.addAction("group",function(a){a.graph.isEnabled()&&a.graph.setSelectionCell(a.groupCells())}),this.addAction("ungroup",function(a){a.graph.isEnabled()&&a.graph.setSelectionCells(a.graph.ungroupCells())}),this.addAction("removeFromParent",function(a){a.graph.isEnabled()&&a.graph.removeCellsFromParent()}),this.addAction("undo",function(a){a.graph.isEnabled()&&a.undo()}),this.addAction("redo",function(a){a.graph.isEnabled()&&a.redo()}),this.addAction("zoomIn",function(a){a.graph.zoomIn()}),this.addAction("zoomOut",function(a){a.graph.zoomOut()}),this.addAction("actualSize",function(a){a.graph.zoomActual()}),this.addAction("fit",function(a){a.graph.fit()}),this.addAction("showProperties",function(a,b){a.showProperties(b)}),this.addAction("selectAll",function(a){a.graph.isEnabled()&&a.graph.selectAll()}),this.addAction("selectNone",function(a){a.graph.isEnabled()&&a.graph.clearSelection()}),this.addAction("selectVertices",function(a){a.graph.isEnabled()&&a.graph.selectVertices()}),this.addAction("selectEdges",function(a){a.graph.isEnabled()&&a.graph.selectEdges()}),this.addAction("edit",function(a,b){a.graph.isEnabled()&&a.graph.isCellEditable(b)&&a.graph.startEditingAtCell(b)}),this.addAction("toBack",function(a,b){a.graph.isEnabled()&&a.graph.orderCells(!0)}),this.addAction("toFront",function(a,b){a.graph.isEnabled()&&a.graph.orderCells(!1)}),this.addAction("enterGroup",function(a,b){a.graph.enterGroup(b)}),this.addAction("exitGroup",function(a){a.graph.exitGroup()}),this.addAction("home",function(a){a.graph.home()}),this.addAction("selectPrevious",function(a){a.graph.isEnabled()&&a.graph.selectPreviousCell()}),this.addAction("selectNext",function(a){a.graph.isEnabled()&&a.graph.selectNextCell()}),this.addAction("selectParent",function(a){a.graph.isEnabled()&&a.graph.selectParentCell()}),this.addAction("selectChild",function(a){a.graph.isEnabled()&&a.graph.selectChildCell()}),this.addAction("collapse",function(a){a.graph.isEnabled()&&a.graph.foldCells(!0)}),this.addAction("collapseAll",function(a){if(a.graph.isEnabled()){var b=a.graph.getChildVertices();a.graph.foldCells(!0,!1,b)}}),this.addAction("expand",function(a){a.graph.isEnabled()&&a.graph.foldCells(!1)}),this.addAction("expandAll",function(a){if(a.graph.isEnabled()){var b=a.graph.getChildVertices();a.graph.foldCells(!1,!1,b)}}),this.addAction("bold",function(a){a.graph.isEnabled()&&a.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_BOLD)}),this.addAction("italic",function(a){a.graph.isEnabled()&&a.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_ITALIC)}),this.addAction("underline",function(a){a.graph.isEnabled()&&a.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(a){a.graph.isEnabled()&&a.graph.alignCells(mxConstants.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(a){a.graph.isEnabled()&&a.graph.alignCells(mxConstants.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(a){a.graph.isEnabled()&&a.graph.alignCells(mxConstants.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(a){a.graph.isEnabled()&&a.graph.alignCells(mxConstants.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(a){a.graph.isEnabled()&&a.graph.alignCells(mxConstants.ALIGN_MIDDLE);
}),this.addAction("alignCellsBottom",function(a){a.graph.isEnabled()&&a.graph.alignCells(mxConstants.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(a){a.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(a){a.graph.isEnabled()&&a.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER)}),this.addAction("alignFontRight",function(a){a.graph.isEnabled()&&a.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(a){a.graph.isEnabled()&&a.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(a){a.graph.isEnabled()&&a.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(a){a.graph.isEnabled()&&a.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_BOTTOM)}),this.addAction("zoom",function(a){var b=100*a.graph.getView().scale,c=parseFloat(mxUtils.prompt(mxResources.get(a.askZoomResource)||a.askZoomResource,b))/100;isNaN(c)||a.graph.getView().setScale(c)}),this.addAction("toggleTasks",function(a){null!=a.tasks?a.tasks.setVisible(!a.tasks.isVisible()):a.showTasks()}),this.addAction("toggleHelp",function(a){null!=a.help?a.help.setVisible(!a.help.isVisible()):a.showHelp()}),this.addAction("toggleOutline",function(a){null==a.outline?a.showOutline():a.outline.setVisible(!a.outline.isVisible())}),this.addAction("toggleConsole",function(a){mxLog.setVisible(!mxLog.isVisible())})},mxEditor.prototype.configure=function(a){if(null!=a){var b=new mxCodec(a.ownerDocument);b.decode(a,this),this.resetHistory()}},mxEditor.prototype.resetFirstTime=function(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"},mxEditor.prototype.resetHistory=function(){this.lastSnapshot=(new Date).getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)},mxEditor.prototype.addAction=function(a,b){this.actions[a]=b},mxEditor.prototype.execute=function(a,b,c){var d=this.actions[a];if(null!=d)try{var e=arguments;e[0]=this,d.apply(this,e)}catch(b){throw mxUtils.error("Cannot execute "+a+": "+b.message,280,!0),b}else mxUtils.error("Cannot find action "+a,280,!0)},mxEditor.prototype.addTemplate=function(a,b){this.templates[a]=b},mxEditor.prototype.getTemplate=function(a){return this.templates[a]},mxEditor.prototype.createGraph=function(){var a=new mxGraph(null,null,this.graphRenderHint);return a.setTooltips(!0),a.setPanning(!0),this.installDblClickHandler(a),this.installUndoHandler(a),this.installDrillHandler(a),this.installChangeHandler(a),this.installInsertHandler(a),a.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(a,b,c){return this.createPopupMenu(a,b,c)}),a.connectionHandler.factoryMethod=mxUtils.bind(this,function(a,b){return this.createEdge(a,b)}),this.createSwimlaneManager(a),this.createLayoutManager(a),a},mxEditor.prototype.createSwimlaneManager=function(a){var b=new mxSwimlaneManager(a,!1);return b.isHorizontal=mxUtils.bind(this,function(){return this.horizontalFlow}),b.isEnabled=mxUtils.bind(this,function(){return this.maintainSwimlanes}),b},mxEditor.prototype.createLayoutManager=function(a){var b=new mxLayoutManager(a),c=this;return b.getLayout=function(b){var d=null,e=c.graph.getModel();return null!=e.getParent(b)&&(c.layoutSwimlanes&&a.isSwimlane(b)?(null==c.swimlaneLayout&&(c.swimlaneLayout=c.createSwimlaneLayout()),d=c.swimlaneLayout):c.layoutDiagram&&(a.isValidRoot(b)||null==e.getParent(e.getParent(b)))&&(null==c.diagramLayout&&(c.diagramLayout=c.createDiagramLayout()),d=c.diagramLayout)),d},b},mxEditor.prototype.setGraphContainer=function(a){null==this.graph.container&&(this.graph.init(a),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent.disableContextMenu(a),mxClient.IS_QUIRKS&&new mxDivResizer(a))},mxEditor.prototype.installDblClickHandler=function(a){a.addListener(mxEvent.DOUBLE_CLICK,mxUtils.bind(this,function(b,c){var d=c.getProperty("cell");null!=d&&a.isEnabled()&&null!=this.dblClickAction&&(this.execute(this.dblClickAction,d),c.consume())}))},mxEditor.prototype.installUndoHandler=function(a){var b=mxUtils.bind(this,function(a,b){var c=b.getProperty("edit");this.undoManager.undoableEditHappened(c)});a.getModel().addListener(mxEvent.UNDO,b),a.getView().addListener(mxEvent.UNDO,b);var c=function(b,c){var d=c.getProperty("edit").changes;a.setSelectionCells(a.getSelectionCellsForChanges(d))};this.undoManager.addListener(mxEvent.UNDO,c),this.undoManager.addListener(mxEvent.REDO,c)},mxEditor.prototype.installDrillHandler=function(a){var b=mxUtils.bind(this,function(a){this.fireEvent(new mxEventObject(mxEvent.ROOT))});a.getView().addListener(mxEvent.DOWN,b),a.getView().addListener(mxEvent.UP,b)},mxEditor.prototype.installChangeHandler=function(a){var b=mxUtils.bind(this,function(b,c){this.setModified(!0),1==this.validating&&a.validateGraph();for(var d=c.getProperty("edit").changes,e=0;e<d.length;e++){var f=d[e];if(f instanceof mxRootChange||f instanceof mxValueChange&&f.cell==this.graph.model.root||f instanceof mxCellAttributeChange&&f.cell==this.graph.model.root){this.fireEvent(new mxEventObject(mxEvent.ROOT));break}}});a.getModel().addListener(mxEvent.CHANGE,b)},mxEditor.prototype.installInsertHandler=function(a){var b=this,c={mouseDown:function(a,c){null==b.insertFunction||c.isPopupTrigger()||!b.forcedInserting&&null!=c.getState()||(b.graph.clearSelection(),b.insertFunction(c.getEvent(),c.getCell()),this.isActive=!0,c.consume())},mouseMove:function(a,b){this.isActive&&b.consume()},mouseUp:function(a,b){this.isActive&&(this.isActive=!1,b.consume())}};a.addMouseListener(c)},mxEditor.prototype.createDiagramLayout=function(){var a=this.graph.gridSize,b=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*a,2*a);return b.isVertexIgnored=function(a){return!b.graph.isSwimlane(a)},b},mxEditor.prototype.createSwimlaneLayout=function(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)},mxEditor.prototype.createToolbar=function(){return new mxDefaultToolbar(null,this)},mxEditor.prototype.setToolbarContainer=function(a){this.toolbar.init(a),mxClient.IS_QUIRKS&&new mxDivResizer(a)},mxEditor.prototype.setStatusContainer=function(a){null==this.status&&(this.status=a,this.addListener(mxEvent.SAVE,mxUtils.bind(this,function(){var a=(new Date).toLocaleString();this.setStatus((mxResources.get(this.lastSavedResource)||this.lastSavedResource)+": "+a)})),this.addListener(mxEvent.OPEN,mxUtils.bind(this,function(){this.setStatus((mxResources.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)})),mxClient.IS_QUIRKS&&new mxDivResizer(a))},mxEditor.prototype.setStatus=function(a){null!=this.status&&null!=a&&(this.status.innerHTML=a)},mxEditor.prototype.setTitleContainer=function(a){this.addListener(mxEvent.ROOT,mxUtils.bind(this,function(b){a.innerHTML=this.getTitle()})),mxClient.IS_QUIRKS&&new mxDivResizer(a)},mxEditor.prototype.treeLayout=function(a,b){if(null!=a){var c=new mxCompactTreeLayout(this.graph,b);c.execute(a)}},mxEditor.prototype.getTitle=function(){for(var a="",b=this.graph,c=b.getCurrentRoot();null!=c&&null!=b.getModel().getParent(b.getModel().getParent(c));)b.isValidRoot(c)&&(a=" > "+b.convertValueToString(c)+a),c=b.getModel().getParent(c);var d=this.getRootTitle();return d+a},mxEditor.prototype.getRootTitle=function(){var a=this.graph.getModel().getRoot();return this.graph.convertValueToString(a)},mxEditor.prototype.undo=function(){this.undoManager.undo()},mxEditor.prototype.redo=function(){this.undoManager.redo()},mxEditor.prototype.groupCells=function(){var a=null!=this.groupBorderSize?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),a)},mxEditor.prototype.createGroup=function(){var a=this.graph.getModel();return a.cloneCell(this.defaultGroup)},mxEditor.prototype.open=function(a){if(null!=a){var b=mxUtils.load(a).getXml();this.readGraphModel(b.documentElement),this.filename=a,this.fireEvent(new mxEventObject(mxEvent.OPEN,"filename",a))}},mxEditor.prototype.readGraphModel=function(a){var b=new mxCodec(a.ownerDocument);b.decode(a,this.graph.getModel()),this.resetHistory()},mxEditor.prototype.save=function(a,b){if(a=a||this.getUrlPost(),null!=a&&a.length>0){var c=this.writeGraphModel(b);this.postDiagram(a,c),this.setModified(!1)}this.fireEvent(new mxEventObject(mxEvent.SAVE,"url",a))},mxEditor.prototype.postDiagram=function(a,b){this.escapePostData&&(b=encodeURIComponent(b)),mxUtils.post(a,this.postParameterName+"="+b,mxUtils.bind(this,function(c){this.fireEvent(new mxEventObject(mxEvent.POST,"request",c,"url",a,"data",b))}))},mxEditor.prototype.writeGraphModel=function(a){a=null!=a?a:this.linefeed;var b=new mxCodec,c=b.encode(this.graph.getModel());return mxUtils.getXml(c,a)},mxEditor.prototype.getUrlPost=function(){return this.urlPost},mxEditor.prototype.getUrlImage=function(){return this.urlImage},mxEditor.prototype.swapStyles=function(a,b){var c=this.graph.getStylesheet().styles[b];this.graph.getView().getStylesheet().putCellStyle(b,this.graph.getStylesheet().styles[a]),this.graph.getStylesheet().putCellStyle(a,c),this.graph.refresh()},mxEditor.prototype.showProperties=function(a){if(a=a||this.graph.getSelectionCell(),null==a&&(a=this.graph.getCurrentRoot(),null==a&&(a=this.graph.getModel().getRoot())),null!=a){this.graph.stopEditing(!0);var b=mxUtils.getOffset(this.graph.container),c=b.x+10,d=b.y;if(null==this.properties||this.movePropertiesDialog){var e=this.graph.getCellBounds(a);null!=e&&(c+=e.x+Math.min(200,e.width),d+=e.y)}else c=this.properties.getX(),d=this.properties.getY();this.hideProperties();var f=this.createProperties(a);null!=f&&(this.properties=new mxWindow(mxResources.get(this.propertiesResource)||this.propertiesResource,f,c,d,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}},mxEditor.prototype.isPropertiesVisible=function(){return null!=this.properties},mxEditor.prototype.createProperties=function(a){var b=this.graph.getModel(),c=b.getValue(a);if(mxUtils.isNode(c)){var d=new mxForm("properties"),e=d.addText("ID",a.getId());e.setAttribute("readonly","true");var f=null,g=null,h=null,i=null,j=null;b.isVertex(a)&&(f=b.getGeometry(a),null!=f&&(g=d.addText("top",f.y),h=d.addText("left",f.x),i=d.addText("width",f.width),j=d.addText("height",f.height)));for(var k=b.getStyle(a),l=d.addText("Style",k||""),m=c.attributes,n=[],o=0;o<m.length;o++){var p=m[o].value;n[o]=d.addTextarea(m[o].nodeName,p,"label"==m[o].nodeName?4:2)}var q=mxUtils.bind(this,function(){this.hideProperties(),b.beginUpdate();try{null!=f&&(f=f.clone(),f.x=parseFloat(h.value),f.y=parseFloat(g.value),f.width=parseFloat(i.value),f.height=parseFloat(j.value),b.setGeometry(a,f)),l.value.length>0?b.setStyle(a,l.value):b.setStyle(a,null);for(var c=0;c<m.length;c++){var d=new mxCellAttributeChange(a,m[c].nodeName,n[c].value);b.execute(d)}this.graph.isAutoSizeCell(a)&&this.graph.updateCellSize(a)}finally{b.endUpdate()}}),r=mxUtils.bind(this,function(){this.hideProperties()});return d.addButtons(q,r),d.table}return null},mxEditor.prototype.hideProperties=function(){null!=this.properties&&(this.properties.destroy(),this.properties=null)},mxEditor.prototype.showTasks=function(){if(null==this.tasks){var a=document.createElement("div");a.style.padding="4px",a.style.paddingLeft="20px";var b=document.body.clientWidth,c=new mxWindow(mxResources.get(this.tasksResource)||this.tasksResource,a,b-220,this.tasksTop,200);c.setClosable(!0),c.destroyOnClose=!1;var d=mxUtils.bind(this,function(b){mxEvent.release(a),a.innerHTML="",this.createTasks(a)});this.graph.getModel().addListener(mxEvent.CHANGE,d),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,d),this.graph.addListener(mxEvent.ROOT,d),null!=this.tasksWindowImage&&c.setImage(this.tasksWindowImage),this.tasks=c,this.createTasks(a)}this.tasks.setVisible(!0)},mxEditor.prototype.refreshTasks=function(a){if(null!=this.tasks){var a=this.tasks.content;mxEvent.release(a),a.innerHTML="",this.createTasks(a)}},mxEditor.prototype.createTasks=function(a){},mxEditor.prototype.showHelp=function(a){if(null==this.help){var b=document.createElement("iframe");b.setAttribute("src",mxResources.get("urlHelp")||this.urlHelp),b.setAttribute("height","100%"),b.setAttribute("width","100%"),b.setAttribute("frameBorder","0"),b.style.backgroundColor="white";var c=document.body.clientWidth,d=document.body.clientHeight||document.documentElement.clientHeight,e=new mxWindow(mxResources.get(this.helpResource)||this.helpResource,b,(c-this.helpWidth)/2,(d-this.helpHeight)/3,this.helpWidth,this.helpHeight);if(e.setMaximizable(!0),e.setClosable(!0),e.destroyOnClose=!1,e.setResizable(!0),null!=this.helpWindowImage&&e.setImage(this.helpWindowImage),mxClient.IS_NS){var f=function(a){var c=e.div.offsetHeight;b.setAttribute("height",c-26+"px")};e.addListener(mxEvent.RESIZE_END,f),e.addListener(mxEvent.MAXIMIZE,f),e.addListener(mxEvent.NORMALIZE,f),e.addListener(mxEvent.SHOW,f)}this.help=e}this.help.setVisible(!0)},mxEditor.prototype.showOutline=function(){var a=null==this.outline;if(a){var b=document.createElement("div");b.style.overflow="hidden",b.style.position="relative",b.style.width="100%",b.style.height="100%",b.style.background="white",b.style.cursor="move",8==document.documentMode&&(b.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var c=new mxWindow(mxResources.get(this.outlineResource)||this.outlineResource,b,600,480,200,200,!1),d=new mxOutline(this.graph,b);c.setClosable(!0),c.setResizable(!0),c.destroyOnClose=!1,c.addListener(mxEvent.RESIZE_END,function(){d.update()}),this.outline=c,this.outline.outline=d}this.outline.setVisible(!0),this.outline.outline.update(!0)},mxEditor.prototype.setMode=function(a){"select"==a?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):"connect"==a?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):"pan"==a&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))},mxEditor.prototype.createPopupMenu=function(a,b,c){this.popupHandler.createMenu(this,a,b,c)},mxEditor.prototype.createEdge=function(a,b){var c=null;if(null!=this.defaultEdge){var d=this.graph.getModel();c=d.cloneCell(this.defaultEdge)}else{c=new mxCell(""),c.setEdge(!0);var e=new mxGeometry;e.relative=!0,c.setGeometry(e)}var f=this.getEdgeStyle();return null!=f&&c.setStyle(f),c},mxEditor.prototype.getEdgeStyle=function(){return this.defaultEdgeStyle},mxEditor.prototype.consumeCycleAttribute=function(a){return null!=this.cycleAttributeValues&&this.cycleAttributeValues.length>0&&this.graph.isSwimlane(a)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null},mxEditor.prototype.cycleAttribute=function(a){if(null!=this.cycleAttributeName){var b=this.consumeCycleAttribute(a);null!=b&&a.setStyle(a.getStyle()+";"+this.cycleAttributeName+"="+b)}},mxEditor.prototype.addVertex=function(a,b,c,d){for(var e=this.graph.getModel();null!=a&&!this.graph.isValidDropTarget(a);)a=e.getParent(a);a=null!=a?a:this.graph.getSwimlaneAt(c,d);var f=this.graph.getView().scale,g=e.getGeometry(b),h=e.getGeometry(a);if(this.graph.isSwimlane(b)&&!this.graph.swimlaneNesting)a=null;else{if(null==a&&this.swimlaneRequired)return null;if(null!=a&&null!=h){var i=this.graph.getView().getState(a);if(null!=i){if(c-=i.origin.x*f,d-=i.origin.y*f,this.graph.isConstrainedMoving){var j=g.width,k=g.height,l=i.x+i.width;c+j>l&&(c-=c+j-l),l=i.y+i.height,d+k>l&&(d-=d+k-l)}}else null!=h&&(c-=h.x*f,d-=h.y*f)}}g=g.clone(),g.x=this.graph.snap(c/f-this.graph.getView().translate.x-this.graph.gridSize/2),g.y=this.graph.snap(d/f-this.graph.getView().translate.y-this.graph.gridSize/2),b.setGeometry(g),null==a&&(a=this.graph.getDefaultParent()),this.cycleAttribute(b),this.fireEvent(new mxEventObject(mxEvent.BEFORE_ADD_VERTEX,"vertex",b,"parent",a)),e.beginUpdate();try{b=this.graph.addCell(b,a),null!=b&&(this.graph.constrainChild(b),this.fireEvent(new mxEventObject(mxEvent.ADD_VERTEX,"vertex",b)))}finally{e.endUpdate()}return null!=b&&(this.graph.setSelectionCell(b),this.graph.scrollCellToVisible(b),this.fireEvent(new mxEventObject(mxEvent.AFTER_ADD_VERTEX,"vertex",b))),b},mxEditor.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tasks&&this.tasks.destroy(),null!=this.outline&&this.outline.destroy(),null!=this.properties&&this.properties.destroy(),null!=this.keyHandler&&this.keyHandler.destroy(),null!=this.rubberband&&this.rubberband.destroy(),null!=this.toolbar&&this.toolbar.destroy(),null!=this.graph&&this.graph.destroy(),this.status=null,this.templates=null)};var mxCodecRegistry={codecs:[],aliases:[],register:function(a){if(null!=a){var b=a.getName();mxCodecRegistry.codecs[b]=a;var c=mxUtils.getFunctionName(a.template.constructor);c!=b&&mxCodecRegistry.addAlias(c,b)}return a},addAlias:function(a,b){mxCodecRegistry.aliases[a]=b},getCodec:function(a){var b=null;if(null!=a){var c=mxUtils.getFunctionName(a),d=mxCodecRegistry.aliases[c];if(null!=d&&(c=d),b=mxCodecRegistry.codecs[c],null==b)try{b=new mxObjectCodec(new a),mxCodecRegistry.register(b)}catch(a){}}return b}};mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(a,b){return this.objects[a]=b,b},mxCodec.prototype.getObject=function(a){var b=null;if(null!=a&&(b=this.objects[a],null==b&&(b=this.lookup(a),null==b))){var c=this.getElementById(a);null!=c&&(b=this.decode(c))}return b},mxCodec.prototype.lookup=function(a){return null},mxCodec.prototype.getElementById=function(a){if(null==this.elements){if(null==this.document.documentElement)throw new Error("mxCodec constructor needs document parameter");this.elements=new Object,this.addElement(this.document.documentElement)}return this.elements[a]},mxCodec.prototype.addElement=function(a){if(a.nodeType==mxConstants.NODETYPE_ELEMENT){var b=a.getAttribute("id");null!=b&&null==this.elements[b]&&(this.elements[b]=a)}for(a=a.firstChild;null!=a;)this.addElement(a),a=a.nextSibling},mxCodec.prototype.getId=function(a){var b=null;return null!=a&&(b=this.reference(a),null==b&&a instanceof mxCell&&(b=a.getId(),null==b&&(b=mxCellPath.create(a),0==b.length&&(b="root")))),b},mxCodec.prototype.reference=function(a){return null},mxCodec.prototype.encode=function(a){var b=null;if(null!=a&&null!=a.constructor){var c=mxCodecRegistry.getCodec(a.constructor);null!=c?b=c.encode(this,a):mxUtils.isNode(a)?b=mxUtils.importNode(this.document,a,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(a.constructor))}return b},mxCodec.prototype.decode=function(a,b){var c=null;if(null!=a&&a.nodeType==mxConstants.NODETYPE_ELEMENT){var d=null;try{d=window[a.nodeName]}catch(a){}var e=mxCodecRegistry.getCodec(d);null!=e?c=e.decode(this,a,b):(c=a.cloneNode(!0),c.removeAttribute("as"))}return c},mxCodec.prototype.encodeCell=function(a,b,c){if(b.appendChild(this.encode(a)),null==c||c)for(var d=a.getChildCount(),e=0;e<d;e++)this.encodeCell(a.getChildAt(e),b)},mxCodec.prototype.isCellCodec=function(a){return null!=a&&"function"==typeof a.isCellCodec&&a.isCellCodec()},mxCodec.prototype.decodeCell=function(a,b){b=null==b||b;var c=null;if(null!=a&&a.nodeType==mxConstants.NODETYPE_ELEMENT){var d=mxCodecRegistry.getCodec(a.nodeName);if(!this.isCellCodec(d))for(var e=a.firstChild;null!=e&&!this.isCellCodec(d);)d=mxCodecRegistry.getCodec(e.nodeName),e=e.nextSibling;this.isCellCodec(d)||(d=mxCodecRegistry.getCodec(mxCell)),c=d.decode(this,a),b&&this.insertIntoGraph(c)}return c},mxCodec.prototype.insertIntoGraph=function(a){var b=a.parent,c=a.getTerminal(!0),d=a.getTerminal(!1);a.setTerminal(null,!1),a.setTerminal(null,!0),a.parent=null,null!=b&&b.insert(a),null!=c&&c.insertEdge(a,!0),null!=d&&d.insertEdge(a,!1)},mxCodec.prototype.setAttribute=function(a,b,c){null!=b&&null!=c&&a.setAttribute(b,c)},mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(a){if(null!=a){var b=this.reverse[a];null!=b&&(a=b)}return a},mxObjectCodec.prototype.getAttributeName=function(a){if(null!=a){var b=this.mapping[a];null!=b&&(a=b)}return a},mxObjectCodec.prototype.isExcluded=function(a,b,c,d){return b==mxObjectIdentity.FIELD_NAME||mxUtils.indexOf(this.exclude,b)>=0},mxObjectCodec.prototype.isReference=function(a,b,c,d){return mxUtils.indexOf(this.idrefs,b)>=0},mxObjectCodec.prototype.encode=function(a,b){var c=a.document.createElement(this.getName());return b=this.beforeEncode(a,b,c),this.encodeObject(a,b,c),this.afterEncode(a,b,c)},mxObjectCodec.prototype.encodeObject=function(a,b,c){a.setAttribute(c,"id",a.getId(b));for(var d in b){var e=d,f=b[e];null==f||this.isExcluded(b,e,f,!0)||(mxUtils.isInteger(e)&&(e=null),this.encodeValue(a,b,e,f,c))}},mxObjectCodec.prototype.encodeValue=function(a,b,c,d,e){if(null!=d){if(this.isReference(b,c,d,!0)){var f=a.getId(d);if(null==f)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+c+"="+d);d=f}var g=this.template[c];(null==c||a.encodeDefaults||g!=d)&&(c=this.getAttributeName(c),this.writeAttribute(a,b,c,d,e))}},mxObjectCodec.prototype.writeAttribute=function(a,b,c,d,e){"object"!=typeof d?this.writePrimitiveAttribute(a,b,c,d,e):this.writeComplexAttribute(a,b,c,d,e)},mxObjectCodec.prototype.writePrimitiveAttribute=function(a,b,c,d,e){if(d=this.convertAttributeToXml(a,b,c,d,e),null==c){var f=a.document.createElement("add");"function"==typeof d?f.appendChild(a.document.createTextNode(d)):a.setAttribute(f,"value",d),e.appendChild(f)}else"function"!=typeof d&&a.setAttribute(e,c,d)},mxObjectCodec.prototype.writeComplexAttribute=function(a,b,c,d,e){var f=a.encode(d);null!=f?(null!=c&&f.setAttribute("as",c),e.appendChild(f)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+c+": "+d)},mxObjectCodec.prototype.convertAttributeToXml=function(a,b,c,d){return this.isBooleanAttribute(a,b,c,d)&&(d=1==d?"1":"0"),d},mxObjectCodec.prototype.isBooleanAttribute=function(a,b,c,d){return"undefined"==typeof d.length&&(1==d||0==d)},mxObjectCodec.prototype.convertAttributeFromXml=function(a,b,c){var d=b.value;return this.isNumericAttribute(a,b,c)&&(d=parseFloat(d)),d},mxObjectCodec.prototype.isNumericAttribute=function(a,b,c){return mxUtils.isNumeric(b.value)},mxObjectCodec.prototype.beforeEncode=function(a,b,c){return b},mxObjectCodec.prototype.afterEncode=function(a,b,c){return c},mxObjectCodec.prototype.decode=function(a,b,c){var d=b.getAttribute("id"),e=a.objects[d];return null==e&&(e=c||this.cloneTemplate(),null!=d&&a.putObject(d,e)),b=this.beforeDecode(a,b,e),this.decodeNode(a,b,e),this.afterDecode(a,b,e)},mxObjectCodec.prototype.decodeNode=function(a,b,c){null!=b&&(this.decodeAttributes(a,b,c),this.decodeChildren(a,b,c))},mxObjectCodec.prototype.decodeAttributes=function(a,b,c){var d=b.attributes;if(null!=d)for(var e=0;e<d.length;e++)this.decodeAttribute(a,d[e],c)},mxObjectCodec.prototype.isIgnoredAttribute=function(a,b,c){return"as"==b.nodeName||"id"==b.nodeName},mxObjectCodec.prototype.decodeAttribute=function(a,b,c){if(!this.isIgnoredAttribute(a,b,c)){var d=b.nodeName,e=this.convertAttributeFromXml(a,b,c),f=this.getFieldName(d);if(this.isReference(c,f,e,!1)){var g=a.getObject(e);if(null==g)return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+d+"="+e);e=g}this.isExcluded(c,d,e,!1)||(c[d]=e)}},mxObjectCodec.prototype.decodeChildren=function(a,b,c){for(var d=b.firstChild;null!=d;){var e=d.nextSibling;d.nodeType!=mxConstants.NODETYPE_ELEMENT||this.processInclude(a,d,c)||this.decodeChild(a,d,c),d=e}},mxObjectCodec.prototype.decodeChild=function(a,b,c){var d=this.getFieldName(b.getAttribute("as"));if(null==d||!this.isExcluded(c,d,b,!1)){var e=this.getFieldTemplate(c,d,b),f=null;"add"==b.nodeName?(f=b.getAttribute("value"),null==f&&mxObjectCodec.allowEval&&(f=mxUtils.eval(mxUtils.getTextContent(b)))):f=a.decode(b,e),this.addObjectValue(c,d,f,e)}},mxObjectCodec.prototype.getFieldTemplate=function(a,b,c){var d=a[b];return d instanceof Array&&d.length>0&&(d=null),d},mxObjectCodec.prototype.addObjectValue=function(a,b,c,d){null!=c&&c!=d&&(null!=b&&b.length>0?a[b]=c:a.push(c))},mxObjectCodec.prototype.processInclude=function(a,b,c){if("include"==b.nodeName){var d=b.getAttribute("name");if(null!=d)try{var e=mxUtils.load(d).getDocumentElement();null!=e&&a.decode(e,c)}catch(a){}return!0}return!1},mxObjectCodec.prototype.beforeDecode=function(a,b,c){return b},mxObjectCodec.prototype.afterDecode=function(a,b,c){return c},mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return a.isCellCodec=function(){return!0},a.isNumericAttribute=function(a,b,c){return"value"!==b.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},a.isExcluded=function(a,b,c,d){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||d&&"value"==b&&c.nodeType==mxConstants.NODETYPE_ELEMENT},a.afterEncode=function(a,b,c){if(null!=b.value&&b.value.nodeType==mxConstants.NODETYPE_ELEMENT){var d=c;c=mxUtils.importNode(a.document,b.value,!0),c.appendChild(d);var e=d.getAttribute("id");c.setAttribute("id",e),d.removeAttribute("id")}return c},a.beforeDecode=function(a,b,c){var d=b.cloneNode(!0),e=this.getName();if(b.nodeName!=e){var f=b.getElementsByTagName(e)[0];null!=f&&f.parentNode==b?(mxUtils.removeWhitespace(f,!0),mxUtils.removeWhitespace(f,!1),f.parentNode.removeChild(f),d=f):d=null,c.value=b.cloneNode(!0);var g=c.value.getAttribute("id");null!=g&&(c.setId(g),c.value.removeAttribute("id"))}else c.setId(b.getAttribute("id"));if(null!=d)for(var h=0;h<this.idrefs.length;h++){var i=this.idrefs[h],j=d.getAttribute(i);if(null!=j){d.removeAttribute(i);var k=a.objects[j]||a.lookup(j);if(null==k){var l=a.getElementById(j);if(null!=l){var m=mxCodecRegistry.codecs[l.nodeName]||this;k=m.decode(a,l)}}c[i]=k}}return d},a}()),mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxGraphModel);return a.encodeObject=function(a,b,c){var d=a.document.createElement("root");a.encodeCell(b.getRoot(),d),c.appendChild(d)},a.decodeChild=function(a,b,c){"root"==b.nodeName?this.decodeRoot(a,b,c):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},a.decodeRoot=function(a,b,c){for(var d=null,e=b.firstChild;null!=e;){var f=a.decodeCell(e);null!=f&&null==f.getParent()&&(d=f),e=e.nextSibling}null!=d&&c.setRoot(d)},a}()),mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return a.afterEncode=function(a,b,c){return a.encodeCell(b.root,c),c},a.beforeDecode=function(a,b,c){if(null!=b.firstChild&&b.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){b=b.cloneNode(!0);var d=b.firstChild;c.root=a.decodeCell(d,!1);var e=d.nextSibling;for(d.parentNode.removeChild(d),d=e;null!=d;)e=d.nextSibling,a.decodeCell(d),d.parentNode.removeChild(d),d=e}return b},a.afterDecode=function(a,b,c){return c.previous=c.root,c},a}()),mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return a.isReference=function(a,b,c,d){return!("child"!=b||null==a.previous&&d)||mxUtils.indexOf(this.idrefs,b)>=0},a.afterEncode=function(a,b,c){return this.isReference(b,"child",b.child,!0)?c.setAttribute("child",a.getId(b.child)):a.encodeCell(b.child,c),c},a.beforeDecode=function(a,b,c){if(null!=b.firstChild&&b.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){b=b.cloneNode(!0);var d=b.firstChild;c.child=a.decodeCell(d,!1);var e=d.nextSibling;for(d.parentNode.removeChild(d),d=e;null!=d;){if(e=d.nextSibling,d.nodeType==mxConstants.NODETYPE_ELEMENT){var f=d.getAttribute("id");null==a.lookup(f)&&a.decodeCell(d)}d.parentNode.removeChild(d),d=e}}else{var g=b.getAttribute("child");c.child=a.getObject(g)}return b},a.afterDecode=function(a,b,c){return c.child.parent=c.previous,c.previous=c.parent,c.previousIndex=c.index,c},a}()),mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return a.afterDecode=function(a,b,c){return c.previous=c.terminal,c},a}());var mxGenericChangeCodec=function(a,b){var c=new mxObjectCodec(a,["model","previous"],["cell"]);return c.afterDecode=function(a,c,d){return mxUtils.isNode(d.cell)&&(d.cell=a.decodeCell(d.cell,!1)),d.previous=d[b],d},c};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),mxCodecRegistry.register(function(){return new mxObjectCodec(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])}()),mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxGraphView);return a.encode=function(a,b){return this.encodeCell(a,b,b.graph.getModel().getRoot())},a.encodeCell=function(a,b,c){var d=b.graph.getModel(),e=b.getState(c),f=d.getParent(c);if(null==f||null!=e){var g=d.getChildCount(c),h=b.graph.getCellGeometry(c),i=null;if(f==d.getRoot()?i="layer":null==f?i="graph":d.isEdge(c)?i="edge":g>0&&null!=h?i="group":d.isVertex(c)&&(i="vertex"),null!=i){var j=a.document.createElement(i),k=b.graph.getLabel(c);if(null!=k&&(j.setAttribute("label",b.graph.getLabel(c)),b.graph.isHtmlLabel(c)&&j.setAttribute("html",!0)),null==f){var l=b.getGraphBounds();null!=l&&(j.setAttribute("x",Math.round(l.x)),j.setAttribute("y",Math.round(l.y)),j.setAttribute("width",Math.round(l.width)),j.setAttribute("height",Math.round(l.height))),j.setAttribute("scale",b.scale)}else if(null!=e&&null!=h){for(var m in e.style){var n=e.style[m];"function"==typeof n&&"object"==typeof n&&(n=mxStyleRegistry.getName(n)),null!=n&&"function"!=typeof n&&"object"!=typeof n&&j.setAttribute(m,n)}var o=e.absolutePoints;if(null!=o&&o.length>0){for(var p=Math.round(o[0].x)+","+Math.round(o[0].y),m=1;m<o.length;m++)p+=" "+Math.round(o[m].x)+","+Math.round(o[m].y);j.setAttribute("points",p)}else j.setAttribute("x",Math.round(e.x)),j.setAttribute("y",Math.round(e.y)),j.setAttribute("width",Math.round(e.width)),j.setAttribute("height",Math.round(e.height));var q=e.absoluteOffset;null!=q&&(0!=q.x&&j.setAttribute("dx",Math.round(q.x)),0!=q.y&&j.setAttribute("dy",Math.round(q.y)))}for(var m=0;m<g;m++){var r=this.encodeCell(a,b,d.getChildAt(c,m));null!=r&&j.appendChild(r)}}}return j},a}());var mxStylesheetCodec=mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxStylesheet);return a.encode=function(a,b){var c=a.document.createElement(this.getName());for(var d in b.styles){var e=b.styles[d],f=a.document.createElement("add");if(null!=d){f.setAttribute("as",d);for(var g in e){var h=this.getStringValue(g,e[g]);if(null!=h){var i=a.document.createElement("add");i.setAttribute("value",h),i.setAttribute("as",g),f.appendChild(i)}}f.childNodes.length>0&&c.appendChild(f)}}return c},a.getStringValue=function(a,b){var c=typeof b;return"function"==c?b=mxStyleRegistry.getName(style[j]):"object"==c&&(b=null),b},a.decode=function(a,b,c){var d=c||new this.template.constructor,e=b.getAttribute("id");for(null!=e&&(a.objects[e]=d),b=b.firstChild;null!=b;){if(!this.processInclude(a,b,d)&&"add"==b.nodeName){var f=b.getAttribute("as");if(null!=f){
  var g=b.getAttribute("extend"),h=null!=g?mxUtils.clone(d.styles[g]):null;null==h&&(null!=g&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+g+" not found to extend"),h=new Object);for(var i=b.firstChild;null!=i;){if(i.nodeType==mxConstants.NODETYPE_ELEMENT){var j=i.getAttribute("as");if("add"==i.nodeName){var k=mxUtils.getTextContent(i),l=null;null!=k&&k.length>0&&mxStylesheetCodec.allowEval?l=mxUtils.eval(k):(l=i.getAttribute("value"),mxUtils.isNumeric(l)&&(l=parseFloat(l))),null!=l&&(h[j]=l)}else"remove"==i.nodeName&&delete h[j]}i=i.nextSibling}d.putCellStyle(f,h)}}b=b.nextSibling}return d},a}());mxStylesheetCodec.allowEval=!0,mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxDefaultKeyHandler);return a.encode=function(a,b){return null},a.decode=function(a,b,c){if(null!=c){c.editor;for(b=b.firstChild;null!=b;){if(!this.processInclude(a,b,c)&&"add"==b.nodeName){var e=b.getAttribute("as"),f=b.getAttribute("action"),g=b.getAttribute("control");c.bindAction(e,f,g)}b=b.nextSibling}}return c},a}());var mxDefaultToolbarCodec=mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxDefaultToolbar);return a.encode=function(a,b){return null},a.decode=function(a,b,c){if(null!=c){var d=c.editor;for(b=b.firstChild;null!=b;){if(b.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(a,b,c))if("separator"==b.nodeName)c.addSeparator();else if("br"==b.nodeName)c.toolbar.addBreak();else if("hr"==b.nodeName)c.toolbar.addLine();else if("add"==b.nodeName){var e=b.getAttribute("as");e=mxResources.get(e)||e;var f=b.getAttribute("icon"),g=b.getAttribute("pressedIcon"),h=b.getAttribute("action"),i=b.getAttribute("mode"),j=b.getAttribute("template"),k="0"!=b.getAttribute("toggle"),l=mxUtils.getTextContent(b),m=null;if(null!=h)m=c.addItem(e,f,h,g);else if(null!=i){var n=mxDefaultToolbarCodec.allowEval?mxUtils.eval(l):null;m=c.addMode(e,f,i,g,n)}else if(null!=j||null!=l&&l.length>0){var o=d.templates[j],p=b.getAttribute("style");null!=o&&null!=p&&(o=d.graph.cloneCells([o])[0],o.setStyle(p));var q=null;null!=l&&l.length>0&&mxDefaultToolbarCodec.allowEval&&(q=mxUtils.eval(l)),m=c.addPrototype(e,f,o,g,q,k)}else{var r=mxUtils.getChildNodes(b);if(r.length>0)if(null==f)for(var s=c.addActionCombo(e),t=0;t<r.length;t++){var u=r[t];if("separator"==u.nodeName)c.addOption(s,"---");else if("add"==u.nodeName){var v=u.getAttribute("as"),w=u.getAttribute("action");c.addActionOption(s,v,w)}}else{var x=null,y=function(){var a=d.templates[x.value];if(null!=a){var b=a.clone(),c=x.options[x.selectedIndex].cellStyle;return null!=c&&b.setStyle(c),b}return mxLog.warn("Template "+a+" not found"),null},z=c.addPrototype(e,f,y,null,null,k);x=c.addCombo(),mxEvent.addListener(x,"change",function(){c.toolbar.selectMode(z,function(a){var b=mxUtils.convertPoint(d.graph.container,mxEvent.getClientX(a),mxEvent.getClientY(a));return d.addVertex(null,n(),b.x,b.y)}),c.toolbar.noReset=!1});for(var t=0;t<r.length;t++){var u=r[t];if("separator"==u.nodeName)c.addOption(x,"---");else if("add"==u.nodeName){var v=u.getAttribute("as"),A=u.getAttribute("template"),B=c.addOption(x,v,A||j);B.cellStyle=u.getAttribute("style")}}}}if(null!=m){var C=b.getAttribute("id");null!=C&&C.length>0&&m.setAttribute("id",C)}}b=b.nextSibling}}return c},a}());mxDefaultToolbarCodec.allowEval=!0,mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxDefaultPopupMenu);return a.encode=function(a,b){return null},a.decode=function(a,b,c){var d=b.getElementsByTagName("include")[0];return null!=d?this.processInclude(a,d,c):null!=c&&(c.config=b),c},a}()),mxCodecRegistry.register(function(){var a=new mxObjectCodec(new mxEditor,["modified","lastSnapshot","ignoredChanges","undoManager","graphContainer","toolbarContainer"]);return a.afterDecode=function(a,b,c){var d=b.getAttribute("defaultEdge");null!=d&&(b.removeAttribute("defaultEdge"),c.defaultEdge=c.templates[d]);var e=b.getAttribute("defaultGroup");return null!=e&&(b.removeAttribute("defaultGroup"),c.defaultGroup=c.templates[e]),c},a.decodeChild=function(a,b,c){if("Array"==b.nodeName){var d=b.getAttribute("as");if("templates"==d)return void this.decodeTemplates(a,b,c)}else if("ui"==b.nodeName)return void this.decodeUi(a,b,c);mxObjectCodec.prototype.decodeChild.apply(this,arguments)},a.decodeUi=function(a,b,c){for(var d=b.firstChild;null!=d;){if("add"==d.nodeName){var e=d.getAttribute("as"),f=d.getAttribute("element"),g=d.getAttribute("style"),h=null;if(null!=f)h=document.getElementById(f),null!=h&&null!=g&&(h.style.cssText+=";"+g);else{var i=parseInt(d.getAttribute("x")),j=parseInt(d.getAttribute("y")),k=d.getAttribute("width"),l=d.getAttribute("height");h=document.createElement("div"),h.style.cssText=g;var m=new mxWindow(mxResources.get(e)||e,h,i,j,k,l,!1,!0);m.setVisible(!0)}"graph"==e?c.setGraphContainer(h):"toolbar"==e?c.setToolbarContainer(h):"title"==e?c.setTitleContainer(h):"status"==e?c.setStatusContainer(h):"map"==e&&c.setMapContainer(h)}else"resource"==d.nodeName?mxResources.add(d.getAttribute("basename")):"stylesheet"==d.nodeName&&mxClient.link("stylesheet",d.getAttribute("name"));d=d.nextSibling}},a.decodeTemplates=function(a,b,c){null==c.templates&&(c.templates=[]);for(var d=mxUtils.getChildNodes(b),e=0;e<d.length;e++){for(var f=d[e].getAttribute("as"),g=d[e].firstChild;null!=g&&1!=g.nodeType;)g=g.nextSibling;null!=g&&(c.templates[f]=a.decodeCell(g))}},a}());;
"undefined"!=typeof html4&&(html4.ATTRIBS["a::target"]=0),mxConstants.SHADOW_OPACITY=.25,mxConstants.SHADOWCOLOR="#000000",mxConstants.VML_SHADOWCOLOR="#d0d0d0",mxGraph.prototype.pageBreakColor="#c0c0c0",mxGraph.prototype.pageScale=1,function(){try{if(null!=navigator&&null!=navigator.language){var a=navigator.language.toLowerCase();mxGraph.prototype.pageFormat="en-us"===a||"en-ca"===a||"es-mx"===a?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT}}catch(a){}}(),mxText.prototype.baseSpacingTop=5,mxText.prototype.baseSpacingBottom=1,mxGraphModel.prototype.ignoreRelativeEdgeParent=!1,mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif",mxGraphView.prototype.gridSteps=4,mxGraphView.prototype.minGridSize=4,mxGraphView.prototype.gridColor="#e0e0e0",mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]",Graph=function(a,b,c,d,e){mxGraph.call(this,a,b,c,d),this.themes=e||this.defaultThemes;var f=this.baseUrl,g=f.indexOf("//");if(this.domainUrl="",this.domainPathUrl="",g>0){var h=f.indexOf("/",g+2);h>0&&(this.domainUrl=f.substring(0,h)),h=f.lastIndexOf("/"),h>0&&(this.domainPathUrl=f.substring(0,h+1))}if(this.isHtmlLabel=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return"1"==c.html||"wrap"==c[mxConstants.STYLE_WHITE_SPACE]},this.edgeMode){var i={point:null,event:null,state:null,handle:null,selected:!1};this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(a,b){if("mouseDown"==b.getProperty("eventName")&&this.isEnabled()){var c=b.getProperty("event");if(!mxEvent.isControlDown(c.getEvent())&&!mxEvent.isShiftDown(c.getEvent())){var d=c.getState();if(null!=d&&this.model.isEdge(d.cell))if(i.point=new mxPoint(c.getGraphX(),c.getGraphY()),i.selected=this.isCellSelected(d.cell),i.state=d,i.event=c,null!=d.text&&null!=d.text.boundingBox&&mxUtils.contains(d.text.boundingBox,c.getGraphX(),c.getGraphY()))i.handle=mxEvent.LABEL_HANDLE;else{var e=this.selectionCellsHandler.getHandler(d.cell);null!=e&&null!=e.bends&&e.bends.length>0&&(i.handle=e.getHandleForEvent(c))}}}}));this.addMouseListener({mouseDown:function(a,b){},mouseMove:mxUtils.bind(this,function(a,b){if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isControlDown(b.getEvent())&&!mxEvent.isShiftDown(b.getEvent())&&!mxEvent.isAltDown(b.getEvent())){var c=this.tolerance;if(null!=i.point&&null!=i.state&&null!=i.event){var d=i.state;if(Math.abs(i.point.x-b.getGraphX())>c*this.view.scale||Math.abs(i.point.y-b.getGraphY())>c*this.view.scale){this.isCellSelected(d.cell)||this.setSelectionCell(d.cell);var e=this.selectionCellsHandler.getHandler(d.cell);if(null!=e&&null!=e.bends&&e.bends.length>0){var f=e.getHandleForEvent(i.event),g=this.view.getEdgeStyle(d),h=g==mxEdgeStyle.EntityRelation;if(i.selected||i.handle!=mxEvent.LABEL_HANDLE||(f=i.handle),h&&0!=f&&f!=e.bends.length-1&&f!=mxEvent.LABEL_HANDLE)!h||null==d.visibleSourceState&&null==d.visibleTargetState||(this.graphHandler.reset(),b.consume());else if(f==mxEvent.LABEL_HANDLE||0==f||null!=d.visibleSourceState||f==e.bends.length-1||null!=d.visibleTargetState){if(!h&&f!=mxEvent.LABEL_HANDLE){var j=d.absolutePoints;if(null!=j&&(null==g&&null==f||g==mxEdgeStyle.OrthConnector)&&(f=i.handle,null==f)){var k=new mxRectangle(i.point.x,i.point.y);if(k.grow(mxEdgeHandler.prototype.handleImage.width/2),mxUtils.contains(k,j[0].x,j[0].y))f=0;else if(mxUtils.contains(k,j[j.length-1].x,j[j.length-1].y))f=e.bends.length-1;else{var l=null!=g&&(2==j.length||3==j.length&&(0==Math.round(j[0].x-j[1].x)&&0==Math.round(j[1].x-j[2].x)||0==Math.round(j[0].y-j[1].y)&&0==Math.round(j[1].y-j[2].y)));l?f=2:(f=mxUtils.findNearestSegment(d,i.point.x,i.point.y),null==g?f=mxEvent.VIRTUAL_HANDLE-f:f+=1)}}null==f&&(f=mxEvent.VIRTUAL_HANDLE)}e.start(b.getGraphX(),b.getGraphX(),f),i.state=null,i.event=null,i.point=null,i.handle=null,i.selected=!1,b.consume(),this.graphHandler.reset()}}}}else{var d=b.getState();if(null!=d&&this.model.isEdge(d.cell)){var m=null,j=d.absolutePoints;if(null!=j){var k=new mxRectangle(b.getGraphX(),b.getGraphY());if(k.grow(mxEdgeHandler.prototype.handleImage.width/2),null!=d.text&&null!=d.text.boundingBox&&mxUtils.contains(d.text.boundingBox,b.getGraphX(),b.getGraphY()))m="move";else if(mxUtils.contains(k,j[0].x,j[0].y)||mxUtils.contains(k,j[j.length-1].x,j[j.length-1].y))m="pointer";else if(null!=d.visibleSourceState||null!=d.visibleTargetState){var n=this.view.getEdgeStyle(d);if(m="crosshair",n!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(d)){var o=mxUtils.findNearestSegment(d,b.getGraphX(),b.getGraphY());o<j.length-1&&o>=0&&(m=0==Math.round(j[o].x-j[o+1].x)?"col-resize":"row-resize")}}}null!=m&&d.setCursor(m)}}}}),mouseUp:mxUtils.bind(this,function(a,b){i.state=null,i.event=null,i.point=null,i.handle=null})})}if(this.cellRenderer.getLabelValue=function(a){var b=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return a.view.graph.isHtmlLabel(a.cell)&&(b=1!=a.style.html?mxUtils.htmlEntities(b,!1):a.view.graph.sanitizeHtml(b)),b},"undefined"!=typeof mxVertexHandler){this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.resetEdgesOnConnect=!1,this.constrainChildren=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(a,b){return!1},this.alternateEdgeStyle="vertical",null==d&&this.loadStylesheet();var k=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var a=k.apply(this,arguments);if(this.graph.pageVisible){for(var b=[],c=this.graph.pageFormat,d=this.graph.pageScale,e=c.width*d,f=c.height*d,g=this.graph.view.translate,h=this.graph.view.scale,i=this.graph.getPageLayout(),j=0;j<i.width;j++)b.push(new mxRectangle(((i.x+j)*e+g.x)*h,(i.y*f+g.y)*h,e*h,f*h));for(var l=0;l<i.height;l++)b.push(new mxRectangle((i.x*e+g.x)*h,((i.y+l)*f+g.y)*h,e*h,f*h));a=b.concat(a)}return a},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(a,b){return null==a.cell?"#ffa500":mxConstants.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(a){return this.previewColor="#000000"==this.graph.background?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)},this.graphHandler.getCells=function(a){for(var b=mxGraphHandler.prototype.getCells.apply(this,arguments),c=[],d=0;d<b.length;d++){var e=this.graph.view.getState(b[d]),f=null!=e?e.style:this.graph.getCellStyle(b[d]);if("1"==mxUtils.getValue(f,"part","0")){var g=this.graph.model.getParent(b[d]);this.graph.model.isVertex(g)&&mxUtils.indexOf(b,g)<0&&c.push(g)}else c.push(b[d])}return c},this.connectionHandler.createTargetVertex=function(a,b){var c=this.graph.view.getState(b),d=null!=c?c.style:this.graph.getCellStyle(b);if(mxUtils.getValue(d,"part",!1)){var e=this.graph.model.getParent(b);this.graph.model.isVertex(e)&&(b=e)}return mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)};var l=new mxRubberband(this);this.getRubberband=function(){return l};var m=(new Date).getTime(),n=0,o=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var a=this.currentState;o.apply(this,arguments),a!=this.currentState?(m=(new Date).getTime(),n=0):n=(new Date).getTime()-m};var p=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(a){return null!=this.currentState&&a.getState()==this.currentState&&n>2e3||(null==this.currentState||"0"!=mxUtils.getValue(this.currentState.style,"outlineConnect","1"))&&p.apply(this,arguments)};var q=this.isToggleEvent;this.isToggleEvent=function(a){return q.apply(this,arguments)||mxEvent.isShiftDown(a)};var r=l.isForceRubberbandEvent;l.isForceRubberbandEvent=function(a){return r.apply(this,arguments)||mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&null==a.getState()&&mxEvent.isTouchEvent(a.getEvent())};var s=null;this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){this.isEnabled()&&(s=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=s)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(a){return mxEvent.isMouseEvent(a.getEvent())};var t=this.click;this.click=function(a){if(this.isEnabled()||a.isConsumed())return t.apply(this,arguments);var b=a.getCell();if(null!=b){var c=this.getLinkForCell(b);null!=c&&window.open(c)}};var u=this.getCursorForCell;this.getCursorForCell=function(a){if(this.isEnabled())return u.apply(this,arguments);var b=this.getLinkForCell(a);return null!=b?"pointer":void 0},this.selectRegion=function(a,b){var c=this.getAllCells(a.x,a.y,a.width,a.height);return this.selectCellsForEvent(c,b),c},this.getAllCells=function(a,b,c,d,e,f){if(f=null!=f?f:[],c>0||d>0){var g=this.getModel(),h=a+c,i=b+d;if(null==e&&(e=this.getCurrentRoot(),null==e&&(e=g.getRoot())),null!=e)for(var j=g.getChildCount(e),k=0;k<j;k++){var l=g.getChildAt(e,k),m=this.view.getState(l);if(null!=m&&this.isCellVisible(l)&&"1"!=mxUtils.getValue(m.style,"locked","0")){var n=mxUtils.getValue(m.style,mxConstants.STYLE_ROTATION)||0,o=m;0!=n&&(o=mxUtils.getBoundingBox(o,n)),(g.isEdge(l)||g.isVertex(l))&&o.x>=a&&o.y+o.height<=i&&o.y>=b&&o.x+o.width<=h&&f.push(l),this.getAllCells(a,b,c,d,l,f)}}}return f};var v=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(a,b,c){return!this.graph.isCellSelected(a)&&v.apply(this,arguments)},this.isCellLocked=function(a){for(var b=this.view.getState(a);null!=b;){if("1"==mxUtils.getValue(b.style,"locked","0"))return!0;b=this.view.getState(this.model.getParent(b.cell))}return!1};var w=null;this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(a,b){if("mouseDown"==b.getProperty("eventName")){var c=b.getProperty("event"),d=c.getState();w=null==d||this.isSelectionEmpty()||this.isCellSelected(d.cell)?null:this.getSelectionCells()}})),this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(a,b){if(!mxEvent.isMultiTouchEvent(b)){var c=b.getProperty("event"),d=b.getProperty("cell");if(null==d){var e=mxUtils.convertPoint(this.container,mxEvent.getClientX(c),mxEvent.getClientY(c));l.start(e.x,e.y)}else null!=w?this.addSelectionCells(w):this.getSelectionCount()>1&&this.isCellSelected(d)&&this.removeSelectionCell(d);w=null,b.consume()}})),this.connectionHandler.selectCells=function(a,b){this.graph.setSelectionCell(b||a)},this.connectionHandler.constraintHandler.isStateIgnored=function(a,b){return b&&a.view.graph.isCellSelected(a.cell)},this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var a=this.connectionHandler.constraintHandler;null!=a.currentFocus&&a.isStateIgnored(a.currentFocus,!0)&&(a.currentFocus=null,a.constraints=null,a.destroyIcons()),a.destroyFocusHighlight()})),Graph.touchStyle&&this.initTouch();var x=this.updateMouseEvent;this.updateMouseEvent=function(a){return a=x.apply(this,arguments),this.isCellLocked(a.getCell())&&(a.state=null),a}}},Graph.touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||null==window.urlParams||"1"==urlParams.touch,Graph.fileSupport=null!=window.File&&null!=window.FileReader&&null!=window.FileList&&(null==window.urlParams||"0"!=urlParams.filesupport),mxUtils.extend(Graph,mxGraph),Graph.prototype.minFitScale=null,Graph.prototype.maxFitScale=null,Graph.prototype.linkPolicy="frame"==urlParams.target?"blank":urlParams.target||"auto",Graph.prototype.linkTarget="frame"==urlParams.target?"_self":"_blank",Graph.prototype.defaultScrollbars=!mxClient.IS_IOS,Graph.prototype.defaultPageVisible=!0,Graph.prototype.lightbox=!1,Graph.prototype.defaultGraphBackground="#ffffff",Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400),Graph.prototype.transparentBackground=!0,Graph.prototype.defaultEdgeLength=80,Graph.prototype.edgeMode=!1,Graph.prototype.connectionArrowsEnabled=!0,Graph.prototype.placeholderPattern=new RegExp("%(date{.*}|[^%^{^}]+)%","g"),Graph.prototype.absoluteUrlPattern=new RegExp("^(?:[a-z]+:)?//","i"),Graph.prototype.defaultThemeName="default",Graph.prototype.defaultThemes={},Graph.prototype.baseUrl=window!=window.top?document.referrer:document.location.toString(),Graph.prototype.init=function(a){mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(a,b){mxCellRenderer.prototype.initializeLabel.apply(this,arguments),mxEvent.addListener(b.node,"click",mxUtils.bind(this,function(c){for(var d=mxEvent.getSource(c);null!=d&&d!=b.node;){if("A"==d.nodeName){var e=d.getAttribute("href");if(null!=e){var f=a.view.graph.isBlankLink(e)?a.view.graph.linkTarget:"_top";e=a.view.graph.getAbsoluteUrl(e),"_self"==f&&window!=window.top?window.location.href=e:window.open(e,f),mxEvent.consume(c)}break}d=d.parentNode}}))},this.initLayoutManager()},Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.getLayout=function(a){var b=this.graph.view.getState(a),c=null!=b?b.style:this.graph.getCellStyle(a);if("stackLayout"==c.childLayout){var d=new mxStackLayout(this.graph,!0);return d.resizeParentMax=!0,d.horizontal="1"==mxUtils.getValue(c,"horizontalStack","1"),d.resizeParent="1"==mxUtils.getValue(c,"resizeParent","1"),d.resizeLast="1"==mxUtils.getValue(c,"resizeLast","0"),d.marginLeft=c.marginLeft||0,d.marginRight=c.marginRight||0,d.marginTop=c.marginTop||0,d.marginBottom=c.marginBottom||0,d.fill=!0,d}if("treeLayout"==c.childLayout){var e=new mxCompactTreeLayout(this.graph);return e.horizontal="1"==mxUtils.getValue(c,"horizontalTree","1"),e.resizeParent="1"==mxUtils.getValue(c,"resizeParent","1"),e.groupPadding=mxUtils.getValue(c,"parentPadding",20),e.levelDistance=mxUtils.getValue(c,"treeLevelDistance",30),e.maintainParentLocation=!0,e.edgeRouting=!1,e.resetEdges=!1,e}if("flowLayout"==c.childLayout){var f=new mxHierarchicalLayout(this.graph,mxUtils.getValue(c,"flowOrientation",mxConstants.DIRECTION_EAST));return f.resizeParent="1"==mxUtils.getValue(c,"resizeParent","1"),f.parentBorder=mxUtils.getValue(c,"parentPadding",20),f.maintainParentLocation=!0,f.intraCellSpacing=mxUtils.getValue(c,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),f.interRankCellSpacing=mxUtils.getValue(c,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),f.interHierarchySpacing=mxUtils.getValue(c,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),f.parallelEdgeSpacing=mxUtils.getValue(c,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),f}return null}},Graph.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize},Graph.prototype.getPageLayout=function(){var a=this.getPageSize(),b=this.getGraphBounds();if(0==b.width||0==b.height)return new mxRectangle(0,0,1,1);var c=Math.ceil(b.x/this.view.scale-this.view.translate.x),d=Math.ceil(b.y/this.view.scale-this.view.translate.y),e=Math.floor(b.width/this.view.scale),f=Math.floor(b.height/this.view.scale),g=Math.floor(c/a.width),h=Math.floor(d/a.height),i=Math.ceil((c+e)/a.width)-g,j=Math.ceil((d+f)/a.height)-h;return new mxRectangle(g,h,i,j)},Graph.prototype.sanitizeHtml=function(a,b){function c(a){return null!=a&&"javascript:"!==a.toString().toLowerCase().substring(0,11)?a:null}function d(a){return a}return html_sanitize(a,c,d)},Graph.prototype.updatePlaceholders=function(){var b=(this.model,!1);for(var c in this.model.cells){var d=this.model.cells[c];this.isReplacePlaceholders(d)&&(this.view.invalidate(d,!1,!1),b=!0)}b&&this.view.validate()},Graph.prototype.isReplacePlaceholders=function(a){return null!=a.value&&"object"==typeof a.value&&"1"==a.value.getAttribute("placeholders")},Graph.prototype.isIgnoreTerminalEvent=function(a){return mxEvent.isShiftDown(a)&&mxEvent.isControlDown(a)},Graph.prototype.isSplitTarget=function(a,b,c){return!mxEvent.isShiftDown(c)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)},Graph.prototype.getLabel=function(a){var b=mxGraph.prototype.getLabel.apply(this,arguments);return null!=b&&this.isReplacePlaceholders(a)&&null==a.getAttribute("placeholder")&&(b=this.replacePlaceholders(a,b)),b},Graph.prototype.isLabelMovable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return!this.isCellLocked(a)&&(this.model.isEdge(a)&&this.edgeLabelsMovable||this.model.isVertex(a)&&(this.vertexLabelsMovable||"1"==mxUtils.getValue(c,"labelMovable","0")))},mxGraph.prototype.setGridSize=function(a){this.gridSize=a,this.fireEvent(new mxEventObject("gridSizeChanged"))},Graph.prototype.getGlobalVariable=function(a){var b=null;if("date"==a)b=(new Date).toLocaleDateString();else if("time"==a)b=(new Date).toLocaleTimeString();else if("timestamp"==a)b=(new Date).toLocaleString();else if("date{"==a.substring(0,5)){var c=a.substring(5,a.length-1);b=this.formatDate(new Date,c)}return b},Graph.prototype.formatDate=function(a,b,c){null==this.dateFormatCache&&(this.dateFormatCache={i18n:{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var d=this.dateFormatCache,e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,h=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(a)||/\d/.test(a)||(b=a,a=void 0),a=a?new Date(a):new Date,isNaN(a))throw SyntaxError("invalid date");b=String(d.masks[b]||b||d.masks.default),"UTC:"==b.slice(0,4)&&(b=b.slice(4),c=!0);var i=c?"getUTC":"get",j=a[i+"Date"](),k=a[i+"Day"](),l=a[i+"Month"](),m=a[i+"FullYear"](),n=a[i+"Hours"](),o=a[i+"Minutes"](),p=a[i+"Seconds"](),q=a[i+"Milliseconds"](),r=c?0:a.getTimezoneOffset(),s={d:j,dd:h(j),ddd:d.i18n.dayNames[k],dddd:d.i18n.dayNames[k+7],m:l+1,mm:h(l+1),mmm:d.i18n.monthNames[l],mmmm:d.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:h(n%12||12),H:n,HH:h(n),M:o,MM:h(o),s:p,ss:h(p),l:h(q,3),L:h(q>99?Math.round(q/10):q),t:n<12?"a":"p",tt:n<12?"am":"pm",T:n<12?"A":"P",TT:n<12?"AM":"PM",Z:c?"UTC":(String(a).match(f)||[""]).pop().replace(g,""),o:(r>0?"-":"+")+h(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!=10)*j%10]};return b.replace(e,function(a){return a in s?s[a]:a.slice(1,a.length-1)})},Graph.prototype.createLayersDialog=function(){var a=document.createElement("div");a.style.position="absolute";for(var b=this.getModel(),c=b.getChildCount(b.root),d=0;d<c;d++)!function(c){var d=document.createElement("div");d.style.overflow="hidden",d.style.textOverflow="ellipsis",d.style.padding="2px",d.style.whiteSpace="nowrap";var e=document.createElement("input");e.setAttribute("type","checkbox"),b.isVisible(c)&&(e.setAttribute("checked","checked"),e.defaultChecked=!0),d.appendChild(e);var f=c.value||mxResources.get("background")||"Background";d.setAttribute("title",f),mxUtils.write(d,f),a.appendChild(d),mxEvent.addListener(e,"click",function(){null!=e.getAttribute("checked")?e.removeAttribute("checked"):e.setAttribute("checked","checked"),b.setVisible(c,e.checked)})}(b.getChildAt(b.root,d));return a},Graph.prototype.replacePlaceholders=function(a,b){for(var c=[],d=0;match=this.placeholderPattern.exec(b);){var e=match[0];if(e.length>2&&"%label%"!=e&&"%tooltip%"!=e){var f=null;if(match.index>d&&"%"==b.charAt(match.index-1))f=e.substring(1);else{var g=e.substring(1,e.length-1);if(g.indexOf("{")<0)for(var h=a;null==f&&null!=h;)null!=h.value&&"object"==typeof h.value&&(f=h.hasAttribute(g)?null!=h.getAttribute(g)?h.getAttribute(g):"":null),h=this.model.getParent(h);null==f&&(f=this.getGlobalVariable(g))}c.push(b.substring(d,match.index)+(null!=f?f:e)),d=match.index+e.length}}return c.push(b.substring(d)),c.join("")},Graph.prototype.selectCellsForConnectVertex=function(a,b,c){2==a.length&&this.model.isVertex(a[1])?(this.setSelectionCell(a[1]),null!=c&&(mxEvent.isTouchEvent(b)?c.update(c.getState(this.view.getState(a[1]))):c.reset()),this.scrollCellToVisible(a[1])):this.setSelectionCells(a)},Graph.prototype.connectVertex=function(a,b,c,d,e){var f=a.geometry.relative&&null!=a.parent.geometry?new mxPoint(a.parent.geometry.width*a.geometry.x,a.parent.geometry.height*a.geometry.y):new mxPoint(a.geometry.x,a.geometry.y);b==mxConstants.DIRECTION_NORTH?(f.x+=a.geometry.width/2,f.y-=c):b==mxConstants.DIRECTION_SOUTH?(f.x+=a.geometry.width/2,f.y+=a.geometry.height+c):b==mxConstants.DIRECTION_WEST?(f.x-=c,f.y+=a.geometry.height/2):(f.x+=a.geometry.width+c,f.y+=a.geometry.height/2);var g=this.view.getState(this.model.getParent(a)),h=this.view.scale,i=this.view.translate,j=i.x*h,k=i.y*h;this.model.isVertex(g.cell)&&(j=g.x,k=g.y),this.model.isVertex(a.parent)&&a.geometry.relative&&(f.x+=a.parent.geometry.x,f.y+=a.parent.geometry.y);var l=mxEvent.isControlDown(d)&&!e?null:this.getCellAt(j+f.x*h,k+f.y*h);this.model.isAncestor(l,a)&&(l=null);for(var m=l;null!=m;){if(this.isCellLocked(m)){l=null;break}m=this.model.getParent(m)}if(null!=l){var n=this.view.getState(a),o=this.view.getState(l);null!=n&&null!=o&&mxUtils.intersects(n,o)&&(l=null)}var p=!mxEvent.isShiftDown(d)||e;if(p&&(b==mxConstants.DIRECTION_NORTH?f.y-=a.geometry.height/2:b==mxConstants.DIRECTION_SOUTH?f.y+=a.geometry.height/2:b==mxConstants.DIRECTION_WEST?f.x-=a.geometry.width/2:f.x+=a.geometry.width/2),null!=l&&!this.isCellConnectable(l)){var q=this.getModel().getParent(l);this.getModel().isVertex(q)&&this.isCellConnectable(q)&&(l=q)}l!=a&&!this.model.isEdge(l)&&this.isCellConnectable(l)||(l=null);var r=[];this.model.beginUpdate();try{var s=l;if(null==s&&p){for(var t=a,u=this.getCellGeometry(a);null!=u&&u.relative;)t=this.getModel().getParent(t),u=this.getCellGeometry(t);var v=this.view.getState(t),w=null!=v?v.style:this.getCellStyle(t);if(mxUtils.getValue(w,"part",!1)){var x=this.model.getParent(t);this.model.isVertex(x)&&(t=x)}s=this.duplicateCells([t],!1)[0];var u=this.getCellGeometry(s);null!=u&&(u.x=f.x-u.width/2,u.y=f.y-u.height/2)}var y=null;null!=this.layoutManager&&(y=this.layoutManager.getLayout(this.model.getParent(a)));var z=mxEvent.isControlDown(d)&&p||null==l&&null!=y&&y.constructor==mxStackLayout?null:this.insertEdge(this.model.getParent(a),null,"",a,s,this.createCurrentEdgeStyle());if(null!=z&&this.connectionHandler.insertBeforeSource){for(var A=null,B=a;null!=B.parent&&null!=B.geometry&&B.geometry.relative&&B.parent!=z.parent;)B=this.model.getParent(B);if(null!=B&&null!=B.parent&&B.parent==z.parent){var A=B.parent.getIndex(B);B.parent.insert(z,A)}}if(null==l&&null!=s&&null!=y&&null!=a.parent&&y.constructor==mxStackLayout&&b==mxConstants.DIRECTION_WEST){var A=a.parent.getIndex(a);a.parent.insert(s,A)}null!=z&&r.push(z),null==l&&null!=s&&r.push(s),null==s&&null!=z&&z.geometry.setTerminalPoint(f,!1),null!=z&&this.fireEvent(new mxEventObject("cellsInserted","cells",[z]))}finally{this.model.endUpdate()}return r},Graph.prototype.getIndexableText=function(){var a=document.createElement("div"),b=[],c="";for(var d in this.model.cells){var e=this.model.cells[d];(this.model.isVertex(e)||this.model.isEdge(e))&&(this.isHtmlLabel(e)?(a.innerHTML=this.getLabel(e),c=mxUtils.extractTextWithWhitespace([a])):c=this.getLabel(e),c=mxUtils.trim(c.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")),c.length>0&&b.push(c))}return b.join(" ")},Graph.prototype.convertValueToString=function(a){if(null!=a.value&&"object"==typeof a.value){if(this.isReplacePlaceholders(a)&&null!=a.getAttribute("placeholder")){for(var b=a.getAttribute("placeholder"),c=a,d=null;null==d&&null!=c;)null!=c.value&&"object"==typeof c.value&&(d=c.hasAttribute(b)?null!=c.getAttribute(b)?c.getAttribute(b):"":null),c=this.model.getParent(c);return d||""}return a.value.getAttribute("label")}return mxGraph.prototype.convertValueToString.apply(this,arguments)},Graph.prototype.getLinkForCell=function(a){if(null!=a.value&&"object"==typeof a.value){var b=a.value.getAttribute("link");return null!=b&&"javascript:"===b.toLowerCase().substring(0,11)&&(b=b.substring(11)),b}return null},Graph.prototype.getCellStyle=function(a){var b=mxGraph.prototype.getCellStyle.apply(this,arguments);if(null!=a&&null!=this.layoutManager){var c=this.model.getParent(a);if(this.model.isVertex(c)&&this.isCellCollapsed(a)){var d=this.layoutManager.getLayout(c);null!=d&&d.constructor==mxStackLayout&&(b[mxConstants.STYLE_HORIZONTAL]=!d.horizontal)}}return b},Graph.prototype.updateAlternateBounds=function(a,b,c){if(null!=a&&null!=b&&null!=this.layoutManager&&null!=b.alternateBounds){var d=this.layoutManager.getLayout(this.model.getParent(a));null!=d&&d.constructor==mxStackLayout&&(d.horizontal?b.alternateBounds.height=0:b.alternateBounds.width=0)}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)},Graph.prototype.isMoveCellsEvent=function(a){return mxEvent.isShiftDown(a)},Graph.prototype.foldCells=function(a,b,c,d,e){if(b=null!=b&&b,null==c&&(c=this.getFoldableCells(this.getSelectionCells(),a)),null!=c){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),null!=this.layoutManager)for(var f=0;f<c.length;f++){var g=this.view.getState(c[f]),h=this.getCellGeometry(c[f]);if(null!=g&&null!=h){var i=Math.round(h.width-g.width/this.view.scale),j=Math.round(h.height-g.height/this.view.scale);if(0!=j||0!=i){var k=this.model.getParent(c[f]),l=this.layoutManager.getLayout(k);null==l?null!=e&&this.isMoveCellsEvent(e)&&this.moveSiblings(g,k,i,j):null!=e&&mxEvent.isAltDown(e)||l.constructor!=mxStackLayout||l.resizeLast||this.resizeParentStacks(k,l,i,j)}}}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(c)}},Graph.prototype.moveSiblings=function(a,b,c,d){this.model.beginUpdate();try{for(var e=this.getCellsBeyond(a.x,a.y,b,!0,!0),f=0;f<e.length;f++)if(e[f]!=a.cell){var g=this.view.getState(e[f]),h=this.getCellGeometry(e[f]);null!=g&&null!=h&&(h=h.clone(),h.translate(Math.round(c*Math.max(0,Math.min(1,(g.x-a.x)/a.width))),Math.round(d*Math.max(0,Math.min(1,(g.y-a.y)/a.height)))),this.model.setGeometry(e[f],h))}}finally{this.model.endUpdate()}},Graph.prototype.resizeParentStacks=function(a,b,c,d){if(null!=this.layoutManager&&null!=b&&b.constructor==mxStackLayout&&!b.resizeLast){this.model.beginUpdate();try{for(var e=b.horizontal;null!=a&&null!=b&&b.constructor==mxStackLayout&&b.horizontal==e&&!b.resizeLast;){var f=this.getCellGeometry(a),g=this.view.getState(a);null!=g&&null!=f&&(f=f.clone(),b.horizontal?f.width+=c+Math.min(0,g.width/this.view.scale-f.width):f.height+=d+Math.min(0,g.height/this.view.scale-f.height),this.model.setGeometry(a,f)),a=this.model.getParent(a),b=this.layoutManager.getLayout(a)}}finally{this.model.endUpdate()}}},Graph.prototype.isContainer=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.isSwimlane(a)?"0"!=c.container:"1"==c.container},Graph.prototype.isCellConnectable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return null!=c.connectable?"0"!=c.connectable:mxGraph.prototype.isCellConnectable.apply(this,arguments)},Graph.prototype.selectAll=function(a){a=a||this.getDefaultParent(),this.isCellLocked(a)||mxGraph.prototype.selectAll.apply(this,arguments)},Graph.prototype.selectCells=function(a,b,c){c=c||this.getDefaultParent(),this.isCellLocked(c)||mxGraph.prototype.selectCells.apply(this,arguments)},Graph.prototype.getSwimlaneAt=function(a,b,c){return c=c||this.getDefaultParent(),this.isCellLocked(c)?null:mxGraph.prototype.getSwimlaneAt.apply(this,arguments)},Graph.prototype.isCellFoldable=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return this.foldingEnabled&&!this.isCellLocked(a)&&(this.isContainer(a)&&"0"!=c.collapsible||!this.isContainer(a)&&"1"==c.collapsible)},Graph.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()},Graph.prototype.zoom=function(a,b){a=Math.max(.01,Math.min(this.view.scale*a,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)},Graph.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)},Graph.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(this.view.scale*(1/this.zoomFactor)*20)/20/this.view.scale)},Graph.prototype.getTooltipForCell=function(a){var b="";if(mxUtils.isNode(a.value)){var c=a.value.getAttribute("tooltip");if(null!=c)null!=c&&this.isReplacePlaceholders(a)&&(c=this.replacePlaceholders(a,c)),b=this.sanitizeHtml(c);else{var d=["label","tooltip","placeholders","placeholder"],e=a.value.attributes;this.isEnabled()&&d.push("link");for(var f=0;f<e.length;f++)mxUtils.indexOf(d,e[f].nodeName)<0&&e[f].nodeValue.length>0&&(b+=("link"!=e[f].nodeName?e[f].nodeName+":":"")+mxUtils.htmlEntities(e[f].nodeValue)+"\n");b.length>0&&(b=b.substring(0,b.length-1))}}return b},Graph.prototype.stringToBytes=function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b},Graph.prototype.bytesToString=function(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")},Graph.prototype.compress=function(a){if(null==a||0==a.length||"undefined"==typeof pako)return a;var b=this.bytesToString(pako.deflateRaw(encodeURIComponent(a)));return window.btoa?btoa(b):Base64.encode(b,!0)},Graph.prototype.decompress=function(a){if(null==a||0==a.length||"undefined"==typeof pako)return a;var b=window.atob?atob(a):Base64.decode(a,!0);return this.zapGremlins(decodeURIComponent(this.bytesToString(pako.inflateRaw(b))))},Graph.prototype.zapGremlins=function(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);(d>=32||9==d||10==d||13==d)&&b.push(a.charAt(c))}return b.join("")},HoverIcons=function(a){this.graph=a,this.init()},HoverIcons.prototype.arrowSpacing=6,HoverIcons.prototype.updateDelay=500,HoverIcons.prototype.activationDelay=140,HoverIcons.prototype.currentState=null,HoverIcons.prototype.activeArrow=null,HoverIcons.prototype.inactiveOpacity=15,HoverIcons.prototype.checkCollisions=!0,HoverIcons.prototype.triangleUp=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAOCAYAAAAxDQxDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBN0E3M0U5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBN0E3M0Y5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RkE3QTczQzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RkE3QTczRDk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj625P8AAACySURBVHjaYmRY956BROABxF+A+AgpmpjIsGQjEO8CYidaWeQHtYQNiDmBeAspljGRYMlqqCUwALPMg1oWhWCxBNmyjVCHUGQRyJKlOCyBATaoQ/zItSgciFcQsATdshBSLYqC+oSZhMTCBnVYFLEWgRQuItESGGCG6o0iZFECBZagW5aAyyKQxBwKLUG2bD4Qp6FblAyVoIYlyGAmzDIWKGMmA+0AyGw2RjIKVbIAQIABAFJRHSSk2rPoAAAAAElFTkSuQmCC":IMAGE_PATH+"/triangle-up.png",26,14),
  HoverIcons.prototype.triangleRight=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAaCAYAAACHD21cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThDQzc5RTU5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThDQzc5RTY5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFMzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFNDk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrHdKTUAAADDSURBVHjanNTBCgFRFIfxMeTZyEKkiBSRxbwREZGiNFZKWSnvY6OUUv6n7ilZaL459XVXv6a5c+cWovQeaSZqFoGJwzpVozzQZq4GeSDCv7AYcJ9Cx0vVpdDxWrUpdLxVLQr/4jjDBpYDblDoeKdqFDpOHRP4jSsU2rzVg8KnqqpbDFFdXck7vlRTXciuOjqT72ioo07k5Nju9dSRnFVHB/J3GBqqPf0fx2pDbwBDK3Ln2MdN1CLraSiFNcn6JJ+PAAMAbnMl1tyDPD8AAAAASUVORK5CYII=":IMAGE_PATH+"/triangle-right.png",14,26),HoverIcons.prototype.triangleDown=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAOCAYAAAAxDQxDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NThDQzc5RTk5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NThDQzc5RUE5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFNzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFODk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv9xyy0AAADESURBVHjaYmRY956BHoAJiHOA+D+NcRrIoilAnEVDz6QD8SwWKGc6EP8F4plUtiQRiBfAgg4GZkEl/lLBgr/IlqBbxACViKPQMgxLQIAFi8JlUHoREDOTYUkckhkMuHyEbFkEEP8i0ZJobJbgswgE1gBxKJGW/YI6bCW+fIQPbCLCsl9Qn6whlGEZiLDMH4i/47AklJAlxFoEAjuA2AfNMpglm4gtgogF+5As+wX15SZiNbOQmHxBlrkBMQ/Ul0QDgAADAC8qRII7g4RyAAAAAElFTkSuQmCC":IMAGE_PATH+"/triangle-down.png",26,14),HoverIcons.prototype.triangleLeft=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAaCAYAAACHD21cAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0ZBN0E3M0E5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0ZBN0E3M0I5NjZGMTFFNTg5NTRDNzQwMTgwNDlEQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1OENDNzlFQjk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1OENDNzlFQzk2NkYxMUU1ODk1NEM3NDAxODA0OURDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pi1fu2cAAADXSURBVHjalNTRB8JQFMfxVROxPyl6iuipRJFS2kv/TU89lY0piyw9pP6r3iP6He7Ndd3de87haxMfd+1ua0TVOxLOCuVNIdqiHZ1I4AbtUUsC6fIO6jzhwoWB/hOCU5Tpy+PCCTq5kA+OfKgODlGJ2r7/YMMBqkLIhn0uMmEP3VGH+zQQ7KKnBGmY+O6eD77QGH2kkOYhxeZdJTzjYnsfb2jOwbHjt6s6ltJHTmNa+SuFNBe0rMOh9/GM1i7M+QIUKLVxzNy2XB0zyYomTqUr6jnqLfoJMADoxSMHt6pxsAAAAABJRU5ErkJggg==":IMAGE_PATH+"/triangle-left.png",14,26),HoverIcons.prototype.roundDrop=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTgxRjYzRTU1MDRFMTFFNEExQ0VFNDQwNDhGNzg2RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTgxRjYzRTY1MDRFMTFFNEExQ0VFNDQwNDhGNzg2RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFODFGNjNFMzUwNEUxMUU0QTFDRUU0NDA0OEY3ODZEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFODFGNjNFNDUwNEUxMUU0QTFDRUU0NDA0OEY3ODZEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuJ657wAAAE0SURBVHjaYvz//z8DPQATA50AC4zBuP4DLjXaQOwMxJZArAfE8lDxh0B8CYiPA/FeIL6KTfP/QAFUi7AABSBOAOJoIFbBIq8FxRFAfAeIlwLxAiB+gNdHaMABiIuB2IfIkAE5pB6IjYG4F4gPEBNHIEtaSLAEGfhA9ToQskgB6hNrCuLdGmqGAj6LEsj0CTafJeCySBsa8dQC0VAzMSxyxpG6yAUqUDMxLLKkQT61xGaRHg0s0sNmkTwNLJKne1mHbNFDGpj/EJtFl2hg0SVsFh2ngUXHsVm0F1oKUwvcgZqJYdFVaFFPLbAUuY5CT3Wg+mQLFSzZAjULZ6H6AFqfHKXAkqNQMx4Qqo9AlVYNmT7bAtV7gNga9gDURWfxVOXoEY+3KmeENbdo3ThhHHbtOoAAAwDmEETshQ0fBAAAAABJRU5ErkJggg==":IMAGE_PATH+"/round-drop.png",26,26),HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQxNERDRTU1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQxNERDRTY1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NDE0RENFMzVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NDE0RENFNDVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsvuX50AAANaSURBVHja7FjRZ1tRGD9ZJ1NCyIQSwrivI4Q8hCpjlFDyFEoYfSp9Ko1QWnmo0If+BSXkIfo0QirTMUpeGo2EPfWllFYjZMLKLDJn53d3biU337m5J223bPbxk5t7v+/c3/2+73znO8fDOWezKM/YjMpz68Lj8ejY+QTeCCwLxOS9qPxtyN+6wAeBTwJ31CCO0cJDjXBGBN4LfIepSwykTUT1bgpuib0SONIgo8KRHOtRiCFcvUcgZeGrHPNBxLIyFPyRgTGz0xLbegJCdmzpElue5KlAIMDX19d5uVzm5+fnfDAYmMA17uEZdOx2Yvb/sHlu2S0xwymn5ufneTab5b1ej08S6EAXNrDd2dnhiUTim21MvMtwQ6yiIrWwsMDPzs64rsBmf3/fvM7n89TYlUnEllSkQqEQv7q64g+Vk5MTVXosORErU0Zer5f0FEIlw2N6MxwO82QyaXql2+2SxDqdjopYWUUsqEp45IldqtWq6UWVh/1+P7+8vCTJ4QMUJSRIEXuneoH96w8PDyeWAnhSJfCqwm6NIlaklFdXV0cGhRcQ2mlJQXK5nMq2YPEZbnteU1U2lUqN/D84OGD9fl+5fgnSrFarsUwmw0qlEru4uBjTicViTk3Cr27HSnxR+Doyz0ZE1CAWiUTusbu7y9rttlZv5fP5WDQavYfIMba4uEipfhF8XtqJoZXx/uH+sC/4vPg7OljZZQbsCmLtYzc3N6zRaJhotVrmfx0xDINtbm6athYUeXpHdbBNaqZUKpWxWXV7e2vex+xaWVnhc3NzjrPUXgexyCt0m67LBV7uJMITjqRE4o8tZeg8FPpFitgapYxiOC0poFgsji1jKNo6BZZckrAGUtJsNk1vqAihCBcKhTE7hNWhqw2qFnGy5UFOUYJVIJ1OjzSE+BCEilon0URavRmBqnbbQ00AXbm+vnZc9O1tj72OnQoc2+cwygRkb2+P1et17ZoEm3g87lRmjgWZ00kbXkNuse6/Bu2wlegIxfb2tuvWGroO4bO2c4bbzUh60mxDXm1sbJhhxkQYnhS4h2fUZoRAWnf7lv8N27f8P7Xhnekjgpk+VKGOoQbsiY+hhhtF3YO7twIJ+ULvUGv+GQ2fQEvWxI/THNx5/p/BaspPAQYAqStgiSQwCDoAAAAASUVORK5CYII=":IMAGE_PATH+"/refresh.png",38,38),HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.repaintHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(a){null!=a.relatedTarget&&mxEvent.getSource(a)==this.graph.container&&this.setDisplay("none")}));var a=this.graph.click;this.graph.click=mxUtils.bind(this,function(b){a.apply(this.graph,arguments),null==this.currentState||this.graph.isCellSelected(this.currentState.cell)||!mxEvent.isTouchEvent(b.getEvent())||this.graph.model.isVertex(b.getCell())||this.reset()});var b=!1;this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(a,c){b=!1;var d=c.getEvent();if(this.isResetEvent(d))this.reset();else if(!this.isActive()){var e=this.getState(c.getState());null==e&&mxEvent.isTouchEvent(d)||this.update(e)}this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(a,c){var d=c.getEvent();this.isResetEvent(d)?this.reset():this.graph.isMouseDown||mxEvent.isTouchEvent(d)||this.update(this.getState(c.getState()),c.getGraphX(),c.getGraphY()),null!=this.graph.connectionHandler&&null!=this.graph.connectionHandler.shape&&(b=!0)}),mouseUp:mxUtils.bind(this,function(a,c){var d=c.getEvent();this.isResetEvent(d)?this.reset():this.isActive()&&null!=this.mouseDownPoint&&Math.abs(c.getGraphX()-this.mouseDownPoint.x)<this.graph.tolerance&&Math.abs(c.getGraphY()-this.mouseDownPoint.y)<this.graph.tolerance?b||this.click(this.currentState,this.getDirection(),c):this.isActive()?1==this.graph.getSelectionCount()&&this.graph.model.isEdge(this.graph.getSelectionCell())?this.reset():this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(c.getGraphX(),c.getGraphY())))):mxEvent.isTouchEvent(d)||null!=this.bbox&&mxUtils.contains(this.bbox,c.getGraphX(),c.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(d)||this.reset(),b=!1,this.resetActiveArrow()})})},HoverIcons.prototype.isResetEvent=function(a,b){return mxEvent.isAltDown(a)||null==this.activeArrow&&mxEvent.isShiftDown(a)||mxEvent.isMetaDown(a)||mxEvent.isPopupTrigger(a)&&!mxEvent.isControlDown(a)},HoverIcons.prototype.createArrow=function(a,b){var c=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?(c=document.createElement(mxClient.VML_PREFIX+":image"),c.setAttribute("src",a.src),c.style.borderStyle="none"):(c=document.createElement("div"),c.style.backgroundImage="url("+a.src+")",c.style.backgroundPosition="center",c.style.backgroundRepeat="no-repeat"),c.style.width=a.width+4+"px",c.style.height=a.height+4+"px",c.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(c=mxUtils.createImage(a.src),c.style.width=a.width+"px",c.style.height=a.height+"px"),null!=b&&c.setAttribute("title",b),c.style.position="absolute",c.style.cursor="crosshair",mxEvent.addGestureListeners(c,mxUtils.bind(this,function(a){null==this.currentState||this.isResetEvent(a)||(this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(a),mxEvent.getClientY(a)),this.drag(a,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=c,this.setDisplay("none"),mxEvent.consume(a))})),mxEvent.redirectMouseEvents(c,this.graph,this.currentState),mxEvent.addListener(c,"mouseenter",mxUtils.bind(this,function(a){mxEvent.isMouseEvent(a)&&(null!=this.activeArrow&&this.activeArrow!=c&&mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils.setOpacity(c,100),this.activeArrow=c)})),mxEvent.addListener(c,"mouseleave",mxUtils.bind(this,function(a){this.graph.isMouseDown||this.resetActiveArrow()})),c},HoverIcons.prototype.resetActiveArrow=function(){null!=this.activeArrow&&(mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)},HoverIcons.prototype.getDirection=function(){var a=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?a=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?a=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(a=mxConstants.DIRECTION_WEST),a},HoverIcons.prototype.visitNodes=function(a){for(var b=0;b<this.elts.length;b++)null!=this.elts[b]&&a(this.elts[b])},HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(a){null!=a.parentNode&&a.parentNode.removeChild(a)})},HoverIcons.prototype.setDisplay=function(a){this.visitNodes(function(b){b.style.display=a})},HoverIcons.prototype.isActive=function(){return null!=this.activeArrow&&null!=this.currentState},HoverIcons.prototype.drag=function(a,b,c){if(this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),null!=this.currentState){this.graph.connectionHandler.start(this.currentState,b,c),this.graph.isMouseTrigger=mxEvent.isMouseEvent(a),this.graph.isMouseDown=!0;var d=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);null!=d&&d.setHandlesVisible(!1)}},HoverIcons.prototype.click=function(a,b,c){var d=c.getEvent(),e=c.getGraphX(),f=c.getGraphY(),g=this.graph.view.getState(this.graph.getCellAt(e,f));if(null==g||!this.graph.model.isEdge(g.cell)||mxEvent.isControlDown(d)||g.getVisibleTerminalState(!0)!=a&&g.getVisibleTerminalState(!1)!=a){if(null!=a){var h=this.graph.connectVertex(a.cell,b,this.graph.defaultEdgeLength,d);this.graph.selectCellsForConnectVertex(h,d,this),2==h.length&&this.graph.model.isVertex(h[1])?(this.graph.setSelectionCell(h[1]),mxEvent.isTouchEvent(d)?this.update(this.getState(this.graph.view.getState(h[1]))):this.reset(),this.graph.scrollCellToVisible(h[1])):this.graph.setSelectionCells(h)}}else this.graph.setSelectionCell(g.cell),this.reset();c.consume()},HoverIcons.prototype.reset=function(a){a=null==a||a,a&&null!=this.updateThread&&window.clearTimeout(this.updateThread),this.mouseDownPoint=null,this.currentState=null,this.activeArrow=null,this.removeNodes(),this.bbox=null},HoverIcons.prototype.repaint=function(){if(this.bbox=null,null!=this.currentState){if(this.currentState=this.getState(this.currentState),null!=this.currentState&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var a=mxRectangle.fromRectangle(this.currentState);null!=this.currentState.shape&&null!=this.currentState.shape.boundingBox&&(a=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)),a.grow(this.graph.tolerance),a.grow(this.arrowSpacing);var b=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);if(null!=b&&(a.x-=b.horizontalOffset/2,a.y-=b.verticalOffset/2,a.width+=b.horizontalOffset,a.height+=b.verticalOffset,null!=b.rotationShape&&null!=b.rotationShape.node&&"hidden"!=b.rotationShape.node.style.visibility&&"none"!=b.rotationShape.node.style.display&&null!=b.rotationShape.boundingBox&&a.add(b.rotationShape.boundingBox)),this.arrowUp.style.left=Math.round(this.currentState.getCenterX()-this.triangleUp.width/2)+"px",this.arrowUp.style.top=Math.round(a.y-this.triangleUp.height)+"px",mxUtils.setOpacity(this.arrowUp,this.inactiveOpacity),this.arrowRight.style.left=Math.round(a.x+a.width)+"px",this.arrowRight.style.top=Math.round(this.currentState.getCenterY()-this.triangleRight.height/2)+"px",mxUtils.setOpacity(this.arrowRight,this.inactiveOpacity),this.arrowDown.style.left=this.arrowUp.style.left,this.arrowDown.style.top=Math.round(a.y+a.height)+"px",mxUtils.setOpacity(this.arrowDown,this.inactiveOpacity),this.arrowLeft.style.left=Math.round(a.x-this.triangleLeft.width)+"px",this.arrowLeft.style.top=this.arrowRight.style.top,mxUtils.setOpacity(this.arrowLeft,this.inactiveOpacity),this.checkCollisions){var c=this.graph.getCellAt(a.x+a.width+this.triangleRight.width/2,this.currentState.getCenterY()),d=this.graph.getCellAt(a.x-this.triangleLeft.width/2,this.currentState.getCenterY()),e=this.graph.getCellAt(this.currentState.getCenterX(),a.y-this.triangleUp.height/2),f=this.graph.getCellAt(this.currentState.getCenterX(),a.y+a.height+this.triangleDown.height/2);null!=c&&c==d&&d==e&&e==f&&(c=null,d=null,e=null,f=null),null==c||this.graph.model.isAncestor(c,this.currentState.cell)?this.arrowRight.style.visibility="visible":this.arrowRight.style.visibility="hidden",null==d||this.graph.model.isAncestor(d,this.currentState.cell)?this.arrowLeft.style.visibility="visible":this.arrowLeft.style.visibility="hidden",null==e||this.graph.model.isAncestor(e,this.currentState.cell)?this.arrowUp.style.visibility="visible":this.arrowUp.style.visibility="hidden",null==f||this.graph.model.isAncestor(f,this.currentState.cell)?this.arrowDown.style.visibility="visible":this.arrowDown.style.visibility="hidden"}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();null!=this.currentState&&(this.bbox=this.computeBoundingBox(),null!=this.bbox&&this.bbox.grow(10))}},HoverIcons.prototype.computeBoundingBox=function(){var a=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(b){if(null!=b.parentNode){var c=new mxRectangle(b.offsetLeft,b.offsetTop,b.offsetWidth,b.offsetHeight);null==a?a=c:a.add(c)}}),a},HoverIcons.prototype.getState=function(a){if(null!=a){var b=a.cell;if(this.graph.getModel().isVertex(b)&&!this.graph.isCellConnectable(b)){var c=this.graph.getModel().getParent(b);this.graph.getModel().isVertex(c)&&this.graph.isCellConnectable(c)&&(b=c)}(this.graph.isCellLocked(b)||this.graph.model.isEdge(b))&&(b=null),a=this.graph.view.getState(b)}return a},HoverIcons.prototype.update=function(a,b,c){if(this.graph.connectionArrowsEnabled){var d=null;this.prev!=a||this.isActive()?(this.startTime=(new Date).getTime(),this.prev=a,d=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=a&&(this.updateThread=window.setTimeout(mxUtils.bind(this,function(){this.isActive()||this.graph.isMouseDown||this.graph.panningHandler.isActive()||(this.prev=a,this.update(a,b,c))}),this.updateDelay+10))):null!=this.startTime&&(d=(new Date).getTime()-this.startTime),this.setDisplay(""),null!=this.currentState&&this.currentState!=a&&d<this.activationDelay&&null!=this.bbox&&!mxUtils.contains(this.bbox,b,c)?this.reset(!1):(null!=this.currentState||d>this.activationDelay)&&this.currentState!=a&&(d>this.updateDelay&&null!=a||null==this.bbox||null==b||null==c||!mxUtils.contains(this.bbox,b,c))&&(null!=a&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(a),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=a&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}else this.reset()},HoverIcons.prototype.setCurrentState=function(a){"eastwest"!=a.style.portConstraint&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=a},function(){var a=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(b,c,d,e){if(null==c||null==b||"1"!=c.style.snapToPoint&&"1"!=b.style.snapToPoint)a.apply(this,arguments);else{c=this.getTerminalPort(b,c,e);var f=this.getNextPoint(b,d,e),g=this.graph.isOrthogonal(b),h=mxUtils.toRadians(Number(c.style[mxConstants.STYLE_ROTATION]||"0")),i=new mxPoint(c.getCenterX(),c.getCenterY());if(0!=h){var j=Math.cos(-h),k=Math.sin(-h);f=mxUtils.getRotatedPoint(f,j,k,i)}var l=parseFloat(b.style[mxConstants.STYLE_PERIMETER_SPACING]||0);l+=parseFloat(b.style[e?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var m=this.getPerimeterPoint(c,f,0==h&&g,l);if(0!=h){var j=Math.cos(h),k=Math.sin(h);m=mxUtils.getRotatedPoint(m,j,k,i)}if(null!=c){for(var n=this.graph.getAllConnectionConstraints(c),o=null,p=null,q=0;q<n.length;q++){var r=this.graph.getConnectionPoint(c,n[q]);if(null!=r){var s=(r.x-m.x)*(r.x-m.x)+(r.y-m.y)*(r.y-m.y);(null==p||s<p)&&(o=r,p=s)}}null!=o&&(m=o)}b.setAbsoluteTerminalPoint(m,e)}};var b=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(a,c,d){var e=b.apply(this,arguments),f=a.getAttribute("placeholders");return"1"==f&&null!=d.state&&(e=d.state.view.graph.replacePlaceholders(d.state.cell,e)),e};var c=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(a){if(null!=a.style&&"undefined"!=typeof pako){var b=mxUtils.getValue(a.style,mxConstants.STYLE_SHAPE,null);if(null!=b&&"stencil("==b.substring(0,8))try{var d=b.substring(8,b.length-1),e=mxUtils.parseXml(a.view.graph.decompress(d));return new mxShape(new mxStencil(e.documentElement))}catch(a){null!=window.console&&console.log("Error in shape: "+a)}}return c.apply(this,arguments)}}(),mxStencilRegistry.libraries={},mxStencilRegistry.dynamicLoading=!0,mxStencilRegistry.packages=[],mxStencilRegistry.getStencil=function(a){var b=mxStencilRegistry.stencils[a];if(null==b&&null==mxCellRenderer.prototype.defaultShapes[a]&&mxStencilRegistry.dynamicLoading){var c=mxStencilRegistry.getBasenameForStencil(a);if(null!=c){var d=mxStencilRegistry.libraries[c];if(null!=d){if(null==mxStencilRegistry.packages[c]){mxStencilRegistry.packages[c]=1;for(var e=0;e<d.length;e++){var f=d[e];if(".xml"==f.toLowerCase().substring(f.length-4,f.length))mxStencilRegistry.loadStencilSet(f,null);else if(".js"==f.toLowerCase().substring(f.length-3,f.length))try{var g=mxUtils.load(f);null!=g&&g.getStatus()>=200&&g.getStatus()<=299&&eval.call(window,g.getText())}catch(a){null!=window.console&&console.log("error in getStencil:",f,a)}}}}else c=c.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+c+".xml",null);b=mxStencilRegistry.stencils[a]}}return b},mxStencilRegistry.getBasenameForStencil=function(a){var b=null;if(null!=a){var c=a.split(".");if(c.length>0&&"mxgraph"==c[0]){b=c[1];for(var d=2;d<c.length-1;d++)b+="/"+c[d]}}return b},mxStencilRegistry.loadStencilSet=function(a,b,c,d){c=null!=c&&c;var e=mxStencilRegistry.packages[a];if(c||null==e){var f=!1;if(null==e)try{if(d){var g=mxUtils.get(a,mxUtils.bind(this,function(c){c.getStatus()>=200&&c.getStatus()<=299&&(e=c.getXml(),mxStencilRegistry.packages[a]=e,f=!0,null!=e&&null!=e.documentElement&&mxStencilRegistry.parseStencilSet(e.documentElement,b,f))}));return}var g=mxUtils.load(a);e=g.getXml(),mxStencilRegistry.packages[a]=e,f=!0}catch(b){null!=window.console&&console.log("error in loadStencilSet:",a,b)}null!=e&&null!=e.documentElement&&mxStencilRegistry.parseStencilSet(e.documentElement,b,f)}},mxStencilRegistry.parseStencilSets=function(a){for(var b=0;b<a.length;b++)mxStencilRegistry.parseStencilSet(mxUtils.parseXml(a[b]).documentElement)},mxStencilRegistry.parseStencilSet=function(a,b,c){if("stencils"==a.nodeName)for(var d=a.firstChild;null!=d;)"shapes"==d.nodeName&&mxStencilRegistry.parseStencilSet(d,b,c),d=d.nextSibling;else{c=null==c||c;var e=a.firstChild,f="",g=a.getAttribute("name");for(null!=g&&(f=g+".");null!=e;){if(e.nodeType==mxConstants.NODETYPE_ELEMENT&&(g=e.getAttribute("name"),null!=g)){f=f.toLowerCase();var h=g.replace(/ /g,"_");if(c&&mxStencilRegistry.addStencil(f+h.toLowerCase(),new mxStencil(e)),null!=b){var i=e.getAttribute("w"),j=e.getAttribute("h");i=null==i?80:parseInt(i,10),j=null==j?80:parseInt(j,10),b(f,h,g,i,j)}}e=e.nextSibling}}},"undefined"!=typeof mxVertexHandler&&!function(){function l(){var a=document.createElement("div");return a.className="geHint",a.style.whiteSpace="nowrap",a.style.position="absolute",a}mxConstants.HANDLE_FILLCOLOR="#99ccff",mxConstants.HANDLE_STROKECOLOR="#0088cf",mxConstants.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants.OUTLINE_COLOR="#00a8ff",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.EDGE_SELECTION_COLOR="#00a8ff",mxConstants.DEFAULT_VALID_COLOR="#00a8ff",mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants.GUIDE_COLOR="#0088cf",mxConstants.HIGHLIGHT_OPACITY=30,mxConstants.HIGHLIGHT_SIZE=8,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGuide.prototype.isEnabledForEvent=function(a){return!mxEvent.isAltDown(a)};var a=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(b){return mxEvent.isControlDown(b)||a.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var a=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return a.opacity=mxConstants.HIGHLIGHT_OPACITY,a},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(a){var b=this.graph.createCurrentEdgeStyle(),c=this.graph.createEdge(null,null,null,null,null,b),d=new mxCellState(this.graph.view,c,this.graph.getCellStyle(c));for(var e in this.graph.currentEdgeStyle)d.style[e]=this.graph.currentEdgeStyle[e];return d};var b=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var a=b.apply(this,arguments);return a.isDashed="1"==this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED],a},mxConnectionHandler.prototype.updatePreview=function(a){};var c=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var a=c.apply(this,arguments),b=a.getCell;return a.getCell=mxUtils.bind(this,function(a){var c=b.apply(this,arguments);return this.error=null,c}),a},Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",html:"1",jettySize:"auto",orthogonalLoop:"1"},Graph.prototype.currentEdgeStyle=Graph.prototype.defaultEdgeStyle,Graph.prototype.currentVertexStyle={},Graph.prototype.createCurrentEdgeStyle=function(){var a="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";";return null!=this.currentEdgeStyle.shape&&(a+="shape="+this.currentEdgeStyle.shape+";"),null!=this.currentEdgeStyle.curved&&(a+="curved="+this.currentEdgeStyle.curved+";"),null!=this.currentEdgeStyle.rounded&&(a+="rounded="+this.currentEdgeStyle.rounded+";"),null!=this.currentEdgeStyle.comic&&(a+="comic="+this.currentEdgeStyle.comic+";"),"elbowEdgeStyle"==this.currentEdgeStyle.edgeStyle&&null!=this.currentEdgeStyle.elbow&&(a+="elbow="+this.currentEdgeStyle.elbow+";"),a+=null!=this.currentEdgeStyle.html?"html="+this.currentEdgeStyle.html+";":"html=1;"},Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph.prototype.loadStylesheet=function(){var a=null!=this.themes?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement():null;if(null!=a){var b=new mxCodec(a.ownerDocument);b.decode(a,this.getStylesheet())}},Graph.prototype.getAllConnectionConstraints=function(a,b){if(null!=a){var c=mxUtils.getValue(a.style,"points",null);if(null!=c){var d=[];try{for(var e=JSON.parse(c),f=0;f<e.length;f++){var g=e[f];d.push(new mxConnectionConstraint(new mxPoint(g[0],g[1]),!(g.length>2)||"0"!=g[2]))}}catch(a){}return d}if(null!=a.shape)if(null!=a.shape.stencil){if(null!=a.shape.stencil)return a.shape.stencil.constraints}else if(null!=a.shape.constraints)return a.shape.constraints}return null},Graph.prototype.flipEdge=function(a){if(null!=a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);if(null!=c){var d=mxUtils.getValue(c,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL),e=d==mxConstants.ELBOW_HORIZONTAL?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL;this.setCellStyles(mxConstants.STYLE_ELBOW,e,[a])}}},Graph.prototype.isValidRoot=function(a){for(var b=this.model.getChildCount(a),c=0,d=0;d<b;d++){var e=this.model.getChildAt(a,d);if(this.model.isVertex(e)){var f=this.getCellGeometry(e);null==f||f.relative||c++}}return c>0||this.isContainer(a)},Graph.prototype.isValidDropTarget=function(a){var b=this.view.getState(a),c=null!=b?b.style:this.getCellStyle(a);return"1"!=mxUtils.getValue(c,"part","0")&&(this.isContainer(a)||mxGraph.prototype.isValidDropTarget.apply(this,arguments)&&"0"!=mxUtils.getValue(c,"dropTarget","1"))},Graph.prototype.createGroupCell=function(){var a=mxGraph.prototype.createGroupCell.apply(this,arguments);return a.setStyle("group"),a},Graph.prototype.isExtendParentsOnAdd=function(a){var b=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if(b&&null!=a&&null!=this.layoutManager){var c=this.model.getParent(a);if(null!=c){var d=this.layoutManager.getLayout(c);null!=d&&d.constructor==mxStackLayout&&(b=!1)}}return b},Graph.prototype.getPreferredSizeForCell=function(a){var b=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return null!=b&&(b.width+=10,b.height+=4,this.gridEnabled&&(b.width=this.snap(b.width),b.height=this.snap(b.height))),b},Graph.prototype.turnShapes=function(a){var b=this.getModel(),c=[];b.beginUpdate();try{for(var d=0;d<a.length;d++){var e=a[d];if(b.isEdge(e)){var f=b.getTerminal(e,!0),g=b.getTerminal(e,!1);b.setTerminal(e,g,!0),b.setTerminal(e,f,!1);var h=b.getGeometry(e);if(null!=h){h=h.clone(),null!=h.points&&h.points.reverse();var i=h.getTerminalPoint(!0),j=h.getTerminalPoint(!1);h.setTerminalPoint(i,!1),h.setTerminalPoint(j,!0),b.setGeometry(e,h);var k=this.view.getState(e),l=this.view.getState(f),m=this.view.getState(g);if(null!=k){var n=null!=l?this.getConnectionConstraint(k,l,!0):null,o=null!=m?this.getConnectionConstraint(k,m,!1):null;this.setConnectionConstraint(e,f,!0,o),this.setConnectionConstraint(e,g,!1,n)}c.push(e)}}else if(b.isVertex(e)){var h=this.getCellGeometry(e);if(null!=h){
  h=h.clone(),h.x+=h.width/2-h.height/2,h.y+=h.height/2-h.width/2;var p=h.width;h.width=h.height,h.height=p,b.setGeometry(e,h);var q=this.view.getState(e);if(null!=q){var r=q.style[mxConstants.STYLE_DIRECTION]||"east";"east"==r?r="south":"south"==r?r="west":"west"==r?r="north":"north"==r&&(r="east"),this.setCellStyles(mxConstants.STYLE_DIRECTION,r,[e])}c.push(e)}}}}finally{b.endUpdate()}return c},Graph.prototype.processChange=function(a){if(mxGraph.prototype.processChange.apply(this,arguments),a instanceof mxValueChange&&null!=a.cell.value&&"object"==typeof a.cell.value){var b=this.model.getDescendants(a.cell);if(b.length>0)for(var c=0;c<b.length;c++)this.isReplacePlaceholders(b[c])&&this.view.invalidate(b[c],!1,!1)}},Graph.prototype.cellLabelChanged=function(a,b,c){b=this.zapGremlins(b),this.model.beginUpdate();try{if(null!=a.value&&"object"==typeof a.value){if(this.isReplacePlaceholders(a)&&null!=a.getAttribute("placeholder"))for(var d=a.getAttribute("placeholder"),e=a;null!=e;){if(e==this.model.getRoot()||null!=e.value&&"object"==typeof e.value&&e.hasAttribute(d)){this.setAttributeForCell(e,d,b);break}e=this.model.getParent(e)}var f=a.value.cloneNode(!0);f.setAttribute("label",b),b=f}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph.prototype.removeCellsAfterUngroup=function(a){for(var b=[],c=0;c<a.length;c++)if(this.isCellDeletable(a[c])){var d=this.view.getState(a[c]);if(null!=d){var e=mxUtils.getValue(d.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),f=mxUtils.getValue(d.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);e==mxConstants.NONE&&f==mxConstants.NONE&&b.push(a[c])}}a=b,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph.prototype.setLinkForCell=function(a,b){this.setAttributeForCell(a,"link",b)},Graph.prototype.setTooltipForCell=function(a,b){this.setAttributeForCell(a,"tooltip",b)},Graph.prototype.setAttributeForCell=function(a,b,c){var d=null;if(null!=a.value&&"object"==typeof a.value)d=a.value.cloneNode(!0);else{var e=mxUtils.createXmlDocument();d=e.createElement("UserObject"),d.setAttribute("label",a.value||"")}null!=c&&c.length>0?d.setAttribute(b,c):d.removeAttribute(b),this.model.setValue(a,d)},Graph.prototype.getDropTarget=function(a,b,c,d){this.getModel();if(mxEvent.isAltDown(b))return null;for(var f=0;f<a.length;f++)if(this.model.isEdge(this.model.getParent(a[f])))return null;return mxGraph.prototype.getDropTarget.apply(this,arguments)},Graph.prototype.click=function(a){mxGraph.prototype.click.call(this,a),this.firstClickState=a.getState(),this.firstClickSource=a.getSource()},Graph.prototype.dblClick=function(a,b){if(this.isEnabled()){var c=mxUtils.convertPoint(this.container,mxEvent.getClientX(a),mxEvent.getClientY(a));if(null!=a&&!this.model.isVertex(b)){var d=this.model.isEdge(b)?this.view.getState(b):null,e=mxEvent.getSource(a);this.firstClickState==d&&this.firstClickSource==e&&(null!=d&&null!=d.text&&null!=d.text.node&&(mxUtils.contains(d.text.boundingBox,c.x,c.y)||mxUtils.isAncestorNode(d.text.node,mxEvent.getSource(a)))||(null==d&&!this.isCellLocked(this.getDefaultParent())||null!=d&&!this.isCellLocked(d.cell))&&(null!=d||mxClient.IS_VML&&e==this.view.getCanvas()||mxClient.IS_SVG&&e==this.view.getCanvas().ownerSVGElement)&&(b=this.addText(c.x,c.y,d)))}mxGraph.prototype.dblClick.call(this,a,b)}},Graph.prototype.getInsertPoint=function(){var a=this.getGridSize(),b=this.container.scrollLeft/this.view.scale-this.view.translate.x,c=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible){var d=this.getPageLayout(),e=this.getPageSize();b=Math.max(b,d.x*e.width),c=Math.max(c,d.y*e.height)}return new mxPoint(this.snap(b+a),this.snap(c+a))},Graph.prototype.getFreeInsertPoint=function(){var a=this.view,b=this.getGraphBounds(),c=this.getInsertPoint(),d=this.snap(Math.round(Math.max(c.x,b.x/a.scale-a.translate.x+(0==b.width?this.gridSize:0)))),e=this.snap(Math.round(Math.max(c.y,(b.y+b.height)/a.scale-a.translate.y+(0==b.height?1:2)*this.gridSize)));return new mxPoint(d,e)},Graph.prototype.isMouseInsertPoint=function(){return!1},Graph.prototype.addText=function(a,b,c){var d=new mxCell;if(d.value="Text",d.style="text;html=1;resizable=0;points=[];",d.geometry=new mxGeometry(0,0,0,0),d.vertex=!0,null!=c){d.style+="align=center;verticalAlign=middle;labelBackgroundColor=#ffffff;",d.geometry.relative=!0,d.connectable=!1;var e=this.view.getRelativePoint(c,a,b);d.geometry.x=Math.round(1e4*e.x)/1e4,d.geometry.y=Math.round(e.y),d.geometry.offset=new mxPoint(0,0),e=this.view.getPoint(c,d.geometry);var f=this.view.scale;d.geometry.offset=new mxPoint(Math.round((a-e.x)/f),Math.round((b-e.y)/f))}else{d.style+="autosize=1;align=left;verticalAlign=top;spacingTop=-4;";var g=this.view.translate;d.geometry.width=40,d.geometry.height=20,d.geometry.x=Math.round(a/this.view.scale)-g.x,d.geometry.y=Math.round(b/this.view.scale)-g.y}this.getModel().beginUpdate();try{this.addCells([d],null!=c?c.cell:null),this.fireEvent(new mxEventObject("textInserted","cells",[d])),this.autoSizeCell(d)}finally{this.getModel().endUpdate()}return d},Graph.prototype.getAbsoluteUrl=function(a){return null!=a&&this.isRelativeUrl(a)&&(a="#"==a.charAt(0)?this.baseUrl+a:"/"==a.charAt(0)?this.domainUrl+a:this.domainPathUrl+a),a},Graph.prototype.isExternalProtocol=function(a){return"mailto:"===a.substring(0,7)},Graph.prototype.isBlankLink=function(a){return!this.isExternalProtocol(a)&&("blank"===this.linkPolicy||"self"!==this.linkPolicy&&!this.isRelativeUrl(a)&&a.substring(0,this.domainUrl.length)!==this.domainUrl)},Graph.prototype.isRelativeUrl=function(a){return null!=a&&!this.absoluteUrlPattern.test(a)&&"data:"!==a.substring(0,5)&&!this.isExternalProtocol(a)},Graph.prototype.addClickHandler=function(a,b,c){var d=mxUtils.bind(this,function(){var a=this.container.getElementsByTagName("a");if(null!=a)for(var c=0;c<a.length;c++){var d=this.getAbsoluteUrl(a[c].getAttribute("href"));null!=d&&(a[c].setAttribute("href",d),null!=b&&mxEvent.addListener(a[c],"click",b))}});this.model.addListener(mxEvent.CHANGE,d),d();var e=this.container.style.cursor,f=this.getTolerance(),g=this,h={currentState:null,currentLink:null,highlight:null!=a&&""!=a&&a!=mxConstants.NONE?new mxCellHighlight(g,a,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(a){var b=g.view.getState(a.getCell());b!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=b,null!=this.currentState&&this.activate(this.currentState))},mouseDown:function(a,b){this.startX=b.getGraphX(),this.startY=b.getGraphY(),this.scrollLeft=g.container.scrollLeft,this.scrollTop=g.container.scrollTop,null==this.currentLink&&"auto"==g.container.style.overflow&&(g.container.style.cursor="move"),this.updateCurrentState(b)},mouseMove:function(a,b){if(g.isMouseDown){if(null!=this.currentLink){var c=Math.abs(this.startX-b.getGraphX()),d=Math.abs(this.startY-b.getGraphY());(c>f||d>f)&&this.clear()}}else if("a"==b.getSource().nodeName.toLowerCase())this.clear();else{if(null!=this.currentState&&(b.getState()==this.currentState||null==b.getState())&&g.intersects(this.currentState,b.getGraphX(),b.getGraphY()))return;this.updateCurrentState(b)}},mouseUp:function(a,d){var e=d.getSource();if("a"!=e.nodeName.toLowerCase()&&!d.isConsumed()&&(null==d.getState()||!d.isSource(d.getState().control))&&(mxEvent.isLeftMouseButton(d.getEvent())||mxEvent.isTouchEvent(d.getEvent())))if(null!=this.currentLink){var h=g.isBlankLink(this.currentLink);h||null==b||b(d.getEvent());var i=h?g.linkTarget:"_top";"_self"==i&&window!=window.top?window.location.href=this.currentLink:window.open(this.currentLink,i),d.consume()}else null!=c&&!d.isConsumed()&&Math.abs(this.scrollLeft-g.container.scrollLeft)<f&&Math.abs(this.scrollTop-g.container.scrollTop)<f&&Math.abs(this.startX-d.getGraphX())<f&&Math.abs(this.startY-d.getGraphY())<f&&c(d.getEvent());this.clear()},activate:function(a){this.currentLink=g.getAbsoluteUrl(g.getLinkForCell(a.cell)),null!=this.currentLink&&(g.container.style.cursor="pointer",null!=this.highlight&&this.highlight.highlight(a))},clear:function(){null!=g.container&&(g.container.style.cursor=e),this.currentState=null,this.currentLink=null,null!=this.highlight&&this.highlight.hide()}};g.click=function(a){},g.addMouseListener(h),mxEvent.addListener(document,"mouseleave",function(a){h.clear()})},Graph.prototype.duplicateCells=function(a,b){a=null!=a?a:this.getSelectionCells(),b=null==b||b,a=this.model.getTopmostCells(a);var c=this.getModel(),d=this.gridSize,e=[];c.beginUpdate();try{for(var f=this.cloneCells(a,!1),g=0;g<a.length;g++){var h=c.getParent(a[g]),i=this.moveCells([f[g]],d,d,!1,h)[0];if(e.push(i),b)c.add(h,f[g]);else{var j=h.getIndex(a[g]);c.add(h,f[g],j+1)}}}finally{c.endUpdate()}return e},Graph.prototype.insertImage=function(a,b,c){if(null!=a){for(var d=this.cellEditor.textarea.getElementsByTagName("img"),e=[],f=0;f<d.length;f++)e.push(d[f]);document.execCommand("insertimage",!1,a);var g=this.cellEditor.textarea.getElementsByTagName("img");if(g.length==e.length+1)for(var f=g.length-1;f>=0;f--)if(0==f||g[f]!=e[f-1]){g[f].setAttribute("width",b),g[f].setAttribute("height",c);break}}},Graph.prototype.insertLink=function(a){0==a.length?document.execCommand("unlink",!1):document.execCommand("createlink",!1,mxUtils.trim(a))},Graph.prototype.isCellResizable=function(a){var b=mxGraph.prototype.isCellResizable.apply(this,arguments),c=this.view.getState(a),d=null!=c?c.style:this.getCellStyle(a);return b||"0"!=mxUtils.getValue(d,mxConstants.STYLE_RESIZABLE,"1")&&"wrap"==d[mxConstants.STYLE_WHITE_SPACE]},Graph.prototype.distributeCells=function(a,b){if(null==b&&(b=this.getSelectionCells()),null!=b&&b.length>1){for(var c=[],d=null,e=null,f=0;f<b.length;f++)if(this.getModel().isVertex(b[f])){var g=this.view.getState(b[f]);if(null!=g){var h=a?g.getCenterX():g.getCenterY();d=null!=d?Math.max(d,h):h,e=null!=e?Math.min(e,h):h,c.push(g)}}if(c.length>2){c.sort(function(b,c){return a?b.x-c.x:b.y-c.y});var i=this.view.translate,j=this.view.scale;e=e/j-(a?i.x:i.y),d=d/j-(a?i.x:i.y),this.getModel().beginUpdate();try{for(var k=(d-e)/(c.length-1),l=e,f=1;f<c.length-1;f++){var m=this.getCellGeometry(c[f].cell);l+=k,null!=m&&(m=m.clone(),a?m.x=Math.round(l-m.width/2):m.y=Math.round(l-m.height/2),this.getModel().setGeometry(c[f].cell,m))}}finally{this.getModel().endUpdate()}}}return b},Graph.prototype.isCloneEvent=function(a){return mxClient.IS_MAC&&mxEvent.isMetaDown(a)||mxEvent.isControlDown(a)},Graph.prototype.encodeCells=function(a){for(var b=this.cloneCells(a),c=0;c<b.length;c++){var d=this.view.getState(a[c]);if(null!=d){var e=this.getCellGeometry(b[c]);null!=e&&e.relative&&(e.relative=!1,e.x=d.x/d.view.scale-d.view.translate.x,e.y=d.y/d.view.scale-d.view.translate.y)}}for(var f=new mxCodec,g=new mxGraphModel,h=g.getChildAt(g.getRoot(),0),c=0;c<a.length;c++)g.add(h,b[c]);return f.encode(g)},Graph.prototype.createSvgImageExport=function(){var a=new mxImageExport;return a.getLinkForCellState=mxUtils.bind(this,function(a,b){return this.getLinkForCell(a.cell)}),a},Graph.prototype.getSvg=function(a,b,c,d,e,f,g){b=null!=b?b:1,c=null!=c?c:0,e=null==e||e,f=null==f||f,g=null==g||g;var h=f||d?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(null==h)throw Error(mxResources.get("drawingEmpty"));var i=this.view.scale,j=mxUtils.createXmlDocument(),k=null!=j.createElementNS?j.createElementNS(mxConstants.NS_SVG,"svg"):j.createElement("svg");null!=a&&(null!=k.style?k.style.backgroundColor=a:k.setAttribute("style","background-color:"+a)),null==j.createElementNS?(k.setAttribute("xmlns",mxConstants.NS_SVG),k.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)):k.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK);var l=b/i;k.setAttribute("width",Math.ceil(h.width*l)+2*c+"px"),k.setAttribute("height",Math.ceil(h.height*l)+2*c+"px"),k.setAttribute("version","1.1");var m=k;if(e){var n=null!=j.createElementNS?j.createElementNS(mxConstants.NS_SVG,"g"):j.createElement("g");n.setAttribute("transform","translate(0.5,0.5)"),k.appendChild(n),j.appendChild(k),m=n}else j.appendChild(k);var o=this.createSvgCanvas(m);o.foOffset=e?-.5:0,o.textOffset=e?-.5:0,o.imageOffset=e?-.5:0,o.translate(Math.floor((c/b-h.x)/i),Math.floor((c/b-h.y)/i));var p=o.createAlternateContent;o.createAlternateContent=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this.state;if(null!=this.foAltText&&(0==d||0!=n.fontSize&&f.length<5*d/n.fontSize)){var o=this.createElement("text");return o.setAttribute("x",Math.round(d/2)),o.setAttribute("y",Math.round((e+n.fontSize)/2)),o.setAttribute("fill",n.fontColor||"black"),o.setAttribute("text-anchor","middle"),o.setAttribute("font-size",Math.round(n.fontSize)+"px"),o.setAttribute("font-family",n.fontFamily),(n.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&o.setAttribute("font-weight","bold"),(n.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&o.setAttribute("font-style","italic"),(n.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&o.setAttribute("text-decoration","underline"),mxUtils.write(o,f),o}return p.apply(this,arguments)};var q=this.backgroundImage;if(null!=q){var r=i/b,s=this.view.translate,t=new mxRectangle(s.x*r,s.y*r,q.width*r,q.height*r);mxUtils.intersects(h,t)&&o.image(s.x,s.y,q.width,q.height,q.src,!0)}o.scale(l),o.textEnabled=g;var u=this.createSvgImageExport(),v=u.drawCellState;return u.drawCellState=function(a,b){(f||a.view.graph.isCellSelected(a.cell))&&v.apply(this,arguments)},u.drawState(this.getView().getState(this.model.root),o),k},Graph.prototype.createSvgCanvas=function(a){return new mxSvgCanvas2D(a)},Graph.prototype.getSelectedElement=function(){var a=null;if(window.getSelection){var b=window.getSelection();if(b.getRangeAt&&b.rangeCount){var c=b.getRangeAt(0);a=c.commonAncestorContainer}}else document.selection&&(a=document.selection.createRange().parentElement());return a},Graph.prototype.getParentByName=function(a,b,c){for(;null!=a;){if(a.nodeName==b)return a;if(a==c)return null;a=a.parentNode}return a},Graph.prototype.selectNode=function(a){var b=null;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){var c=document.createRange();c.selectNode(a),b.removeAllRanges(),b.addRange(c)}}else if((b=document.selection)&&"Control"!=b.type){var d=b.createRange();d.collapse(!0);var c=b.createRange();c.setEndPoint("StartToStart",d),c.select()}},Graph.prototype.insertRow=function(a,b){for(var c=a.tBodies[0],d=c.rows.length>0?c.rows[0].cells.length:1,e=c.insertRow(b),f=0;f<d;f++)mxUtils.br(e.insertCell(-1));return e.cells[0]},Graph.prototype.deleteRow=function(a,b){a.tBodies[0].deleteRow(b)},Graph.prototype.insertColumn=function(a,b){var c=a.tHead;if(null!=c)for(var d=0;d<c.rows.length;d++){var e=document.createElement("th");c.rows[d].appendChild(e),mxUtils.br(e)}for(var f=a.tBodies[0],g=0;g<f.rows.length;g++){var h=f.rows[g].insertCell(b);mxUtils.br(h)}return f.rows[0].cells[b>=0?b:f.rows[0].cells.length-1]},Graph.prototype.deleteColumn=function(a,b){if(b>=0)for(var c=a.tBodies[0],d=c.rows,e=0;e<d.length;e++)d[e].cells.length>b&&d[e].deleteCell(b)},Graph.prototype.pasteHtmlAtCaret=function(a){var b,c;if(window.getSelection){if(b=window.getSelection(),b.getRangeAt&&b.rangeCount){c=b.getRangeAt(0),c.deleteContents();var d=document.createElement("div");d.innerHTML=a;for(var f,e=document.createDocumentFragment();f=d.firstChild;)lastNode=e.appendChild(f);c.insertNode(e)}}else(b=document.selection)&&"Control"!=b.type&&b.createRange().pasteHTML(a)},Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first},this.addListener(mxEvent.START_EDITING,function(a,b){this.popupMenuHandler.hideMenu()});var a=this.updateMouseEvent;this.updateMouseEvent=function(b){if(b=a.apply(this,arguments),mxEvent.isTouchEvent(b.getEvent())&&null==b.getState()){var c=this.getCellAt(b.graphX,b.graphY);null!=c&&this.isSwimlane(c)&&this.hitsSwimlaneContent(c,b.graphX,b.graphY)?c=null:(b.state=this.view.getState(c),null!=b.state&&null!=b.state.shape&&(this.container.style.cursor=b.state.shape.node.style.cursor))}return null==b.getState()&&this.isEnabled()&&(this.container.style.cursor="default"),b};var b=!1,c=!1,d=!1,e=this.fireMouseEvent;this.fireMouseEvent=function(a,f,g){a==mxEvent.MOUSE_DOWN&&(f=this.updateMouseEvent(f),b=this.isCellSelected(f.getCell()),c=this.isSelectionEmpty(),d=this.popupMenuHandler.isMenuShowing()),e.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(a,e){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==e.getState()||!e.isSource(e.getState().control))&&(this.popupMenuHandler.popupTrigger||!d&&!mxEvent.isMouseEvent(e.getEvent())&&(c&&null==e.getCell()&&this.isSelectionEmpty()||b&&this.isCellSelected(e.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var a=this.graph.view.getState(this.editingCell);return null!=a&&1==a.style.html},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount){for(var a=[],b=0,c=sel.rangeCount;b<c;++b)a.push(sel.getRangeAt(b));return a}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(a){try{if(a)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var b=0,c=a.length;b<c;++b)sel.addRange(a[b])}else document.selection&&a.select&&a.select()}catch(a){}};var d=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(a){null!=a.text&&(a.text.replaceLinefeeds="0"!=mxUtils.getValue(a.style,"nl2Br","1")),d.apply(this,arguments)};var e=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(a,b){this.isKeepFocusEvent(a)||!mxEvent.isAltDown(a.getEvent())?e.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(a){var b=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return b},mxCellEditor.prototype.escapeCancelsEditing=!1;var f=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(a,b){f.apply(this,arguments);var c=this.graph.view.getState(a);null!=c&&1==c.style.html?this.textarea.className="mxCellEditor geContentEditable":this.textarea.className="mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(a);var d=this.graph.getModel().getParent(a),e=this.graph.getCellGeometry(a);this.graph.getModel().isEdge(d)&&null!=e&&e.relative||this.graph.getModel().isEdge(a)?mxClient.IS_QUIRKS?this.textarea.style.border="gray dotted 1px":mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?this.textarea.style.outline="gray dotted 1px":this.textarea.style.outline="":mxClient.IS_QUIRKS&&(this.textarea.style.outline="none",this.textarea.style.border="")};var g=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(a){function b(a,c){c.originalNode=a,a=a.firstChild;for(var d=c.firstChild;null!=a&&null!=d;)b(a,d),a=a.nextSibling,d=d.nextSibling;return c}function c(a,b){if(null!=a)if(b.originalNode!=a)d(a);else for(a=a.firstChild,b=b.firstChild;null!=a;){var e=a.nextSibling;null==b?d(a):(c(a,b),b=b.nextSibling),a=e}}function d(a){for(var b=a.firstChild;null!=b;){var c=b.nextSibling;d(b),b=c}1==a.nodeType&&("BR"===a.nodeName||null!=a.firstChild)||3==a.nodeType&&0!=mxUtils.trim(mxUtils.getTextContent(a)).length?(3==a.nodeType&&mxUtils.setTextContent(a,mxUtils.getTextContent(a).replace(/\n|\r/g,"")),1==a.nodeType&&(a.removeAttribute("style"),a.removeAttribute("class"),a.removeAttribute("width"),a.removeAttribute("cellpadding"),a.removeAttribute("cellspacing"),a.removeAttribute("border"))):a.parentNode.removeChild(a)}g.apply(this,arguments),mxClient.IS_QUIRKS||7===document.documentMode||8===document.documentMode||mxEvent.addListener(this.textarea,"paste",mxUtils.bind(this,function(a){var d=b(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils.bind(this,function(){c(this.textarea,d)}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var a=this.graph.view.getState(this.editingCell),b=null!=a&&"0"!=mxUtils.getValue(a.style,"nl2Br","1"),c=this.saveSelection();if(this.codeViewMode){var d=mxUtils.extractTextWithWhitespace(this.textarea.childNodes);d.length>0&&"\n"==d.charAt(d.length-1)&&(d=d.substring(0,d.length-1)),d=this.graph.sanitizeHtml(b?d.replace(/\n/g,"<br/>"):d,!0),this.textarea.className="mxCellEditor geContentEditable";var e=mxUtils.getValue(a.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),f=mxUtils.getValue(a.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),g=mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),h=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,i=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,j=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.textDecoration=j?"underline":"",this.textarea.style.fontWeight=h?"bold":"normal",this.textarea.style.fontStyle=i?"italic":"",this.textarea.style.fontFamily=f,this.textarea.style.textAlign=g,this.textarea.style.padding="0px",this.textarea.innerHTML!=d&&(this.textarea.innerHTML=d,0==this.textarea.innerHTML.length&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0)),this.codeViewMode=!1}else{this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML="");var d=mxUtils.htmlEntities(this.textarea.innerHTML);mxClient.IS_QUIRKS||8==document.documentMode||(d=mxUtils.replaceTrailingNewlines(d,"<div><br></div>")),d=this.graph.sanitizeHtml(b?d.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):d,!0),this.textarea.className="mxCellEditor mxPlainTextEditor";var e=mxConstants.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(e*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(e)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=d&&(this.textarea.innerHTML=d),this.codeViewMode=!0}this.textarea.focus(),null!=this.switchSelectionState&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=c,this.resize()};var h=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(a,b){if(null!=this.textarea){var a=this.graph.getView().getState(this.editingCell);if(this.codeViewMode&&null!=a){var c=a.view.scale;if(this.bounds=mxRectangle.fromRectangle(a),0==this.bounds.width&&0==this.bounds.height){this.bounds.width=160*c,this.bounds.height=60*c;var d=null!=a.text?a.text.margin:null;null==d&&(d=mxUtils.getAlignmentAsPoint(mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(a.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),this.bounds.x+=d.x*this.bounds.width,this.bounds.y+=d.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/c)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/c)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/c)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*c),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/c)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*c),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxClient.IS_VML?this.textarea.style.zoom=c:mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+c+","+c+")")}else this.textarea.style.height="",this.textarea.style.overflow="",h.apply(this,arguments)}},mxCellEditorGetInitialValue=mxCellEditor.prototype.getInitialValue,mxCellEditor.prototype.getInitialValue=function(a,b){if("0"==mxUtils.getValue(a.style,"html","0"))return mxCellEditorGetInitialValue.apply(this,arguments);var c=this.graph.getEditingValue(a.cell,b);return"1"==mxUtils.getValue(a.style,"nl2Br","1")&&(c=c.replace(/\n/g,"<br/>")),c=this.graph.sanitizeHtml(c,!0)},mxCellEditorGetCurrentValue=mxCellEditor.prototype.getCurrentValue,mxCellEditor.prototype.getCurrentValue=function(a){if("0"==mxUtils.getValue(a.style,"html","0"))return mxCellEditorGetCurrentValue.apply(this,arguments);var b=this.graph.sanitizeHtml(this.textarea.innerHTML,!0);return b="1"==mxUtils.getValue(a.style,"nl2Br","1")?b.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):b.replace(/\r\n/g,"").replace(/\n/g,"")};var i=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(a){this.codeViewMode&&this.toggleViewMode(),i.apply(this,arguments);try{this.graph.container.focus()}catch(a){}};var j=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(a,b){this.graph.getModel().beginUpdate();try{if(j.apply(this,arguments),this.graph.isCellDeletable(a.cell)){var c=mxUtils.getValue(a.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),d=mxUtils.getValue(a.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);""==mxUtils.trim(b||"")&&c==mxConstants.NONE&&d==mxConstants.NONE&&this.graph.removeCells([a.cell],!1)}}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(a){var b=null;if(this.graph.getModel().isEdge(a.cell)||this.graph.getModel().isEdge(this.graph.getModel().getParent(a.cell))){var b=mxUtils.getValue(a.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null);b==mxConstants.NONE&&(b=null)}return b},mxCellEditor.prototype.getMinimumSize=function(a){var b=this.graph.getView().scale;return new mxRectangle(0,0,null==a.text?30:a.text.size*b+20,30)};var k=mxGraphHandler.prototype.moveCells;mxGraphHandler.prototype.moveCells=function(a,b,c,d,e,f){mxEvent.isAltDown(f)&&(e=null),k.apply(this,arguments)},mxGraphHandler.prototype.updateHint=function(a){if(null!=this.shape){null==this.hint&&(this.hint=l(),this.graph.container.appendChild(this.hint));var b=this.graph.view.translate,c=this.graph.view.scale,d=this.roundLength((this.bounds.x+this.currentDx)/c-b.x),e=this.roundLength((this.bounds.y+this.currentDy)/c-b.y);this.hint.innerHTML=d+", "+e,this.hint.style.left=this.shape.bounds.x+Math.round((this.shape.bounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.shape.bounds.y+this.shape.bounds.height+12+"px"}},mxGraphHandler.prototype.removeHint=function(){null!=this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)},mxVertexHandler.prototype.isRecursiveResize=function(a,b){return!this.graph.isSwimlane(a.cell)&&this.graph.model.getChildCount(a.cell)>0&&!mxEvent.isControlDown(b.getEvent())&&!this.graph.isCellCollapsed(a.cell)&&"1"==mxUtils.getValue(a.style,"recursiveResize","1")&&null==mxUtils.getValue(a.style,"childLayout",null)},mxVertexHandler.prototype.isCenteredEvent=function(a,b){return!(!this.graph.isSwimlane(a.cell)&&this.graph.model.getChildCount(a.cell)>0&&!this.graph.isCellCollapsed(a.cell)&&"1"==mxUtils.getValue(a.style,"recursiveResize","1")&&null==mxUtils.getValue(a.style,"childLayout",null))&&mxEvent.isControlDown(b.getEvent())||mxEvent.isMetaDown(b.getEvent())};var m=mxVertexHandler.prototype.getHandlePadding;if(mxVertexHandler.prototype.getHandlePadding=function(){var a=new mxPoint(0,0),b=this.tolerance;return this.graph.cellEditor.getEditingCell()==this.state.cell&&null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]?(b/=2,a.x=this.sizers[0].bounds.width+b,a.y=this.sizers[0].bounds.height+b):a=m.apply(this,arguments),a},mxVertexHandler.prototype.updateHint=function(a){if(this.index!=mxEvent.LABEL_HANDLE){if(null==this.hint&&(this.hint=l(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent.ROTATION_HANDLE)this.hint.innerHTML=this.currentAlpha+"&deg;";else{var b=this.state.view.scale;this.hint.innerHTML=this.roundLength(this.bounds.width/b)+" x "+this.roundLength(this.bounds.height/b)}var c=null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0",d=mxUtils.getBoundingBox(this.bounds,c);null==d&&(d=this.bounds),this.hint.style.left=d.x+Math.round((d.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=d.y+d.height+12+"px"}},mxVertexHandler.prototype.removeHint=mxGraphHandler.prototype.removeHint,mxEdgeHandler.prototype.updateHint=function(a,b){null==this.hint&&(this.hint=l(),this.state.view.graph.container.appendChild(this.hint));var c=this.graph.view.translate,d=this.graph.view.scale,e=this.roundLength(b.x/d-c.x),f=this.roundLength(b.y/d-c.y);if(this.hint.innerHTML=e+", "+f,this.hint.style.visibility="visible",this.isSource||this.isTarget)if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus){var g=this.constraintHandler.currentConstraint.point;this.hint.innerHTML="["+Math.round(100*g.x)+"%, "+Math.round(100*g.y)+"%]"}else this.marker.hasValidState()&&(this.hint.style.visibility="hidden");this.hint.style.left=Math.round(a.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(a.getGraphY(),b.y)+this.state.view.graph.gridSize+"px",null!=this.hideEdgeHintThread&&window.clearTimeout(this.hideEdgeHintThread),this.hideEdgeHintThread=window.setTimeout(mxUtils.bind(this,function(){null!=this.hint&&(this.hint.style.visibility="hidden")}),500)},mxEdgeHandler.prototype.removeHint=mxGraphHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABLUlEQVQ4y61US4rCQBBNeojiRrLSnbMOWWU3V1FPouARcgc9hyLOCSSbYZw5gRCIkM9KbevJaycS4zCOBY+iq6pf1y+xrNtiE6oEY/tVzMUXgSNoCJrUDu3qHpldutwSuIKOoEvt0m7I7DoCvNj2fb8XRdEojuN5lmVraJxhh59xFSLFF9phGL7lef6hRb63R73aHM8aAjv8JHJ47yqLlud5r0VRbHa51sPZQVuT/QU4ww4/4ljaJRubrC5SxouD6TWBQV/sEIkbs0eOIVGssSO1L5D6LQID+BHHZjdMSYpj7KZpun7/uk8CP5rNqTXLJP/OpNyTMWruP9CTP08nCILKdCp7gkCzJ8vPnz2BvW5PKhuLjJBykiQLaWIEjTP3o3Zjn/LtPO0rfvh/cgKu7z6wtPPltQAAAABJRU5ErkJggg==":IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.fixedHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkE1NkU4Njk2QjI1MTFFNEFDMjFGQTcyODkzNTc3NkYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkE1NkU4NkE2QjI1MTFFNEFDMjFGQTcyODkzNTc3NkYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTU2RTg2NzZCMjUxMUU0QUMyMUZBNzI4OTM1Nzc2RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTU2RTg2ODZCMjUxMUU0QUMyMUZBNzI4OTM1Nzc2RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmuk6K8AAAGBSURBVHjarFRBSsNQEM3/atNs6qLowixcKELoqjuXoqfQeoF6BMEj9BCC1YIXcCGlV8hGLNZlBKWlCk1JSs13Xvw/nca6UDrwmMzMy8tk/iTCWmwi52Eq53+QeWwg2bXSSNi1WiRibgRWCTahwEQmhJgw1WJGML2BC6wQnEqlsuH7fr3f7zdHo9EdPGLkUdc8mX8TJNYIpUajsR+G4YMie3pNVKebpB6GPOrgab7kr5F24Hne9ng87r6HStUuP5V1Mc2AGHnUwWMdCck6sVut1onjOHtnt4nV7M0fAuI65VEnXk3PTFq5Eyi4rnvUe1PW9fO3QOdUzvkbyqNOvEM2dMEHK2zbLr98zJ5+cJWkAvDGUC8Wi2X28Gww6bnHcTzYWp+JGAHTCQz1KIoGfFckCyZBELR3N4V1vCOyTrhHHnXw9N5kQn8+nWq1Onc6C/cERLMn7cfZniD/257wbjDxEjqiDT0fDof3tLE+PGK9HyXNy7pYyrez9K/43/+TLwEGAMb7AY6w980DAAAAAElFTkSuQmCC":IMAGE_PATH+"/handle-fixed.png",17,17),
    HoverIcons.prototype.terminalHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEMzRUVERTk2NzU1MTFFNTg5NjNEMjREQ0FFNENFQzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEMzRUVERUE2NzU1MTFFNTg5NjNEMjREQ0FFNENFQzgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQzNFRURFNzY3NTUxMUU1ODk2M0QyNERDQUU0Q0VDOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQzNFRURFODY3NTUxMUU1ODk2M0QyNERDQUU0Q0VDOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Poj8AGUAAAF6SURBVHjarFTBSsNAEM2u2jSXeCh6sAcPilB6ys2j6Fdo/YH6CYKf0I8QrBb8AQ9S+gu5iMV6jKC0VCEJTalZ54VNnMR4ULrwmJ2Zt5PZmdkIo3yJgsRSBfmDzPUUku2VRsz2qixIehBYJZiECgsyJ0SEhQ6WBkwO8AArBKvZbG64rtsej8dd3/fvIKHDDr/myeJNYFgj2J1OZz8IggdF6+k1VoNhnEgs2OEHT/Mlv0aSQaPR2A7DcPgeKNW6/FTGxSIDdNjhB49lJCTLxOz1eieWZe2d3cZGd5RvAvQ22eEnXkvXTBqFDlTq9frR6E0Z18+qtO83ZIefeIes6IIXVpimWXv5yB8cnMqcDn+1Wq2xj2eFSfoeRdFkaz0f5OAqzunwz2azCZ8VyZS553n93U1hHO+I0uvADj94em6yQH/ujuM4ue6UzgmI6Zz0H7/nBPbf5oRng4rbyIgm9Hw6nd7TxLqQ0PV82JqXZbGUt7P0V/zv/8mXAAMASSz1f9Cd7ycAAAAASUVORK5CYII=":IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.secondaryHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEJBMUVERjNEMkZDMTFFM0I0Qzc5RkE1RTc2NjI0OUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEJBMUVERjREMkZDMTFFM0I0Qzc5RkE1RTc2NjI0OUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowQkExRURGMUQyRkMxMUUzQjRDNzlGQTVFNzY2MjQ5QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowQkExRURGMkQyRkMxMUUzQjRDNzlGQTVFNzY2MjQ5QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvXDOj4AAAFqSURBVHjarFTNToNAEN5FLeiBmDRe7MGLF4IXbp71KapP4CPoO/QdvKiv4ME0PkAvJI2J0SueIHgAAk3b7XxkwSlgE38mmSwz8+3HsPMtUnSbbKww1VhbYB5XbrBnpX3JnlUXSbURvk1ukvcYyYy8IJ9rsoqw3MAJtsh3Xdc98H3/KgzDuyRJHrEiRh51jTOaX4LEDrk9Go1O0zR9UWTL9E0to+dyhSGPOnAab/DPKDtwHOcoy7LXz1SpxeRSzW9F7YiRRx041pGsSMC6Ty1f442LycUawRfRsOyIcDfA632ST6A3GAzOVfYu1PS+c+5q+iBQJ9wZO3TJD1aaptkX+YfYaFS3LKvPXl4fTDn3oigiYR1uJqF6nucR14rBglkQBGO5dyzkybBbxpRHHTitm5rox9PxPK81nZZOAKx1Eo5rnSD/nU54NzhxGx1hjHEcP5FifayItT5sjVvTyJ/vzr/f4l//T1YCDAC4VAdLL1OIRAAAAABJRU5ErkJggg==":IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.rotationHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAVCAYAAACkCdXRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA6ZJREFUeNqM001IY1cUB/D/fYmm2sbR2lC1zYlgoRG6MpEyBlpxM9iFIGKFIm3s0lCKjOByhCLZCFqLBF1YFVJdSRbdFHRhBbULtRuFVBTzYRpJgo2mY5OX5N9Fo2TG+eiFA/dd3vvd8+65ByTxshARTdf1JySp6/oTEdFe9T5eg5lIcnBwkCSZyWS+exX40oyur68/KxaLf5Okw+H4X+A9JBaLfUySZ2dnnJqaosPhIAACeC34DJRKpb7IZrMcHx+nwWCgUopGo/EOKwf9fn/1CzERUevr6+9ls1mOjIwQAH0+H4PBIKPR6D2ofAQCgToRUeVYJUkuLy8TANfW1kiS8/PzCy84Mw4MDBAAZ2dnmc/nub+/X0MSEBF1cHDwMJVKsaGhgV6vl+l0mqOjo1+KyKfl1dze3l4NBoM/PZ+diFSLiIKIGBOJxA9bW1sEwNXVVSaTyQMRaRaRxrOzs+9J8ujoaE5EPhQRq67rcZ/PRwD0+/3Udf03EdEgIqZisZibnJykwWDg4eEhd3Z2xkXELCJvPpdBrYjUiEhL+Xo4HH4sIhUaAKNSqiIcDsNkMqG+vh6RSOQQQM7tdhsAQCkFAHC73UUATxcWFqypVApmsxnDw8OwWq2TADQNgAYAFosF+XweyWQSdru9BUBxcXFRB/4rEgDcPouIIx6P4+bmBi0tLSCpAzBqAIqnp6c/dnZ2IpfLYXNzE62traMADACKNputpr+/v8lms9UAKAAwiMjXe3t7KBQKqKurQy6Xi6K0i2l6evpROp1mbW0t29vbGY/Hb8/IVIqq2zlJXl1dsaOjg2azmefn5wwEAl+JSBVExCgi75PkzMwMlVJsbGxkIpFgPp8PX15ePopEIs3JZPITXdf/iEajbGpqolKKExMT1HWdHo/nIxGpgIgoEXnQ3d39kCTHxsYIgC6Xi3NzcwyHw8xkMozFYlxaWmJbWxuVUuzt7WUul6PX6/1cRN4WEe2uA0SkaWVl5XGpRVhdXU0A1DSNlZWVdz3qdDrZ09PDWCzG4+Pjn0XEWvp9KJKw2WwKwBsA3gHQHAqFfr24uMDGxgZ2d3cRiUQAAHa7HU6nE319fTg5Ofmlq6vrGwB/AngaCoWK6rbsNptNA1AJoA7Aux6Pp3NoaMhjsVg+QNmIRqO/u1yubwFEASRKUAEA7rASqABUAKgC8KAUb5XWCOAfAFcA/gJwDSB7C93DylCtdM8qABhLc5TumV6KQigUeubjfwcAHkQJ94ndWeYAAAAASUVORK5CYII=":IMAGE_PATH+"/handle-rotate.png",19,21),mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,null!=window.Sidebar&&(Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop),mxClient.IS_SVG||((new Image).src=HoverIcons.prototype.mainHandle.src,(new Image).src=HoverIcons.prototype.fixedHandle.src,(new Image).src=HoverIcons.prototype.terminalHandle.src,(new Image).src=HoverIcons.prototype.secondaryHandle.src,(new Image).src=HoverIcons.prototype.rotationHandle.src,(new Image).src=HoverIcons.prototype.triangleUp.src,(new Image).src=HoverIcons.prototype.triangleRight.src,(new Image).src=HoverIcons.prototype.triangleDown.src,(new Image).src=HoverIcons.prototype.triangleLeft.src,(new Image).src=HoverIcons.prototype.refreshTarget.src,(new Image).src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxVertexHandler.prototype.rotationHandleVSpacing=-20,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(a){return!mxEvent.isShiftDown(a.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(a){return!mxEvent.isShiftDown(a.getEvent())},Graph.touchStyle){(mxClient.IS_TOUCH||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-24,mxConstraintHandler.prototype.getTolerance=function(a){return mxEvent.isMouseEvent(a.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(a){var b=a.getEvent();return null==a.getState()&&!mxEvent.isMouseEvent(b)||mxEvent.isPopupTrigger(b)&&(null==a.getState()||mxEvent.isControlDown(b)||mxEvent.isShiftDown(b))};var n=mxGraphHandler.prototype.mouseDown;mxGraphHandler.prototype.mouseDown=function(a,b){n.apply(this,arguments),mxEvent.isTouchEvent(b.getEvent())&&this.graph.isCellSelected(b.getCell())&&this.graph.getSelectionCount()>1&&(this.delayedSelection=!1)}}else mxPanningHandler.prototype.isPanningTrigger=function(a){var b=a.getEvent();return mxEvent.isLeftMouseButton(b)&&(this.useLeftButtonForPanning&&null==a.getState()||mxEvent.isControlDown(b)&&!mxEvent.isShiftDown(b))||this.usePopupTrigger&&mxEvent.isPopupTrigger(b)};mxRubberband.prototype.isSpaceEvent=function(a){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent.isControlDown(a.getEvent())&&mxEvent.isShiftDown(a.getEvent())},mxRubberband.prototype.mouseUp=function(a,b){var c=null!=this.div&&"none"!=this.div.style.display,d=null,e=null,f=null,g=null;if(null!=this.first&&null!=this.currentX&&null!=this.currentY&&(d=this.first.x,e=this.first.y,f=(this.currentX-d)/this.graph.view.scale,g=(this.currentY-e)/this.graph.view.scale,mxEvent.isAltDown(b.getEvent())||(f=this.graph.snap(f),g=this.graph.snap(g))),this.reset(),c){if(mxEvent.isAltDown(b.getEvent())&&this.graph.isToggleEvent(b.getEvent())){var h=new mxRectangle(this.x,this.y,this.width,this.height),i=this.graph.getCells(h.x,h.y,h.width,h.height);this.graph.removeSelectionCells(i)}else if(this.isSpaceEvent(b)){this.graph.model.beginUpdate();try{for(var i=this.graph.getCellsBeyond(d,e,this.graph.getDefaultParent(),!0,!0),j=0;j<i.length;j++)if(this.graph.isCellMovable(i[j])){var k=this.graph.view.getState(i[j]),l=this.graph.getCellGeometry(i[j]);null!=k&&null!=l&&(l=l.clone(),l.translate(f,g),this.graph.model.setGeometry(i[j],l))}}finally{this.graph.model.endUpdate()}}else{var h=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(h,b.getEvent())}b.consume()}},mxRubberband.prototype.mouseMove=function(a,b){if(!b.isConsumed()&&null!=this.first){var c=mxUtils.getScrollOrigin(this.graph.container),d=mxUtils.getOffset(this.graph.container);c.x-=d.x,c.y-=d.y;var e=b.getX()+c.x,f=b.getY()+c.y,g=this.first.x-e,h=this.first.y-f,i=this.graph.tolerance;if(null!=this.div||Math.abs(g)>i||Math.abs(h)>i){if(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(e,f),this.isSpaceEvent(b)){var j=this.x+this.width,k=this.y+this.height,l=this.graph.view.scale;mxEvent.isAltDown(b.getEvent())||(this.width=this.graph.snap(this.width/l)*l,this.height=this.graph.snap(this.height/l)*l,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=j-this.width),this.y<this.first.y&&(this.y=k-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",null==this.secondDiv&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"}else this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null);b.consume()}}};var o=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),o.apply(this,arguments)};var p=(new Date).getTime(),q=0,r=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(a,b,c,d){r.apply(this,arguments),c!=this.currentTerminalState?(p=(new Date).getTime(),q=0):q=(new Date).getTime()-p,this.currentTerminalState=c};var s=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(a){return null!=this.currentTerminalState&&a.getState()==this.currentTerminalState&&q>2e3||(null==this.currentTerminalState||"0"!=mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1"))&&s.apply(this,arguments)},mxVertexHandler.prototype.isCustomHandleEvent=function(a){return!mxEvent.isShiftDown(a.getEvent())},mxEdgeHandler.prototype.createHandleShape=function(a,b){var c=null!=a&&0==a,d=this.state.getVisibleTerminalState(c),e=null!=a&&(0==a||a>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler&&2==a)?this.graph.getConnectionConstraint(this.state,d,c):null,f=null!=e?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(c),e):null,g=null!=f?this.fixedHandleImage:null!=e&&null!=d?this.terminalHandleImage:this.handleImage;if(null!=g){var h=new mxImageShape(new mxRectangle(0,0,g.width,g.height),g.src);return h.preserveImageAspect=!1,h}var i=mxConstants.HANDLE_SIZE;return this.preferHtml&&(i-=1),new mxRectangleShape(new mxRectangle(0,0,i,i),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)};var t=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(a,b,c){return this.handleImage=b==mxEvent.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:b==mxEvent.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,t.apply(this,arguments)};var u=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(a){if(null!=a&&1==a.length){var b=this.graph.getModel(),c=b.getParent(a[0]),d=this.graph.getCellGeometry(a[0]);if(b.isEdge(c)&&null!=d&&d.relative){var e=this.graph.view.getState(a[0]);if(null!=e&&e.width<2&&e.height<2&&null!=e.text&&null!=e.text.boundingBox)return mxRectangle.fromRectangle(e.text.boundingBox)}}return u.apply(this,arguments)};var v=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(a){var b=this.graph.getModel(),c=b.getParent(a.cell),d=this.graph.getCellGeometry(a.cell);if(b.isEdge(c)&&null!=d&&d.relative&&a.width<2&&a.height<2&&null!=a.text&&null!=a.text.boundingBox){var e=a.text.unrotatedBoundingBox||a.text.boundingBox;return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))}return v.apply(this,arguments)};var w=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(a,b){var c=this.graph.getModel(),d=c.getParent(this.state.cell),e=this.graph.getCellGeometry(this.state.cell),f=this.getHandleForEvent(b);(f==mxEvent.ROTATION_HANDLE||!c.isEdge(d)||null==e||!e.relative||null==this.state||this.state.width>=2||this.state.height>=2)&&w.apply(this,arguments)},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.rotateClick=function(){this.state.view.graph.turnShapes([this.state.cell])};var x=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(a,b){x.apply(this,arguments),null!=this.graph.graphHandler.first&&null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display="none")};var y=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(a,b){y.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none")};var z=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){z.apply(this,arguments);var a=!1;null!=this.rotationShape&&this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip"));var b=mxUtils.bind(this,function(){null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.specialHandle&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.selectionHandler=mxUtils.bind(this,function(a,c){b()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler),this.changeHandler=mxUtils.bind(this,function(a,c){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell)),b()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.editingHandler=mxUtils.bind(this,function(a,b){this.redrawHandles()}),this.graph.addListener(mxEvent.EDITING_STOPPED,this.editingHandler);var c=this.graph.getLinkForCell(this.state.cell);this.updateLinkHint(c),null!=c&&(a=!0),a&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(a){if(null==a||this.graph.getSelectionCount()>1)null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(null!=a){null==this.linkHint&&(this.linkHint=l(),this.linkHint.style.padding="4px 10px 6px 10px",this.linkHint.style.fontSize="90%",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.updateLinkHint(a),this.graph.container.appendChild(this.linkHint));var b=a,c=60,d=36,e=20;b.length>c&&(b=b.substring(0,d)+"..."+b.substring(b.length-e));var f=document.createElement("a");if(f.setAttribute("href",this.graph.getAbsoluteUrl(a)),f.setAttribute("title",a),null!=this.graph.linkTarget&&f.setAttribute("target",this.graph.linkTarget),mxUtils.write(f,b),this.linkHint.innerHTML="",this.linkHint.appendChild(f),this.graph.isEnabled()&&"function"==typeof this.graph.editLink){var g=document.createElement("img");g.setAttribute("src",IMAGE_PATH+"/edit.gif"),g.setAttribute("title",mxResources.get("editLink")),g.setAttribute("width","11"),g.setAttribute("height","11"),g.style.marginLeft="10px",g.style.marginBottom="-1px",g.style.cursor="pointer",this.linkHint.appendChild(g),mxEvent.addListener(g,"click",mxUtils.bind(this,function(a){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent.consume(a)}))}}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var A=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){A.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var a=mxUtils.bind(this,function(){null!=this.linkHint&&(this.linkHint.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.labelShape&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")});this.selectionHandler=mxUtils.bind(this,function(b,c){a()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler),this.changeHandler=mxUtils.bind(this,function(b,c){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell)),a(),this.redrawHandles()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);var b=this.graph.getLinkForCell(this.state.cell);null!=b&&(this.updateLinkHint(b),this.redrawHandles())};var B=mxConnectionHandler.prototype.init;mxConnectionHandler.prototype.init=function(){B.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})};var C=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){if(C.apply(this),null!=this.state&&null!=this.linkHint){var a=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),b=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),c=mxUtils.getBoundingBox(b,this.state.style[mxConstants.STYLE_ROTATION]||"0",a),d=null!=c?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state;null==c&&(c=this.state),this.linkHint.style.left=Math.round(d.x+(d.width-this.linkHint.clientWidth)/2)+"px",this.linkHint.style.top=Math.round(c.y+c.height+this.verticalOffset/2+6+this.state.view.graph.tolerance)+"px"}};var D=mxVertexHandler.prototype.reset;mxVertexHandler.prototype.reset=function(){D.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none")};var E=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){E.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.selectionHandler&&(this.graph.getSelectionModel().removeListener(this.selectionHandler),this.selectionHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),null!=this.editingHandler&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var F=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){if(null!=this.marker&&(F.apply(this),null!=this.state&&null!=this.linkHint)){var a=this.state;null!=this.state.text&&null!=this.state.text.bounds&&(a=new mxRectangle(a.x,a.y,a.width,a.height),a.add(this.state.text.bounds)),this.linkHint.style.left=Math.round(a.x+(a.width-this.linkHint.clientWidth)/2)+"px",this.linkHint.style.top=Math.round(a.y+a.height+6+this.state.view.graph.tolerance)+"px"}};var G=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){G.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.visibility="")};var H=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){H.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.selectionHandler&&(this.graph.getSelectionModel().removeListener(this.selectionHandler),this.selectionHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null)}}();;
var graph = new Graph(document.getElementById('business_rules_workflow_graph'));
graph.resizeContainer = true;
graph.setEnabled(false);

function showFlowchart(data) {
  'use strict';

  var xmlDoc = mxUtils.parseXml(data);
  var codec = new mxCodec(xmlDoc);
  codec.decode(xmlDoc.documentElement, graph.getModel());
}

if (document.getElementById('graph_definition').value) {
  showFlowchart(document.getElementById('graph_definition').value);
}
;
(function ($, window, Drupal, drupalSettings) {

  'use strict';

  Drupal.AjaxCommands.prototype.updateFlowchart = function () {
    showFlowchart(document.getElementById('graph_definition').value);
  };

})(jQuery, window, Drupal, drupalSettings);
;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

Drupal.debounce = function (func, wait, immediate) {
  var timeout;
  var result;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var context = this;

    var later = function later() {
      timeout = null;

      if (!immediate) {
        result = func.apply(context, args);
      }
    };

    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);

    if (callNow) {
      result = func.apply(context, args);
    }

    return result;
  };
};;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, debounce) {
  $.fn.drupalGetSummary = function () {
    var callback = this.data('summaryCallback');
    return this[0] && callback ? callback(this[0]).trim() : '';
  };

  $.fn.drupalSetSummary = function (callback) {
    var self = this;

    if (typeof callback !== 'function') {
      var val = callback;

      callback = function callback() {
        return val;
      };
    }

    return this.data('summaryCallback', callback).off('formUpdated.summary').on('formUpdated.summary', function () {
      self.trigger('summaryUpdated');
    }).trigger('summaryUpdated');
  };

  Drupal.behaviors.formSingleSubmit = {
    attach: function attach() {
      function onFormSubmit(e) {
        var $form = $(e.currentTarget);
        var formValues = $form.serialize();
        var previousValues = $form.attr('data-drupal-form-submit-last');

        if (previousValues === formValues) {
          e.preventDefault();
        } else {
          $form.attr('data-drupal-form-submit-last', formValues);
        }
      }

      $(once('form-single-submit', 'body')).on('submit.singleSubmit', 'form:not([method~="GET"])', onFormSubmit);
    }
  };

  function triggerFormUpdated(element) {
    $(element).trigger('formUpdated');
  }

  function fieldsList(form) {
    var $fieldList = $(form).find('[name]').map(function (index, element) {
      return element.getAttribute('id');
    });
    return $.makeArray($fieldList);
  }

  Drupal.behaviors.formUpdated = {
    attach: function attach(context) {
      var $context = $(context);
      var contextIsForm = $context.is('form');
      var $forms = $(once('form-updated', contextIsForm ? $context : $context.find('form')));
      var formFields;

      if ($forms.length) {
        $.makeArray($forms).forEach(function (form) {
          var events = 'change.formUpdated input.formUpdated ';
          var eventHandler = debounce(function (event) {
            triggerFormUpdated(event.target);
          }, 300);
          formFields = fieldsList(form).join(',');
          form.setAttribute('data-drupal-form-fields', formFields);
          $(form).on(events, eventHandler);
        });
      }

      if (contextIsForm) {
        formFields = fieldsList(context).join(',');
        var currentFields = $(context).attr('data-drupal-form-fields');

        if (formFields !== currentFields) {
          triggerFormUpdated(context);
        }
      }
    },
    detach: function detach(context, settings, trigger) {
      var $context = $(context);
      var contextIsForm = $context.is('form');

      if (trigger === 'unload') {
        once.remove('form-updated', contextIsForm ? $context : $context.find('form')).forEach(function (form) {
          form.removeAttribute('data-drupal-form-fields');
          $(form).off('.formUpdated');
        });
      }
    }
  };
  Drupal.behaviors.fillUserInfoFromBrowser = {
    attach: function attach(context, settings) {
      var userInfo = ['name', 'mail', 'homepage'];
      var $forms = $(once('user-info-from-browser', '[data-user-info-from-browser]'));

      if ($forms.length) {
        userInfo.forEach(function (info) {
          var $element = $forms.find("[name=".concat(info, "]"));
          var browserData = localStorage.getItem("Drupal.visitor.".concat(info));
          var emptyOrDefault = $element.val() === '' || $element.attr('data-drupal-default-value') === $element.val();

          if ($element.length && emptyOrDefault && browserData) {
            $element.val(browserData);
          }
        });
      }

      $forms.on('submit', function () {
        userInfo.forEach(function (info) {
          var $element = $forms.find("[name=".concat(info, "]"));

          if ($element.length) {
            localStorage.setItem("Drupal.visitor.".concat(info), $element.val());
          }
        });
      });
    }
  };

  var handleFragmentLinkClickOrHashChange = function handleFragmentLinkClickOrHashChange(e) {
    var url;

    if (e.type === 'click') {
      url = e.currentTarget.location ? e.currentTarget.location : e.currentTarget;
    } else {
      url = window.location;
    }

    var hash = url.hash.substr(1);

    if (hash) {
      var $target = $("#".concat(hash));
      $('body').trigger('formFragmentLinkClickOrHashChange', [$target]);
      setTimeout(function () {
        return $target.trigger('focus');
      }, 300);
    }
  };

  var debouncedHandleFragmentLinkClickOrHashChange = debounce(handleFragmentLinkClickOrHashChange, 300, true);
  $(window).on('hashchange.form-fragment', debouncedHandleFragmentLinkClickOrHashChange);
  $(document).on('click.form-fragment', 'a[href*="#"]', debouncedHandleFragmentLinkClickOrHashChange);
})(jQuery, Drupal, Drupal.debounce);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal) {
  function DetailsSummarizedContent(node) {
    this.$node = $(node);
    this.setupSummary();
  }

  $.extend(DetailsSummarizedContent, {
    instances: []
  });
  $.extend(DetailsSummarizedContent.prototype, {
    setupSummary: function setupSummary() {
      this.$detailsSummarizedContentWrapper = $(Drupal.theme('detailsSummarizedContentWrapper'));
      this.$node.on('summaryUpdated', $.proxy(this.onSummaryUpdated, this)).trigger('summaryUpdated').find('> summary').append(this.$detailsSummarizedContentWrapper);
    },
    onSummaryUpdated: function onSummaryUpdated() {
      var text = this.$node.drupalGetSummary();
      this.$detailsSummarizedContentWrapper.html(Drupal.theme('detailsSummarizedContentText', text));
    }
  });
  Drupal.behaviors.detailsSummary = {
    attach: function attach(context) {
      DetailsSummarizedContent.instances = DetailsSummarizedContent.instances.concat(once('details', 'details', context).map(function (details) {
        return new DetailsSummarizedContent(details);
      }));
    }
  };
  Drupal.DetailsSummarizedContent = DetailsSummarizedContent;

  Drupal.theme.detailsSummarizedContentWrapper = function () {
    return "<span class=\"summary\"></span>";
  };

  Drupal.theme.detailsSummarizedContentText = function (text) {
    return text ? " (".concat(text, ")") : '';
  };
})(jQuery, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal) {
  Drupal.behaviors.detailsAria = {
    attach: function attach() {
      $(once('detailsAria', 'body')).on('click.detailsAria', 'summary', function (event) {
        var $summary = $(event.currentTarget);
        var open = $(event.currentTarget.parentNode).attr('open') === 'open' ? 'false' : 'true';
        $summary.attr({
          'aria-expanded': open,
          'aria-pressed': open
        });
      });
    }
  };
})(jQuery, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Modernizr, Drupal) {
  function CollapsibleDetails(node) {
    this.$node = $(node);
    this.$node.data('details', this);
    var anchor = window.location.hash && window.location.hash !== '#' ? ", ".concat(window.location.hash) : '';

    if (this.$node.find(".error".concat(anchor)).length) {
      this.$node.attr('open', true);
    }

    this.setupSummaryPolyfill();
  }

  $.extend(CollapsibleDetails, {
    instances: []
  });
  $.extend(CollapsibleDetails.prototype, {
    setupSummaryPolyfill: function setupSummaryPolyfill() {
      var $summary = this.$node.find('> summary');
      $summary.attr('tabindex', '-1');
      $('<span class="details-summary-prefix visually-hidden"></span>').append(this.$node.attr('open') ? Drupal.t('Hide') : Drupal.t('Show')).prependTo($summary).after(document.createTextNode(' '));
      $('<a class="details-title"></a>').attr('href', "#".concat(this.$node.attr('id'))).prepend($summary.contents()).appendTo($summary);
      $summary.append(this.$summary).on('click', $.proxy(this.onSummaryClick, this));
    },
    onSummaryClick: function onSummaryClick(e) {
      this.toggle();
      e.preventDefault();
    },
    toggle: function toggle() {
      var _this = this;

      var isOpen = !!this.$node.attr('open');
      var $summaryPrefix = this.$node.find('> summary span.details-summary-prefix');

      if (isOpen) {
        $summaryPrefix.html(Drupal.t('Show'));
      } else {
        $summaryPrefix.html(Drupal.t('Hide'));
      }

      setTimeout(function () {
        _this.$node.attr('open', !isOpen);
      }, 0);
    }
  });
  Drupal.behaviors.collapse = {
    attach: function attach(context) {
      if (Modernizr.details) {
        return;
      }

      once('collapse', 'details', context).forEach(function (detail) {
        detail.classList.add('collapse-processed');
        CollapsibleDetails.instances.push(new CollapsibleDetails(detail));
      });
    }
  };

  var handleFragmentLinkClickOrHashChange = function handleFragmentLinkClickOrHashChange(e, $target) {
    $target.parents('details').not('[open]').find('> summary').trigger('click');
  };

  $('body').on('formFragmentLinkClickOrHashChange.details', handleFragmentLinkClickOrHashChange);
  Drupal.CollapsibleDetails = CollapsibleDetails;
})(jQuery, Modernizr, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, window) {
  function TableResponsive(table) {
    this.table = table;
    this.$table = $(table);
    this.showText = Drupal.t('Show all columns');
    this.hideText = Drupal.t('Hide lower priority columns');
    this.$headers = this.$table.find('th');
    this.$link = $('<button type="button" class="link tableresponsive-toggle"></button>').attr('title', Drupal.t('Show table cells that were hidden to make the table fit within a small screen.')).on('click', $.proxy(this, 'eventhandlerToggleColumns'));
    this.$table.before($('<div class="tableresponsive-toggle-columns"></div>').append(this.$link));
    $(window).on('resize.tableresponsive', $.proxy(this, 'eventhandlerEvaluateColumnVisibility')).trigger('resize.tableresponsive');
  }

  Drupal.behaviors.tableResponsive = {
    attach: function attach(context, settings) {
      once('tableresponsive', 'table.responsive-enabled', context).forEach(function (table) {
        TableResponsive.tables.push(new TableResponsive(table));
      });
    }
  };
  $.extend(TableResponsive, {
    tables: []
  });
  $.extend(TableResponsive.prototype, {
    eventhandlerEvaluateColumnVisibility: function eventhandlerEvaluateColumnVisibility(e) {
      var pegged = parseInt(this.$link.data('pegged'), 10);
      var hiddenLength = this.$headers.filter('.priority-medium:hidden, .priority-low:hidden').length;

      if (hiddenLength > 0) {
        this.$link.show().text(this.showText);
      }

      if (!pegged && hiddenLength === 0) {
        this.$link.hide().text(this.hideText);
      }
    },
    eventhandlerToggleColumns: function eventhandlerToggleColumns(e) {
      e.preventDefault();
      var self = this;
      var $hiddenHeaders = this.$headers.filter('.priority-medium:hidden, .priority-low:hidden');
      this.$revealedCells = this.$revealedCells || $();

      if ($hiddenHeaders.length > 0) {
        $hiddenHeaders.each(function (index, element) {
          var $header = $(this);
          var position = $header.prevAll('th').length;
          self.$table.find('tbody tr').each(function () {
            var $cells = $(this).find('td').eq(position);
            $cells.show();
            self.$revealedCells = $().add(self.$revealedCells).add($cells);
          });
          $header.show();
          self.$revealedCells = $().add(self.$revealedCells).add($header);
        });
        this.$link.text(this.hideText).data('pegged', 1);
      } else {
        this.$revealedCells.hide();
        this.$revealedCells.each(function (index, element) {
          var $cell = $(this);
          var properties = $cell.attr('style').split(';');
          var newProps = [];
          var match = /^display\s*:\s*none$/;

          for (var i = 0; i < properties.length; i++) {
            var prop = properties[i];
            prop.trim();
            var isDisplayNone = match.exec(prop);

            if (isDisplayNone) {
              continue;
            }

            newProps.push(prop);
          }

          $cell.attr('style', newProps.join(';'));
        });
        this.$link.text(this.showText).data('pegged', 0);
        $(window).trigger('resize.tableresponsive');
      }
    }
  });
  Drupal.TableResponsive = TableResponsive;
})(jQuery, Drupal, window);;
/*!
 * jQuery Form Plugin
 * version: 4.3.0
 * Requires jQuery v1.7.2 or later
 * Project repository: https://github.com/jquery-form/form

 * Copyright 2017 Kevin Morris
 * Copyright 2006 M. Alsup

 * Dual licensed under the LGPL-2.1+ or MIT licenses
 * https://github.com/jquery-form/form#license

 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 */
!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),r(t),t}:r(jQuery)}(function(q){"use strict";var m=/\r?\n/g,S={};S.fileapi=void 0!==q('<input type="file">').get(0).files,S.formdata=void 0!==window.FormData;var _=!!q.fn.prop;function o(e){var t=e.data;e.isDefaultPrevented()||(e.preventDefault(),q(e.target).closest("form").ajaxSubmit(t))}function i(e){var t=e.target,r=q(t);if(!r.is("[type=submit],[type=image]")){var a=r.closest("[type=submit]");if(0===a.length)return;t=a[0]}var n,o=t.form;"image"===(o.clk=t).type&&(void 0!==e.offsetX?(o.clk_x=e.offsetX,o.clk_y=e.offsetY):"function"==typeof q.fn.offset?(n=r.offset(),o.clk_x=e.pageX-n.left,o.clk_y=e.pageY-n.top):(o.clk_x=e.pageX-t.offsetLeft,o.clk_y=e.pageY-t.offsetTop)),setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function N(){var e;q.fn.ajaxSubmit.debug&&(e="[jquery.form] "+Array.prototype.join.call(arguments,""),window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e))}q.fn.attr2=function(){if(!_)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},q.fn.ajaxSubmit=function(M,e,t,r){if(!this.length)return N("ajaxSubmit: skipping submit process - no element selected"),this;var O,a,n,o,X=this;"function"==typeof M?M={success:M}:"string"==typeof M||!1===M&&0<arguments.length?(M={url:M,data:e,dataType:t},"function"==typeof r&&(M.success=r)):void 0===M&&(M={}),O=M.method||M.type||this.attr2("method"),n=(n=(n="string"==typeof(a=M.url||this.attr2("action"))?q.trim(a):"")||window.location.href||"")&&(n.match(/^([^#]+)/)||[])[1],o=/(MSIE|Trident)/.test(navigator.userAgent||"")&&/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",M=q.extend(!0,{url:n,success:q.ajaxSettings.success,type:O||q.ajaxSettings.type,iframeSrc:o},M);var i={};if(this.trigger("form-pre-serialize",[this,M,i]),i.veto)return N("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(M.beforeSerialize&&!1===M.beforeSerialize(this,M))return N("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var s=M.traditional;void 0===s&&(s=q.ajaxSettings.traditional);var u,c,C=[],l=this.formToArray(M.semantic,C,M.filtering);if(M.data&&(c=q.isFunction(M.data)?M.data(l):M.data,M.extraData=c,u=q.param(c,s)),M.beforeSubmit&&!1===M.beforeSubmit(l,this,M))return N("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,M,i]),i.veto)return N("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=q.param(l,s);u&&(f=f?f+"&"+u:u),"GET"===M.type.toUpperCase()?(M.url+=(0<=M.url.indexOf("?")?"&":"?")+f,M.data=null):M.data=f;var d,m,p,h=[];M.resetForm&&h.push(function(){X.resetForm()}),M.clearForm&&h.push(function(){X.clearForm(M.includeHidden)}),!M.dataType&&M.target?(d=M.success||function(){},h.push(function(e,t,r){var a=arguments,n=M.replaceTarget?"replaceWith":"html";q(M.target)[n](e).each(function(){d.apply(this,a)})})):M.success&&(q.isArray(M.success)?q.merge(h,M.success):h.push(M.success)),M.success=function(e,t,r){for(var a=M.context||this,n=0,o=h.length;n<o;n++)h[n].apply(a,[e,t,r||X,X])},M.error&&(m=M.error,M.error=function(e,t,r){var a=M.context||this;m.apply(a,[e,t,r,X])}),M.complete&&(p=M.complete,M.complete=function(e,t){var r=M.context||this;p.apply(r,[e,t,X])});var v=0<q("input[type=file]:enabled",this).filter(function(){return""!==q(this).val()}).length,g="multipart/form-data",x=X.attr("enctype")===g||X.attr("encoding")===g,y=S.fileapi&&S.formdata;N("fileAPI :"+y);var b,T=(v||x)&&!y;!1!==M.iframe&&(M.iframe||T)?M.closeKeepAlive?q.get(M.closeKeepAlive,function(){b=w(l)}):b=w(l):b=(v||x)&&y?function(e){for(var r=new FormData,t=0;t<e.length;t++)r.append(e[t].name,e[t].value);if(M.extraData){var a=function(e){var t,r,a=q.param(e,M.traditional).split("&"),n=a.length,o=[];for(t=0;t<n;t++)a[t]=a[t].replace(/\+/g," "),r=a[t].split("="),o.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return o}(M.extraData);for(t=0;t<a.length;t++)a[t]&&r.append(a[t][0],a[t][1])}M.data=null;var n=q.extend(!0,{},q.ajaxSettings,M,{contentType:!1,processData:!1,cache:!1,type:O||"POST"});M.uploadProgress&&(n.xhr=function(){var e=q.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,r=e.loaded||e.position,a=e.total;e.lengthComputable&&(t=Math.ceil(r/a*100)),M.uploadProgress(e,r,a,t)},!1),e});n.data=null;var o=n.beforeSend;return n.beforeSend=function(e,t){M.formData?t.data=M.formData:t.data=r,o&&o.call(this,e,t)},q.ajax(n)}(l):q.ajax(M),X.removeData("jqxhr").data("jqxhr",b);for(var j=0;j<C.length;j++)C[j]=null;return this.trigger("form-submit-notify",[this,M]),this;function w(e){var t,r,l,f,o,d,m,p,a,n,h,v,i=X[0],g=q.Deferred();if(g.abort=function(e){p.abort(e)},e)for(r=0;r<C.length;r++)t=q(C[r]),_?t.prop("disabled",!1):t.removeAttr("disabled");(l=q.extend(!0,{},q.ajaxSettings,M)).context=l.context||l,o="jqFormIO"+(new Date).getTime();var s=i.ownerDocument,u=X.closest("body");if(l.iframeTarget?(n=(d=q(l.iframeTarget,s)).attr2("name"))?o=n:d.attr2("name",o):(d=q('<iframe name="'+o+'" src="'+l.iframeSrc+'" />',s)).css({position:"absolute",top:"-1000px",left:"-1000px"}),m=d[0],p={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var t="timeout"===e?"timeout":"aborted";N("aborting upload... "+t),this.aborted=1;try{m.contentWindow.document.execCommand&&m.contentWindow.document.execCommand("Stop")}catch(e){}d.attr("src",l.iframeSrc),p.error=t,l.error&&l.error.call(l.context,p,t,e),f&&q.event.trigger("ajaxError",[p,l,t]),l.complete&&l.complete.call(l.context,p,t)}},(f=l.global)&&0==q.active++&&q.event.trigger("ajaxStart"),f&&q.event.trigger("ajaxSend",[p,l]),l.beforeSend&&!1===l.beforeSend.call(l.context,p,l))return l.global&&q.active--,g.reject(),g;if(p.aborted)return g.reject(),g;(a=i.clk)&&(n=a.name)&&!a.disabled&&(l.extraData=l.extraData||{},l.extraData[n]=a.value,"image"===a.type&&(l.extraData[n+".x"]=i.clk_x,l.extraData[n+".y"]=i.clk_y));var x=1,y=2;function b(t){var r=null;try{t.contentWindow&&(r=t.contentWindow.document)}catch(e){N("cannot get iframe.contentWindow document: "+e)}if(r)return r;try{r=t.contentDocument?t.contentDocument:t.document}catch(e){N("cannot get iframe.contentDocument: "+e),r=t.document}return r}var c=q("meta[name=csrf-token]").attr("content"),T=q("meta[name=csrf-param]").attr("content");function j(){var e=X.attr2("target"),t=X.attr2("action"),r=X.attr("enctype")||X.attr("encoding")||"multipart/form-data";i.setAttribute("target",o),O&&!/post/i.test(O)||i.setAttribute("method","POST"),t!==l.url&&i.setAttribute("action",l.url),l.skipEncodingOverride||O&&!/post/i.test(O)||X.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(v=setTimeout(function(){h=!0,A(x)},l.timeout));var a=[];try{if(l.extraData)for(var n in l.extraData)l.extraData.hasOwnProperty(n)&&(q.isPlainObject(l.extraData[n])&&l.extraData[n].hasOwnProperty("name")&&l.extraData[n].hasOwnProperty("value")?a.push(q('<input type="hidden" name="'+l.extraData[n].name+'">',s).val(l.extraData[n].value).appendTo(i)[0]):a.push(q('<input type="hidden" name="'+n+'">',s).val(l.extraData[n]).appendTo(i)[0]));l.iframeTarget||d.appendTo(u),m.attachEvent?m.attachEvent("onload",A):m.addEventListener("load",A,!1),setTimeout(function e(){try{var t=b(m).readyState;N("state = "+t),t&&"uninitialized"===t.toLowerCase()&&setTimeout(e,50)}catch(e){N("Server abort: ",e," (",e.name,")"),A(y),v&&clearTimeout(v),v=void 0}},15);try{i.submit()}catch(e){document.createElement("form").submit.apply(i)}}finally{i.setAttribute("action",t),i.setAttribute("enctype",r),e?i.setAttribute("target",e):X.removeAttr("target"),q(a).remove()}}T&&c&&(l.extraData=l.extraData||{},l.extraData[T]=c),l.forceSync?j():setTimeout(j,10);var w,S,k,D=50;function A(e){if(!p.aborted&&!k){if((S=b(m))||(N("cannot access response document"),e=y),e===x&&p)return p.abort("timeout"),void g.reject(p,"timeout");if(e===y&&p)return p.abort("server abort"),void g.reject(p,"error","server abort");if(S&&S.location.href!==l.iframeSrc||h){m.detachEvent?m.detachEvent("onload",A):m.removeEventListener("load",A,!1);var t,r="success";try{if(h)throw"timeout";var a="xml"===l.dataType||S.XMLDocument||q.isXMLDoc(S);if(N("isXml="+a),!a&&window.opera&&(null===S.body||!S.body.innerHTML)&&--D)return N("requeing onLoad callback, DOM not available"),void setTimeout(A,250);var n=S.body?S.body:S.documentElement;p.responseText=n?n.innerHTML:null,p.responseXML=S.XMLDocument?S.XMLDocument:S,a&&(l.dataType="xml"),p.getResponseHeader=function(e){return{"content-type":l.dataType}[e.toLowerCase()]},n&&(p.status=Number(n.getAttribute("status"))||p.status,p.statusText=n.getAttribute("statusText")||p.statusText);var o,i,s,u=(l.dataType||"").toLowerCase(),c=/(json|script|text)/.test(u);c||l.textarea?(o=S.getElementsByTagName("textarea")[0])?(p.responseText=o.value,p.status=Number(o.getAttribute("status"))||p.status,p.statusText=o.getAttribute("statusText")||p.statusText):c&&(i=S.getElementsByTagName("pre")[0],s=S.getElementsByTagName("body")[0],i?p.responseText=i.textContent?i.textContent:i.innerText:s&&(p.responseText=s.textContent?s.textContent:s.innerText)):"xml"===u&&!p.responseXML&&p.responseText&&(p.responseXML=F(p.responseText));try{w=E(p,u,l)}catch(e){r="parsererror",p.error=t=e||r}}catch(e){N("error caught: ",e),r="error",p.error=t=e||r}p.aborted&&(N("upload aborted"),r=null),p.status&&(r=200<=p.status&&p.status<300||304===p.status?"success":"error"),"success"===r?(l.success&&l.success.call(l.context,w,"success",p),g.resolve(p.responseText,"success",p),f&&q.event.trigger("ajaxSuccess",[p,l])):r&&(void 0===t&&(t=p.statusText),l.error&&l.error.call(l.context,p,r,t),g.reject(p,"error",t),f&&q.event.trigger("ajaxError",[p,l,t])),f&&q.event.trigger("ajaxComplete",[p,l]),f&&!--q.active&&q.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,p,r),k=!0,l.timeout&&clearTimeout(v),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),p.responseXML=null},100)}}}var F=q.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},L=q.parseJSON||function(e){return window.eval("("+e+")")},E=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n=("xml"===t||!t)&&0<=a.indexOf("xml"),o=n?e.responseXML:e.responseText;return n&&"parsererror"===o.documentElement.nodeName&&q.error&&q.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,t)),"string"==typeof o&&(("json"===t||!t)&&0<=a.indexOf("json")?o=L(o):("script"===t||!t)&&0<=a.indexOf("javascript")&&q.globalEval(o)),o};return g}},q.fn.ajaxForm=function(e,t,r,a){if(("string"==typeof e||!1===e&&0<arguments.length)&&(e={url:e,data:t,dataType:r},"function"==typeof a&&(e.success=a)),(e=e||{}).delegation=e.delegation&&q.isFunction(q.fn.on),e.delegation||0!==this.length)return e.delegation?(q(document).off("submit.form-plugin",this.selector,o).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,e,o).on("click.form-plugin",this.selector,e,i),this):(e.beforeFormUnbind&&e.beforeFormUnbind(this,e),this.ajaxFormUnbind().on("submit.form-plugin",e,o).on("click.form-plugin",e,i));var n={s:this.selector,c:this.context};return!q.isReady&&n.s?(N("DOM not ready, queuing ajaxForm"),q(function(){q(n.s,n.c).ajaxForm(e)})):N("terminating; zero elements found by selector"+(q.isReady?"":" (DOM not ready)")),this},q.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},q.fn.formToArray=function(e,t,r){var a=[];if(0===this.length)return a;var n,o,i,s,u,c,l,f,d,m,p=this[0],h=this.attr("id"),v=(v=e||void 0===p.elements?p.getElementsByTagName("*"):p.elements)&&q.makeArray(v);if(h&&(e||/(Edge|Trident)\//.test(navigator.userAgent))&&(n=q(':input[form="'+h+'"]').get()).length&&(v=(v||[]).concat(n)),!v||!v.length)return a;for(q.isFunction(r)&&(v=q.map(v,r)),o=0,c=v.length;o<c;o++)if((m=(u=v[o]).name)&&!u.disabled)if(e&&p.clk&&"image"===u.type)p.clk===u&&(a.push({name:m,value:q(u).val(),type:u.type}),a.push({name:m+".x",value:p.clk_x},{name:m+".y",value:p.clk_y}));else if((s=q.fieldValue(u,!0))&&s.constructor===Array)for(t&&t.push(u),i=0,l=s.length;i<l;i++)a.push({name:m,value:s[i]});else if(S.fileapi&&"file"===u.type){t&&t.push(u);var g=u.files;if(g.length)for(i=0;i<g.length;i++)a.push({name:m,value:g[i],type:u.type});else a.push({name:m,value:"",type:u.type})}else null!=s&&(t&&t.push(u),a.push({name:m,value:s,type:u.type,required:u.required}));return e||!p.clk||(m=(d=(f=q(p.clk))[0]).name)&&!d.disabled&&"image"===d.type&&(a.push({name:m,value:f.val()}),a.push({name:m+".x",value:p.clk_x},{name:m+".y",value:p.clk_y})),a},q.fn.formSerialize=function(e){return q.param(this.formToArray(e))},q.fn.fieldSerialize=function(n){var o=[];return this.each(function(){var e=this.name;if(e){var t=q.fieldValue(this,n);if(t&&t.constructor===Array)for(var r=0,a=t.length;r<a;r++)o.push({name:e,value:t[r]});else null!=t&&o.push({name:this.name,value:t})}}),q.param(o)},q.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],o=q.fieldValue(n,e);null==o||o.constructor===Array&&!o.length||(o.constructor===Array?q.merge(t,o):t.push(o))}return t},q.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!r||e.disabled||"reset"===a||"button"===a||("checkbox"===a||"radio"===a)&&!e.checked||("submit"===a||"image"===a)&&e.form&&e.form.clk!==e||"select"===n&&-1===e.selectedIndex))return null;if("select"!==n)return q(e).val().replace(m,"\r\n");var o=e.selectedIndex;if(o<0)return null;for(var i=[],s=e.options,u="select-one"===a,c=u?o+1:s.length,l=u?o:0;l<c;l++){var f=s[l];if(f.selected&&!f.disabled){var d=(d=f.value)||(f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value);if(u)return d;i.push(d)}}return i},q.fn.clearForm=function(e){return this.each(function(){q("input,select,textarea",this).clearFields(e)})},q.fn.clearFields=q.fn.clearInputs=function(r){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();a.test(e)||"textarea"===t?this.value="":"checkbox"===e||"radio"===e?this.checked=!1:"select"===t?this.selectedIndex=-1:"file"===e?/MSIE/.test(navigator.userAgent)?q(this).replaceWith(q(this).clone(!0)):q(this).val(""):r&&(!0===r&&/hidden/.test(e)||"string"==typeof r&&q(this).is(r))&&(this.value="")})},q.fn.resetForm=function(){return this.each(function(){var t=q(this),e=this.tagName.toLowerCase();switch(e){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var r=t.parents("select");return r.length&&r[0].multiple?"option"===e?this.selected=this.defaultSelected:t.find("option").resetForm():r.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var a=q(t.attr("for")),n=t.find("input,select,textarea");return a[0]&&n.unshift(a[0]),n.resetForm(),!0;case"form":return"function"!=typeof this.reset&&("object"!=typeof this.reset||this.reset.nodeType)||this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},q.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},q.fn.selected=function(r){return void 0===r&&(r=!0),this.each(function(){var e,t=this.type;"checkbox"===t||"radio"===t?this.checked=r:"option"===this.tagName.toLowerCase()&&(e=q(this).parent("select"),r&&e[0]&&"select-one"===e[0].type&&e.find("option").selected(!1),this.selected=r)})},q.fn.ajaxSubmit.debug=!1});

;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, _ref) {
  var isTabbable = _ref.isTabbable;
  $.extend($.expr[':'], {
    tabbable: function tabbable(element) {
      Drupal.deprecationError({
        message: 'The :tabbable selector is deprecated in Drupal 9.2.0 and will be removed in Drupal 10.0.0. Use the core/tabbable library instead. See https://www.drupal.org/node/3183730'
      });

      if (element.tagName === 'SUMMARY' || element.tagName === 'DETAILS') {
        var tabIndex = element.getAttribute('tabIndex');

        if (tabIndex === null || tabIndex < 0) {
          return false;
        }
      }

      return isTabbable(element);
    }
  });
})(jQuery, Drupal, window.tabbable);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($) {
  var cachedScrollbarWidth = null;
  var max = Math.max,
      abs = Math.abs;
  var regexHorizontal = /left|center|right/;
  var regexVertical = /top|center|bottom/;
  var regexOffset = /[+-]\d+(\.[\d]+)?%?/;
  var regexPosition = /^\w+/;
  var regexPercent = /%$/;
  var _position = $.fn.position;

  function getOffsets(offsets, width, height) {
    return [parseFloat(offsets[0]) * (regexPercent.test(offsets[0]) ? width / 100 : 1), parseFloat(offsets[1]) * (regexPercent.test(offsets[1]) ? height / 100 : 1)];
  }

  function parseCss(element, property) {
    return parseInt($.css(element, property), 10) || 0;
  }

  function getDimensions(elem) {
    var raw = elem[0];

    if (raw.nodeType === 9) {
      return {
        width: elem.width(),
        height: elem.height(),
        offset: {
          top: 0,
          left: 0
        }
      };
    }

    if ($.isWindow(raw)) {
      return {
        width: elem.width(),
        height: elem.height(),
        offset: {
          top: elem.scrollTop(),
          left: elem.scrollLeft()
        }
      };
    }

    if (raw.preventDefault) {
      return {
        width: 0,
        height: 0,
        offset: {
          top: raw.pageY,
          left: raw.pageX
        }
      };
    }

    return {
      width: elem.outerWidth(),
      height: elem.outerHeight(),
      offset: elem.offset()
    };
  }

  var collisions = {
    fit: {
      left: function left(position, data) {
        var within = data.within;
        var withinOffset = within.isWindow ? within.scrollLeft : within.offset.left;
        var outerWidth = within.width;
        var collisionPosLeft = position.left - data.collisionPosition.marginLeft;
        var overLeft = withinOffset - collisionPosLeft;
        var overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset;
        var newOverRight;

        if (data.collisionWidth > outerWidth) {
          if (overLeft > 0 && overRight <= 0) {
            newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;
            position.left += overLeft - newOverRight;
          } else if (overRight > 0 && overLeft <= 0) {
            position.left = withinOffset;
          } else if (overLeft > overRight) {
            position.left = withinOffset + outerWidth - data.collisionWidth;
          } else {
            position.left = withinOffset;
          }
        } else if (overLeft > 0) {
          position.left += overLeft;
        } else if (overRight > 0) {
          position.left -= overRight;
        } else {
          position.left = max(position.left - collisionPosLeft, position.left);
        }
      },
      top: function top(position, data) {
        var within = data.within;
        var withinOffset = within.isWindow ? within.scrollTop : within.offset.top;
        var outerHeight = data.within.height;
        var collisionPosTop = position.top - data.collisionPosition.marginTop;
        var overTop = withinOffset - collisionPosTop;
        var overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset;
        var newOverBottom;

        if (data.collisionHeight > outerHeight) {
          if (overTop > 0 && overBottom <= 0) {
            newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;
            position.top += overTop - newOverBottom;
          } else if (overBottom > 0 && overTop <= 0) {
            position.top = withinOffset;
          } else if (overTop > overBottom) {
            position.top = withinOffset + outerHeight - data.collisionHeight;
          } else {
            position.top = withinOffset;
          }
        } else if (overTop > 0) {
          position.top += overTop;
        } else if (overBottom > 0) {
          position.top -= overBottom;
        } else {
          position.top = max(position.top - collisionPosTop, position.top);
        }
      }
    },
    flip: {
      left: function left(position, data) {
        var within = data.within;
        var withinOffset = within.offset.left + within.scrollLeft;
        var outerWidth = within.width;
        var offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left;
        var collisionPosLeft = position.left - data.collisionPosition.marginLeft;
        var overLeft = collisionPosLeft - offsetLeft;
        var overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft;
        var myOffset = data.my[0] === 'left' ? -data.elemWidth : data.my[0] === 'right' ? data.elemWidth : 0;
        var atOffset = data.at[0] === 'left' ? data.targetWidth : data.at[0] === 'right' ? -data.targetWidth : 0;
        var offset = -2 * data.offset[0];
        var newOverRight;
        var newOverLeft;

        if (overLeft < 0) {
          newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;

          if (newOverRight < 0 || newOverRight < abs(overLeft)) {
            position.left += myOffset + atOffset + offset;
          }
        } else if (overRight > 0) {
          newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;

          if (newOverLeft > 0 || abs(newOverLeft) < overRight) {
            position.left += myOffset + atOffset + offset;
          }
        }
      },
      top: function top(position, data) {
        var within = data.within;
        var withinOffset = within.offset.top + within.scrollTop;
        var outerHeight = within.height;
        var offsetTop = within.isWindow ? within.scrollTop : within.offset.top;
        var collisionPosTop = position.top - data.collisionPosition.marginTop;
        var overTop = collisionPosTop - offsetTop;
        var overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop;
        var top = data.my[1] === 'top';
        var myOffset = top ? -data.elemHeight : data.my[1] === 'bottom' ? data.elemHeight : 0;
        var atOffset = data.at[1] === 'top' ? data.targetHeight : data.at[1] === 'bottom' ? -data.targetHeight : 0;
        var offset = -2 * data.offset[1];
        var newOverTop;
        var newOverBottom;

        if (overTop < 0) {
          newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;

          if (newOverBottom < 0 || newOverBottom < abs(overTop)) {
            position.top += myOffset + atOffset + offset;
          }
        } else if (overBottom > 0) {
          newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;

          if (newOverTop > 0 || abs(newOverTop) < overBottom) {
            position.top += myOffset + atOffset + offset;
          }
        }
      }
    },
    flipfit: {
      left: function left() {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        collisions.flip.left.apply(this, args);
        collisions.fit.left.apply(this, args);
      },
      top: function top() {
        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
          args[_key2] = arguments[_key2];
        }

        collisions.flip.top.apply(this, args);
        collisions.fit.top.apply(this, args);
      }
    }
  };
  $.position = {
    scrollbarWidth: function scrollbarWidth() {
      if (cachedScrollbarWidth !== undefined) {
        return cachedScrollbarWidth;
      }

      var div = $('<div ' + "style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>" + "<div style='height:100px;width:auto;'></div></div>");
      var innerDiv = div.children()[0];
      $('body').append(div);
      var w1 = innerDiv.offsetWidth;
      div.css('overflow', 'scroll');
      var w2 = innerDiv.offsetWidth;

      if (w1 === w2) {
        w2 = div[0].clientWidth;
      }

      div.remove();
      cachedScrollbarWidth = w1 - w2;
      return cachedScrollbarWidth;
    },
    getScrollInfo: function getScrollInfo(within) {
      var overflowX = within.isWindow || within.isDocument ? '' : within.element.css('overflow-x');
      var overflowY = within.isWindow || within.isDocument ? '' : within.element.css('overflow-y');
      var hasOverflowX = overflowX === 'scroll' || overflowX === 'auto' && within.width < within.element[0].scrollWidth;
      var hasOverflowY = overflowY === 'scroll' || overflowY === 'auto' && within.height < within.element[0].scrollHeight;
      return {
        width: hasOverflowY ? $.position.scrollbarWidth() : 0,
        height: hasOverflowX ? $.position.scrollbarWidth() : 0
      };
    },
    getWithinInfo: function getWithinInfo(element) {
      var withinElement = $(element || window);
      var isWindow = $.isWindow(withinElement[0]);
      var isDocument = !!withinElement[0] && withinElement[0].nodeType === 9;
      var hasOffset = !isWindow && !isDocument;
      return {
        element: withinElement,
        isWindow: isWindow,
        isDocument: isDocument,
        offset: hasOffset ? $(element).offset() : {
          left: 0,
          top: 0
        },
        scrollLeft: withinElement.scrollLeft(),
        scrollTop: withinElement.scrollTop(),
        width: withinElement.outerWidth(),
        height: withinElement.outerHeight()
      };
    }
  };

  $.fn.position = function (options) {
    if (!options || !options.of) {
      return _position.apply(this, arguments);
    }

    options = $.extend({}, options);
    var within = $.position.getWithinInfo(options.within);
    var scrollInfo = $.position.getScrollInfo(within);
    var collision = (options.collision || 'flip').split(' ');
    var offsets = {};
    var target = typeof options.of === 'string' ? $(document).find(options.of) : $(options.of);
    var dimensions = getDimensions(target);
    var targetWidth = dimensions.width;
    var targetHeight = dimensions.height;
    var targetOffset = dimensions.offset;

    if (target[0].preventDefault) {
      options.at = 'left top';
    }

    var basePosition = $.extend({}, targetOffset);
    $.each(['my', 'at'], function () {
      var pos = (options[this] || '').split(' ');

      if (pos.length === 1) {
        pos = regexHorizontal.test(pos[0]) ? pos.concat(['center']) : regexVertical.test(pos[0]) ? ['center'].concat(pos) : ['center', 'center'];
      }

      pos[0] = regexHorizontal.test(pos[0]) ? pos[0] : 'center';
      pos[1] = regexVertical.test(pos[1]) ? pos[1] : 'center';
      var horizontalOffset = regexOffset.exec(pos[0]);
      var verticalOffset = regexOffset.exec(pos[1]);
      offsets[this] = [horizontalOffset ? horizontalOffset[0] : 0, verticalOffset ? verticalOffset[0] : 0];
      options[this] = [regexPosition.exec(pos[0])[0], regexPosition.exec(pos[1])[0]];
    });

    if (collision.length === 1) {
      collision[1] = collision[0];
    }

    if (options.at[0] === 'right') {
      basePosition.left += targetWidth;
    } else if (options.at[0] === 'center') {
      basePosition.left += targetWidth / 2;
    }

    if (options.at[1] === 'bottom') {
      basePosition.top += targetHeight;
    } else if (options.at[1] === 'center') {
      basePosition.top += targetHeight / 2;
    }

    var atOffset = getOffsets(offsets.at, targetWidth, targetHeight);
    basePosition.left += atOffset[0];
    basePosition.top += atOffset[1];
    return this.each(function () {
      var using;
      var elem = $(this);
      var elemWidth = elem.outerWidth();
      var elemHeight = elem.outerHeight();
      var marginLeft = parseCss(this, 'marginLeft');
      var marginTop = parseCss(this, 'marginTop');
      var collisionWidth = elemWidth + marginLeft + parseCss(this, 'marginRight') + scrollInfo.width;
      var collisionHeight = elemHeight + marginTop + parseCss(this, 'marginBottom') + scrollInfo.height;
      var position = $.extend({}, basePosition);
      var myOffset = getOffsets(offsets.my, elem.outerWidth(), elem.outerHeight());

      if (options.my[0] === 'right') {
        position.left -= elemWidth;
      } else if (options.my[0] === 'center') {
        position.left -= elemWidth / 2;
      }

      if (options.my[1] === 'bottom') {
        position.top -= elemHeight;
      } else if (options.my[1] === 'center') {
        position.top -= elemHeight / 2;
      }

      position.left += myOffset[0];
      position.top += myOffset[1];
      var collisionPosition = {
        marginLeft: marginLeft,
        marginTop: marginTop
      };
      $.each(['left', 'top'], function (i, dir) {
        if (collisions[collision[i]]) {
          collisions[collision[i]][dir](position, {
            targetWidth: targetWidth,
            targetHeight: targetHeight,
            elemWidth: elemWidth,
            elemHeight: elemHeight,
            collisionPosition: collisionPosition,
            collisionWidth: collisionWidth,
            collisionHeight: collisionHeight,
            offset: [atOffset[0] + myOffset[0], atOffset[1] + myOffset[1]],
            my: options.my,
            at: options.at,
            within: within,
            elem: elem
          });
        }
      });

      if (options.using) {
        using = function using(props) {
          var left = targetOffset.left - position.left;
          var right = left + targetWidth - elemWidth;
          var top = targetOffset.top - position.top;
          var bottom = top + targetHeight - elemHeight;
          var feedback = {
            target: {
              element: target,
              left: targetOffset.left,
              top: targetOffset.top,
              width: targetWidth,
              height: targetHeight
            },
            element: {
              element: elem,
              left: position.left,
              top: position.top,
              width: elemWidth,
              height: elemHeight
            },
            horizontal: right < 0 ? 'left' : left > 0 ? 'right' : 'center',
            vertical: bottom < 0 ? 'top' : top > 0 ? 'bottom' : 'middle'
          };

          if (targetWidth < elemWidth && abs(left + right) < targetWidth) {
            feedback.horizontal = 'center';
          }

          if (targetHeight < elemHeight && abs(top + bottom) < targetHeight) {
            feedback.vertical = 'middle';
          }

          if (max(abs(left), abs(right)) > max(abs(top), abs(bottom))) {
            feedback.important = 'horizontal';
          } else {
            feedback.important = 'vertical';
          }

          options.using.call(this, props, feedback);
        };
      }

      elem.offset($.extend(position, {
        using: using
      }));
    });
  };

  if (!$.hasOwnProperty('ui')) {
    $.ui = {};
  }

  $.ui.position = collisions;
})(jQuery);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, drupalSettings) {
  Drupal.behaviors.machineName = {
    attach: function attach(context, settings) {
      var self = this;
      var $context = $(context);
      var timeout = null;
      var xhr = null;

      function clickEditHandler(e) {
        var data = e.data;
        data.$wrapper.removeClass('visually-hidden');
        data.$target.trigger('focus');
        data.$suffix.hide();
        data.$source.off('.machineName');
      }

      function machineNameHandler(e) {
        var data = e.data;
        var options = data.options;
        var baseValue = $(e.target).val();
        var rx = new RegExp(options.replace_pattern, 'g');
        var expected = baseValue.toLowerCase().replace(rx, options.replace).substr(0, options.maxlength);

        if (xhr && xhr.readystate !== 4) {
          xhr.abort();
          xhr = null;
        }

        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }

        if (baseValue.toLowerCase() !== expected) {
          timeout = setTimeout(function () {
            xhr = self.transliterate(baseValue, options).done(function (machine) {
              self.showMachineName(machine.substr(0, options.maxlength), data);
            });
          }, 300);
        } else {
          self.showMachineName(expected, data);
        }
      }

      Object.keys(settings.machineName).forEach(function (sourceId) {
        var options = settings.machineName[sourceId];
        var $source = $(once('machine-name', $context.find(sourceId).addClass('machine-name-source')));
        var $target = $context.find(options.target).addClass('machine-name-target');
        var $suffix = $context.find(options.suffix);
        var $wrapper = $target.closest('.js-form-item');

        if (!$source.length || !$target.length || !$suffix.length || !$wrapper.length) {
          return;
        }

        if ($target.hasClass('error')) {
          return;
        }

        options.maxlength = $target.attr('maxlength');
        $wrapper.addClass('visually-hidden');
        var machine = $target.val();
        var $preview = $("<span class=\"machine-name-value\">".concat(options.field_prefix).concat(Drupal.checkPlain(machine)).concat(options.field_suffix, "</span>"));
        $suffix.empty();

        if (options.label) {
          $suffix.append("<span class=\"machine-name-label\">".concat(options.label, ": </span>"));
        }

        $suffix.append($preview);

        if ($target.is(':disabled')) {
          return;
        }

        var eventData = {
          $source: $source,
          $target: $target,
          $suffix: $suffix,
          $wrapper: $wrapper,
          $preview: $preview,
          options: options
        };

        if (machine === '' && $source.val() !== '') {
          self.transliterate($source.val(), options).done(function (machineName) {
            self.showMachineName(machineName.substr(0, options.maxlength), eventData);
          });
        }

        var $link = $("<span class=\"admin-link\"><button type=\"button\" class=\"link\">".concat(Drupal.t('Edit'), "</button></span>")).on('click', eventData, clickEditHandler);
        $suffix.append($link);

        if ($target.val() === '') {
          $source.on('formUpdated.machineName', eventData, machineNameHandler).trigger('formUpdated.machineName');
        }

        $target.on('invalid', eventData, clickEditHandler);
      });
    },
    showMachineName: function showMachineName(machine, data) {
      var settings = data.options;

      if (machine !== '') {
        if (machine !== settings.replace) {
          data.$target.val(machine);
          data.$preview.html(settings.field_prefix + Drupal.checkPlain(machine) + settings.field_suffix);
        }

        data.$suffix.show();
      } else {
        data.$suffix.hide();
        data.$target.val(machine);
        data.$preview.empty();
      }
    },
    transliterate: function transliterate(source, settings) {
      return $.get(Drupal.url('machine_name/transliterate'), {
        text: source,
        langcode: drupalSettings.langcode,
        replace_pattern: settings.replace_pattern,
        replace_token: settings.replace_token,
        replace: settings.replace,
        lowercase: true
      });
    }
  };
})(jQuery, Drupal, drupalSettings);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, debounce) {
  var liveElement;
  var announcements = [];
  Drupal.behaviors.drupalAnnounce = {
    attach: function attach(context) {
      if (!liveElement) {
        liveElement = document.createElement('div');
        liveElement.id = 'drupal-live-announce';
        liveElement.className = 'visually-hidden';
        liveElement.setAttribute('aria-live', 'polite');
        liveElement.setAttribute('aria-busy', 'false');
        document.body.appendChild(liveElement);
      }
    }
  };

  function announce() {
    var text = [];
    var priority = 'polite';
    var announcement;
    var il = announcements.length;

    for (var i = 0; i < il; i++) {
      announcement = announcements.pop();
      text.unshift(announcement.text);

      if (announcement.priority === 'assertive') {
        priority = 'assertive';
      }
    }

    if (text.length) {
      liveElement.innerHTML = '';
      liveElement.setAttribute('aria-busy', 'true');
      liveElement.setAttribute('aria-live', priority);
      liveElement.innerHTML = text.join('\n');
      liveElement.setAttribute('aria-busy', 'false');
    }
  }

  Drupal.announce = function (text, priority) {
    announcements.push({
      text: text,
      priority: priority
    });
    return debounce(announce, 200)();
  };
})(Drupal, Drupal.debounce);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, debounce) {
  var offsets = {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };

  function getRawOffset(el, edge) {
    var $el = $(el);
    var documentElement = document.documentElement;
    var displacement = 0;
    var horizontal = edge === 'left' || edge === 'right';
    var placement = $el.offset()[horizontal ? 'left' : 'top'];
    placement -= window["scroll".concat(horizontal ? 'X' : 'Y')] || document.documentElement["scroll".concat(horizontal ? 'Left' : 'Top')] || 0;

    switch (edge) {
      case 'top':
        displacement = placement + $el.outerHeight();
        break;

      case 'left':
        displacement = placement + $el.outerWidth();
        break;

      case 'bottom':
        displacement = documentElement.clientHeight - placement;
        break;

      case 'right':
        displacement = documentElement.clientWidth - placement;
        break;

      default:
        displacement = 0;
    }

    return displacement;
  }

  function calculateOffset(edge) {
    var edgeOffset = 0;
    var displacingElements = document.querySelectorAll("[data-offset-".concat(edge, "]"));
    var n = displacingElements.length;

    for (var i = 0; i < n; i++) {
      var el = displacingElements[i];

      if (el.style.display === 'none') {
        continue;
      }

      var displacement = parseInt(el.getAttribute("data-offset-".concat(edge)), 10);

      if (isNaN(displacement)) {
        displacement = getRawOffset(el, edge);
      }

      edgeOffset = Math.max(edgeOffset, displacement);
    }

    return edgeOffset;
  }

  function calculateOffsets() {
    return {
      top: calculateOffset('top'),
      right: calculateOffset('right'),
      bottom: calculateOffset('bottom'),
      left: calculateOffset('left')
    };
  }

  function displace(broadcast) {
    offsets = calculateOffsets();
    Drupal.displace.offsets = offsets;

    if (typeof broadcast === 'undefined' || broadcast) {
      $(document).trigger('drupalViewportOffsetChange', offsets);
    }

    return offsets;
  }

  Drupal.behaviors.drupalDisplace = {
    attach: function attach() {
      if (this.displaceProcessed) {
        return;
      }

      this.displaceProcessed = true;
      $(window).on('resize.drupalDisplace', debounce(displace, 200));
    }
  };
  Drupal.displace = displace;
  $.extend(Drupal.displace, {
    offsets: offsets,
    calculateOffset: calculateOffset
  });
})(jQuery, Drupal, Drupal.debounce);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, drupalSettings) {
  var activeItem = Drupal.url(drupalSettings.path.currentPath);

  $.fn.drupalToolbarMenu = function () {
    var ui = {
      handleOpen: Drupal.t('Extend'),
      handleClose: Drupal.t('Collapse')
    };

    function toggleList($item, switcher) {
      var $toggle = $item.children('.toolbar-box').children('.toolbar-handle');
      switcher = typeof switcher !== 'undefined' ? switcher : !$item.hasClass('open');
      $item.toggleClass('open', switcher);
      $toggle.toggleClass('open', switcher);
      $toggle.find('.action').text(switcher ? ui.handleClose : ui.handleOpen);
    }

    function toggleClickHandler(event) {
      var $toggle = $(event.target);
      var $item = $toggle.closest('li');
      toggleList($item);
      var $openItems = $item.siblings().filter('.open');
      toggleList($openItems, false);
    }

    function linkClickHandler(event) {
      if (!Drupal.toolbar.models.toolbarModel.get('isFixed')) {
        Drupal.toolbar.models.toolbarModel.set('activeTab', null);
      }

      event.stopPropagation();
    }

    function initItems($menu) {
      var options = {
        class: 'toolbar-icon toolbar-handle',
        action: ui.handleOpen,
        text: ''
      };
      $menu.find('li > a').wrap('<div class="toolbar-box">');
      $menu.find('li').each(function (index, element) {
        var $item = $(element);

        if ($item.children('ul.toolbar-menu').length) {
          var $box = $item.children('.toolbar-box');
          options.text = Drupal.t('@label', {
            '@label': $box.find('a').text()
          });
          $item.children('.toolbar-box').append(Drupal.theme('toolbarMenuItemToggle', options));
        }
      });
    }

    function markListLevels($lists, level) {
      level = !level ? 1 : level;
      var $lis = $lists.children('li').addClass("level-".concat(level));
      $lists = $lis.children('ul');

      if ($lists.length) {
        markListLevels($lists, level + 1);
      }
    }

    function openActiveItem($menu) {
      var pathItem = $menu.find("a[href=\"".concat(window.location.pathname, "\"]"));

      if (pathItem.length && !activeItem) {
        activeItem = window.location.pathname;
      }

      if (activeItem) {
        var $activeItem = $menu.find("a[href=\"".concat(activeItem, "\"]")).addClass('menu-item--active');
        var $activeTrail = $activeItem.parentsUntil('.root', 'li').addClass('menu-item--active-trail');
        toggleList($activeTrail, true);
      }
    }

    return this.each(function (selector) {
      var menu = once('toolbar-menu', this);

      if (menu.length) {
        var $menu = $(menu);
        $menu.on('click.toolbar', '.toolbar-box', toggleClickHandler).on('click.toolbar', '.toolbar-box a', linkClickHandler);
        $menu.addClass('root');
        initItems($menu);
        markListLevels($menu);
        openActiveItem($menu);
      }
    });
  };

  Drupal.theme.toolbarMenuItemToggle = function (options) {
    return "<button class=\"".concat(options.class, "\"><span class=\"action\">").concat(options.action, "</span> <span class=\"label\">").concat(options.text, "</span></button>");
  };
})(jQuery, Drupal, drupalSettings);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, drupalSettings) {
  var options = $.extend({
    breakpoints: {
      'toolbar.narrow': '',
      'toolbar.standard': '',
      'toolbar.wide': ''
    }
  }, drupalSettings.toolbar, {
    strings: {
      horizontal: Drupal.t('Horizontal orientation'),
      vertical: Drupal.t('Vertical orientation')
    }
  });
  Drupal.behaviors.toolbar = {
    attach: function attach(context) {
      if (!window.matchMedia('only screen').matches) {
        return;
      }

      once('toolbar', '#toolbar-administration', context).forEach(function (toolbar) {
        var model = new Drupal.toolbar.ToolbarModel({
          locked: JSON.parse(localStorage.getItem('Drupal.toolbar.trayVerticalLocked')),
          activeTab: document.getElementById(JSON.parse(localStorage.getItem('Drupal.toolbar.activeTabID'))),
          height: $('#toolbar-administration').outerHeight()
        });
        Drupal.toolbar.models.toolbarModel = model;
        Object.keys(options.breakpoints).forEach(function (label) {
          var mq = options.breakpoints[label];
          var mql = window.matchMedia(mq);
          Drupal.toolbar.mql[label] = mql;
          mql.addListener(Drupal.toolbar.mediaQueryChangeHandler.bind(null, model, label));
          Drupal.toolbar.mediaQueryChangeHandler.call(null, model, label, mql);
        });
        Drupal.toolbar.views.toolbarVisualView = new Drupal.toolbar.ToolbarVisualView({
          el: toolbar,
          model: model,
          strings: options.strings
        });
        Drupal.toolbar.views.toolbarAuralView = new Drupal.toolbar.ToolbarAuralView({
          el: toolbar,
          model: model,
          strings: options.strings
        });
        Drupal.toolbar.views.bodyVisualView = new Drupal.toolbar.BodyVisualView({
          el: toolbar,
          model: model
        });
        model.trigger('change:isFixed', model, model.get('isFixed'));
        model.trigger('change:activeTray', model, model.get('activeTray'));
        var menuModel = new Drupal.toolbar.MenuModel();
        Drupal.toolbar.models.menuModel = menuModel;
        Drupal.toolbar.views.menuVisualView = new Drupal.toolbar.MenuVisualView({
          el: $(toolbar).find('.toolbar-menu-administration').get(0),
          model: menuModel,
          strings: options.strings
        });
        Drupal.toolbar.setSubtrees.done(function (subtrees) {
          menuModel.set('subtrees', subtrees);
          var theme = drupalSettings.ajaxPageState.theme;
          localStorage.setItem("Drupal.toolbar.subtrees.".concat(theme), JSON.stringify(subtrees));
          model.set('areSubtreesLoaded', true);
        });
        Drupal.toolbar.views.toolbarVisualView.loadSubtrees();
        $(document).on('drupalViewportOffsetChange.toolbar', function (event, offsets) {
          model.set('offsets', offsets);
        });
        model.on('change:orientation', function (model, orientation) {
          $(document).trigger('drupalToolbarOrientationChange', orientation);
        }).on('change:activeTab', function (model, tab) {
          $(document).trigger('drupalToolbarTabChange', tab);
        }).on('change:activeTray', function (model, tray) {
          $(document).trigger('drupalToolbarTrayChange', tray);
        });

        if (Drupal.toolbar.models.toolbarModel.get('orientation') === 'horizontal' && Drupal.toolbar.models.toolbarModel.get('activeTab') === null) {
          Drupal.toolbar.models.toolbarModel.set({
            activeTab: $('.toolbar-bar .toolbar-tab:not(.home-toolbar-tab) a').get(0)
          });
        }

        $(window).on({
          'dialog:aftercreate': function dialogAftercreate(event, dialog, $element, settings) {
            var $toolbar = $('#toolbar-bar');
            $toolbar.css('margin-top', '0');

            if (settings.drupalOffCanvasPosition === 'top') {
              var height = Drupal.offCanvas.getContainer($element).outerHeight();
              $toolbar.css('margin-top', "".concat(height, "px"));
              $element.on('dialogContentResize.off-canvas', function () {
                var newHeight = Drupal.offCanvas.getContainer($element).outerHeight();
                $toolbar.css('margin-top', "".concat(newHeight, "px"));
              });
            }
          },
          'dialog:beforeclose': function dialogBeforeclose() {
            $('#toolbar-bar').css('margin-top', '0');
          }
        });
      });
    }
  };
  Drupal.toolbar = {
    views: {},
    models: {},
    mql: {},
    setSubtrees: new $.Deferred(),
    mediaQueryChangeHandler: function mediaQueryChangeHandler(model, label, mql) {
      switch (label) {
        case 'toolbar.narrow':
          model.set({
            isOriented: mql.matches,
            isTrayToggleVisible: false
          });

          if (!mql.matches || !model.get('orientation')) {
            model.set({
              orientation: 'vertical'
            }, {
              validate: true
            });
          }

          break;

        case 'toolbar.standard':
          model.set({
            isFixed: mql.matches
          });
          break;

        case 'toolbar.wide':
          model.set({
            orientation: mql.matches && !model.get('locked') ? 'horizontal' : 'vertical'
          }, {
            validate: true
          });
          model.set({
            isTrayToggleVisible: mql.matches
          });
          break;

        default:
          break;
      }
    }
  };

  Drupal.theme.toolbarOrientationToggle = function () {
    return '<div class="toolbar-toggle-orientation"><div class="toolbar-lining">' + '<button class="toolbar-icon" type="button"></button>' + '</div></div>';
  };

  Drupal.AjaxCommands.prototype.setToolbarSubtrees = function (ajax, response, status) {
    Drupal.toolbar.setSubtrees.resolve(response.subtrees);
  };
})(jQuery, Drupal, drupalSettings);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Backbone, Drupal) {
  Drupal.toolbar.MenuModel = Backbone.Model.extend({
    defaults: {
      subtrees: {}
    }
  });
})(Backbone, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Backbone, Drupal) {
  Drupal.toolbar.ToolbarModel = Backbone.Model.extend({
    defaults: {
      activeTab: null,
      activeTray: null,
      isOriented: false,
      isFixed: false,
      areSubtreesLoaded: false,
      isViewportOverflowConstrained: false,
      orientation: 'horizontal',
      locked: false,
      isTrayToggleVisible: true,
      height: null,
      offsets: {
        top: 0,
        right: 0,
        bottom: 0,
        left: 0
      }
    },
    validate: function validate(attributes, options) {
      if (attributes.orientation === 'horizontal' && this.get('locked') && !options.override) {
        return Drupal.t('The toolbar cannot be set to a horizontal orientation when it is locked.');
      }
    }
  });
})(Backbone, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, Backbone) {
  Drupal.toolbar.BodyVisualView = Backbone.View.extend({
    initialize: function initialize() {
      this.listenTo(this.model, 'change:activeTray ', this.render);
      this.listenTo(this.model, 'change:isFixed change:isViewportOverflowConstrained', this.isToolbarFixed);
    },
    isToolbarFixed: function isToolbarFixed() {
      var isViewportOverflowConstrained = this.model.get('isViewportOverflowConstrained');
      $('body').toggleClass('toolbar-fixed', isViewportOverflowConstrained || this.model.get('isFixed'));
    },
    render: function render() {
      $('body').toggleClass('toolbar-tray-open', !!this.model.get('activeTray'));
    }
  });
})(jQuery, Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Backbone, Drupal) {
  Drupal.toolbar.MenuVisualView = Backbone.View.extend({
    initialize: function initialize() {
      this.listenTo(this.model, 'change:subtrees', this.render);
    },
    render: function render() {
      var _this = this;

      var subtrees = this.model.get('subtrees');
      Object.keys(subtrees || {}).forEach(function (id) {
        $(once('toolbar-subtrees', _this.$el.find("#toolbar-link-".concat(id)))).after(subtrees[id]);
      });

      if ('drupalToolbarMenu' in $.fn) {
        this.$el.children('.toolbar-menu').drupalToolbarMenu();
      }
    }
  });
})(jQuery, Backbone, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Backbone, Drupal) {
  Drupal.toolbar.ToolbarAuralView = Backbone.View.extend({
    initialize: function initialize(options) {
      this.strings = options.strings;
      this.listenTo(this.model, 'change:orientation', this.onOrientationChange);
      this.listenTo(this.model, 'change:activeTray', this.onActiveTrayChange);
    },
    onOrientationChange: function onOrientationChange(model, orientation) {
      Drupal.announce(Drupal.t('Tray orientation changed to @orientation.', {
        '@orientation': orientation
      }));
    },
    onActiveTrayChange: function onActiveTrayChange(model, tray) {
      var relevantTray = tray === null ? model.previous('activeTray') : tray;

      if (!relevantTray) {
        return;
      }

      var action = tray === null ? Drupal.t('closed') : Drupal.t('opened');
      var trayNameElement = relevantTray.querySelector('.toolbar-tray-name');
      var text;

      if (trayNameElement !== null) {
        text = Drupal.t('Tray "@tray" @action.', {
          '@tray': trayNameElement.textContent,
          '@action': action
        });
      } else {
        text = Drupal.t('Tray @action.', {
          '@action': action
        });
      }

      Drupal.announce(text);
    }
  });
})(Backbone, Drupal);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, drupalSettings, Backbone) {
  Drupal.toolbar.ToolbarVisualView = Backbone.View.extend({
    events: function events() {
      var touchEndToClick = function touchEndToClick(event) {
        event.preventDefault();
        event.target.click();
      };

      return {
        'click .toolbar-bar .toolbar-tab .trigger': 'onTabClick',
        'click .toolbar-toggle-orientation button': 'onOrientationToggleClick',
        'touchend .toolbar-bar .toolbar-tab .trigger': touchEndToClick,
        'touchend .toolbar-toggle-orientation button': touchEndToClick
      };
    },
    initialize: function initialize(options) {
      this.strings = options.strings;
      this.listenTo(this.model, 'change:activeTab change:orientation change:isOriented change:isTrayToggleVisible', this.render);
      this.listenTo(this.model, 'change:mqMatches', this.onMediaQueryChange);
      this.listenTo(this.model, 'change:offsets', this.adjustPlacement);
      this.listenTo(this.model, 'change:activeTab change:orientation change:isOriented', this.updateToolbarHeight);
      this.$el.find('.toolbar-tray .toolbar-lining').append(Drupal.theme('toolbarOrientationToggle'));
      this.model.trigger('change:activeTab');
    },
    updateToolbarHeight: function updateToolbarHeight() {
      var toolbarTabOuterHeight = $('#toolbar-bar').find('.toolbar-tab').outerHeight() || 0;
      var toolbarTrayHorizontalOuterHeight = $('.is-active.toolbar-tray-horizontal').outerHeight() || 0;
      this.model.set('height', toolbarTabOuterHeight + toolbarTrayHorizontalOuterHeight);
      $('body').css({
        'padding-top': this.model.get('height')
      });
      $('html').css({
        'scroll-padding-top': this.model.get('height')
      });
      this.triggerDisplace();
    },
    triggerDisplace: function triggerDisplace() {
      _.defer(function () {
        Drupal.displace(true);
      });
    },
    render: function render() {
      this.updateTabs();
      this.updateTrayOrientation();
      this.updateBarAttributes();
      $('body').removeClass('toolbar-loading');

      if (this.model.changed.orientation === 'vertical' || this.model.changed.activeTab) {
        this.loadSubtrees();
      }

      return this;
    },
    onTabClick: function onTabClick(event) {
      if (event.currentTarget.hasAttribute('data-toolbar-tray')) {
        var activeTab = this.model.get('activeTab');
        var clickedTab = event.currentTarget;
        this.model.set('activeTab', !activeTab || clickedTab !== activeTab ? clickedTab : null);
        event.preventDefault();
        event.stopPropagation();
      }
    },
    onOrientationToggleClick: function onOrientationToggleClick(event) {
      var orientation = this.model.get('orientation');
      var antiOrientation = orientation === 'vertical' ? 'horizontal' : 'vertical';
      var locked = antiOrientation === 'vertical';

      if (locked) {
        localStorage.setItem('Drupal.toolbar.trayVerticalLocked', 'true');
      } else {
        localStorage.removeItem('Drupal.toolbar.trayVerticalLocked');
      }

      this.model.set({
        locked: locked,
        orientation: antiOrientation
      }, {
        validate: true,
        override: true
      });
      event.preventDefault();
      event.stopPropagation();
    },
    updateTabs: function updateTabs() {
      var $tab = $(this.model.get('activeTab'));
      $(this.model.previous('activeTab')).removeClass('is-active').prop('aria-pressed', false);
      $(this.model.previous('activeTray')).removeClass('is-active');

      if ($tab.length > 0) {
        $tab.addClass('is-active').prop('aria-pressed', true);
        var name = $tab.attr('data-toolbar-tray');
        var id = $tab.get(0).id;

        if (id) {
          localStorage.setItem('Drupal.toolbar.activeTabID', JSON.stringify(id));
        }

        var $tray = this.$el.find("[data-toolbar-tray=\"".concat(name, "\"].toolbar-tray"));

        if ($tray.length) {
          $tray.addClass('is-active');
          this.model.set('activeTray', $tray.get(0));
        } else {
          this.model.set('activeTray', null);
        }
      } else {
        this.model.set('activeTray', null);
        localStorage.removeItem('Drupal.toolbar.activeTabID');
      }
    },
    updateBarAttributes: function updateBarAttributes() {
      var isOriented = this.model.get('isOriented');

      if (isOriented) {
        this.$el.find('.toolbar-bar').attr('data-offset-top', '');
      } else {
        this.$el.find('.toolbar-bar').removeAttr('data-offset-top');
      }

      this.$el.toggleClass('toolbar-oriented', isOriented);
    },
    updateTrayOrientation: function updateTrayOrientation() {
      var orientation = this.model.get('orientation');
      var antiOrientation = orientation === 'vertical' ? 'horizontal' : 'vertical';
      $('body').toggleClass('toolbar-vertical', orientation === 'vertical').toggleClass('toolbar-horizontal', orientation === 'horizontal');
      var removeClass = antiOrientation === 'horizontal' ? 'toolbar-tray-horizontal' : 'toolbar-tray-vertical';
      var $trays = this.$el.find('.toolbar-tray').removeClass(removeClass).addClass("toolbar-tray-".concat(orientation));
      var iconClass = "toolbar-icon-toggle-".concat(orientation);
      var iconAntiClass = "toolbar-icon-toggle-".concat(antiOrientation);
      var $orientationToggle = this.$el.find('.toolbar-toggle-orientation').toggle(this.model.get('isTrayToggleVisible'));
      $orientationToggle.find('button').val(antiOrientation).attr('title', this.strings[antiOrientation]).text(this.strings[antiOrientation]).removeClass(iconClass).addClass(iconAntiClass);
      var dir = document.documentElement.dir;
      var edge = dir === 'rtl' ? 'right' : 'left';
      $trays.removeAttr('data-offset-left data-offset-right data-offset-top');
      $trays.filter('.toolbar-tray-vertical.is-active').attr("data-offset-".concat(edge), '');
      $trays.filter('.toolbar-tray-horizontal.is-active').attr('data-offset-top', '');
    },
    adjustPlacement: function adjustPlacement() {
      var $trays = this.$el.find('.toolbar-tray');

      if (!this.model.get('isOriented')) {
        $trays.removeClass('toolbar-tray-horizontal').addClass('toolbar-tray-vertical');
      }
    },
    loadSubtrees: function loadSubtrees() {
      var $activeTab = $(this.model.get('activeTab'));
      var orientation = this.model.get('orientation');

      if (!this.model.get('areSubtreesLoaded') && typeof $activeTab.data('drupal-subtrees') !== 'undefined' && orientation === 'vertical') {
        var subtreesHash = drupalSettings.toolbar.subtreesHash;
        var theme = drupalSettings.ajaxPageState.theme;
        var endpoint = Drupal.url("toolbar/subtrees/".concat(subtreesHash));
        var cachedSubtreesHash = localStorage.getItem("Drupal.toolbar.subtreesHash.".concat(theme));
        var cachedSubtrees = JSON.parse(localStorage.getItem("Drupal.toolbar.subtrees.".concat(theme)));
        var isVertical = this.model.get('orientation') === 'vertical';

        if (isVertical && subtreesHash === cachedSubtreesHash && cachedSubtrees) {
          Drupal.toolbar.setSubtrees.resolve(cachedSubtrees);
        } else if (isVertical) {
          localStorage.removeItem("Drupal.toolbar.subtreesHash.".concat(theme));
          localStorage.removeItem("Drupal.toolbar.subtrees.".concat(theme));
          Drupal.ajax({
            url: endpoint
          }).execute();
          localStorage.setItem("Drupal.toolbar.subtreesHash.".concat(theme), subtreesHash);
        }
      }
    }
  });
})(jQuery, Drupal, drupalSettings, Backbone);;
/*! shepherd.js 8.3.1 */

'use strict';(function(G,ca){"object"===typeof exports&&"undefined"!==typeof module?module.exports=ca():"function"===typeof define&&define.amd?define(ca):(G="undefined"!==typeof globalThis?globalThis:G||self,G.Shepherd=ca())})(this,function(){function G(a,b){return!1!==b.clone&&b.isMergeableObject(a)?V(Array.isArray(a)?[]:{},a,b):a}function ca(a,b,c){return a.concat(b).map(function(a){return G(a,c)})}function tb(a){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(a).filter(function(b){return a.propertyIsEnumerable(b)}):
[]}function Ia(a){return Object.keys(a).concat(tb(a))}function Ja(a,b){try{return b in a}catch(c){return!1}}function ub(a,b,c){var d={};c.isMergeableObject(a)&&Ia(a).forEach(function(b){d[b]=G(a[b],c)});Ia(b).forEach(function(e){if(!Ja(a,e)||Object.hasOwnProperty.call(a,e)&&Object.propertyIsEnumerable.call(a,e))if(Ja(a,e)&&c.isMergeableObject(b[e])){if(c.customMerge){var f=c.customMerge(e);f="function"===typeof f?f:V}else f=V;d[e]=f(a[e],b[e],c)}else d[e]=G(b[e],c)});return d}function V(a,b,c){c=
c||{};c.arrayMerge=c.arrayMerge||ca;c.isMergeableObject=c.isMergeableObject||vb;c.cloneUnlessOtherwiseSpecified=G;var d=Array.isArray(b),e=Array.isArray(a);return d!==e?G(b,c):d?c.arrayMerge(a,b,c):ub(a,b,c)}function W(a){return"function"===typeof a}function da(a){return"string"===typeof a}function Ka(a){let b=Object.getOwnPropertyNames(a.constructor.prototype);for(let c=0;c<b.length;c++){let d=b[c],e=a[d];"constructor"!==d&&"function"===typeof e&&(a[d]=e.bind(a))}return a}function wb(a,b){return c=>
{if(b.isOpen()){let d=b.el&&c.currentTarget===b.el;(void 0!==a&&c.currentTarget.matches(a)||d)&&b.tour.next()}}}function xb(a){let {event:b,selector:c}=a.options.advanceOn||{};if(b){let d=wb(c,a),e;try{e=document.querySelector(c)}catch(f){}if(void 0===c||e)e?(e.addEventListener(b,d),a.on("destroy",()=>e.removeEventListener(b,d))):(document.body.addEventListener(b,d,!0),a.on("destroy",()=>document.body.removeEventListener(b,d,!0)));else return console.error(`No element was found for the selector supplied to advanceOn: ${c}`)}else return console.error("advanceOn was defined, but no event name was passed.")}
function B(a){return a?(a.nodeName||"").toLowerCase():null}function z(a){return null==a?window:"[object Window]"!==a.toString()?(a=a.ownerDocument)?a.defaultView||window:window:a}function ea(a){var b=z(a).Element;return a instanceof b||a instanceof Element}function y(a){var b=z(a).HTMLElement;return a instanceof b||a instanceof HTMLElement}function La(a){if("undefined"===typeof ShadowRoot)return!1;var b=z(a).ShadowRoot;return a instanceof b||a instanceof ShadowRoot}function F(a){return a.split("-")[0]}
function X(a){a=a.getBoundingClientRect();return{width:a.width,height:a.height,top:a.top,right:a.right,bottom:a.bottom,left:a.left,x:a.left,y:a.top}}function ta(a){var b=X(a),c=a.offsetWidth,d=a.offsetHeight;1>=Math.abs(b.width-c)&&(c=b.width);1>=Math.abs(b.height-d)&&(d=b.height);return{x:a.offsetLeft,y:a.offsetTop,width:c,height:d}}function Ma(a,b){var c=b.getRootNode&&b.getRootNode();if(a.contains(b))return!0;if(c&&La(c)){do{if(b&&a.isSameNode(b))return!0;b=b.parentNode||b.host}while(b)}return!1}
function H(a){return z(a).getComputedStyle(a)}function L(a){return((ea(a)?a.ownerDocument:a.document)||window.document).documentElement}function la(a){return"html"===B(a)?a:a.assignedSlot||a.parentNode||(La(a)?a.host:null)||L(a)}function Na(a){return y(a)&&"fixed"!==H(a).position?a.offsetParent:null}function fa(a){for(var b=z(a),c=Na(a);c&&0<=["table","td","th"].indexOf(B(c))&&"static"===H(c).position;)c=Na(c);if(c&&("html"===B(c)||"body"===B(c)&&"static"===H(c).position))return b;if(!c)a:{c=-1!==
navigator.userAgent.toLowerCase().indexOf("firefox");if(-1===navigator.userAgent.indexOf("Trident")||!y(a)||"fixed"!==H(a).position)for(a=la(a);y(a)&&0>["html","body"].indexOf(B(a));){var d=H(a);if("none"!==d.transform||"none"!==d.perspective||"paint"===d.contain||-1!==["transform","perspective"].indexOf(d.willChange)||c&&"filter"===d.willChange||c&&d.filter&&"none"!==d.filter){c=a;break a}else a=a.parentNode}c=null}return c||b}function ua(a){return 0<=["top","bottom"].indexOf(a)?"x":"y"}function Oa(a){return Object.assign({},
{top:0,right:0,bottom:0,left:0},a)}function Pa(a,b){return b.reduce(function(b,d){b[d]=a;return b},{})}function Qa(a){var b,c=a.popper,d=a.popperRect,e=a.placement,f=a.offsets,h=a.position,k=a.gpuAcceleration,m=a.adaptive;a=a.roundOffsets;if(!0===a){a=f.y;var g=window.devicePixelRatio||1;a={x:ma(ma(f.x*g)/g)||0,y:ma(ma(a*g)/g)||0}}else a="function"===typeof a?a(f):f;g=a;a=g.x;a=void 0===a?0:a;g=g.y;g=void 0===g?0:g;var l=f.hasOwnProperty("x");f=f.hasOwnProperty("y");var p="left",t="top",A=window;
if(m){var C=fa(c),u="clientHeight",D="clientWidth";C===z(c)&&(C=L(c),"static"!==H(C).position&&(u="scrollHeight",D="scrollWidth"));"top"===e&&(t="bottom",g-=C[u]-d.height,g*=k?1:-1);"left"===e&&(p="right",a-=C[D]-d.width,a*=k?1:-1)}c=Object.assign({position:h},m&&yb);if(k){var v;return Object.assign({},c,(v={},v[t]=f?"0":"",v[p]=l?"0":"",v.transform=2>(A.devicePixelRatio||1)?"translate("+a+"px, "+g+"px)":"translate3d("+a+"px, "+g+"px, 0)",v))}return Object.assign({},c,(b={},b[t]=f?g+"px":"",b[p]=
l?a+"px":"",b.transform="",b))}function na(a){return a.replace(/left|right|bottom|top/g,function(a){return zb[a]})}function Ra(a){return a.replace(/start|end/g,function(a){return Ab[a]})}function va(a){a=z(a);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function wa(a){return X(L(a)).left+va(a).scrollLeft}function xa(a){a=H(a);return/auto|scroll|overlay|hidden/.test(a.overflow+a.overflowY+a.overflowX)}function Sa(a){return 0<=["html","body","#document"].indexOf(B(a))?a.ownerDocument.body:
y(a)&&xa(a)?a:Sa(la(a))}function ha(a,b){var c;void 0===b&&(b=[]);var d=Sa(a);a=d===(null==(c=a.ownerDocument)?void 0:c.body);c=z(d);d=a?[c].concat(c.visualViewport||[],xa(d)?d:[]):d;b=b.concat(d);return a?b:b.concat(ha(la(d)))}function ya(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function Ta(a,b){if("viewport"===b){b=z(a);var c=L(a);b=b.visualViewport;var d=c.clientWidth;c=c.clientHeight;var e=0,f=0;b&&(d=b.width,c=b.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||
(e=b.offsetLeft,f=b.offsetTop));a={width:d,height:c,x:e+wa(a),y:f};a=ya(a)}else y(b)?(a=X(b),a.top+=b.clientTop,a.left+=b.clientLeft,a.bottom=a.top+b.clientHeight,a.right=a.left+b.clientWidth,a.width=b.clientWidth,a.height=b.clientHeight,a.x=a.left,a.y=a.top):(f=L(a),a=L(f),d=va(f),b=null==(c=f.ownerDocument)?void 0:c.body,c=E(a.scrollWidth,a.clientWidth,b?b.scrollWidth:0,b?b.clientWidth:0),e=E(a.scrollHeight,a.clientHeight,b?b.scrollHeight:0,b?b.clientHeight:0),f=-d.scrollLeft+wa(f),d=-d.scrollTop,
"rtl"===H(b||a).direction&&(f+=E(a.clientWidth,b?b.clientWidth:0)-c),a=ya({width:c,height:e,x:f,y:d}));return a}function Bb(a){var b=ha(la(a)),c=0<=["absolute","fixed"].indexOf(H(a).position)&&y(a)?fa(a):a;return ea(c)?b.filter(function(a){return ea(a)&&Ma(a,c)&&"body"!==B(a)}):[]}function Cb(a,b,c){b="clippingParents"===b?Bb(a):[].concat(b);c=[].concat(b,[c]);c=c.reduce(function(b,c){c=Ta(a,c);b.top=E(c.top,b.top);b.right=M(c.right,b.right);b.bottom=M(c.bottom,b.bottom);b.left=E(c.left,b.left);return b},
Ta(a,c[0]));c.width=c.right-c.left;c.height=c.bottom-c.top;c.x=c.left;c.y=c.top;return c}function Ua(a){var b=a.reference,c=a.element,d=(a=a.placement)?F(a):null;a=a?a.split("-")[1]:null;var e=b.x+b.width/2-c.width/2,f=b.y+b.height/2-c.height/2;switch(d){case "top":e={x:e,y:b.y-c.height};break;case "bottom":e={x:e,y:b.y+b.height};break;case "right":e={x:b.x+b.width,y:f};break;case "left":e={x:b.x-c.width,y:f};break;default:e={x:b.x,y:b.y}}d=d?ua(d):null;if(null!=d)switch(f="y"===d?"height":"width",
a){case "start":e[d]-=b[f]/2-c[f]/2;break;case "end":e[d]+=b[f]/2-c[f]/2}return e}function ia(a,b){void 0===b&&(b={});var c=b;b=c.placement;b=void 0===b?a.placement:b;var d=c.boundary,e=void 0===d?"clippingParents":d;d=c.rootBoundary;var f=void 0===d?"viewport":d;d=c.elementContext;d=void 0===d?"popper":d;var h=c.altBoundary,k=void 0===h?!1:h;c=c.padding;c=void 0===c?0:c;c=Oa("number"!==typeof c?c:Pa(c,ja));var m=a.elements.reference;h=a.rects.popper;k=a.elements[k?"popper"===d?"reference":"popper":
d];e=Cb(ea(k)?k:k.contextElement||L(a.elements.popper),e,f);f=X(m);k=Ua({reference:f,element:h,strategy:"absolute",placement:b});h=ya(Object.assign({},h,k));f="popper"===d?h:f;var g={top:e.top-f.top+c.top,bottom:f.bottom-e.bottom+c.bottom,left:e.left-f.left+c.left,right:f.right-e.right+c.right};a=a.modifiersData.offset;if("popper"===d&&a){var l=a[b];Object.keys(g).forEach(function(a){var b=0<=["right","bottom"].indexOf(a)?1:-1,c=0<=["top","bottom"].indexOf(a)?"y":"x";g[a]+=l[c]*b})}return g}function Db(a,
b){void 0===b&&(b={});var c=b.boundary,d=b.rootBoundary,e=b.padding,f=b.flipVariations,h=b.allowedAutoPlacements,k=void 0===h?Va:h,m=b.placement.split("-")[1];b=m?f?Wa:Wa.filter(function(a){return a.split("-")[1]===m}):ja;f=b.filter(function(a){return 0<=k.indexOf(a)});0===f.length&&(f=b);var g=f.reduce(function(b,f){b[f]=ia(a,{placement:f,boundary:c,rootBoundary:d,padding:e})[F(f)];return b},{});return Object.keys(g).sort(function(a,b){return g[a]-g[b]})}function Eb(a){if("auto"===F(a))return[];
var b=na(a);return[Ra(a),b,Ra(b)]}function Xa(a,b,c){void 0===c&&(c={x:0,y:0});return{top:a.top-b.height-c.y,right:a.right-b.width+c.x,bottom:a.bottom-b.height+c.y,left:a.left-b.width-c.x}}function Ya(a){return["top","right","bottom","left"].some(function(b){return 0<=a[b]})}function Fb(a,b,c){void 0===c&&(c=!1);var d=L(b);a=X(a);var e=y(b),f={scrollLeft:0,scrollTop:0},h={x:0,y:0};if(e||!e&&!c){if("body"!==B(b)||xa(d))f=b!==z(b)&&y(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:va(b);y(b)?(h=
X(b),h.x+=b.clientLeft,h.y+=b.clientTop):d&&(h.x=wa(d))}return{x:a.left+f.scrollLeft-h.x,y:a.top+f.scrollTop-h.y,width:a.width,height:a.height}}function Gb(a){function b(a){d.add(a.name);[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(a){d.has(a)||(a=c.get(a))&&b(a)});e.push(a)}var c=new Map,d=new Set,e=[];a.forEach(function(a){c.set(a.name,a)});a.forEach(function(a){d.has(a.name)||b(a)});return e}function Hb(a){var b=Gb(a);return Ib.reduce(function(a,d){return a.concat(b.filter(function(a){return a.phase===
d}))},[])}function Jb(a){var b;return function(){b||(b=new Promise(function(c){Promise.resolve().then(function(){b=void 0;c(a())})}));return b}}function Kb(a){var b=a.reduce(function(a,b){var c=a[b.name];a[b.name]=c?Object.assign({},c,b,{options:Object.assign({},c.options,b.options),data:Object.assign({},c.data,b.data)}):b;return a},{});return Object.keys(b).map(function(a){return b[a]})}function Za(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return!b.some(function(a){return!(a&&
"function"===typeof a.getBoundingClientRect)})}function za(){za=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return za.apply(this,arguments)}function Lb(){return[{name:"applyStyles",fn({state:a}){Object.keys(a.elements).forEach(b=>{if("popper"===b){var c=a.attributes[b]||{},d=a.elements[b];Object.assign(d.style,{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"});
Object.keys(c).forEach(a=>{let b=c[a];!1===b?d.removeAttribute(a):d.setAttribute(a,!0===b?"":b)})}})}},{name:"computeStyles",options:{adaptive:!1}}]}function Mb(a){let b=Lb(),c={placement:"top",strategy:"fixed",modifiers:[{name:"focusAfterRender",enabled:!0,phase:"afterWrite",fn(){setTimeout(()=>{a.el&&a.el.focus()},300)}}]};return c=za({},c,{modifiers:Array.from(new Set([...c.modifiers,...b]))})}function $a(a){return da(a)&&""!==a?"-"!==a.charAt(a.length-1)?`${a}-`:a:""}function Aa(a){a=a.options.attachTo||
{};let b=Object.assign({},a);if(da(a.element)){try{b.element=document.querySelector(a.element)}catch(c){}b.element||console.error(`The element for this Shepherd step was not found ${a.element}`)}return b}function Ba(){let a=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,b=>{let c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?c:c&3|8).toString(16)})}function Nb(a,b){let c={modifiers:[{name:"preventOverflow",options:{altAxis:!0,tether:!1}},{name:"focusAfterRender",
enabled:!0,phase:"afterWrite",fn(){setTimeout(()=>{b.el&&b.el.focus()},300)}}],strategy:"absolute"};b.isCentered()?c=Mb(b):c.placement=a.on;(a=b.tour&&b.tour.options&&b.tour.options.defaultStepOptions)&&(c=ab(a,c));return c=ab(b.options,c)}function ab(a,b){if(a.popperOptions){let c=Object.assign({},b,a.popperOptions);if(a.popperOptions.modifiers&&0<a.popperOptions.modifiers.length){let d=a.popperOptions.modifiers.map(a=>a.name);b=b.modifiers.filter(a=>!d.includes(a.name));c.modifiers=Array.from(new Set([...b,
...a.popperOptions.modifiers]))}return c}return b}function x(){}function Ob(a,b){for(let c in b)a[c]=b[c];return a}function Y(a){return a()}function bb(a){return"function"===typeof a}function I(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}function w(a){a.parentNode.removeChild(a)}function cb(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function oa(a,b,c,d){a.addEventListener(b,c,d);return()=>a.removeEventListener(b,c,d)}function q(a,b,c){null==c?
a.removeAttribute(b):a.getAttribute(b)!==c&&a.setAttribute(b,c)}function db(a,b){let c=Object.getOwnPropertyDescriptors(a.__proto__);for(let d in b)null==b[d]?a.removeAttribute(d):"style"===d?a.style.cssText=b[d]:"__value"===d?a.value=a[d]=b[d]:c[d]&&c[d].set?a[d]=b[d]:q(a,d,b[d])}function Z(a,b,c){a.classList[c?"add":"remove"](b)}function pa(){if(!P)throw Error("Function called outside component initialization");return P}function Ca(a){qa.push(a)}function eb(){if(!Da){Da=!0;do{for(var a=0;a<ka.length;a+=
1){var b=ka[a];P=b;b=b.$$;if(null!==b.fragment){b.update();b.before_update.forEach(Y);let a=b.dirty;b.dirty=[-1];b.fragment&&b.fragment.p(b.ctx,a);b.after_update.forEach(Ca)}}P=null;for(ka.length=0;aa.length;)aa.pop()();for(a=0;a<qa.length;a+=1)b=qa[a],Ea.has(b)||(Ea.add(b),b());qa.length=0}while(ka.length);for(;fb.length;)fb.pop()();Da=Fa=!1;Ea.clear()}}function Q(){R={r:0,c:[],p:R}}function S(){R.r||R.c.forEach(Y);R=R.p}function n(a,b){a&&a.i&&(ra.delete(a),a.i(b))}function r(a,b,c,d){a&&a.o&&!ra.has(a)&&
(ra.add(a),R.c.push(()=>{ra.delete(a);d&&(c&&a.d(1),d())}),a.o(b))}function T(a){a&&a.c()}function N(a,b,c,d){let {fragment:e,on_mount:f,on_destroy:h,after_update:k}=a.$$;e&&e.m(b,c);d||Ca(()=>{let b=f.map(Y).filter(bb);h?h.push(...b):b.forEach(Y);a.$$.on_mount=[]});k.forEach(Ca)}function O(a,b){a=a.$$;null!==a.fragment&&(a.on_destroy.forEach(Y),a.fragment&&a.fragment.d(b),a.on_destroy=a.fragment=null,a.ctx=[])}function J(a,b,c,d,e,f,h=[-1]){let k=P;P=a;let m=a.$$={fragment:null,ctx:null,props:f,
update:x,not_equal:e,bound:Object.create(null),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(k?k.$$.context:b.context||[]),callbacks:Object.create(null),dirty:h,skip_bound:!1},g=!1;m.ctx=c?c(a,b.props||{},(b,c,...d)=>{d=d.length?d[0]:c;if(m.ctx&&e(m.ctx[b],m.ctx[b]=d)){if(!m.skip_bound&&m.bound[b])m.bound[b](d);g&&(-1===a.$$.dirty[0]&&(ka.push(a),Fa||(Fa=!0,Pb.then(eb)),a.$$.dirty.fill(0)),a.$$.dirty[b/31|0]|=1<<b%31)}return c}):[];m.update();g=!0;m.before_update.forEach(Y);
m.fragment=d?d(m.ctx):!1;b.target&&(b.hydrate?(c=Array.from(b.target.childNodes),m.fragment&&m.fragment.l(c),c.forEach(w)):m.fragment&&m.fragment.c(),b.intro&&n(a.$$.fragment),N(a,b.target,b.anchor,b.customElement),eb());P=k}function Qb(a){let b,c,d,e,f;return{c(){b=document.createElement("button");q(b,"aria-label",c=a[3]?a[3]:null);q(b,"class",d=`${a[1]||""} shepherd-button ${a[4]?"shepherd-button-secondary":""}`);b.disabled=a[2];q(b,"tabindex","0")},m(c,d){c.insertBefore(b,d||null);b.innerHTML=
a[5];e||(f=oa(b,"click",function(){bb(a[0])&&a[0].apply(this,arguments)}),e=!0)},p(e,[f]){a=e;f&32&&(b.innerHTML=a[5]);f&8&&c!==(c=a[3]?a[3]:null)&&q(b,"aria-label",c);f&18&&d!==(d=`${a[1]||""} shepherd-button ${a[4]?"shepherd-button-secondary":""}`)&&q(b,"class",d);f&4&&(b.disabled=a[2])},i:x,o:x,d(a){a&&w(b);e=!1;f()}}}function Rb(a,b,c){let {config:d}=b,{step:e}=b,f,h,k,m,g,l;a.$$set=a=>{"config"in a&&c(6,d=a.config);"step"in a&&c(7,e=a.step)};a.$$.update=()=>{if(a.$$.dirty&192){c(0,f=d.action?
d.action.bind(e.tour):null);c(1,h=d.classes);if(d.disabled){var b=d.disabled;b=W(b)?b.call(e):b}else b=!1;c(2,k=b);c(3,m=d.label);c(4,g=d.secondary);c(5,l=d.text)}};return[f,h,k,m,g,l,d,e]}function gb(a,b,c){a=a.slice();a[2]=b[c];return a}function hb(a){let b,c,d=a[1],e=[];for(let b=0;b<d.length;b+=1)e[b]=ib(gb(a,d,b));let f=a=>r(e[a],1,1,()=>{e[a]=null});return{c(){for(let a=0;a<e.length;a+=1)e[a].c();b=document.createTextNode("")},m(a,d){for(let b=0;b<e.length;b+=1)e[b].m(a,d);a.insertBefore(b,
d||null);c=!0},p(a,c){if(c&3){d=a[1];let h;for(h=0;h<d.length;h+=1){let f=gb(a,d,h);e[h]?(e[h].p(f,c),n(e[h],1)):(e[h]=ib(f),e[h].c(),n(e[h],1),e[h].m(b.parentNode,b))}Q();for(h=d.length;h<e.length;h+=1)f(h);S()}},i(a){if(!c){for(a=0;a<d.length;a+=1)n(e[a]);c=!0}},o(a){e=e.filter(Boolean);for(a=0;a<e.length;a+=1)r(e[a]);c=!1},d(a){var c=e;for(let b=0;b<c.length;b+=1)c[b]&&c[b].d(a);a&&w(b)}}}function ib(a){let b,c;b=new Sb({props:{config:a[2],step:a[0]}});return{c(){T(b.$$.fragment)},m(a,e){N(b,a,
e);c=!0},p(a,c){let d={};c&2&&(d.config=a[2]);c&1&&(d.step=a[0]);b.$set(d)},i(a){c||(n(b.$$.fragment,a),c=!0)},o(a){r(b.$$.fragment,a);c=!1},d(a){O(b,a)}}}function Tb(a){let b,c,d=a[1]&&hb(a);return{c(){b=document.createElement("footer");d&&d.c();q(b,"class","shepherd-footer")},m(a,f){a.insertBefore(b,f||null);d&&d.m(b,null);c=!0},p(a,[c]){a[1]?d?(d.p(a,c),c&2&&n(d,1)):(d=hb(a),d.c(),n(d,1),d.m(b,null)):d&&(Q(),r(d,1,1,()=>{d=null}),S())},i(a){c||(n(d),c=!0)},o(a){r(d);c=!1},d(a){a&&w(b);d&&d.d()}}}
function Ub(a,b,c){let d,{step:e}=b;a.$$set=a=>{"step"in a&&c(0,e=a.step)};a.$$.update=()=>{a.$$.dirty&1&&c(1,d=e.options.buttons)};return[e,d]}function Vb(a){let b,c,d,e,f;return{c(){b=document.createElement("button");c=document.createElement("span");c.textContent="\u00d7";q(c,"aria-hidden","true");q(b,"aria-label",d=a[0].label?a[0].label:"Close Tour");q(b,"class","shepherd-cancel-icon");q(b,"type","button")},m(d,k){d.insertBefore(b,k||null);b.appendChild(c);e||(f=oa(b,"click",a[1]),e=!0)},p(a,[c]){c&
1&&d!==(d=a[0].label?a[0].label:"Close Tour")&&q(b,"aria-label",d)},i:x,o:x,d(a){a&&w(b);e=!1;f()}}}function Wb(a,b,c){let {cancelIcon:d}=b,{step:e}=b;a.$$set=a=>{"cancelIcon"in a&&c(0,d=a.cancelIcon);"step"in a&&c(2,e=a.step)};return[d,a=>{a.preventDefault();e.cancel()},e]}function Xb(a){let b;return{c(){b=document.createElement("h3");q(b,"id",a[1]);q(b,"class","shepherd-title")},m(c,d){c.insertBefore(b,d||null);a[3](b)},p(a,[d]){d&2&&q(b,"id",a[1])},i:x,o:x,d(c){c&&w(b);a[3](null)}}}function Yb(a,
b,c){let {labelId:d}=b,{element:e}=b,{title:f}=b;pa().$$.after_update.push(()=>{W(f)&&c(2,f=f());c(0,e.innerHTML=f,e)});a.$$set=a=>{"labelId"in a&&c(1,d=a.labelId);"element"in a&&c(0,e=a.element);"title"in a&&c(2,f=a.title)};return[e,d,f,function(a){aa[a?"unshift":"push"](()=>{e=a;c(0,e)})}]}function jb(a){let b,c;b=new Zb({props:{labelId:a[0],title:a[2]}});return{c(){T(b.$$.fragment)},m(a,e){N(b,a,e);c=!0},p(a,c){let d={};c&1&&(d.labelId=a[0]);c&4&&(d.title=a[2]);b.$set(d)},i(a){c||(n(b.$$.fragment,
a),c=!0)},o(a){r(b.$$.fragment,a);c=!1},d(a){O(b,a)}}}function kb(a){let b,c;b=new $b({props:{cancelIcon:a[3],step:a[1]}});return{c(){T(b.$$.fragment)},m(a,e){N(b,a,e);c=!0},p(a,c){let d={};c&8&&(d.cancelIcon=a[3]);c&2&&(d.step=a[1]);b.$set(d)},i(a){c||(n(b.$$.fragment,a),c=!0)},o(a){r(b.$$.fragment,a);c=!1},d(a){O(b,a)}}}function ac(a){let b,c,d,e=a[2]&&jb(a),f=a[3]&&a[3].enabled&&kb(a);return{c(){b=document.createElement("header");e&&e.c();c=document.createTextNode(" ");f&&f.c();q(b,"class","shepherd-header")},
m(a,k){a.insertBefore(b,k||null);e&&e.m(b,null);b.appendChild(c);f&&f.m(b,null);d=!0},p(a,[d]){a[2]?e?(e.p(a,d),d&4&&n(e,1)):(e=jb(a),e.c(),n(e,1),e.m(b,c)):e&&(Q(),r(e,1,1,()=>{e=null}),S());a[3]&&a[3].enabled?f?(f.p(a,d),d&8&&n(f,1)):(f=kb(a),f.c(),n(f,1),f.m(b,null)):f&&(Q(),r(f,1,1,()=>{f=null}),S())},i(a){d||(n(e),n(f),d=!0)},o(a){r(e);r(f);d=!1},d(a){a&&w(b);e&&e.d();f&&f.d()}}}function bc(a,b,c){let {labelId:d}=b,{step:e}=b,f,h;a.$$set=a=>{"labelId"in a&&c(0,d=a.labelId);"step"in a&&c(1,e=
a.step)};a.$$.update=()=>{a.$$.dirty&2&&(c(2,f=e.options.title),c(3,h=e.options.cancelIcon))};return[d,e,f,h]}function cc(a){let b;return{c(){b=document.createElement("div");q(b,"class","shepherd-text");q(b,"id",a[1])},m(c,d){c.insertBefore(b,d||null);a[3](b)},p(a,[d]){d&2&&q(b,"id",a[1])},i:x,o:x,d(c){c&&w(b);a[3](null)}}}function dc(a,b,c){let {descriptionId:d}=b,{element:e}=b,{step:f}=b;pa().$$.after_update.push(()=>{let {text:a}=f.options;W(a)&&(a=a.call(f));a instanceof HTMLElement?e.appendChild(a):
c(0,e.innerHTML=a,e)});a.$$set=a=>{"descriptionId"in a&&c(1,d=a.descriptionId);"element"in a&&c(0,e=a.element);"step"in a&&c(2,f=a.step)};return[e,d,f,function(a){aa[a?"unshift":"push"](()=>{e=a;c(0,e)})}]}function lb(a){let b,c;b=new ec({props:{labelId:a[1],step:a[2]}});return{c(){T(b.$$.fragment)},m(a,e){N(b,a,e);c=!0},p(a,c){let d={};c&2&&(d.labelId=a[1]);c&4&&(d.step=a[2]);b.$set(d)},i(a){c||(n(b.$$.fragment,a),c=!0)},o(a){r(b.$$.fragment,a);c=!1},d(a){O(b,a)}}}function mb(a){let b,c;b=new fc({props:{descriptionId:a[0],
step:a[2]}});return{c(){T(b.$$.fragment)},m(a,e){N(b,a,e);c=!0},p(a,c){let d={};c&1&&(d.descriptionId=a[0]);c&4&&(d.step=a[2]);b.$set(d)},i(a){c||(n(b.$$.fragment,a),c=!0)},o(a){r(b.$$.fragment,a);c=!1},d(a){O(b,a)}}}function nb(a){let b,c;b=new gc({props:{step:a[2]}});return{c(){T(b.$$.fragment)},m(a,e){N(b,a,e);c=!0},p(a,c){let d={};c&4&&(d.step=a[2]);b.$set(d)},i(a){c||(n(b.$$.fragment,a),c=!0)},o(a){r(b.$$.fragment,a);c=!1},d(a){O(b,a)}}}function hc(a){let b,c=void 0!==a[2].options.title||a[2].options.cancelIcon&&
a[2].options.cancelIcon.enabled,d,e=void 0!==a[2].options.text,f,h=Array.isArray(a[2].options.buttons)&&a[2].options.buttons.length,k,m=c&&lb(a),g=e&&mb(a),l=h&&nb(a);return{c(){b=document.createElement("div");m&&m.c();d=document.createTextNode(" ");g&&g.c();f=document.createTextNode(" ");l&&l.c();q(b,"class","shepherd-content")},m(a,c){a.insertBefore(b,c||null);m&&m.m(b,null);b.appendChild(d);g&&g.m(b,null);b.appendChild(f);l&&l.m(b,null);k=!0},p(a,[k]){k&4&&(c=void 0!==a[2].options.title||a[2].options.cancelIcon&&
a[2].options.cancelIcon.enabled);c?m?(m.p(a,k),k&4&&n(m,1)):(m=lb(a),m.c(),n(m,1),m.m(b,d)):m&&(Q(),r(m,1,1,()=>{m=null}),S());k&4&&(e=void 0!==a[2].options.text);e?g?(g.p(a,k),k&4&&n(g,1)):(g=mb(a),g.c(),n(g,1),g.m(b,f)):g&&(Q(),r(g,1,1,()=>{g=null}),S());k&4&&(h=Array.isArray(a[2].options.buttons)&&a[2].options.buttons.length);h?l?(l.p(a,k),k&4&&n(l,1)):(l=nb(a),l.c(),n(l,1),l.m(b,null)):l&&(Q(),r(l,1,1,()=>{l=null}),S())},i(a){k||(n(m),n(g),n(l),k=!0)},o(a){r(m);r(g);r(l);k=!1},d(a){a&&w(b);m&&
m.d();g&&g.d();l&&l.d()}}}function ic(a,b,c){let {descriptionId:d}=b,{labelId:e}=b,{step:f}=b;a.$$set=a=>{"descriptionId"in a&&c(0,d=a.descriptionId);"labelId"in a&&c(1,e=a.labelId);"step"in a&&c(2,f=a.step)};return[d,e,f]}function ob(a){let b;return{c(){b=document.createElement("div");q(b,"class","shepherd-arrow");q(b,"data-popper-arrow","")},m(a,d){a.insertBefore(b,d||null)},d(a){a&&w(b)}}}function jc(a){let b,c,d,e,f,h,k,m,g=a[4].options.arrow&&a[4].options.attachTo&&a[4].options.attachTo.element&&
a[4].options.attachTo.on&&ob();d=new kc({props:{descriptionId:a[2],labelId:a[3],step:a[4]}});let l=[{"aria-describedby":e=void 0!==a[4].options.text?a[2]:null},{"aria-labelledby":f=a[4].options.title?a[3]:null},a[1],{role:"dialog"},{tabindex:"0"}],p={};for(let a=0;a<l.length;a+=1)p=Ob(p,l[a]);return{c(){b=document.createElement("div");g&&g.c();c=document.createTextNode(" ");T(d.$$.fragment);db(b,p);Z(b,"shepherd-has-cancel-icon",a[5]);Z(b,"shepherd-has-title",a[6]);Z(b,"shepherd-element",!0)},m(e,
f){e.insertBefore(b,f||null);g&&g.m(b,null);b.appendChild(c);N(d,b,null);a[13](b);h=!0;k||(m=oa(b,"keydown",a[7]),k=!0)},p(a,[k]){a[4].options.arrow&&a[4].options.attachTo&&a[4].options.attachTo.element&&a[4].options.attachTo.on?g||(g=ob(),g.c(),g.m(b,c)):g&&(g.d(1),g=null);var m={};k&4&&(m.descriptionId=a[2]);k&8&&(m.labelId=a[3]);k&16&&(m.step=a[4]);d.$set(m);m=b;{k=[(!h||k&20&&e!==(e=void 0!==a[4].options.text?a[2]:null))&&{"aria-describedby":e},(!h||k&24&&f!==(f=a[4].options.title?a[3]:null))&&
{"aria-labelledby":f},k&2&&a[1],{role:"dialog"},{tabindex:"0"}];let b={},c={},d={$$scope:1},g=l.length;for(;g--;){let a=l[g],e=k[g];if(e){for(u in a)u in e||(c[u]=1);for(let a in e)d[a]||(b[a]=e[a],d[a]=1);l[g]=e}else for(let b in a)d[b]=1}for(let a in c)a in b||(b[a]=void 0);var u=b}db(m,p=u);Z(b,"shepherd-has-cancel-icon",a[5]);Z(b,"shepherd-has-title",a[6]);Z(b,"shepherd-element",!0)},i(a){h||(n(d.$$.fragment,a),h=!0)},o(a){r(d.$$.fragment,a);h=!1},d(c){c&&w(b);g&&g.d();O(d);a[13](null);k=!1;m()}}}
function pb(a){return a.split(" ").filter(a=>!!a.length)}function lc(a,b,c){let {classPrefix:d}=b,{element:e}=b,{descriptionId:f}=b,{firstFocusableElement:h}=b,{focusableElements:k}=b,{labelId:m}=b,{lastFocusableElement:g}=b,{step:l}=b,{dataStepId:p}=b,t,A,C;pa().$$.on_mount.push(()=>{c(1,p={[`data-${d}shepherd-step-id`]:l.id});c(9,k=e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'));c(8,h=k[0]);
c(10,g=k[k.length-1])});pa().$$.after_update.push(()=>{if(C!==l.options.classes){var a=C;da(a)&&(a=pb(a),a.length&&e.classList.remove(...a));a=C=l.options.classes;da(a)&&(a=pb(a),a.length&&e.classList.add(...a))}});a.$$set=a=>{"classPrefix"in a&&c(11,d=a.classPrefix);"element"in a&&c(0,e=a.element);"descriptionId"in a&&c(2,f=a.descriptionId);"firstFocusableElement"in a&&c(8,h=a.firstFocusableElement);"focusableElements"in a&&c(9,k=a.focusableElements);"labelId"in a&&c(3,m=a.labelId);"lastFocusableElement"in
a&&c(10,g=a.lastFocusableElement);"step"in a&&c(4,l=a.step);"dataStepId"in a&&c(1,p=a.dataStepId)};a.$$.update=()=>{a.$$.dirty&16&&(c(5,t=l.options&&l.options.cancelIcon&&l.options.cancelIcon.enabled),c(6,A=l.options&&l.options.title))};return[e,p,f,m,l,t,A,a=>{const {tour:b}=l;switch(a.keyCode){case 9:if(0===k.length){a.preventDefault();break}if(a.shiftKey){if(document.activeElement===h||document.activeElement.classList.contains("shepherd-element"))a.preventDefault(),g.focus()}else document.activeElement===
g&&(a.preventDefault(),h.focus());break;case 27:b.options.exitOnEsc&&l.cancel();break;case 37:b.options.keyboardNavigation&&b.back();break;case 39:b.options.keyboardNavigation&&b.next()}},h,k,g,d,()=>e,function(a){aa[a?"unshift":"push"](()=>{e=a;c(0,e)})}]}function mc(a){a&&({steps:a}=a,a.forEach(a=>{a.options&&!1===a.options.canClickTarget&&a.options.attachTo&&a.target instanceof HTMLElement&&a.target.classList.remove("shepherd-target-click-disabled")}))}function nc({width:a,height:b,x:c=0,y:d=0,
r:e=0}){let {innerWidth:f,innerHeight:h}=window;return`M${f},${h}\
H0\
V0\
H${f}\
V${h}\
Z\
M${c+e},${d}\
a${e},${e},0,0,0-${e},${e}\
V${b+d-e}\
a${e},${e},0,0,0,${e},${e}\
H${a+c-e}\
a${e},${e},0,0,0,${e}-${e}\
V${d+e}\
a${e},${e},0,0,0-${e}-${e}\
Z`}function oc(a){let b,c,d,e,f;return{c(){b=cb("svg");c=cb("path");q(c,"d",a[2]);q(b,"class",d=`${a[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)},m(d,k){d.insertBefore(b,k||null);b.appendChild(c);a[11](b);e||(f=oa(b,"touchmove",a[3]),e=!0)},p(a,[e]){e&4&&q(c,"d",a[2]);e&2&&d!==(d=`${a[1]?"shepherd-modal-is-visible":""} shepherd-modal-overlay-container`)&&q(b,"class",d)},i:x,o:x,d(c){c&&w(b);a[11](null);e=!1;f()}}}function qb(a){if(!a)return null;let b=a instanceof HTMLElement&&
window.getComputedStyle(a).overflowY;return"hidden"!==b&&"visible"!==b&&a.scrollHeight>=a.clientHeight?a:qb(a.parentElement)}function pc(a,b,c){function d(){c(4,l={width:0,height:0,x:0,y:0,r:0})}function e(){c(1,p=!1);k()}function f(a=0,b=0,e,f){if(f){var g=f.getBoundingClientRect();var u=g.y||g.top;g=g.bottom||u+g.height;if(e){var h=e.getBoundingClientRect();e=h.y||h.top;h=h.bottom||e+h.height;u=Math.max(u,e);g=Math.min(g,h)}u={y:u,height:Math.max(g-u,0)};let {y:d,height:k}=u,{x:m,width:p,left:A}=
f.getBoundingClientRect();c(4,l={width:p+2*a,height:k+2*a,x:(m||A)-a,y:d-a,r:b})}else d()}function h(){c(1,p=!0)}function k(){t&&(cancelAnimationFrame(t),t=void 0);window.removeEventListener("touchmove",C,{passive:!1})}function m(a){let {modalOverlayOpeningPadding:b,modalOverlayOpeningRadius:c}=a.options,d=qb(a.target),e=()=>{t=void 0;f(b,c,d,a.target);t=requestAnimationFrame(e)};e();window.addEventListener("touchmove",C,{passive:!1})}let {element:g}=b,{openingProperties:l}=b;Ba();let p=!1,t=void 0,
A;d();let C=a=>{a.preventDefault()};a.$$set=a=>{"element"in a&&c(0,g=a.element);"openingProperties"in a&&c(4,l=a.openingProperties)};a.$$.update=()=>{a.$$.dirty&16&&c(2,A=nc(l))};return[g,p,A,a=>{a.stopPropagation()},l,()=>g,d,e,f,function(a){k();a.tour.options.useModalOverlay?(m(a),h()):e()},h,function(a){aa[a?"unshift":"push"](()=>{g=a;c(0,g)})}]}var vb=function(a){var b;if(b=!!a&&"object"===typeof a)b=Object.prototype.toString.call(a),b=!("[object RegExp]"===b||"[object Date]"===b||a.$$typeof===
qc);return b},qc="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;V.all=function(a,b){if(!Array.isArray(a))throw Error("first argument should be an array");return a.reduce(function(a,d){return V(a,d,b)},{})};var rc=V;class Ga{on(a,b,c,d=!1){void 0===this.bindings&&(this.bindings={});void 0===this.bindings[a]&&(this.bindings[a]=[]);this.bindings[a].push({handler:b,ctx:c,once:d});return this}once(a,b,c){return this.on(a,b,c,!0)}off(a,b){if(void 0===this.bindings||void 0===this.bindings[a])return this;
void 0===b?delete this.bindings[a]:this.bindings[a].forEach((c,d)=>{c.handler===b&&this.bindings[a].splice(d,1)});return this}trigger(a,...b){void 0!==this.bindings&&this.bindings[a]&&this.bindings[a].forEach((c,d)=>{let {ctx:e,handler:f,once:h}=c;f.apply(e||this,b);h&&this.bindings[a].splice(d,1)});return this}}var ja=["top","bottom","right","left"],Wa=ja.reduce(function(a,b){return a.concat([b+"-start",b+"-end"])},[]),Va=[].concat(ja,["auto"]).reduce(function(a,b){return a.concat([b,b+"-start",
b+"-end"])},[]),Ib="beforeRead read afterRead beforeMain main afterMain beforeWrite write afterWrite".split(" "),E=Math.max,M=Math.min,ma=Math.round,yb={top:"auto",right:"auto",bottom:"auto",left:"auto"},sa={passive:!0},zb={left:"right",right:"left",bottom:"top",top:"bottom"},Ab={start:"end",end:"start"},rb={placement:"bottom",modifiers:[],strategy:"absolute"},sc=function(a){void 0===a&&(a={});var b=a.defaultModifiers,c=void 0===b?[]:b;a=a.defaultOptions;var d=void 0===a?rb:a;return function(a,b,
h){function e(){g.orderedModifiers.forEach(function(a){var b=a.name,c=a.options;c=void 0===c?{}:c;a=a.effect;"function"===typeof a&&(b=a({state:g,name:b,instance:t,options:c}),l.push(b||function(){}))})}function f(){l.forEach(function(a){return a()});l=[]}void 0===h&&(h=d);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},rb,d),modifiersData:{},elements:{reference:a,popper:b},attributes:{},styles:{}},l=[],p=!1,t={state:g,setOptions:function(h){f();g.options=Object.assign({},d,
g.options,h);g.scrollParents={reference:ea(a)?ha(a):a.contextElement?ha(a.contextElement):[],popper:ha(b)};h=Hb(Kb([].concat(c,g.options.modifiers)));g.orderedModifiers=h.filter(function(a){return a.enabled});e();return t.update()},forceUpdate:function(){if(!p){var a=g.elements,b=a.reference;a=a.popper;if(Za(b,a))for(g.rects={reference:Fb(b,fa(a),"fixed"===g.options.strategy),popper:ta(a)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(a){return g.modifiersData[a.name]=
Object.assign({},a.data)}),b=0;b<g.orderedModifiers.length;b++)if(!0===g.reset)g.reset=!1,b=-1;else{var c=g.orderedModifiers[b];a=c.fn;var d=c.options;d=void 0===d?{}:d;c=c.name;"function"===typeof a&&(g=a({state:g,options:d,name:c,instance:t})||g)}}},update:Jb(function(){return new Promise(function(a){t.forceUpdate();a(g)})}),destroy:function(){f();p=!0}};if(!Za(a,b))return t;t.setOptions(h).then(function(a){if(!p&&h.onFirstUpdate)h.onFirstUpdate(a)});return t}}({defaultModifiers:[{name:"eventListeners",
enabled:!0,phase:"write",fn:function(){},effect:function(a){var b=a.state,c=a.instance;a=a.options;var d=a.scroll,e=void 0===d?!0:d;a=a.resize;var f=void 0===a?!0:a,h=z(b.elements.popper),k=[].concat(b.scrollParents.reference,b.scrollParents.popper);e&&k.forEach(function(a){a.addEventListener("scroll",c.update,sa)});f&&h.addEventListener("resize",c.update,sa);return function(){e&&k.forEach(function(a){a.removeEventListener("scroll",c.update,sa)});f&&h.removeEventListener("resize",c.update,sa)}},data:{}},
{name:"popperOffsets",enabled:!0,phase:"read",fn:function(a){var b=a.state;b.modifiersData[a.name]=Ua({reference:b.rects.reference,element:b.rects.popper,strategy:"absolute",placement:b.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(a){var b=a.state,c=a.options;a=c.gpuAcceleration;a=void 0===a?!0:a;var d=c.adaptive;d=void 0===d?!0:d;c=c.roundOffsets;c=void 0===c?!0:c;a={placement:F(b.placement),popper:b.elements.popper,popperRect:b.rects.popper,gpuAcceleration:a};
null!=b.modifiersData.popperOffsets&&(b.styles.popper=Object.assign({},b.styles.popper,Qa(Object.assign({},a,{offsets:b.modifiersData.popperOffsets,position:b.options.strategy,adaptive:d,roundOffsets:c}))));null!=b.modifiersData.arrow&&(b.styles.arrow=Object.assign({},b.styles.arrow,Qa(Object.assign({},a,{offsets:b.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c}))));b.attributes.popper=Object.assign({},b.attributes.popper,{"data-popper-placement":b.placement})},data:{}},{name:"applyStyles",
enabled:!0,phase:"write",fn:function(a){var b=a.state;Object.keys(b.elements).forEach(function(a){var c=b.styles[a]||{},e=b.attributes[a]||{},f=b.elements[a];y(f)&&B(f)&&(Object.assign(f.style,c),Object.keys(e).forEach(function(a){var b=e[a];!1===b?f.removeAttribute(a):f.setAttribute(a,!0===b?"":b)}))})},effect:function(a){var b=a.state,c={popper:{position:b.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(b.elements.popper.style,c.popper);b.styles=
c;b.elements.arrow&&Object.assign(b.elements.arrow.style,c.arrow);return function(){Object.keys(b.elements).forEach(function(a){var d=b.elements[a],f=b.attributes[a]||{};a=Object.keys(b.styles.hasOwnProperty(a)?b.styles[a]:c[a]).reduce(function(a,b){a[b]="";return a},{});y(d)&&B(d)&&(Object.assign(d.style,a),Object.keys(f).forEach(function(a){d.removeAttribute(a)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(a){var b=a.state,c=a.name;
a=a.options.offset;var d=void 0===a?[0,0]:a;a=Va.reduce(function(a,c){var e=b.rects;var f=F(c);var h=0<=["left","top"].indexOf(f)?-1:1,k="function"===typeof d?d(Object.assign({},e,{placement:c})):d;e=k[0];k=k[1];e=e||0;k=(k||0)*h;f=0<=["left","right"].indexOf(f)?{x:k,y:e}:{x:e,y:k};a[c]=f;return a},{});var e=a[b.placement],f=e.x;e=e.y;null!=b.modifiersData.popperOffsets&&(b.modifiersData.popperOffsets.x+=f,b.modifiersData.popperOffsets.y+=e);b.modifiersData[c]=a}},{name:"flip",enabled:!0,phase:"main",
fn:function(a){var b=a.state,c=a.options;a=a.name;if(!b.modifiersData[a]._skip){var d=c.mainAxis;d=void 0===d?!0:d;var e=c.altAxis;e=void 0===e?!0:e;var f=c.fallbackPlacements,h=c.padding,k=c.boundary,m=c.rootBoundary,g=c.altBoundary,l=c.flipVariations,p=void 0===l?!0:l,t=c.allowedAutoPlacements;c=b.options.placement;l=F(c);f=f||(l!==c&&p?Eb(c):[na(c)]);var A=[c].concat(f).reduce(function(a,c){return a.concat("auto"===F(c)?Db(b,{placement:c,boundary:k,rootBoundary:m,padding:h,flipVariations:p,allowedAutoPlacements:t}):
c)},[]);c=b.rects.reference;f=b.rects.popper;var n=new Map;l=!0;for(var u=A[0],D=0;D<A.length;D++){var v=A[D],q=F(v),r="start"===v.split("-")[1],U=0<=["top","bottom"].indexOf(q),x=U?"width":"height",w=ia(b,{placement:v,boundary:k,rootBoundary:m,altBoundary:g,padding:h});r=U?r?"right":"left":r?"bottom":"top";c[x]>f[x]&&(r=na(r));x=na(r);U=[];d&&U.push(0>=w[q]);e&&U.push(0>=w[r],0>=w[x]);if(U.every(function(a){return a})){u=v;l=!1;break}n.set(v,U)}if(l)for(d=function(a){var b=A.find(function(b){if(b=
n.get(b))return b.slice(0,a).every(function(a){return a})});if(b)return u=b,"break"},e=p?3:1;0<e&&"break"!==d(e);e--);b.placement!==u&&(b.modifiersData[a]._skip=!0,b.placement=u,b.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(a){var b=a.state,c=a.options;a=a.name;var d=c.mainAxis,e=void 0===d?!0:d;d=c.altAxis;var f=void 0===d?!1:d;d=c.tether;d=void 0===d?!0:d;var h=c.tetherOffset,k=void 0===h?0:h,m=ia(b,{boundary:c.boundary,rootBoundary:c.rootBoundary,
padding:c.padding,altBoundary:c.altBoundary});c=F(b.placement);var g=b.placement.split("-")[1],l=!g,p=ua(c);c="x"===p?"y":"x";h=b.modifiersData.popperOffsets;var t=b.rects.reference,n=b.rects.popper,q="function"===typeof k?k(Object.assign({},b.rects,{placement:b.placement})):k;k={x:0,y:0};if(h){if(e||f){var u="y"===p?"top":"left",D="y"===p?"bottom":"right",v="y"===p?"height":"width",r=h[p],x=h[p]+m[u],w=h[p]-m[D],z=d?-n[v]/2:0,y="start"===g?t[v]:n[v];g="start"===g?-n[v]:-t[v];n=b.elements.arrow;n=
d&&n?ta(n):{width:0,height:0};var B=b.modifiersData["arrow#persistent"]?b.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0};u=B[u];D=B[D];n=E(0,M(t[v],n[v]));y=l?t[v]/2-z-n-u-q:y-n-u-q;t=l?-t[v]/2+z+n+D+q:g+n+D+q;l=b.elements.arrow&&fa(b.elements.arrow);q=b.modifiersData.offset?b.modifiersData.offset[b.placement][p]:0;l=h[p]+y-q-(l?"y"===p?l.clientTop||0:l.clientLeft||0:0);t=h[p]+t-q;e&&(e=d?M(x,l):x,w=d?E(w,t):w,e=E(e,M(r,w)),h[p]=e,k[p]=e-r);f&&(f=h[c],e=f+m["x"===p?"top":
"left"],m=f-m["x"===p?"bottom":"right"],e=d?M(e,l):e,d=d?E(m,t):m,d=E(e,M(f,d)),h[c]=d,k[c]=d-f)}b.modifiersData[a]=k}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(a){var b,c=a.state,d=a.name,e=a.options,f=c.elements.arrow,h=c.modifiersData.popperOffsets,k=F(c.placement);a=ua(k);k=0<=["left","right"].indexOf(k)?"height":"width";if(f&&h){e=e.padding;e="function"===typeof e?e(Object.assign({},c.rects,{placement:c.placement})):e;e=Oa("number"!==typeof e?e:Pa(e,ja));
var m=ta(f),g="y"===a?"top":"left",l="y"===a?"bottom":"right",p=c.rects.reference[k]+c.rects.reference[a]-h[a]-c.rects.popper[k];h=h[a]-c.rects.reference[a];f=(f=fa(f))?"y"===a?f.clientHeight||0:f.clientWidth||0:0;h=f/2-m[k]/2+(p/2-h/2);k=E(e[g],M(h,f-m[k]-e[l]));c.modifiersData[d]=(b={},b[a]=k,b.centerOffset=k-h,b)}},effect:function(a){var b=a.state;a=a.options.element;a=void 0===a?"[data-popper-arrow]":a;if(null!=a){if("string"===typeof a&&(a=b.elements.popper.querySelector(a),!a))return;Ma(b.elements.popper,
a)&&(b.elements.arrow=a)}},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(a){var b=a.state;a=a.name;var c=b.rects.reference,d=b.rects.popper,e=b.modifiersData.preventOverflow,f=ia(b,{elementContext:"reference"}),h=ia(b,{altBoundary:!0});c=Xa(f,c);d=Xa(h,d,e);e=Ya(c);h=Ya(d);b.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:e,hasPopperEscaped:h};b.attributes.popper=
Object.assign({},b.attributes.popper,{"data-popper-reference-hidden":e,"data-popper-escaped":h})}}]});let P,ka=[],aa=[],qa=[],fb=[],Pb=Promise.resolve(),Fa=!1,Da=!1,Ea=new Set,ra=new Set,R;class K{$destroy(){O(this,1);this.$destroy=x}$on(a,b){let c=this.$$.callbacks[a]||(this.$$.callbacks[a]=[]);c.push(b);return()=>{let a=c.indexOf(b);-1!==a&&c.splice(a,1)}}$set(a){this.$$set&&0!==Object.keys(a).length&&(this.$$.skip_bound=!0,this.$$set(a),this.$$.skip_bound=!1)}}class Sb extends K{constructor(a){super();
J(this,a,Rb,Qb,I,{config:6,step:7})}}class gc extends K{constructor(a){super();J(this,a,Ub,Tb,I,{step:0})}}class $b extends K{constructor(a){super();J(this,a,Wb,Vb,I,{cancelIcon:0,step:2})}}class Zb extends K{constructor(a){super();J(this,a,Yb,Xb,I,{labelId:1,element:0,title:2})}}class ec extends K{constructor(a){super();J(this,a,bc,ac,I,{labelId:0,step:1})}}class fc extends K{constructor(a){super();J(this,a,dc,cc,I,{descriptionId:1,element:0,step:2})}}class kc extends K{constructor(a){super();J(this,
a,ic,hc,I,{descriptionId:0,labelId:1,step:2})}}class tc extends K{constructor(a){super();J(this,a,lc,jc,I,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}var sb=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a,b){(function(){a.exports={polyfill:function(){function a(a,b){this.scrollLeft=a;this.scrollTop=b}function b(a){if(null===
a||"object"!==typeof a||void 0===a.behavior||"auto"===a.behavior||"instant"===a.behavior)return!0;if("object"===typeof a&&"smooth"===a.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+a.behavior+" is not a valid value for enumeration ScrollBehavior.");}function e(a,b){if("Y"===b)return a.clientHeight+r<a.scrollHeight;if("X"===b)return a.clientWidth+r<a.scrollWidth}function f(a,b){a=g.getComputedStyle(a,null)["overflow"+b];return"auto"===a||"scroll"===a}function h(a){var b=
e(a,"Y")&&f(a,"Y");a=e(a,"X")&&f(a,"X");return b||a}function k(a){var b=(q()-a.startTime)/468;var c=.5*(1-Math.cos(Math.PI*(1<b?1:b)));b=a.startX+(a.x-a.startX)*c;c=a.startY+(a.y-a.startY)*c;a.method.call(a.scrollable,b,c);b===a.x&&c===a.y||g.requestAnimationFrame(k.bind(g,a))}function m(b,c,d){var e=q();if(b===l.body){var f=g;var h=g.scrollX||g.pageXOffset;b=g.scrollY||g.pageYOffset;var u=n.scroll}else f=b,h=b.scrollLeft,b=b.scrollTop,u=a;k({scrollable:f,method:u,startTime:e,startX:h,startY:b,x:c,
y:d})}var g=window,l=document;if(!("scrollBehavior"in l.documentElement.style&&!0!==g.__forceSmoothScrollPolyfill__)){var p=g.HTMLElement||g.Element,n={scroll:g.scroll||g.scrollTo,scrollBy:g.scrollBy,elementScroll:p.prototype.scroll||a,scrollIntoView:p.prototype.scrollIntoView},q=g.performance&&g.performance.now?g.performance.now.bind(g.performance):Date.now,r=/MSIE |Trident\/|Edge\//.test(g.navigator.userAgent)?1:0;g.scroll=g.scrollTo=function(a,c){void 0!==a&&(!0===b(a)?n.scroll.call(g,void 0!==
a.left?a.left:"object"!==typeof a?a:g.scrollX||g.pageXOffset,void 0!==a.top?a.top:void 0!==c?c:g.scrollY||g.pageYOffset):m.call(g,l.body,void 0!==a.left?~~a.left:g.scrollX||g.pageXOffset,void 0!==a.top?~~a.top:g.scrollY||g.pageYOffset))};g.scrollBy=function(a,c){void 0!==a&&(b(a)?n.scrollBy.call(g,void 0!==a.left?a.left:"object"!==typeof a?a:0,void 0!==a.top?a.top:void 0!==c?c:0):m.call(g,l.body,~~a.left+(g.scrollX||g.pageXOffset),~~a.top+(g.scrollY||g.pageYOffset)))};p.prototype.scroll=p.prototype.scrollTo=
function(a,c){if(void 0!==a)if(!0===b(a)){if("number"===typeof a&&void 0===c)throw new SyntaxError("Value could not be converted");n.elementScroll.call(this,void 0!==a.left?~~a.left:"object"!==typeof a?~~a:this.scrollLeft,void 0!==a.top?~~a.top:void 0!==c?~~c:this.scrollTop)}else c=a.left,a=a.top,m.call(this,this,"undefined"===typeof c?this.scrollLeft:~~c,"undefined"===typeof a?this.scrollTop:~~a)};p.prototype.scrollBy=function(a,c){void 0!==a&&(!0===b(a)?n.elementScroll.call(this,void 0!==a.left?
~~a.left+this.scrollLeft:~~a+this.scrollLeft,void 0!==a.top?~~a.top+this.scrollTop:~~c+this.scrollTop):this.scroll({left:~~a.left+this.scrollLeft,top:~~a.top+this.scrollTop,behavior:a.behavior}))};p.prototype.scrollIntoView=function(a){if(!0===b(a))n.scrollIntoView.call(this,void 0===a?!0:a);else{for(a=this;a!==l.body&&!1===h(a);)a=a.parentNode||a.host;var c=a.getBoundingClientRect(),d=this.getBoundingClientRect();a!==l.body?(m.call(this,a,a.scrollLeft+d.left-c.left,a.scrollTop+d.top-c.top),"fixed"!==
g.getComputedStyle(a).position&&g.scrollBy({left:c.left,top:c.top,behavior:"smooth"})):g.scrollBy({left:d.left,top:d.top,behavior:"smooth"})}}}}}})()});sb.polyfill;sb.polyfill();class Ha extends Ga{constructor(a,b={}){super(a,b);this.tour=a;this.classPrefix=this.tour.options?$a(this.tour.options.classPrefix):"";this.styles=a.styles;Ka(this);this._setOptions(b);return this}cancel(){this.tour.cancel();this.trigger("cancel")}complete(){this.tour.complete();this.trigger("complete")}destroy(){this.tooltip&&
(this.tooltip.destroy(),this.tooltip=null);this.el instanceof HTMLElement&&this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.el=null);this._updateStepTargetOnHide();this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide();this.trigger("before-hide");this.el&&(this.el.hidden=!0);this._updateStepTargetOnHide();this.trigger("hide")}isCentered(){let a=Aa(this);return!a.element||!a.on}isOpen(){return!(!this.el||this.el.hidden)}show(){if(W(this.options.beforeShowPromise)){let a=
this.options.beforeShowPromise();if(void 0!==a)return a.then(()=>this._show())}this._show()}updateStepOptions(a){Object.assign(this.options,a);this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){this.shepherdElementComponent=new tc({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:`${this.id}-description`,labelId:`${this.id}-label`,step:this,
styles:this.styles}});return this.shepherdElementComponent.getElement()}_scrollTo(a){let {element:b}=Aa(this);W(this.options.scrollToHandler)?this.options.scrollToHandler(b):b instanceof Element&&"function"===typeof b.scrollIntoView&&b.scrollIntoView(a)}_getClassOptions(a){var b=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;b=b&&b.classes?b.classes:"";a=[...(a.classes?a.classes:"").split(" "),...b.split(" ")];a=new Set(a);return Array.from(a).join(" ").trim()}_setOptions(a={}){let b=
this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;b=rc({},b||{});this.options=Object.assign({arrow:!0},b,a);let {when:c}=this.options;this.options.classes=this._getClassOptions(a);this.destroy();this.id=this.options.id||`step-${Ba()}`;c&&Object.keys(c).forEach(a=>{this.on(a,c[a],this)})}_setupElements(){void 0!==this.el&&this.destroy();this.el=this._createTooltipContent();this.options.advanceOn&&xb(this);{this.tooltip&&this.tooltip.destroy();let a=Aa(this),b=a.element,c=Nb(a,this);
this.isCentered()&&(b=document.body,this.shepherdElementComponent.getElement().classList.add("shepherd-centered"));this.tooltip=sc(b,this.el,c);this.target=a.element}}_show(){this.trigger("before-show");this._setupElements();this.tour.modal||this.tour._setupModal();this.tour.modal.setupForStep(this);this._styleTargetElementForStep(this);this.el.hidden=!1;this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)});this.el.hidden=!1;let a=this.shepherdElementComponent.getElement(),
b=this.target||document.body;b.classList.add(`${this.classPrefix}shepherd-enabled`);b.classList.add(`${this.classPrefix}shepherd-target`);a.classList.add("shepherd-enabled");this.trigger("show")}_styleTargetElementForStep(a){let b=a.target;b&&(a.options.highlightClass&&b.classList.add(a.options.highlightClass),!1===a.options.canClickTarget&&b.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){let a=this.target||document.body;this.options.highlightClass&&a.classList.remove(this.options.highlightClass);
a.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}}class uc extends K{constructor(a){super();J(this,a,pc,oc,I,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}
let ba=new Ga;class vc extends Ga{constructor(a={}){super(a);Ka(this);this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},a);this.classPrefix=$a(this.options.classPrefix);this.steps=[];this.addSteps(this.options.steps);"active cancel complete inactive show start".split(" ").map(a=>{(a=>{this.on(a,b=>{b=b||{};b.tour=this;ba.trigger(a,b)})})(a)});this._setTourID();return this}addStep(a,b){a instanceof Ha?a.tour=this:a=new Ha(this,a);void 0!==b?this.steps.splice(b,0,a):this.steps.push(a);
return a}addSteps(a){Array.isArray(a)&&a.forEach(a=>{this.addStep(a)});return this}back(){let a=this.steps.indexOf(this.currentStep);this.show(a-1,!1)}cancel(){this.options.confirmCancel?window.confirm(this.options.confirmCancelMessage||"Are you sure you want to stop the tour?")&&this._done("cancel"):this._done("cancel")}complete(){this._done("complete")}getById(a){return this.steps.find(b=>b.id===a)}getCurrentStep(){return this.currentStep}hide(){let a=this.getCurrentStep();if(a)return a.hide()}isActive(){return ba.activeTour===
this}next(){let a=this.steps.indexOf(this.currentStep);a===this.steps.length-1?this.complete():this.show(a+1,!0)}removeStep(a){let b=this.getCurrentStep();this.steps.some((b,d)=>{if(b.id===a)return b.isOpen()&&b.hide(),b.destroy(),this.steps.splice(d,1),!0});b&&b.id===a&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(a=0,b=!0){if(a=da(a)?this.getById(a):this.steps[a])this._updateStateBeforeShow(),W(a.options.showOn)&&!a.options.showOn()?this._skipStep(a,b):(this.trigger("show",
{step:a,previous:this.currentStep}),this.currentStep=a,a.show())}start(){this.trigger("start");this.focusedElBeforeOpen=document.activeElement;this.currentStep=null;this._setupModal();this._setupActiveTour();this.next()}_done(a){let b=this.steps.indexOf(this.currentStep);Array.isArray(this.steps)&&this.steps.forEach(a=>a.destroy());mc(this);this.trigger(a,{index:b});ba.activeTour=null;this.trigger("inactive",{tour:this});this.modal&&this.modal.hide();"cancel"!==a&&"complete"!==a||!this.modal||(a=
document.querySelector(".shepherd-modal-overlay-container"))&&a.remove();this.focusedElBeforeOpen instanceof HTMLElement&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this});ba.activeTour=this}_setupModal(){this.modal=new uc({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep(a,b){a=this.steps.indexOf(a);this.show(b?a+1:a-1,b)}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide();this.isActive()||
this._setupActiveTour()}_setTourID(){this.id=`${this.options.tourName||"tour"}--${Ba()}`}}Object.assign(ba,{Tour:vc,Step:Ha});return ba})

;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Backbone, Drupal, settings, document, Shepherd) {
  var queryString = decodeURI(window.location.search);
  Drupal.behaviors.tour = {
    attach: function attach(context) {
      once('tour', 'body').forEach(function () {
        var model = new Drupal.tour.models.StateModel();
        new Drupal.tour.views.ToggleTourView({
          el: $(context).find('#toolbar-tab-tour'),
          model: model
        });
        model.on('change:isActive', function (tourModel, isActive) {
          $(document).trigger(isActive ? 'drupalTourStarted' : 'drupalTourStopped');
        });

        if (settings._tour_internal) {
          model.set('tour', settings._tour_internal);
        }

        if (/tour=?/i.test(queryString)) {
          model.set('isActive', true);
        }
      });
    }
  };
  Drupal.tour = Drupal.tour || {
    models: {},
    views: {}
  };
  Drupal.tour.models.StateModel = Backbone.Model.extend({
    defaults: {
      tour: [],
      isActive: false,
      activeTour: []
    }
  });
  Drupal.tour.views.ToggleTourView = Backbone.View.extend({
    events: {
      click: 'onClick'
    },
    initialize: function initialize() {
      this.listenTo(this.model, 'change:tour change:isActive', this.render);
      this.listenTo(this.model, 'change:isActive', this.toggleTour);
    },
    render: function render() {
      this.$el.toggleClass('hidden', this._getTour().length === 0);
      var isActive = this.model.get('isActive');
      this.$el.find('button').toggleClass('is-active', isActive).attr('aria-pressed', isActive);
      return this;
    },
    toggleTour: function toggleTour() {
      if (this.model.get('isActive')) {
        this._removeIrrelevantTourItems(this._getTour());

        var tourItems = this.model.get('tour');
        var that = this;

        if (tourItems.length) {
          settings.tourShepherdConfig.defaultStepOptions.popperOptions.modifiers.push({
            name: 'moveArrowJoyridePosition',
            enabled: true,
            phase: 'write',
            fn: function fn(_ref) {
              var state = _ref.state;
              var arrow = state.elements.arrow;
              var placement = state.placement;

              if (arrow && /^top|bottom/.test(placement) && /-start|-end$/.test(placement)) {
                var horizontalPosition = placement.split('-')[1];
                var offset = horizontalPosition === 'start' ? 28 : state.elements.popper.clientWidth - 56;
                arrow.style.transform = "translate3d(".concat(offset, "px, 0px, 0px)");
              }
            }
          });
          var shepherdTour = new Shepherd.Tour(settings.tourShepherdConfig);
          shepherdTour.on('cancel', function () {
            that.model.set('isActive', false);
          });
          shepherdTour.on('complete', function () {
            that.model.set('isActive', false);
          });
          tourItems.forEach(function (tourStepConfig, index) {
            var tourItemOptions = {
              title: tourStepConfig.title ? Drupal.checkPlain(tourStepConfig.title) : null,
              text: function text() {
                return Drupal.theme('tourItemContent', tourStepConfig);
              },
              attachTo: tourStepConfig.attachTo,
              buttons: [Drupal.tour.nextButton(shepherdTour, tourStepConfig)],
              classes: tourStepConfig.classes,
              index: index
            };
            tourItemOptions.when = {
              show: function show() {
                var nextButton = shepherdTour.currentStep.el.querySelector('footer button');
                nextButton.focus();

                if (Drupal.tour.hasOwnProperty('convertToJoyrideMarkup')) {
                  Drupal.tour.convertToJoyrideMarkup(shepherdTour);
                }
              }
            };
            shepherdTour.addStep(tourItemOptions);
          });
          shepherdTour.start();
          this.model.set({
            isActive: true,
            activeTour: shepherdTour
          });
        }
      } else {
        this.model.get('activeTour').cancel();
        this.model.set({
          isActive: false,
          activeTour: []
        });
      }
    },
    onClick: function onClick(event) {
      this.model.set('isActive', !this.model.get('isActive'));
      event.preventDefault();
      event.stopPropagation();
    },
    _getTour: function _getTour() {
      return this.model.get('tour');
    },
    _removeIrrelevantTourItems: function _removeIrrelevantTourItems(tourItems) {
      var tips = /tips=([^&]+)/.exec(queryString);
      var filteredTour = tourItems.filter(function (tourItem) {
        if (tips && tourItem.hasOwnProperty('classes') && tourItem.classes.indexOf(tips[1]) === -1) {
          return false;
        }

        return !(tourItem.selector && !document.querySelector(tourItem.selector));
      });

      if (tourItems.length !== filteredTour.length) {
        filteredTour.forEach(function (filteredTourItem, filteredTourItemId) {
          filteredTour[filteredTourItemId].counter = Drupal.t('!tour_item of !total', {
            '!tour_item': filteredTourItemId + 1,
            '!total': filteredTour.length
          });

          if (filteredTourItemId === filteredTour.length - 1) {
            filteredTour[filteredTourItemId].cancelText = Drupal.t('End tour');
          }
        });
        this.model.set('tour', filteredTour);
      }
    }
  });

  Drupal.tour.nextButton = function (shepherdTour, tourStepConfig) {
    return {
      classes: 'button button--primary',
      text: tourStepConfig.cancelText ? tourStepConfig.cancelText : Drupal.t('Next'),
      action: tourStepConfig.cancelText ? shepherdTour.cancel : shepherdTour.next
    };
  };

  Drupal.theme.tourItemContent = function (tourStepConfig) {
    return "".concat(tourStepConfig.body, "<div class=\"tour-progress\">").concat(tourStepConfig.counter, "</div>");
  };
})(jQuery, Backbone, Drupal, drupalSettings, document, window.Shepherd);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

(function ($, Drupal, _ref) {
  var tabbable = _ref.tabbable,
      isTabbable = _ref.isTabbable;

  function TabbingManager() {
    this.stack = [];
  }

  function TabbingContext(options) {
    $.extend(this, {
      level: null,
      $tabbableElements: $(),
      $disabledElements: $(),
      released: false,
      active: false,
      trapFocus: false
    }, options);
  }

  $.extend(TabbingManager.prototype, {
    constrain: function constrain(elements) {
      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
          _ref2$trapFocus = _ref2.trapFocus,
          trapFocus = _ref2$trapFocus === void 0 ? false : _ref2$trapFocus;

      var il = this.stack.length;

      for (var i = 0; i < il; i++) {
        this.stack[i].deactivate();
      }

      var tabbableElements = [];
      $(elements).each(function (index, rootElement) {
        tabbableElements = [].concat(_toConsumableArray(tabbableElements), _toConsumableArray(tabbable(rootElement)));

        if (isTabbable(rootElement)) {
          tabbableElements = [].concat(_toConsumableArray(tabbableElements), [rootElement]);
        }
      });
      var tabbingContext = new TabbingContext({
        level: this.stack.length,
        $tabbableElements: $(tabbableElements),
        trapFocus: trapFocus
      });
      this.stack.push(tabbingContext);
      tabbingContext.activate();
      $(document).trigger('drupalTabbingConstrained', tabbingContext);
      return tabbingContext;
    },
    release: function release() {
      var toActivate = this.stack.length - 1;

      while (toActivate >= 0 && this.stack[toActivate].released) {
        toActivate--;
      }

      this.stack.splice(toActivate + 1);

      if (toActivate >= 0) {
        this.stack[toActivate].activate();
      }
    },
    activate: function activate(tabbingContext) {
      var $set = tabbingContext.$tabbableElements;
      var level = tabbingContext.level;
      var $disabledSet = $(tabbable(document.body)).not($set);
      tabbingContext.$disabledElements = $disabledSet;
      var il = $disabledSet.length;

      for (var i = 0; i < il; i++) {
        this.recordTabindex($disabledSet.eq(i), level);
      }

      $disabledSet.prop('tabindex', -1).prop('autofocus', false);
      var $hasFocus = $set.filter('[autofocus]').eq(-1);

      if ($hasFocus.length === 0) {
        $hasFocus = $set.eq(0);
      }

      $hasFocus.trigger('focus');

      if ($set.length && tabbingContext.trapFocus) {
        $set.last().on('keydown.focus-trap', function (event) {
          if (event.key === 'Tab' && !event.shiftKey) {
            event.preventDefault();
            $set.first().focus();
          }
        });
        $set.first().on('keydown.focus-trap', function (event) {
          if (event.key === 'Tab' && event.shiftKey) {
            event.preventDefault();
            $set.last().focus();
          }
        });
      }
    },
    deactivate: function deactivate(tabbingContext) {
      var $set = tabbingContext.$disabledElements;
      var level = tabbingContext.level;
      var il = $set.length;
      tabbingContext.$tabbableElements.first().off('keydown.focus-trap');
      tabbingContext.$tabbableElements.last().off('keydown.focus-trap');

      for (var i = 0; i < il; i++) {
        this.restoreTabindex($set.eq(i), level);
      }
    },
    recordTabindex: function recordTabindex($el, level) {
      var tabInfo = $el.data('drupalOriginalTabIndices') || {};
      tabInfo[level] = {
        tabindex: $el[0].getAttribute('tabindex'),
        autofocus: $el[0].hasAttribute('autofocus')
      };
      $el.data('drupalOriginalTabIndices', tabInfo);
    },
    restoreTabindex: function restoreTabindex($el, level) {
      var tabInfo = $el.data('drupalOriginalTabIndices');

      if (tabInfo && tabInfo[level]) {
        var data = tabInfo[level];

        if (data.tabindex) {
          $el[0].setAttribute('tabindex', data.tabindex);
        } else {
          $el[0].removeAttribute('tabindex');
        }

        if (data.autofocus) {
          $el[0].setAttribute('autofocus', 'autofocus');
        }

        if (level === 0) {
          $el.removeData('drupalOriginalTabIndices');
        } else {
          var levelToDelete = level;

          while (tabInfo.hasOwnProperty(levelToDelete)) {
            delete tabInfo[levelToDelete];
            levelToDelete++;
          }

          $el.data('drupalOriginalTabIndices', tabInfo);
        }
      }
    }
  });
  $.extend(TabbingContext.prototype, {
    release: function release() {
      if (!this.released) {
        this.deactivate();
        this.released = true;
        Drupal.tabbingManager.release(this);
        $(document).trigger('drupalTabbingContextReleased', this);
      }
    },
    activate: function activate() {
      if (!this.active && !this.released) {
        this.active = true;
        Drupal.tabbingManager.activate(this);
        $(document).trigger('drupalTabbingContextActivated', this);
      }
    },
    deactivate: function deactivate() {
      if (this.active) {
        this.active = false;
        Drupal.tabbingManager.deactivate(this);
        $(document).trigger('drupalTabbingContextDeactivated', this);
      }
    }
  });

  if (Drupal.tabbingManager) {
    return;
  }

  Drupal.tabbingManager = new TabbingManager();
})(jQuery, Drupal, window.tabbable);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, Backbone) {
  var strings = {
    tabbingReleased: Drupal.t('Tabbing is no longer constrained by the Contextual module.'),
    tabbingConstrained: Drupal.t('Tabbing is constrained to a set of @contextualsCount and the edit mode toggle.'),
    pressEsc: Drupal.t('Press the esc key to exit.')
  };

  function initContextualToolbar(context) {
    if (!Drupal.contextual || !Drupal.contextual.collection) {
      return;
    }

    var contextualToolbar = Drupal.contextualToolbar;
    contextualToolbar.model = new contextualToolbar.StateModel({
      isViewing: localStorage.getItem('Drupal.contextualToolbar.isViewing') !== 'false'
    }, {
      contextualCollection: Drupal.contextual.collection
    });
    var viewOptions = {
      el: $('.toolbar .toolbar-bar .contextual-toolbar-tab'),
      model: contextualToolbar.model,
      strings: strings
    };
    new contextualToolbar.VisualView(viewOptions);
    new contextualToolbar.AuralView(viewOptions);
  }

  Drupal.behaviors.contextualToolbar = {
    attach: function attach(context) {
      if (once('contextualToolbar-init', 'body').length) {
        initContextualToolbar(context);
      }
    }
  };
  Drupal.contextualToolbar = {
    model: null
  };
})(jQuery, Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone) {
  Drupal.contextualToolbar.StateModel = Backbone.Model.extend({
    defaults: {
      isViewing: true,
      isVisible: false,
      contextualCount: 0,
      tabbingContext: null
    },
    initialize: function initialize(attrs, options) {
      this.listenTo(options.contextualCollection, 'reset remove add', this.countContextualLinks);
      this.listenTo(options.contextualCollection, 'add', this.lockNewContextualLinks);
      this.listenTo(this, 'change:contextualCount', this.updateVisibility);
      this.listenTo(this, 'change:isViewing', function (model, isViewing) {
        options.contextualCollection.each(function (contextualModel) {
          contextualModel.set('isLocked', !isViewing);
        });
      });
    },
    countContextualLinks: function countContextualLinks(contextualModel, contextualCollection) {
      this.set('contextualCount', contextualCollection.length);
    },
    lockNewContextualLinks: function lockNewContextualLinks(contextualModel, contextualCollection) {
      if (!this.get('isViewing')) {
        contextualModel.set('isLocked', true);
      }
    },
    updateVisibility: function updateVisibility() {
      this.set('isVisible', this.get('contextualCount') > 0);
    }
  });
})(Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, Backbone, _) {
  Drupal.contextualToolbar.AuralView = Backbone.View.extend({
    announcedOnce: false,
    initialize: function initialize(options) {
      this.options = options;
      this.listenTo(this.model, 'change', this.render);
      this.listenTo(this.model, 'change:isViewing', this.manageTabbing);
      $(document).on('keyup', _.bind(this.onKeypress, this));
      this.manageTabbing();
    },
    render: function render() {
      this.$el.find('button').attr('aria-pressed', !this.model.get('isViewing'));
      return this;
    },
    manageTabbing: function manageTabbing() {
      var tabbingContext = this.model.get('tabbingContext');

      if (tabbingContext) {
        if (tabbingContext.active) {
          Drupal.announce(this.options.strings.tabbingReleased);
        }

        tabbingContext.release();
      }

      if (!this.model.get('isViewing')) {
        tabbingContext = Drupal.tabbingManager.constrain($('.contextual-toolbar-tab, .contextual'));
        this.model.set('tabbingContext', tabbingContext);
        this.announceTabbingConstraint();
        this.announcedOnce = true;
      }
    },
    announceTabbingConstraint: function announceTabbingConstraint() {
      var strings = this.options.strings;
      Drupal.announce(Drupal.formatString(strings.tabbingConstrained, {
        '@contextualsCount': Drupal.formatPlural(Drupal.contextual.collection.length, '@count contextual link', '@count contextual links')
      }));
      Drupal.announce(strings.pressEsc);
    },
    onKeypress: function onKeypress(event) {
      if (!this.announcedOnce && event.keyCode === 9 && !this.model.get('isViewing')) {
        this.announceTabbingConstraint();
        this.announcedOnce = true;
      }

      if (event.keyCode === 27) {
        this.model.set('isViewing', true);
      }
    }
  });
})(jQuery, Drupal, Backbone, _);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, Backbone) {
  Drupal.contextualToolbar.VisualView = Backbone.View.extend({
    events: function events() {
      var touchEndToClick = function touchEndToClick(event) {
        event.preventDefault();
        event.target.click();
      };

      return {
        click: function click() {
          this.model.set('isViewing', !this.model.get('isViewing'));
        },
        touchend: touchEndToClick
      };
    },
    initialize: function initialize() {
      this.listenTo(this.model, 'change', this.render);
      this.listenTo(this.model, 'change:isViewing', this.persist);
    },
    render: function render() {
      this.$el.toggleClass('hidden', !this.model.get('isVisible'));
      this.$el.find('button').toggleClass('is-active', !this.model.get('isViewing'));
      return this;
    },
    persist: function persist(model, isViewing) {
      if (!isViewing) {
        localStorage.setItem('Drupal.contextualToolbar.isViewing', 'false');
      } else {
        localStorage.removeItem('Drupal.contextualToolbar.isViewing');
      }
    }
  });
})(Drupal, Backbone);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function ($, Drupal, drupalSettings) {
  var pathInfo = drupalSettings.path;
  var escapeAdminPath = sessionStorage.getItem('escapeAdminPath');
  var windowLocation = window.location;

  if (!pathInfo.currentPathIsAdmin && !/destination=/.test(windowLocation.search)) {
    sessionStorage.setItem('escapeAdminPath', windowLocation);
  }

  Drupal.behaviors.escapeAdmin = {
    attach: function attach() {
      var toolbarEscape = once('escapeAdmin', '[data-toolbar-escape-admin]');

      if (toolbarEscape.length && pathInfo.currentPathIsAdmin) {
        var $toolbarEscape = $(toolbarEscape);

        if (escapeAdminPath !== null) {
          $toolbarEscape.attr('href', escapeAdminPath);
        } else {
          $toolbarEscape.text(Drupal.t('Home'));
        }
      }
    }
  };
})(jQuery, Drupal, drupalSettings);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/

(function (Drupal, drupalSettings) {
  function mapTextContentToAjaxResponse(content) {
    if (content === '') {
      return false;
    }

    try {
      return JSON.parse(content);
    } catch (e) {
      return false;
    }
  }

  function bigPipeProcessPlaceholderReplacement(placeholderReplacement) {
    var placeholderId = placeholderReplacement.getAttribute('data-big-pipe-replacement-for-placeholder-with-id');
    var content = placeholderReplacement.textContent.trim();

    if (typeof drupalSettings.bigPipePlaceholderIds[placeholderId] !== 'undefined') {
      var response = mapTextContentToAjaxResponse(content);

      if (response === false) {
        once.remove('big-pipe', placeholderReplacement);
      } else {
        var ajaxObject = Drupal.ajax({
          url: '',
          base: false,
          element: false,
          progress: false
        });
        ajaxObject.success(response, 'success');
      }
    }
  }

  var interval = drupalSettings.bigPipeInterval || 50;
  var timeoutID;

  function bigPipeProcessDocument(context) {
    if (!context.querySelector('script[data-big-pipe-event="start"]')) {
      return false;
    }

    once('big-pipe', 'script[data-big-pipe-replacement-for-placeholder-with-id]', context).forEach(bigPipeProcessPlaceholderReplacement);

    if (context.querySelector('script[data-big-pipe-event="stop"]')) {
      if (timeoutID) {
        clearTimeout(timeoutID);
      }

      return true;
    }

    return false;
  }

  function bigPipeProcess() {
    timeoutID = setTimeout(function () {
      if (!bigPipeProcessDocument(document)) {
        bigPipeProcess();
      }
    }, interval);
  }

  bigPipeProcess();
  window.addEventListener('load', function () {
    if (timeoutID) {
      clearTimeout(timeoutID);
    }

    bigPipeProcessDocument(document);
  });
})(Drupal, drupalSettings);;
